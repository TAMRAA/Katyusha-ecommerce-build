module.exports=[720191,e=>{"use strict";e.s(["encodeIntoResult",()=>l,"stegaEncodeSourceMap",()=>y,"stegaEncodeSourceMap$1",()=>m]);var t=e.i(450841);let r=/_key\s*==\s*['"](.*)['"]/;function n(e){if(!Array.isArray(e))throw Error("Path is not an array");return e.reduce((e,t,n)=>{let i=typeof t;if("number"===i)return`${e}[${t}]`;if("string"===i)return`${e}${0===n?"":"."}${t}`;if(("string"==typeof t?r.test(t.trim()):"object"==typeof t&&"_key"in t)&&t._key)return`${e}[_key=="${t._key}"]`;if(Array.isArray(t)){let[r,n]=t;return`${e}[${r}:${n}]`}throw Error(`Unsupported path segment \`${JSON.stringify(t)}\``)},"")}let i={"\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","'":"\\'","\\":"\\\\"},o={"\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	","\\'":"'","\\\\":"\\"};function s(e){let t,r=[],n=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;for(;null!==(t=n.exec(e));){if(void 0!==t[1]){let e=t[1].replace(/\\(\\|f|n|r|t|')/g,e=>o[e]);r.push(e);continue}if(void 0!==t[2]){r.push(parseInt(t[2],10));continue}if(void 0!==t[3]){let e=t[3].replace(/\\(\\')/g,e=>o[e]);r.push({_key:e,_index:-1});continue}}return r}function a(e){return e.map(e=>{if("string"==typeof e||"number"==typeof e)return e;if(""!==e._key)return{_key:e._key};if(-1!==e._index)return e._index;throw Error(`invalid segment:${JSON.stringify(e)}`)})}function l(e,r,n){return function e(r,n,i=[]){if(null!==r&&Array.isArray(r))return r.map((r,o)=>{if((0,t.isRecord)(r)){let t=r._key;if("string"==typeof t)return e(r,n,i.concat({_key:t,_index:o}))}return e(r,n,i.concat(o))});if((0,t.isRecord)(r)){if("block"===r._type||"span"===r._type){let t={...r};return"block"===r._type?t.children=e(r.children,n,i.concat("children")):"span"===r._type&&(t.text=e(r.text,n,i.concat("text"))),t}return Object.fromEntries(Object.entries(r).map(([t,r])=>[t,e(r,n,i.concat(t))]))}return n(r,i)}(e,(e,t)=>{if("string"!=typeof e)return e;let o=function(e,t){var r;if(!t?.mappings)return;let n=(r=e.map(e=>{if("string"==typeof e||"number"==typeof e)return e;if(-1!==e._index)return e._index;throw Error(`invalid segment:${JSON.stringify(e)}`)}),`$${r.map(e=>"string"==typeof e?`['${e.replace(/[\f\n\r\t'\\]/g,e=>i[e])}']`:"number"==typeof e?`[${e}]`:""!==e._key?`[?(@._key=='${e._key.replace(/['\\]/g,e=>i[e])}')]`:`[${e._index}]`).join("")}`);if(void 0!==t.mappings[n])return{mapping:t.mappings[n],matchedPath:n,pathSuffix:""};let o=Object.entries(t.mappings).filter(([e])=>n.startsWith(e)).sort(([e],[t])=>t.length-e.length);if(0==o.length)return;let[s,a]=o[0],l=n.substring(s.length);return{mapping:a,matchedPath:s,pathSuffix:l}}(t,r);if(!o)return e;let{mapping:a,matchedPath:l}=o;if("value"!==a.type||"documentValue"!==a.source.type)return e;let u=r.documents[a.source.document],p=r.paths[a.source.path],c=s(l);return n({sourcePath:s(p).concat(t.slice(c.length)),sourceDocument:u,resultPath:t,value:e})})}let u="drafts.";function p(e){return e.startsWith(u)}function c(e){return e.startsWith("versions.")}let f=({sourcePath:e,resultPath:t,value:r})=>{if(function(e){return!!/^\d{4}-\d{2}-\d{2}/.test(e)&&!!Date.parse(e)}(r)||function(e){try{let{protocol:t}=new URL(e,e.startsWith("/")?"https://acme.com":void 0);return h.has(t)||t.startsWith("web+")}catch{return!1}}(r))return!1;let n=e.at(-1);return!("slug"===e.at(-2)&&"current"===n||"string"==typeof n&&(n.startsWith("_")||n.endsWith("Id"))||e.some(e=>"meta"===e||"metadata"===e||"openGraph"===e||"seo"===e)||g(e)||g(t)||"string"==typeof n&&d.has(n))},d=new Set(["color","colour","currency","email","format","gid","hex","href","hsl","hsla","icon","id","index","key","language","layout","link","linkAction","locale","lqip","page","path","ref","rgb","rgba","route","secret","slug","status","tag","template","theme","type","textTheme","unit","url","username","variant","website"]),h=new Set(["app:","data:","discord:","file:","ftp:","ftps:","geo:","http:","https:","imap:","javascript:","magnet:","mailto:","maps:","ms-excel:","ms-powerpoint:","ms-word:","slack:","sms:","spotify:","steam:","teams:","tel:","vscode:","zoom:"]);function g(e){return e.some(e=>"string"==typeof e&&null!==e.match(/type/i))}function y(e,i,o){let{filter:s,logger:d,enabled:h}=o;if(!h){let t="config.enabled must be true, don't call this function otherwise";throw d?.error?.(`[@sanity/client]: ${t}`,{result:e,resultSourceMap:i,config:o}),TypeError(t)}if(!i)return d?.error?.("[@sanity/client]: Missing Content Source Map from response body",{result:e,resultSourceMap:i,config:o}),e;if(!o.studioUrl){let t="config.studioUrl must be defined";throw d?.error?.(`[@sanity/client]: ${t}`,{result:e,resultSourceMap:i,config:o}),TypeError(t)}let g=[],y=[],m=l(e,i,({sourcePath:e,sourceDocument:r,resultPath:i,value:l})=>{var h;let m;if(("function"==typeof s?s({sourcePath:e,resultPath:i,filterDefault:f,sourceDocument:r,value:l}):f({sourcePath:e,resultPath:i,value:l}))===!1)return d&&y.push({path:n(a(e)),value:`${l.slice(0,20)}${l.length>20?"...":""}`,length:l.length}),l;d&&g.push({path:n(a(e)),value:`${l.slice(0,20)}${l.length>20?"...":""}`,length:l.length});let{baseUrl:$,workspace:_,tool:b}=("/"!==(m="string"==typeof(h="function"==typeof o.studioUrl?o.studioUrl(r):o.studioUrl)?h:h.baseUrl)&&(m=m.replace(/\/$/,"")),"string"==typeof h?{baseUrl:m}:{...h,baseUrl:m});if(!$)return l;let{_id:k,_type:v,_projectId:w,_dataset:x}=r;return(0,t.C)(l,{origin:"sanity.io",href:function(e){let{baseUrl:t,workspace:r="default",tool:i="default",id:o,type:s,path:l,projectId:f,dataset:d}=e;if(!t)throw Error("baseUrl is required");if(!l)throw Error("path is required");if(!o)throw Error("id is required");if("/"!==t&&t.endsWith("/"))throw Error("baseUrl must not end with a slash");let h="default"===r?void 0:r,g="default"===i?void 0:i,y=c(o)?o.split(".").slice(2).join("."):p(o)?o.slice(u.length):o,m=Array.isArray(l)?n(a(l)):l,$=new URLSearchParams({baseUrl:t,id:y,type:s,path:m});if(h&&$.set("workspace",h),g&&$.set("tool",g),f&&$.set("projectId",f),d&&$.set("dataset",d),p(o)||c(o)){if(c(o)){let e=function(e){if(!c(e))return;let[t,r,...n]=e.split(".");return r}(o);$.set("perspective",e)}}else $.set("perspective","published");let _=["/"===t?"":t];h&&_.push(h);let b=["mode=presentation",`id=${y}`,`type=${s}`,`path=${encodeURIComponent(m)}`];return g&&b.push(`tool=${g}`),_.push("intent","edit",`${b.join(";")}?${$}`),_.join("/")}({baseUrl:$,workspace:_,tool:b,id:k,type:v,path:e,...!o.omitCrossDatasetReferenceData&&{dataset:x,projectId:w}})},!1)});if(d){let e=y.length,t=g.length;if((e||t)&&((d?.groupCollapsed||d.log)?.("[@sanity/client]: Encoding source map into result"),d.log?.(`[@sanity/client]: Paths encoded: ${g.length}, skipped: ${y.length}`)),g.length>0&&(d?.log?.("[@sanity/client]: Table of encoded paths"),(d?.table||d.log)?.(g)),y.length>0){let e=new Set;for(let{path:t}of y)e.add(t.replace(r,"0").replace(/\[\d+\]/g,"[]"));d?.log?.("[@sanity/client]: List of skipped paths",[...e.values()])}(e||t)&&d?.groupEnd?.()}return m}var m=Object.freeze({__proto__:null,stegaEncodeSourceMap:y})}];

//# sourceMappingURL=node_modules_%40sanity_client_dist__chunks-es_stegaEncodeSourceMap_0e5ad43c.js.map