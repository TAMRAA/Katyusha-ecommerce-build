{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/tamra/Desktop/Katyusha-ecommerce/ecommerce-build/app/%28store%29/store/store.tsx"],"sourcesContent":["import { Product } from \"@/sanity.types\";\nimport { create } from \"zustand\";\nimport { persist } from \"zustand/middleware\";\n\nexport interface BasketItem {\n  product: Product;\n  quantity: number;\n}\n\ninterface BasketState {\n  items: BasketItem[];\n  addItem: (product: Product) => void;\n  removeItem: (productId: string) => void;\n  clearBasket: () => void;\n  getTotalPrice: () => number;\n  getItemCount: (productId: string) => number;\n  getGroupedItems: () => BasketItem[];\n}\n\nconst useBasketStore = create<BasketState>()(\n  persist(\n    (set, get) => ({\n      items: [],\n      addItem: (product) =>\n        set((state) => {\n          const existingItem = state.items.find(\n            (item) => item.product._id === product._id\n          );\n          if (existingItem) {\n            return {\n              items: state.items.map((item) =>\n                item.product._id === product._id\n                  ? { ...item, quantity: item.quantity + 1 }\n                  : item\n              ),\n            };\n          }\n          return { items: [...state.items, { product, quantity: 1 }] };\n        }),\n      removeItem: (productId) =>\n        set((state) => ({\n          items: state.items.reduce((acc, item) => {\n            if (item.product._id === productId) {\n              if (item.quantity > 1) {\n                acc.push({ ...item, quantity: item.quantity - 1 });\n              }\n            } else {\n              acc.push(item);\n            }\n            return acc;\n          }, [] as BasketItem[]),\n        })),\n      clearBasket: () => set({ items: [] }),\n      getTotalPrice: () =>\n        get().items.reduce(\n          (total, item) => total + (item.product.price ?? 0) * item.quantity,\n          0\n        ),\n      getItemCount: (productId) => {\n        const item = get().items.find((item) => item.product._id === productId);\n        return item ? item.quantity : 0;\n      },\n      getGroupedItems: () => get().items,\n    }),\n    {\n      name: \"basket-store\",\n    }\n  )\n);\n\nexport default useBasketStore;\n"],"names":[],"mappings":";;;;AACA;AACA;;;AAiBA,MAAM,iBAAiB,IAAA,kJAAM,IAC3B,IAAA,wJAAO,EACL,CAAC,KAAK,MAAQ,CAAC;QACb,OAAO,EAAE;QACT,SAAS,CAAC,UACR,IAAI,CAAC;gBACH,MAAM,eAAe,MAAM,KAAK,CAAC,IAAI,CACnC,CAAC,OAAS,KAAK,OAAO,CAAC,GAAG,KAAK,QAAQ,GAAG;gBAE5C,IAAI,cAAc;oBAChB,OAAO;wBACL,OAAO,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC,OACtB,KAAK,OAAO,CAAC,GAAG,KAAK,QAAQ,GAAG,GAC5B;gCAAE,GAAG,IAAI;gCAAE,UAAU,KAAK,QAAQ,GAAG;4BAAE,IACvC;oBAER;gBACF;gBACA,OAAO;oBAAE,OAAO;2BAAI,MAAM,KAAK;wBAAE;4BAAE;4BAAS,UAAU;wBAAE;qBAAE;gBAAC;YAC7D;QACF,YAAY,CAAC,YACX,IAAI,CAAC,QAAU,CAAC;oBACd,OAAO,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,KAAK;wBAC9B,IAAI,KAAK,OAAO,CAAC,GAAG,KAAK,WAAW;4BAClC,IAAI,KAAK,QAAQ,GAAG,GAAG;gCACrB,IAAI,IAAI,CAAC;oCAAE,GAAG,IAAI;oCAAE,UAAU,KAAK,QAAQ,GAAG;gCAAE;4BAClD;wBACF,OAAO;4BACL,IAAI,IAAI,CAAC;wBACX;wBACA,OAAO;oBACT,GAAG,EAAE;gBACP,CAAC;QACH,aAAa,IAAM,IAAI;gBAAE,OAAO,EAAE;YAAC;QACnC,eAAe,IACb,MAAM,KAAK,CAAC,MAAM,CAChB,CAAC,OAAO,OAAS,QAAQ,CAAC,KAAK,OAAO,CAAC,KAAK,IAAI,CAAC,IAAI,KAAK,QAAQ,EAClE;QAEJ,cAAc,CAAC;YACb,MAAM,OAAO,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,OAAS,KAAK,OAAO,CAAC,GAAG,KAAK;YAC7D,OAAO,OAAO,KAAK,QAAQ,GAAG;QAChC;QACA,iBAAiB,IAAM,MAAM,KAAK;IACpC,CAAC,GACD;IACE,MAAM;AACR;uCAIW","debugId":null}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file:///Users/tamra/Desktop/Katyusha-ecommerce/ecommerce-build/components/Header.tsx"],"sourcesContent":["\"use client\";\n\nimport { TrolleyIcon } from \"@sanity/icons\";\nimport {\n  ClerkLoaded,\n  SignedIn,\n  SignInButton,\n  UserButton,\n  useUser,\n} from \"@clerk/nextjs\";\nimport Link from \"next/link\";\nimport Form from \"next/form\";\nimport { PackageIcon } from \"lucide-react\";\nimport useBasketStore from \"@/app/(store)/store/store\";\n\nfunction Header() {\n  const { user } = useUser();\n\n  const itemCount = useBasketStore((state) =>\n    state.items.reduce((total, item) => total + item.quantity, 0)\n  );\n\n  const createClerkPasskey = async () => {\n    try {\n      const response = await user?.createPasskey();\n      console.log(response);\n    } catch (err) {\n      console.log(\"Error\", JSON.stringify(err, null, 2));\n    }\n  };\n\n  return (\n    <header className=\"bg-white shadow-sm px-4 py-3 w-full\">\n      <div className=\"max-w-7xl mx-auto flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n        {/* Logo */}\n        <Link\n          href=\"/\"\n          className=\"text-2xl font-bold text-blue-600 hover:text-blue-800 transition-colors duration-200\"\n        >\n          Ecommerce\n        </Link>\n\n        {/* Search Bar */}\n        <Form action=\"/search\" className=\"flex-grow max-w-md\">\n          <input\n            type=\"text\"\n            name=\"query\"\n            placeholder=\"Search for products\"\n            className=\"w-full bg-gray-100 text-gray-800 px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200\"\n          />\n        </Form>\n\n        {/* Actions */}\n        <div className=\"flex items-center space-x-3\">\n          {/* Basket */}\n          <Link\n            href=\"/basket\"\n            className=\"relative flex items-center space-x-2 bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200\"\n          >\n            <TrolleyIcon className=\"w-5 h-5\" />\n            <span>My Basket</span>\n            {itemCount > 0 && (\n              <span className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs\">\n                {itemCount}\n              </span>\n            )}\n          </Link>\n\n          {/* Clerk User Area */}\n          <ClerkLoaded>\n            <SignedIn>\n              <Link\n                href=\"/orders\"\n                className=\"flex items-center space-x-2 bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200\"\n              >\n                <PackageIcon className=\"w-5 h-5\" />\n                <span>My Orders</span>\n              </Link>\n            </SignedIn>\n\n            {user ? (\n              <div className=\"flex items-center space-x-3\">\n                <UserButton />\n                <div className=\"hidden sm:block text-sm\">\n                  <p className=\"text-gray-500\">Welcome back</p>\n                  <p className=\"font-semibold text-gray-800\">{user.fullName}</p>\n                </div>\n              </div>\n            ) : (\n              <div className=\"bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200\">\n                <SignInButton mode=\"modal\">Sign In</SignInButton>\n              </div>\n            )}\n\n            {user?.passkeys.length === 0 && (\n              <button\n                onClick={createClerkPasskey}\n                className=\"bg-white hover:bg-blue-600 hover:text-white text-blue-600 font-medium py-2 px-4 rounded-lg border border-blue-300 transition-all duration-200\"\n              >\n                Create Passkey\n              </button>\n            )}\n          </ClerkLoaded>\n        </div>\n      </div>\n    </header>\n  );\n}\n\nexport default Header;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AAbA;;;;;;;;AAeA,SAAS;IACP,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,uKAAO;IAExB,MAAM,YAAY,IAAA,8IAAc,EAAC,CAAC,QAChC,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,OAAO,OAAS,QAAQ,KAAK,QAAQ,EAAE;IAG7D,MAAM,qBAAqB;QACzB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM;YAC7B,QAAQ,GAAG,CAAC;QACd,EAAE,OAAO,KAAK;YACZ,QAAQ,GAAG,CAAC,SAAS,KAAK,SAAS,CAAC,KAAK,MAAM;QACjD;IACF;IAEA,qBACE,8OAAC;QAAO,WAAU;kBAChB,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC,uKAAI;oBACH,MAAK;oBACL,WAAU;8BACX;;;;;;8BAKD,8OAAC,uKAAI;oBAAC,QAAO;oBAAU,WAAU;8BAC/B,cAAA,8OAAC;wBACC,MAAK;wBACL,MAAK;wBACL,aAAY;wBACZ,WAAU;;;;;;;;;;;8BAKd,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC,uKAAI;4BACH,MAAK;4BACL,WAAU;;8CAEV,8OAAC,iKAAW;oCAAC,WAAU;;;;;;8CACvB,8OAAC;8CAAK;;;;;;gCACL,YAAY,mBACX,8OAAC;oCAAK,WAAU;8CACb;;;;;;;;;;;;sCAMP,8OAAC,sLAAW;;8CACV,8OAAC,qLAAQ;8CACP,cAAA,8OAAC,uKAAI;wCACH,MAAK;wCACL,WAAU;;0DAEV,8OAAC,2NAAW;gDAAC,WAAU;;;;;;0DACvB,8OAAC;0DAAK;;;;;;;;;;;;;;;;;gCAIT,qBACC,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,qLAAU;;;;;sDACX,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAE,WAAU;8DAAgB;;;;;;8DAC7B,8OAAC;oDAAE,WAAU;8DAA+B,KAAK,QAAQ;;;;;;;;;;;;;;;;;yDAI7D,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,2LAAY;wCAAC,MAAK;kDAAQ;;;;;;;;;;;gCAI9B,MAAM,SAAS,WAAW,mBACzB,8OAAC;oCACC,SAAS;oCACT,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASf;uCAEe","debugId":null}}]
}