module.exports=[685332,162790,a=>{"use strict";a.s(["API_VERSION",()=>M,"DEFAULT_TOOL_NAME",()=>I,"EDIT_INTENT_MODE",()=>K,"LOADER_QUERY_GC_INTERVAL",()=>O,"MAX_TIME_TO_OVERLAYS_CONNECTION",()=>L,"MIN_LOADER_QUERY_LISTEN_HEARTBEAT_INTERVAL",()=>N,"POPUP_CHECK_INTERVAL",()=>P,"PresentationSpinner",()=>ae,"presentationLocaleNamespace",()=>Q,"presentationTool",()=>ai,"usePresentationNavigate",()=>aj,"usePresentationParams",()=>ak,"usePresentationTool",()=>T],685332);var b=a.i(997162),c=a.i(572131),d=a.i(910980),e=a.i(187924),f=a.i(454320),g=a.i(32274),h=a.i(143242),i=a.i(547663);a.s(["SECRET_TTL",()=>t,"apiVersion",()=>n,"deleteExpiredSecretsQuery",()=>v,"fetchSharedAccessQuery",()=>u,"fetchVercelProtectionBypassSecret",()=>y,"schemaIdSingleton",()=>l,"schemaType",()=>j,"schemaTypeSingleton",()=>m,"tag",()=>z,"urlSearchParamPreviewPathname",()=>p,"urlSearchParamPreviewPerspective",()=>q,"urlSearchParamPreviewSecret",()=>o,"urlSearchParamVercelProtectionBypass",()=>r,"urlSearchParamVercelSetBypassCookie",()=>s,"vercelProtectionBypassSchemaId",()=>x,"vercelProtectionBypassSchemaType",()=>w],162790);let j="sanity.previewUrlSecret",k="sanity-preview-url-secret",l=`${k}.share-access`,m="sanity.previewUrlShareAccess",n="2025-02-19",o="sanity-preview-secret",p="sanity-preview-pathname",q="sanity-preview-perspective",r="x-vercel-protection-bypass",s="x-vercel-set-bypass-cookie",t=3600,u=`*[_id == "${l}" && _type == "${m}"][0].secret`,v=`*[_type == "${j}" && dateTime(_updatedAt) <= dateTime(now()) - ${t}]`,w="sanity.vercelProtectionBypass",x=`${k}.vercel-protection-bypass`,y=`*[_id == "${x}" && _type == "${w}"][0].secret`,z="sanity.preview-url-secret";var A=a.i(64179),B=a.i(800724),C=a.i(775716),D=a.i(679679),E=a.i(952535),F=a.i(678465),G=a.i(248726);let H=i.ComposeIcon,I="presentation",J="Presentation",K="presentation",L=3e3,M=n,N=1e3,O=3e4,P=1e3,Q="presentation",R=(0,f.defineLocaleResourceBundle)({locale:"en-US",namespace:Q,resources:()=>a.A(347033)}),S={locations:[]};function T(a){let b=(0,c.useContext)(d.PresentationContext);if((void 0===a||a)&&!b)throw Error("Presentation context is missing");return b}let U={positive:i.InfoOutlineIcon,caution:i.WarningOutlineIcon,critical:i.ErrorOutlineIcon};function V(a){let g,h,j,k,l,m,n,o,p=(0,b.c)(39),{documentId:q,options:r,resolvers:s,schemaType:t,showPresentationTitle:u,version:v}=a;p[0]!==q||p[1]!==s||p[2]!==t||p[3]!==v?(g={id:q,version:v,resolvers:s,type:t},p[0]=q,p[1]=s,p[2]=t,p[3]=v,p[4]=g):g=p[4];let{state:w,status:x}=function(a){let d,e,g,h,i=(0,b.c)(23),{id:j,resolvers:k,type:l,version:m}=a,n=(0,f.useDocumentStore)(),o=(0,f.useDocumentPreviewStore)(),{perspectiveStack:p}=(0,f.usePerspective)(),[q,r]=(0,c.useState)(S),s=k&&("function"==typeof k?k:k[l.name]),[t,u]=(0,c.useState)(s?"resolving":"empty");a:{let a;if(!s){d=void 0;break a}if("function"==typeof s){let a;if(i[0]!==n||i[1]!==j||i[2]!==p||i[3]!==s||i[4]!==l.name||i[5]!==m){let b=s({id:j,type:l.name,version:m,perspectiveStack:p},{documentStore:n});a=(0,E.isObservable)(b)?b:(0,E.of)(b),i[0]=n,i[1]=j,i[2]=p,i[3]=s,i[4]=l.name,i[5]=m,i[6]=a}else a=i[6];d=a;break a}if("select"in s&&"resolve"in s){let a;if(i[7]!==o||i[8]!==j||i[9]!==p||i[10]!==s||i[11]!==l){let b,c={...l,preview:{select:s.select}};i[13]!==s?(b=a=>s.resolve(a.snapshot||null),i[13]=s,i[14]=b):b=i[14],a=o.observeForPreview({_type:"reference",_ref:j},c,{perspective:p}).pipe((0,E.map)(b)),i[7]=o,i[8]=j,i[9]=p,i[10]=s,i[11]=l,i[12]=a}else a=i[12];d=a;break a}i[15]!==s?(a=(0,E.of)(s),i[15]=s,i[16]=a):a=i[16],d=a}let v=d;return i[17]!==v?(e=()=>{let a=v?.subscribe(a=>{r(a||S),u(a?"resolved":"empty")});return()=>a?.unsubscribe()},g=[v],i[17]=v,i[18]=e,i[19]=g):(e=i[18],g=i[19]),(0,c.useEffect)(e,g),i[20]!==q||i[21]!==t?(h={state:q,status:t},i[20]=q,i[21]=t,i[22]=h):h=i[22],h}(g),y="resolving"===x,{locations:z,message:B,tone:C}=w,D=z?.length||0,{t:F}=(0,f.useTranslation)(Q),G=(0,c.useContext)(d.PresentationContext),H=G?.name,[K,L]=(0,c.useState)(!1);p[5]!==D?(h=()=>{D&&L(W)},p[5]=D,p[6]=h):h=p[6];let M=h;p[7]!==y||p[8]!==D||p[9]!==B||p[10]!==F?(j=y?F("locations-banner.resolving.text"):B||F("locations-banner.locations-count",{count:D}),p[7]=y,p[8]=D,p[9]=B,p[10]=F,p[11]=j):j=p[11];let N=j,O=C?U[C]:void 0;return s&&"empty"!==x?(p[12]===Symbol.for("react.memo_cache_sentinel")?(k={margin:-1},p[12]=k):k=p[12],p[13]!==O||p[14]!==z||p[15]!==r||p[16]!==u||p[17]!==N||p[18]!==C?(l=!z&&(0,e.jsxs)(A.Flex,{align:"flex-start",gap:3,padding:3,children:[C&&O&&(0,e.jsx)(A.Box,{flex:"none",children:(0,e.jsx)(A.Text,{size:1,children:(0,e.jsx)(O,{})})}),(0,e.jsx)(A.Box,{flex:1,children:(0,e.jsxs)(A.Text,{size:1,weight:"medium",children:[u&&(0,e.jsxs)(e.Fragment,{children:[r.title||J," · "]}),N]})})]}),p[13]=O,p[14]=z,p[15]=r,p[16]=u,p[17]=N,p[18]=C,p[19]=l):l=p[19],p[20]!==q||p[21]!==K||p[22]!==y||p[23]!==z||p[24]!==D||p[25]!==r||p[26]!==G||p[27]!==H||p[28]!==t||p[29]!==u||p[30]!==N||p[31]!==M?(m=z&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(A.Card,{as:D?"button":void 0,onClick:M,padding:3,radius:1,tone:"inherit",children:(0,e.jsxs)(A.Flex,{gap:3,children:[(0,e.jsx)(A.Box,{flex:"none",children:y?(0,e.jsx)(A.Spinner,{size:1}):(0,e.jsx)(A.Text,{size:1,children:0===D?(0,e.jsx)(i.InfoOutlineIcon,{}):(0,e.jsx)(i.ChevronRightIcon,{style:{transform:`rotate(${K?"90deg":0})`,transition:"transform 100ms ease-in-out"}})})}),(0,e.jsx)(A.Box,{flex:1,children:(0,e.jsxs)(A.Text,{size:1,weight:"medium",children:[u&&(0,e.jsxs)(e.Fragment,{children:[r.title||J," · "]}),N]})})]})}),(0,e.jsx)(A.Stack,{hidden:!K,marginTop:1,space:1,children:z.map(a=>{let b=!1;return(r.name||I)===H&&G?.params.preview&&(b=function(a,b){try{let c=new URL(a,location.origin),d=new URL(b,c.origin);if(c.origin!==d.origin||c.pathname!==d.pathname)return!1;let e=new URLSearchParams(d.search),f=new URLSearchParams(c.search);for(let[a,b]of e.entries())if(f.get(a)!==b)return!1;return!0}catch{return!1}}(G.params.preview,a.href)),(0,e.jsx)(X,{active:b,documentId:q,documentType:t.name,node:a,toolName:r.name||I},a.href)})})]}),p[20]=q,p[21]=K,p[22]=y,p[23]=z,p[24]=D,p[25]=r,p[26]=G,p[27]=H,p[28]=t,p[29]=u,p[30]=N,p[31]=M,p[32]=m):m=p[32],p[33]!==l||p[34]!==m?(n=(0,e.jsxs)("div",{style:k,children:[l,m]}),p[33]=l,p[34]=m,p[35]=n):n=p[35],p[36]!==n||p[37]!==C?(o=(0,e.jsx)(A.Card,{padding:1,radius:2,border:!0,tone:C,children:n}),p[36]=n,p[37]=C,p[38]=o):o=p[38],o):null}function W(a){return!a}function X(a){let f,g,h,j,k,l,m,n,o=(0,b.c)(26),{documentId:p,documentType:q,node:r,active:s,toolName:t}=a,u=(0,c.useContext)(d.PresentationContext),v=t===(T(!1)?.name??void 0),w=u?.navigate,x=u?.structureParams;o[0]!==p||o[1]!==q||o[2]!==r.href||o[3]!==x||o[4]!==t?(f={intent:"edit",params:{id:p,type:q,mode:"presentation",presentation:t,...x,preview:r.href}},o[0]=p,o[1]=q,o[2]=r.href,o[3]=x,o[4]=t,o[5]=f):f=o[5];let y=(0,D.useIntentLink)(f);o[6]!==w||o[7]!==r.href?(g=()=>{w?.({params:{preview:r.href}})},o[6]=w,o[7]=r.href,o[8]=g):g=o[8];let z=g;o[9]!==v||o[10]!==y?(h=v?{}:y,o[9]=v,o[10]=y,o[11]=h):h=o[11];let B=v?z:y.onClick;return o[12]===Symbol.for("react.memo_cache_sentinel")?(j=(0,e.jsx)(A.Box,{flex:"none",children:(0,e.jsx)(A.Text,{size:1,children:(0,e.jsx)(i.DesktopIcon,{})})}),o[12]=j):j=o[12],o[13]!==r.title?(k=(0,e.jsx)(A.Text,{size:1,weight:"medium",children:r.title}),o[13]=r.title,o[14]=k):k=o[14],o[15]!==r.href?(l=(0,e.jsx)(A.Text,{muted:!0,size:1,textOverflow:"ellipsis",children:r.href}),o[15]=r.href,o[16]=l):l=o[16],o[17]!==k||o[18]!==l?(m=(0,e.jsxs)(A.Flex,{gap:3,children:[j,(0,e.jsxs)(A.Stack,{flex:1,space:2,children:[k,l]})]}),o[17]=k,o[18]=l,o[19]=m):m=o[19],o[20]!==s||o[21]!==r.href||o[22]!==h||o[23]!==B||o[24]!==m?(n=(0,e.jsx)(A.Card,{...h,as:"a",onClick:B,padding:3,radius:1,pressed:s,tone:"inherit",children:m},r.href),o[20]=s,o[21]=r.href,o[22]=h,o[23]=B,o[24]=m,o[25]=n):n=o[25],n}let Y=C.styled.div(a=>{let b=(0,B.getTheme_v2)(a.theme);return C.css`
    display: flex;
    flex-direction: column;
    gap: ${(0,A.rem)(b.space[2])};
    min-height: ${(0,A.rem)(42)};
    margin-bottom: ${(0,A.rem)(b.space[5])};

    &:empty {
      display: none;
    }
  `});function Z(a){let f,g,h,i,j,k=(0,b.c)(18),{documentId:l,options:m,schemaType:n,version:o}=a,p=(0,c.useContext)(d.PresentationDocumentContext);k[0]!==p?.options?(h=(g=(f=p?.options||[]).map($)).some(Boolean),k[0]=p?.options,k[1]=f,k[2]=g,k[3]=h):(f=k[1],g=k[2],h=k[3]);let q=h;if(p&&p.options[0]!==m||!q)return null;if(k[4]!==f||k[5]!==l||k[6]!==g||k[7]!==n||k[8]!==o){let a;k[10]!==f.length||k[11]!==l||k[12]!==g||k[13]!==n||k[14]!==o?(a=(a,b)=>(0,e.jsx)(V,{documentId:l,options:a,resolvers:g[b],schemaType:n,showPresentationTitle:f.length>1,version:o},b),k[10]=f.length,k[11]=l,k[12]=g,k[13]=n,k[14]=o,k[15]=a):a=k[15],i=f.map(a),k[4]=f,k[5]=l,k[6]=g,k[7]=n,k[8]=o,k[9]=i}else i=k[9];return k[16]!==i?(j=(0,e.jsx)(Y,{children:i}),k[16]=i,k[17]=j):j=k[17],j}function $(a){return a.resolve?.locations||a.locate}function _(a){let f,g,h,i,j,k,l=(0,b.c)(15),{children:m,options:n}=a,o=(0,c.useContext)(d.PresentationDocumentContext),p=o?.register,[q,r]=(0,c.useState)(aa);l[0]!==p?(f=a=>p?p(a):(r(b=>[a].concat(b)),()=>{r(b=>b.filter(b=>b!==a))}),l[0]=p,l[1]=f):f=l[1];let s=f,t=o?.options||q;l[2]!==s||l[3]!==t?(g={options:t,register:s},l[2]=s,l[3]=t,l[4]=g):g=l[4];let u=g;l[5]!==s?(h=a=>s(a),l[5]=s,l[6]=h):h=l[6];let v=(0,F.useEffectEvent)(h);return l[7]!==n||l[8]!==v?(i=()=>v(n),l[7]=n,l[8]=v,l[9]=i):i=l[9],l[10]!==n?(j=[n],l[10]=n,l[11]=j):j=l[11],(0,c.useLayoutEffect)(i,j),l[12]!==m||l[13]!==u?(k=(0,e.jsx)(d.PresentationDocumentContext.Provider,{value:u,children:m}),l[12]=m,l[13]=u,l[14]=k):k=l[14],k}function aa(){return[]}let ab=(0,f.defineDocumentFieldAction)({name:"presentation/openInStructure",useAction:function(a){let e,g,h=(0,b.c)(13),{documentId:j,documentType:k,path:l}=a,m=(0,f.useWorkspace)(),{navigateIntent:n}=(0,D.useRouter)(),o=(0,c.useContext)(d.PresentationContext),p=o?.name||I;h[0]!==j||h[1]!==k||h[2]!==p||h[3]!==m.tools?(e=function(a,b,c,d){let e=a.filter(a=>a.name!==d).map(a=>{let d=a.canHandleIntent?.("edit",{id:b,type:c,mode:"structure"},{});return{tool:a,match:d}}),g=e.filter(a=>(0,f.isRecord)(a.match)&&a.match.mode);return g.length>0?g[0].tool:e.filter(a=>a.match)[0]?.tool}(m.tools,j,k,p),h[0]=j,h[1]=k,h[2]=p,h[3]=m.tools,h[4]=e):e=h[4];let q=e,r=!o||l.length>0||!q,s=q?.icon||i.MasterDetailIcon,t=`Open in ${q?.title||"Structure"}`;return h[5]!==j||h[6]!==k||h[7]!==n||h[8]!==l||h[9]!==r||h[10]!==s||h[11]!==t?(g={type:"action",hidden:r,icon:s,title:t,onAction(){n("edit",{id:j,type:k,mode:"structure",path:(0,f.pathToString)(l)})},renderAsButton:!0},h[5]=j,h[6]=k,h[7]=n,h[8]=l,h[9]=r,h[10]=s,h[11]=t,h[12]=g):g=h[12],g}}),ac=["preview","viewport"];function ad(a,b,c,d){let{id:e,mode:f,path:h,presentation:i,type:j,...k}=b,l={...(c?._searchParams||[]).filter(([a])=>ac.includes(a)).reduce((a,[b,c])=>({...a,[b]:c}),{}),...k};return"edit"===a&&e?(l.preview=l.preview||new URLSearchParams(window.location.search).get("preview")||"/",{type:j||"*",id:(0,g.getPublishedId)(e),path:h,_searchParams:Object.entries(l)}):"create"===a?(l.preview=l.preview||new URLSearchParams(window.location.search).get("preview")||"/",d&&"object"==typeof d&&(l.templateParams=(0,D.encodeJsonParams)(d)),{type:j||"*",id:e||(0,G.uuid)(),_searchParams:Object.entries(l)}):{intent:a,params:b,payload:d}}function ae(){let a,c=(0,b.c)(1);return c[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,e.jsx)(A.Flex,{align:"center",direction:"column",height:"fill",justify:"center",style:{width:"100%"},children:(0,e.jsx)(A.Spinner,{})}),c[0]=a):a=c[0],a}let af=D.route.create("/",{__unsafe_disableScopedSearchParams:!0},[D.route.intents("/intent"),D.route.create(":type",[D.route.create(":id",[D.route.create(":path")])])]),ag=(0,c.lazy)(()=>a.A(967954)),ah=(0,c.lazy)(()=>a.A(428099)),ai=(0,f.definePlugin)(a=>{let d=a.name||I;"locate"in a&&console.warn("Presentation’s `locate` option is deprecated. Use `resolve.locations` instead.");let f=!!(a.resolve?.locations||a.locate);return{i18n:{bundles:[R]},document:{unstable_fieldActions:a=>[...a.filter(a=>a.name!==ab.name),ab]},form:{components:{input:function(d){let i,j,k,l=(0,b.c)(22),m=d.value;l[0]!==m?._id?(i=m?._id?(0,g.getPublishedId)(m?._id):void 0,l[0]=m?._id,l[1]=i):i=l[1];let n=i;l[2]!==m?(j=m?._id?(0,g.getVersionFromId)(m._id):void 0,l[2]=m,l[3]=j):j=l[3];let o=j;if((0,h.isDocumentSchemaType)(d.schemaType)){let b,g,h,i,j,k;return l[4]!==n||l[5]!==o||l[6]!==d.schemaType?(b=f&&n&&(0,e.jsx)(Z,{documentId:n,version:o,options:a,schemaType:d.schemaType}),l[4]=n,l[5]=o,l[6]=d.schemaType,l[7]=b):b=l[7],l[8]===Symbol.for("react.memo_cache_sentinel")?(g=(0,e.jsx)(ae,{}),l[8]=g):g=l[8],l[9]!==d?(h=d.renderDefault(d),l[9]=d,l[10]=h):h=l[10],l[11]!==h?(i=(0,e.jsx)(c.Suspense,{fallback:g,children:h}),l[11]=h,l[12]=i):i=l[12],l[13]!==n||l[14]!==m?(j=(0,e.jsx)(c.Suspense,{children:(0,e.jsx)(ah,{value:m},n)},"broadcast-displayed-document"),l[13]=n,l[14]=m,l[15]=j):j=l[15],l[16]!==b||l[17]!==i||l[18]!==j?(k=(0,e.jsxs)(_,{options:a,children:[b,i,j]}),l[16]=b,l[17]=i,l[18]=j,l[19]=k):k=l[19],k}return l[20]!==d?(k=d.renderDefault(d),l[20]=d,l[21]=k):k=l[21],k}}},tools:[{icon:a.icon||H,name:d,title:a.title,component:ag,options:a,canHandleIntent:(a,b)=>"create"===a?function(a){return"type"in a&&(!("presentation"in a)||a.presentation===d)&&(!("template"in a)||{template:!0})}(b):"edit"===a&&function(a){return"type"in a&&"id"in a&&(!("presentation"in a)||a.presentation===d)&&(!("mode"in a)||{mode:a.mode===K})}(b),getIntentState:ad,router:af,__internalApplicationType:"sanity/presentation"}]}});function aj(){let a=(0,c.useContext)(d.PresentationNavigateContext);if(!a)throw Error("Presentation navigate context is missing");return a}function ak(a){let b=(0,c.useContext)(d.PresentationParamsContext);if((void 0===a||a)&&!b)throw Error("Presentation params context is missing");return b}}];

//# sourceMappingURL=node_modules_sanity_lib__chunks-es_presentation_mjs_20f33e16._.js.map