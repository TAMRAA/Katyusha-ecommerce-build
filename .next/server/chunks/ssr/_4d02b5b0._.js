module.exports=[464150,a=>{"use strict";a.s(["apiVersion",()=>b,"dataset",()=>c,"projectId",()=>d]);let b=process.env.NEXT_PUBLIC_SANITY_API_VERSION||"2025-09-16",c=e("production","Missing environment variable: NEXT_PUBLIC_SANITY_DATASET"),d=e("vdfkj56q","Missing environment variable: NEXT_PUBLIC_SANITY_PROJECT_ID");function e(a,b){if(void 0===a)throw Error(b);return a}},533095,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(c,{default:function(){return i},getImageProps:function(){return h}});let d=a.r(833354),e=a.r(494915),f=a.r(767161),g=d._(a.r(402305));function h(a){let{props:b}=(0,e.getImgProps)(a,{defaultLoader:g.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let i=f.Image},571987,(a,b,c)=>{b.exports=a.r(533095)},358976,a=>{"use strict";a.s(["imageUrl",()=>f],358976);var b=a.i(564416),c=a.i(464150);let d=(0,b.createClient)({projectId:c.projectId,dataset:c.dataset,apiVersion:c.apiVersion,useCdn:!0,stega:{studioUrl:`https://${process.env.VERCEL_URL}/studio`}}),e=(0,a.i(927058).default)(d);function f(a){return e.image(a)}},395388,a=>{"use strict";a.s(["default",()=>e]);var b=a.i(187924),c=a.i(325860),d=a.i(572131);let e=function({product:a,disabled:e}){let{addItem:f,removeItem:g,getItemCount:h}=(0,c.default)(),i=h(a._id),[j,k]=(0,d.useState)(!1);return((0,d.useEffect)(()=>{k(!0)},[]),j)?(0,b.jsx)("div",{className:"flex items-center justify-center space-x-2",children:j&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>g(a._id),className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors duration-200 ${0===i?"bg-gray-100 cursor-not-allowed":"bg-gray-200 hover:bg-gray-300"}`,disabled:0===i||e,"aria-label":`Remove ${a.name||"item"} from basket`,children:(0,b.jsx)("span",{className:`text-xl font-bold leading-none ${0===i?"text-gray-400":"text-gray-600"}`,style:{lineHeight:"1",display:"flex",alignItems:"center",justifyContent:"center"},children:"-"})}),(0,b.jsx)("span",{className:"w-8 text-center font-semibold",children:i}),(0,b.jsx)("button",{onClick:()=>f(a),className:"w-8 h-8 rounded-full flex items-center justify-center bg-blue-500 text-white hover:bg-blue-600 transition-colors duration-200",disabled:e||!1,"aria-label":`Add ${a.name||"item"} to basket`,children:(0,b.jsx)("span",{className:"text-xl font-bold leading-none",style:{lineHeight:"1",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"})})]})}):null}},623351,a=>{"use strict";a.s(["default",()=>o],623351);var b=a.i(187924),c=a.i(325860),d=a.i(589750),e=a.i(629662),f=a.i(149863),g=a.i(50944),h=a.i(572131),i=a.i(395388),j=a.i(571987),k=a.i(358976);let l=function(){return(0,b.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})})};var m=a.i(405050),n=(0,m.createServerReference)("60755104c85b9fcf37b7d72fde01130f1cb21670b3",m.callServer,void 0,m.findSourceMapURL,"createCheckoutSession");let o=function(){let a=(0,c.default)(a=>a.getGroupedItems()),{isSignedIn:m}=(0,e.useAuth)(),{user:o}=(0,f.useUser)(),p=(0,g.useRouter)(),[q,r]=(0,h.useState)(!1),[s,t]=(0,h.useState)(!1);if((0,h.useEffect)(()=>{r(!0)},[]),!q)return(0,b.jsx)(l,{});if(0===a.length)return(0,b.jsxs)("div",{className:"container mx-auto p-4 flex flex-col items-center justify-center min-h-[50vh]",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Your Basket"}),(0,b.jsx)("p",{className:"text-gray-600 text-lg",children:"Your basket is empty..."})]});let u=async()=>{if(m){t(!0);try{let b={orderNumber:crypto.randomUUID(),customerName:o?.fullName??"Unknown",customerEmail:o?.emailAddresses[0].emailAddress??"Unknown",clerkUserId:o.id},c=await n(a,b);c&&(window.location.href=c)}catch(a){console.error("Error creating checkout session:",a)}finally{t(!1)}}};return(0,b.jsxs)("div",{className:"container mx-auto p-4 max-w-6xl",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Your Basket"}),(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,b.jsx)("div",{className:"flex-grow",children:a.map(a=>(0,b.jsxs)("div",{className:"mb-4 p-4 border flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center cursor-pointer flex-1 min-w-0",onClick:()=>p.push(`/product/${a.product.slug?.current}`),children:[(0,b.jsx)("div",{className:"w-20 h-20 sm:w-24 sm:h-24 flex-shrink-0 mr-4",children:a.product.image&&(0,b.jsx)(j.default,{src:(0,k.imageUrl)(a.product.image).url(),alt:a.product.name??"Product image",className:"w-full h-full object-cover rounded",width:96,height:96})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("h2",{className:"text-lg sm:text-xl font-semibold truncate",children:a.product.name}),(0,b.jsxs)("p",{className:"text-sm sm:text-base",children:["Price: $",((a.product.price??0)*a.quantity).toFixed(2)]})]})]}),(0,b.jsx)("div",{className:"flex items-center ml-4 flex-shrink-0",children:(0,b.jsx)(i.default,{product:a.product})})]},a.product._id))}),(0,b.jsxs)("div",{className:"w-full lg:w-80 lg:sticky lg:top-4 h-fit bg-white p-6 border rounded order-first lg:order-last fixed bottom-0 left-0 lg:left-auto",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold",children:"Order Summary"}),(0,b.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,b.jsxs)("p",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Items:"}),(0,b.jsx)("span",{children:a.reduce((a,b)=>a+b.quantity,0)})]}),(0,b.jsxs)("p",{className:"flex justify-between text-2xl font-bold border-t pt-2",children:[(0,b.jsx)("span",{children:"Total:"}),(0,b.jsxs)("span",{children:[c.default.getState().getTotalPrice().toFixed(2),"$"]})]})]}),m?(0,b.jsx)("button",{onClick:u,disabled:s,className:"mt-4 w-full bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:bg-gray-400",children:s?"Processing...":"Checkout"}):(0,b.jsx)(d.SignInButton,{mode:"modal",children:(0,b.jsx)("button",{className:"mt-4 w-full bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Sign in to Checkout"})})]}),(0,b.jsx)("div",{className:"h-64 lg:h-0"})]})]})}}];

//# sourceMappingURL=_4d02b5b0._.js.map