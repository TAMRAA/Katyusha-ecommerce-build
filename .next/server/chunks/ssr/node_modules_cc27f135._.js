module.exports=[446799,a=>{"use strict";a.s(["v4",()=>g],446799);var b=a.i(254799);let c={randomUUID:b.randomUUID},d=new Uint8Array(256),e=d.length,f=[];for(let a=0;a<256;++a)f.push((a+256).toString(16).slice(1));let g=function(a,g,h){if(c.randomUUID&&!g&&!a)return c.randomUUID();let i=(a=a||{}).random??a.rng?.()??(e>d.length-16&&((0,b.randomFillSync)(d),e=0),d.slice(e,e+=16));if(i.length<16)throw Error("Random bytes length must be >= 16");if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,g){if((h=h||0)<0||h+16>g.length)throw RangeError(`UUID byte range ${h}:${h+15} is out of buffer bounds`);for(let a=0;a<16;++a)g[h+a]=i[a];return g}return function(a,b=0){return(f[a[b+0]]+f[a[b+1]]+f[a[b+2]]+f[a[b+3]]+"-"+f[a[b+4]]+f[a[b+5]]+"-"+f[a[b+6]]+f[a[b+7]]+"-"+f[a[b+8]]+f[a[b+9]]+"-"+f[a[b+10]]+f[a[b+11]]+f[a[b+12]]+f[a[b+13]]+f[a[b+14]]+f[a[b+15]]).toLowerCase()}(i)}},406329,417763,a=>{"use strict";a.s(["$",()=>B,"B",()=>aa,"C",()=>ay,"D",()=>X,"E",()=>aE,"F",()=>$,"G",()=>av,"H",()=>function a(b,c,d,e){if("string"==typeof c){let a=aj(b,c).next(d,e);return a&&a.length?a:b.next(d,e)}if(1===Object.keys(c).length){let f=Object.keys(c),g=a(aj(b,f[0]),c[f[0]],d,e);return g&&g.length?g:b.next(d,e)}let f=[];for(let g of Object.keys(c)){let h=c[g];if(!h)continue;let i=a(aj(b,g),h,d,e);i&&f.push(...i)}return f.length?f:b.next(d,e)},"I",()=>au,"J",()=>k,"K",()=>ar,"L",()=>ai,"M",()=>n,"N",()=>e,"O",()=>_,"P",()=>ak,"Q",()=>aG,"R",()=>x,"S",()=>d,"T",()=>g,"U",()=>j,"V",()=>C,"W",()=>aF,"X",()=>h,"a",()=>S,"c",()=>F,"e",()=>v,"f",()=>I,"g",()=>al,"h",()=>L,"k",()=>O,"l",()=>p,"n",()=>Q,"q",()=>ad,"r",()=>aJ,"t",()=>q,"u",()=>t,"v",()=>ac,"w",()=>T,"x",()=>w,"y",()=>ab,"z",()=>ae],406329),a.s(["devToolsAdapter",()=>b],417763);let b=a=>{};class c{constructor(a){this._process=a,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(a){let b={value:a,next:null};if(this._current){this._last.next=b,this._last=b;return}this._current=b,this._last=b,this._active&&this.flush()}flush(){for(;this._current;){let a=this._current;this._process(a.value),this._current=a.next}this._last=null}}let d=".",e="",f="xstate.init",g="xstate.error",h="xstate.stop";function i(a,b){return{type:`xstate.done.state.${a}`,output:b}}function j(a,b){return{type:`xstate.error.actor.${a}`,error:b,actorId:a}}function k(a){return{type:f,input:a}}function l(a){setTimeout(()=>{throw a})}let m="function"==typeof Symbol&&Symbol.observable||"@@observable";function n(a){if(s(a))return a;let b=[],c="";for(let d=0;d<a.length;d++){switch(a.charCodeAt(d)){case 92:c+=a[d+1],d++;continue;case 46:b.push(c),c="";continue}c+=a[d]}return b.push(c),b}function o(a){var b;return(b=a)&&"object"==typeof b&&"machine"in b&&"value"in b?a.value:"string"!=typeof a?a:function(a){if(1===a.length)return a[0];let b={},c=b;for(let b=0;b<a.length-1;b++)if(b===a.length-2)c[a[b]]=a[b+1];else{let d=c;c={},d[a[b]]=c}return b}(n(a))}function p(a,b){let c={},d=Object.keys(a);for(let e=0;e<d.length;e++){let f=d[e];c[f]=b(a[f],f,a,e)}return c}function q(a){var b;return void 0===a?[]:s(b=a)?b:[b]}function r(a,b,c,d){return"function"==typeof a?a({context:b,event:c,self:d}):a}function s(a){return Array.isArray(a)}function t(a){var b;return(s(b=a)?b:[b]).map(a=>void 0===a||"string"==typeof a?{target:a}:a)}function u(a){if(void 0!==a&&""!==a)return q(a)}function v(a,b,c){let d="object"==typeof a,e=d?a:void 0;return{next:(d?a.next:a)?.bind(e),error:(d?a.error:b)?.bind(e),complete:(d?a.complete:c)?.bind(e)}}function w(a,b){return`${b}.${a}`}function x(a,b){let c=b.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!c)return a.implementations.actors[b];let[,d,e]=c,f=a.getStateNodeById(e).config.invoke;return(Array.isArray(f)?f[d]:f).src}function y(a,b){return`${a.sessionId}.${b}`}let z=0,A=!1,B=1,C=function(a){return a[a.NotStarted=0]="NotStarted",a[a.Running=1]="Running",a[a.Stopped=2]="Stopped",a}({}),D={clock:{setTimeout:(a,b)=>setTimeout(a,b),clearTimeout:a=>clearTimeout(a)},logger:console.log.bind(console),devTools:!1};class E{constructor(a,b){this.logic=a,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new c(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=C.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];let d={...D,...b},{clock:e,logger:f,parent:g,syncSnapshot:h,id:i,systemId:j,inspect:k}=d;this.system=g?g.system:function(a,b){let c=new Map,d=new Map,e=new WeakMap,f=new Set,g={},{clock:h,logger:i}=b,j={schedule:(a,b,c,d,e=Math.random().toString(36).slice(2))=>{let f={source:a,target:b,event:c,delay:d,id:e,startedAt:Date.now()},i=y(a,e);k._snapshot._scheduledEvents[i]=f;let j=h.setTimeout(()=>{delete g[i],delete k._snapshot._scheduledEvents[i],k._relay(a,b,c)},d);g[i]=j},cancel:(a,b)=>{let c=y(a,b),d=g[c];delete g[c],delete k._snapshot._scheduledEvents[c],void 0!==d&&h.clearTimeout(d)},cancelAll:a=>{for(let b in k._snapshot._scheduledEvents){let c=k._snapshot._scheduledEvents[b];c.source===a&&j.cancel(a,c.id)}}},k={_snapshot:{_scheduledEvents:(b?.snapshot&&b.snapshot.scheduler)??{}},_bookId:()=>`x:${z++}`,_register:(a,b)=>(c.set(a,b),a),_unregister:a=>{c.delete(a.sessionId);let b=e.get(a);void 0!==b&&(d.delete(b),e.delete(a))},get:a=>d.get(a),_set:(a,b)=>{let c=d.get(a);if(c&&c!==b)throw Error(`Actor with system ID '${a}' already exists.`);d.set(a,b),e.set(b,a)},inspect:a=>{let b=v(a);return f.add(b),{unsubscribe(){f.delete(b)}}},_sendInspectionEvent:b=>{if(!f.size)return;let c={...b,rootId:a.sessionId};f.forEach(a=>a.next?.(c))},_relay:(a,b,c)=>{k._sendInspectionEvent({type:"@xstate.event",sourceRef:a,actorRef:b,event:c}),b._send(c)},scheduler:j,getSnapshot:()=>({_scheduledEvents:{...k._snapshot._scheduledEvents}}),start:()=>{let a=k._snapshot._scheduledEvents;for(let b in k._snapshot._scheduledEvents={},a){let{source:c,target:d,event:e,delay:f,id:g}=a[b];j.schedule(c,d,e,f,g)}},_clock:h,_logger:i};return k}(this,{clock:e,logger:f}),k&&!g&&this.system.inspect(v(k)),this.sessionId=this.system._bookId(),this.id=i??this.sessionId,this.logger=b?.logger??this.system._logger,this.clock=b?.clock??this.system._clock,this._parent=g,this._syncSnapshot=h,this.options=d,this.src=d.src??a,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:a=>{this._deferred.push(a)},system:this.system,stopChild:a=>{if(a._parent!==this)throw Error(`Cannot stop child actor ${a.id} of ${this.id} because it is not a child`);a._stop()},emit:a=>{let b=this.eventListeners.get(a.type),c=this.eventListeners.get("*");if(b||c)for(let d of[...b?b.values():[],...c?c.values():[]])try{d(a)}catch(a){l(a)}},actionExecutor:a=>{let b=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:a.type,params:a.params}}),!a.exec)return;let b=A;try{A=!0,a.exec(a.info,a.params)}finally{A=b}};this._processingStatus===C.Running?b():this._deferred.push(b)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),j&&(this._systemId=j,this.system._set(j,this)),this._initState(b?.snapshot??b?.state),j&&"active"!==this._snapshot.status&&this.system._unregister(this)}_initState(a){try{this._snapshot=a?this.logic.restoreSnapshot?this.logic.restoreSnapshot(a,this._actorScope):a:this.logic.getInitialSnapshot(this._actorScope,this.options?.input)}catch(a){this._snapshot={status:"error",output:void 0,error:a}}}update(a,b){let c;for(this._snapshot=a;c=this._deferred.shift();)try{c()}catch(b){this._deferred.length=0,this._snapshot={...a,status:"error",error:b}}switch(this._snapshot.status){case"active":for(let b of this.observers)try{b.next?.(a)}catch(a){l(a)}break;case"done":var d;for(let b of this.observers)try{b.next?.(a)}catch(a){l(a)}this._stopProcedure(),this._complete(),this._doneEvent=(d=this.id,{type:`xstate.done.actor.${d}`,output:this._snapshot.output,actorId:d}),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error)}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:b,snapshot:a})}subscribe(a,b,c){let d=v(a,b,c);if(this._processingStatus!==C.Stopped)this.observers.add(d);else switch(this._snapshot.status){case"done":try{d.complete?.()}catch(a){l(a)}break;case"error":{let a=this._snapshot.error;if(d.error)try{d.error(a)}catch(a){l(a)}else l(a)}}return{unsubscribe:()=>{this.observers.delete(d)}}}on(a,b){let c=this.eventListeners.get(a);c||(c=new Set,this.eventListeners.set(a,c));let d=b.bind(void 0);return c.add(d),{unsubscribe:()=>{c.delete(d)}}}start(){if(this._processingStatus===C.Running)return this;this._syncSnapshot&&this.subscribe({next:a=>{"active"===a.status&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:a})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=C.Running;let a=k(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:a}),this._snapshot.status){case"done":return this.update(this._snapshot,a),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(a){return this._snapshot={...this._snapshot,status:"error",error:a},this._error(a),this}return this.update(this._snapshot,a),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(a){let b,c;try{b=this.logic.transition(this._snapshot,a,this._actorScope)}catch(a){c={err:a}}if(c){let{err:a}=c;this._snapshot={...this._snapshot,status:"error",error:a},this._error(a);return}this.update(b,a),a.type===h&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===C.Stopped||((this.mailbox.clear(),this._processingStatus===C.NotStarted)?this._processingStatus=C.Stopped:this.mailbox.enqueue({type:h})),this}stop(){if(this._parent)throw Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(let a of this.observers)try{a.complete?.()}catch(a){l(a)}this.observers.clear()}_reportError(a){if(!this.observers.size){this._parent||l(a);return}let b=!1;for(let c of this.observers){let d=c.error;b||=!d;try{d?.(a)}catch(a){l(a)}}this.observers.clear(),b&&l(a)}_error(a){this._stopProcedure(),this._reportError(a),this._parent&&this.system._relay(this,this._parent,j(this.id,a))}_stopProcedure(){return this._processingStatus!==C.Running||(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new c(this._process.bind(this)),this._processingStatus=C.Stopped,this.system._unregister(this)),this}_send(a){this._processingStatus!==C.Stopped&&this.mailbox.enqueue(a)}send(a){this.system._relay(void 0,this,a)}attachDevTools(){let{devTools:a}=this.options;a&&("function"==typeof a?a:b)(this)}toJSON(){return{xstate$$type:B,id:this.id}}getPersistedSnapshot(a){return this.logic.getPersistedSnapshot(this._snapshot,a)}[m](){return this}getSnapshot(){return this._snapshot}}function F(a,...[b]){return new E(a,b)}function G(a,b,c,d,{sendId:e}){return[b,{sendId:"function"==typeof e?e(c,d):e},void 0]}function H(a,b){a.defer(()=>{a.system.scheduler.cancel(a.self,b.sendId)})}function I(a){function b(a,b){}return b.type="xstate.cancel",b.sendId=a,b.resolve=G,b.execute=H,b}function J(a,b,c,d,{id:e,systemId:f,src:g,input:h,syncSnapshot:i}){let j,k,l="string"==typeof g?x(b.machine,g):g,m="function"==typeof e?e(c):e;return l&&(k="function"==typeof h?h({context:b.context,event:c.event,self:a.self}):h,j=F(l,{id:m,src:g,parent:a.self,syncSnapshot:i,systemId:f,input:k})),[aF(b,{children:{...b.children,[m]:j}}),{id:e,systemId:f,actorRef:j,src:g,input:k},void 0]}function K(a,{actorRef:b}){b&&a.defer(()=>{b._processingStatus!==C.Stopped&&b.start()})}function L(...[a,{id:b,systemId:c,input:d,syncSnapshot:e=!1}={}]){function f(a,b){}return f.type="xstate.spawnChild",f.id=b,f.systemId=c,f.src=a,f.input=d,f.syncSnapshot=e,f.resolve=J,f.execute=K,f}function M(a,b,c,d,{actorRef:e}){let f="function"==typeof e?e(c,d):e,g="string"==typeof f?b.children[f]:f,h=b.children;return g&&(h={...h},delete h[g.id]),[aF(b,{children:h}),g,void 0]}function N(a,b){if(b){if(a.system._unregister(b),b._processingStatus!==C.Running)return void a.stopChild(b);a.defer(()=>{a.stopChild(b)})}}function O(a){function b(a,b){}return b.type="xstate.stopChild",b.actorRef=a,b.resolve=M,b.execute=N,b}function P(a,{context:b,event:c},{guards:d}){return!T(d[0],b,c,a)}function Q(a){function b(a,b){return!1}return b.check=P,b.guards=[a],b}function R(a,{context:b,event:c},{guards:d}){return d.every(d=>T(d,b,c,a))}function S(a){function b(a,b){return!1}return b.check=R,b.guards=a,b}function T(a,b,c,d){let{machine:e}=d,f="function"==typeof a,g=f?a:e.implementations.guards["string"==typeof a?a:a.type];if(!f&&!g)throw Error(`Guard '${"string"==typeof a?a:a.type}' is not implemented.'.`);if("function"!=typeof g)return T(g,b,c,d);let h={context:b,event:c},i=f||"string"==typeof a?void 0:"params"in a?"function"==typeof a.params?a.params({context:b,event:c}):a.params:void 0;return"check"in g?g.check(d,h,g):g(h,i)}let U=a=>"atomic"===a.type||"final"===a.type;function V(a){return Object.values(a.states).filter(a=>"history"!==a.type)}function W(a,b){let c=[];if(b===a)return c;let d=a.parent;for(;d&&d!==b;)c.push(d),d=d.parent;return c}function X(a){let b=new Set(a),c=Y(b);for(let a of b)if("compound"!==a.type||c.get(a)&&c.get(a).length){if("parallel"===a.type){for(let c of V(a))if("history"!==c.type&&!b.has(c))for(let a of ah(c))b.add(a)}}else ah(a).forEach(a=>b.add(a));for(let a of b){let c=a.parent;for(;c;)b.add(c),c=c.parent}return b}function Y(a){let b=new Map;for(let c of a)b.has(c)||b.set(c,[]),c.parent&&(b.has(c.parent)||b.set(c.parent,[]),b.get(c.parent).push(c));return b}function Z(a,b){return function a(b,c){let d=c.get(b);if(!d)return{};if("compound"===b.type){let a=d[0];if(!a)return{};if(U(a))return a.key}let e={};for(let b of d)e[b.key]=a(b,c);return e}(a,Y(X(b)))}function $(a,b){return"compound"===b.type?V(b).some(b=>"final"===b.type&&a.has(b)):"parallel"===b.type?V(b).every(b=>$(a,b)):"final"===b.type}let _=a=>"#"===a[0];function aa(a,b){return a.transitions.get(b)||[...a.transitions.keys()].filter(a=>{if("*"===a)return!0;if(!a.endsWith(".*"))return!1;let c=a.split("."),d=b.split(".");for(let a=0;a<c.length;a++){let b=c[a],e=d[a];if("*"===b)return a===c.length-1;if(b!==e)return!1}return!0}).sort((a,b)=>b.length-a.length).flatMap(b=>a.transitions.get(b))}function ab(a){let b=a.config.after;return b?Object.keys(b).flatMap(c=>{let d=b[c],e=Number.isNaN(+c)?c:+c,f=(b=>{var c;let d=(c=a.id,{type:`xstate.after.${b}.${c}`}),e=d.type;return a.entry.push(aJ(d,{id:e,delay:b})),a.exit.push(I(e)),e})(e);return q("string"==typeof d?{target:d}:d).map(a=>({...a,event:f,delay:e}))}).map(b=>{let{delay:c}=b;return{...ac(a,b.event,b),delay:c}}):[]}function ac(a,b,c){let e=u(c.target),f=c.reenter??!1,g=function(a,b){if(void 0!==b)return b.map(b=>{if("string"!=typeof b)return b;if(_(b))return a.machine.getStateNodeById(b);let c=b[0]===d;if(c&&!a.parent)return ak(a,b.slice(1));let e=c?a.key+b:b;if(a.parent)try{return ak(a.parent,e)}catch(b){throw Error(`Invalid transition definition for state node '${a.id}':
${b.message}`)}throw Error(`Invalid target: "${b}" is not a valid target from the root node. Did you mean ".${b}"?`)})}(a,e),h={...c,actions:q(c.actions),guard:c.guard,target:g,source:a,reenter:f,eventType:b,toJSON:()=>({...h,source:`#${a.id}`,target:g?g.map(a=>`#${a.id}`):void 0})};return h}function ad(a){let b=new Map;if(a.config.on)for(let c of Object.keys(a.config.on)){if(c===e)throw Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');let d=a.config.on[c];b.set(c,t(d).map(b=>ac(a,c,b)))}if(a.config.onDone){let c=`xstate.done.state.${a.id}`;b.set(c,t(a.config.onDone).map(b=>ac(a,c,b)))}for(let c of a.invoke){if(c.onDone){let d=`xstate.done.actor.${c.id}`;b.set(d,t(c.onDone).map(b=>ac(a,d,b)))}if(c.onError){let d=`xstate.error.actor.${c.id}`;b.set(d,t(c.onError).map(b=>ac(a,d,b)))}if(c.onSnapshot){let d=`xstate.snapshot.${c.id}`;b.set(d,t(c.onSnapshot).map(b=>ac(a,d,b)))}}for(let c of a.after){let a=b.get(c.eventType);a||(a=[],b.set(c.eventType,a)),a.push(c)}return b}function ae(a,b){let c="string"==typeof b?a.states[b]:b?a.states[b.target]:void 0;if(!c&&b)throw Error(`Initial state node "${b}" not found on parent state node #${a.id}`);let d={source:a,actions:b&&"string"!=typeof b?q(b.actions):[],eventType:null,reenter:!1,target:c?[c]:[],toJSON:()=>({...d,source:`#${a.id}`,target:c?[`#${c.id}`]:[]})};return d}function af(a){let b=u(a.config.target);return b?{target:b.map(b=>"string"==typeof b?ak(a.parent,b):b)}:a.parent.initial}function ag(a){return"history"===a.type}function ah(a){let b=ai(a);for(let c of b)for(let d of W(c,a))b.add(d);return b}function ai(a){let b=new Set;return!function a(c){if(!b.has(c)){if(b.add(c),"compound"===c.type)a(c.initial.target[0]);else if("parallel"===c.type)for(let b of V(c))a(b)}}(a),b}function aj(a,b){if(_(b))return a.machine.getStateNodeById(b);if(!a.states)throw Error(`Unable to retrieve child state '${b}' from '${a.id}'; no child states exist.`);let c=a.states[b];if(!c)throw Error(`Child state '${b}' does not exist on '${a.id}'`);return c}function ak(a,b){if("string"==typeof b&&_(b))try{return a.machine.getStateNodeById(b)}catch{}let c=n(b).slice(),d=a;for(;c.length;){let a=c.shift();if(!a.length)break;d=aj(d,a)}return d}function al(a,b){if("string"==typeof b){let c=a.states[b];if(!c)throw Error(`State '${b}' does not exist on '${a.id}'`);return[a,c]}let c=Object.keys(b),d=c.map(b=>aj(a,b)).filter(Boolean);return[a.machine.root,a].concat(d,c.reduce((c,d)=>{let e=aj(a,d);if(!e)return c;let f=al(e,b[d]);return c.concat(f)},[]))}function am(a,b){let c=a;for(;c.parent&&c.parent!==b;)c=c.parent;return c.parent===b}function an(a,b,c){let d=new Set;for(let e of a){let a=!1,f=new Set;for(let g of d)if(function(a,b){let c=new Set(a),d=new Set(b);for(let a of c)if(d.has(a))return!0;for(let a of d)if(c.has(a))return!0;return!1}(aq([e],b,c),aq([g],b,c)))if(am(e.source,g.source))f.add(g);else{a=!0;break}if(!a){for(let a of f)d.delete(a);d.add(e)}}return Array.from(d)}function ao(a,b){if(!a.target)return[];let c=new Set;for(let d of a.target)if(ag(d))if(b[d.id])for(let a of b[d.id])c.add(a);else for(let a of ao(af(d),b))c.add(a);else c.add(d);return[...c]}function ap(a,b){let c=ao(a,b);if(!c)return;if(!a.reenter&&c.every(b=>b===a.source||am(b,a.source)))return a.source;let d=function(a){let[b,...c]=a;for(let a of W(b,void 0))if(c.every(b=>am(b,a)))return a}(c.concat(a.source));return d||(a.reenter?void 0:a.source.machine.root)}function aq(a,b,c){let d=new Set;for(let e of a)if(e.target?.length){let a=ap(e,c);for(let c of(e.reenter&&e.source===a&&d.add(a),b))am(c,a)&&d.add(c)}return[...d]}function ar(a,b,c,d,e,f){if(!a.length)return b;let g=new Set(b._nodes),h=b.historyValue,j=an(a,g,h),k=b;e||([k,h]=function(a,b,c,d,e,f,g,h){let i,j=a,k=aq(d,e,f);for(let a of(k.sort((a,b)=>b.order-a.order),k))for(let b of function(a){return Object.keys(a.states).map(b=>a.states[b]).filter(a=>"history"===a.type)}(a)){let c;c="deep"===b.history?b=>U(b)&&am(b,a):b=>b.parent===a,(i??={...f})[b.id]=Array.from(e).filter(c)}for(let a of k)j=au(j,b,c,[...a.exit,...a.invoke.map(a=>O(a.id))],g,void 0),e.delete(a);return[j,i||f]}(k,d,c,j,g,h,f,c.actionExecutor)),k=function(a,b,c,d,e,f,g,h){let j=a,k=new Set,l=new Set;(function(a,b,c,d){for(let e of a){let a=ap(e,b);for(let f of e.target||[])!ag(f)&&(e.source!==f||e.source!==a||e.reenter)&&(d.add(f),c.add(f)),as(f,b,c,d);for(let f of ao(e,b)){let g=W(f,a);a?.type==="parallel"&&g.push(a),at(d,b,c,g,!e.source.parent&&e.reenter?void 0:a)}}})(d,g,l,k),h&&l.add(a.machine.root);let m=new Set;for(let a of[...k].sort((a,b)=>a.order-b.order)){e.add(a);let d=[];for(let b of(d.push(...a.entry),a.invoke))d.push(L(b.src,{...b,syncSnapshot:!!b.onSnapshot}));if(l.has(a)){let b=a.initial.actions;d.push(...b)}if(j=au(j,b,c,d,f,a.invoke.map(a=>a.id)),"final"===a.type){let d=a.parent,g=d?.type==="parallel"?d:d?.parent,h=g||a;for(d?.type==="compound"&&f.push(i(d.id,void 0!==a.output?r(a.output,j.context,b,c.self):void 0));g?.type==="parallel"&&!m.has(g)&&$(e,g);)m.add(g),f.push(i(g.id)),h=g,g=g.parent;if(g)continue;j=aF(j,{status:"done",output:function(a,b,c,d,e){if(void 0===d.output)return;let f=i(e.id,void 0!==e.output&&e.parent?r(e.output,a.context,b,c.self):void 0);return r(d.output,a.context,f,c.self)}(j,b,c,j.machine.root,h)})}}return j}(k=au(k,d,c,j.flatMap(a=>a.actions),f,void 0),d,c,j,g,f,h,e);let l=[...g];"done"===k.status&&(k=au(k,d,c,l.sort((a,b)=>b.order-a.order).flatMap(a=>a.exit),f,void 0));try{if(h===b.historyValue&&function(a,b){if(a.length!==b.size)return!1;for(let c of a)if(!b.has(c))return!1;return!0}(b._nodes,g))return k;return aF(k,{_nodes:l,historyValue:h})}catch(a){throw a}}function as(a,b,c,d){var e,f,g,h;if(ag(a))if(b[a.id]){let g=b[a.id];for(let a of g)d.add(a),as(a,b,c,d);for(let h of g){e=h,f=a.parent,at(d,b,c,W(e,f))}}else{let e=af(a);for(let f of e.target)d.add(f),e===a.parent?.initial&&c.add(a.parent),as(f,b,c,d);for(let f of e.target){g=f,h=a.parent,at(d,b,c,W(g,h))}}else if("compound"===a.type){let[e]=a.initial.target;ag(e)||(d.add(e),c.add(e)),as(e,b,c,d),at(d,b,c,W(e,a))}else if("parallel"===a.type)for(let e of V(a).filter(a=>!ag(a)))[...d].some(a=>am(a,e))||(ag(e)||(d.add(e),c.add(e)),as(e,b,c,d))}function at(a,b,c,d,e){for(let f of d)if((!e||am(f,e))&&a.add(f),"parallel"===f.type)for(let d of V(f).filter(a=>!ag(a)))[...a].some(a=>am(a,d))||(a.add(d),as(d,b,c,a))}function au(a,b,c,d,e,f){let g=f?[]:void 0,h=function a(b,c,d,e,f,g){let{machine:h}=b,i=b;for(let b of e){var j;let e="function"==typeof b,k=e?b:(j="string"==typeof b?b:b.type,h.implementations.actions[j]),l={context:i.context,event:c,self:d.self,system:d.system},m=e||"string"==typeof b?void 0:"params"in b?"function"==typeof b.params?b.params({context:i.context,event:c}):b.params:void 0;if(!k||!("resolve"in k)){d.actionExecutor({type:"string"==typeof b?b:"object"==typeof b?b.type:b.name||"(anonymous)",info:l,params:m,exec:k});continue}let[n,o,p]=k.resolve(d,i,l,m,k,f);i=n,"retryResolve"in k&&g?.push([k,o]),"execute"in k&&d.actionExecutor({type:k.type,info:l,params:o,exec:k.execute.bind(null,d,o)}),p&&(i=a(i,c,d,p,f,g))}return i}(a,b,c,d,{internalQueue:e,deferredActorIds:f},g);return g?.forEach(([a,b])=>{a.retryResolve(c,h,b)}),h}function av(a,b,c,d){let e=a,g=[];function i(a,b,d){c.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:c.self,event:b,snapshot:a,_transitions:d}),g.push(a)}if(b.type===h)return i(e=aF(aw(e,b,c),{status:"stopped"}),b,[]),{snapshot:e,microstates:g};let j=b;if(j.type!==f){let b=j,f=b.type.startsWith("xstate.error.actor"),h=ax(b,e);if(f&&!h.length)return i(e=aF(a,{status:"error",error:b.error}),b,[]),{snapshot:e,microstates:g};i(e=ar(h,a,c,j,!1,d),b,h)}let k=!0;for(;"active"===e.status;){let a=k?function(a,b){let c=new Set;for(let d of a._nodes.filter(U))a:for(let e of[d].concat(W(d,void 0)))if(e.always){for(let d of e.always)if(void 0===d.guard||T(d.guard,a.context,b,a)){c.add(d);break a}}return an(Array.from(c),new Set(a._nodes),a.historyValue)}(e,j):[],b=a.length?e:void 0;if(!a.length){if(!d.length)break;a=ax(j=d.shift(),e)}k=(e=ar(a,e,c,j,!1,d))!==b,i(e,j,a)}return"active"!==e.status&&aw(e,j,c),{snapshot:e,microstates:g}}function aw(a,b,c){return au(a,b,c,Object.values(a.children).map(a=>O(a)),[],void 0)}function ax(a,b){return b.machine.getTransitionData(b,a)}function ay(a,b){let c=X(al(a,b));return Z(a,[...c])}let az=function(a){return function a(b,c){let d=o(b),e=o(c);return"string"==typeof e?"string"==typeof d&&e===d:"string"==typeof d?d in e:Object.keys(d).every(b=>b in e&&a(d[b],e[b]))}(a,this.value)},aA=function(a){return this.tags.has(a)},aB=function(a){let b=this.machine.getTransitionData(this,a);return!!b?.length&&b.some(a=>void 0!==a.target||a.actions.length)},aC=function(){let{_nodes:a,tags:b,machine:c,getMeta:d,toJSON:e,can:f,hasTag:g,matches:h,...i}=this;return{...i,tags:Array.from(b)}},aD=function(){return this._nodes.reduce((a,b)=>(void 0!==b.meta&&(a[b.id]=b.meta),a),{})};function aE(a,b){return{status:a.status,output:a.output,error:a.error,machine:b,context:a.context,_nodes:a._nodes,value:Z(b.root,a._nodes),tags:new Set(a._nodes.flatMap(a=>a.tags)),children:a.children,historyValue:a.historyValue||{},matches:az,hasTag:aA,can:aB,getMeta:aD,toJSON:aC}}function aF(a,b={}){return aE({...a,...b},a.machine)}function aG(a,b){let{_nodes:c,tags:d,machine:e,children:f,context:g,can:h,hasTag:i,matches:j,getMeta:k,toJSON:l,...m}=a,n={};for(let a in f){let c=f[a];n[a]={snapshot:c.getPersistedSnapshot(b),src:c.src,systemId:c._systemId,syncSnapshot:c._syncSnapshot}}return{...m,context:function a(b){let c;for(let d in b){let e=b[d];if(e&&"object"==typeof e)if("sessionId"in e&&"send"in e&&"ref"in e)(c??=Array.isArray(b)?b.slice():{...b})[d]={xstate$$type:B,id:e.id};else{let f=a(e);f!==e&&((c??=Array.isArray(b)?b.slice():{...b})[d]=f)}}return c??b}(g),children:n,historyValue:function(a){if("object"!=typeof a||null===a)return{};let b={};for(let c in a){let d=a[c];Array.isArray(d)&&(b[c]=d.map(a=>({id:a.id})))}return b}(m.historyValue)}}function aH(a,b,c,d,{event:e,id:f,delay:g},{internalQueue:h}){let i,j=b.machine.implementations.delays;if("string"==typeof e)throw Error(`Only event objects may be used with raise; use raise({ type: "${e}" }) instead`);let k="function"==typeof e?e(c,d):e;if("string"==typeof g){let a=j&&j[g];i="function"==typeof a?a(c,d):a}else i="function"==typeof g?g(c,d):g;return"number"!=typeof i&&h.push(k),[b,{event:k,id:f,delay:i},void 0]}function aI(a,b){let{event:c,delay:d,id:e}=b;if("number"==typeof d)return void a.defer(()=>{let b=a.self;a.system.scheduler.schedule(b,b,c,d,e)})}function aJ(a,b){function c(a,b){}return c.type="xstate.raise",c.event=a,c.id=b?.id,c.delay=b?.delay,c.resolve=aH,c.execute=aI,c}},170923,98020,986165,a=>{"use strict";a.s(["assertEvent",()=>x,"setup",()=>y],170923),a.s(["fromCallback",()=>f,"fromEventObservable",()=>k,"fromObservable",()=>j,"fromPromise",()=>o],98020);var b,c,d=a.i(406329);a.i(417763);let e=new WeakMap;function f(a){return{config:a,start:(b,c)=>{let{self:d,system:f,emit:g}=c,h={receivers:void 0,dispose:void 0};e.set(d,h),h.dispose=a({input:b.input,system:f,self:d,sendBack:a=>{"stopped"!==d.getSnapshot().status&&d._parent&&f._relay(d,d._parent,a)},receive:a=>{h.receivers??=new Set,h.receivers.add(a)},emit:g})},transition:(a,b,c)=>{let f=e.get(c.self);return b.type===d.X?(a={...a,status:"stopped",error:void 0},f.dispose?.()):f.receivers?.forEach(a=>a(b)),a},getInitialSnapshot:(a,b)=>({status:"active",output:void 0,error:void 0,input:b}),getPersistedSnapshot:a=>a,restoreSnapshot:a=>a}}let g="xstate.observable.next",h="xstate.observable.error",i="xstate.observable.complete";function j(a){return{config:a,transition:(a,b)=>{if("active"!==a.status)return a;switch(b.type){case g:return{...a,context:b.data};case h:return{...a,status:"error",error:b.data,input:void 0,_subscription:void 0};case i:return{...a,status:"done",input:void 0,_subscription:void 0};case d.X:return a._subscription.unsubscribe(),{...a,status:"stopped",input:void 0,_subscription:void 0};default:return a}},getInitialSnapshot:(a,b)=>({status:"active",output:void 0,error:void 0,context:void 0,input:b,_subscription:void 0}),start:(b,{self:c,system:d,emit:e})=>{"done"!==b.status&&(b._subscription=a({input:b.input,system:d,self:c,emit:e}).subscribe({next:a=>{d._relay(c,c,{type:g,data:a})},error:a=>{d._relay(c,c,{type:h,data:a})},complete:()=>{d._relay(c,c,{type:i})}}))},getPersistedSnapshot:({_subscription:a,...b})=>b,restoreSnapshot:a=>({...a,_subscription:void 0})}}function k(a){return{config:a,transition:(a,b)=>{if("active"!==a.status)return a;switch(b.type){case h:return{...a,status:"error",error:b.data,input:void 0,_subscription:void 0};case i:return{...a,status:"done",input:void 0,_subscription:void 0};case d.X:return a._subscription.unsubscribe(),{...a,status:"stopped",input:void 0,_subscription:void 0};default:return a}},getInitialSnapshot:(a,b)=>({status:"active",output:void 0,error:void 0,context:void 0,input:b,_subscription:void 0}),start:(b,{self:c,system:d,emit:e})=>{"done"!==b.status&&(b._subscription=a({input:b.input,system:d,self:c,emit:e}).subscribe({next:a=>{c._parent&&d._relay(c,c._parent,a)},error:a=>{d._relay(c,c,{type:h,data:a})},complete:()=>{d._relay(c,c,{type:i})}}))},getPersistedSnapshot:({_subscription:a,...b})=>b,restoreSnapshot:a=>({...a,_subscription:void 0})}}let l="xstate.promise.resolve",m="xstate.promise.reject",n=new WeakMap;function o(a){return{config:a,transition:(a,b,c)=>{if("active"!==a.status)return a;switch(b.type){case l:{let c=b.data;return{...a,status:"done",output:c,input:void 0}}case m:return{...a,status:"error",error:b.data,input:void 0};case d.X:return n.get(c.self)?.abort(),{...a,status:"stopped",input:void 0};default:return a}},start:(b,{self:c,system:d,emit:e})=>{if("active"!==b.status)return;let f=new AbortController;n.set(c,f),Promise.resolve(a({input:b.input,system:d,self:c,signal:f.signal,emit:e})).then(a=>{"active"===c.getSnapshot().status&&(n.delete(c),d._relay(c,c,{type:l,data:a}))},a=>{"active"===c.getSnapshot().status&&(n.delete(c),d._relay(c,c,{type:m,data:a}))})},getInitialSnapshot:(a,b)=>({status:"active",output:void 0,error:void 0,input:b}),getPersistedSnapshot:a=>a,restoreSnapshot:a=>a}}function p(a,b,c,e,{assignment:f}){if(!b.context)throw Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");let g={},h={context:b.context,event:c.event,spawn:function(a,{machine:b,context:c},e,f){return(g,h)=>{let i=((g,h)=>{if("string"!=typeof g)return(0,d.c)(g,{id:h?.id,parent:a.self,syncSnapshot:h?.syncSnapshot,input:h?.input,src:g,systemId:h?.systemId});{let i=(0,d.R)(b,g);if(!i)throw Error(`Actor logic '${g}' not implemented in machine '${b.id}'`);let j=(0,d.c)(i,{id:h?.id,parent:a.self,syncSnapshot:h?.syncSnapshot,input:"function"==typeof h?.input?h.input({context:c,event:e,self:a.self}):h?.input,src:g,systemId:h?.systemId});return f[j.id]=j,j}})(g,h);return f[i.id]=i,a.defer(()=>{i._processingStatus!==d.V.Stopped&&i.start()}),i}}(a,b,c.event,g),self:a.self,system:a.system},i={};if("function"==typeof f)i=f(h,e);else for(let a of Object.keys(f)){let b=f[a];i[a]="function"==typeof b?b(h,e):b}let j=Object.assign({},b.context,i);return[(0,d.W)(b,{context:j,children:Object.keys(g).length?{...b.children,...g}:b.children}),void 0,void 0]}function q(a){function b(a,b){}return b.type="xstate.assign",b.assignment=a,b.resolve=p,b}b=a=>void 0,c=0,a.s(["a",()=>q],986165);let r=new WeakMap;function s(a,b,c){let d=r.get(a);return d?b in d||(d[b]=c()):(d={[b]:c()},r.set(a,d)),d[b]}let t={},u=a=>"string"==typeof a?{type:a}:"function"==typeof a?"resolve"in a?{type:a.type}:{type:a.name}:a;class v{constructor(a,b){if(this.config=a,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=b._parent,this.key=b._key,this.machine=b._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(d.S),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?(0,d.l)(this.config.states,(a,b)=>new v(a,{_parent:this,_key:b,_machine:this.machine})):t,"compound"===this.type&&!this.config.initial)throw Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=!0===this.config.history?"shallow":this.config.history||!1,this.entry=(0,d.t)(this.config.entry).slice(),this.exit=(0,d.t)(this.config.exit).slice(),this.meta=this.config.meta,this.output="final"!==this.type&&this.parent?void 0:this.config.output,this.tags=(0,d.t)(a.tags).slice()}_initialize(){this.transitions=(0,d.q)(this),this.config.always&&(this.always=(0,d.u)(this.config.always).map(a=>(0,d.v)(this,d.N,a))),Object.keys(this.states).forEach(a=>{this.states[a]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(u),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(a=>`#${a.id}`),source:`#${this.id}`,actions:this.initial.actions.map(u),eventType:null})}:void 0,history:this.history,states:(0,d.l)(this.states,a=>a.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(a=>({...a,actions:a.actions.map(u)})),entry:this.entry.map(u),exit:this.exit.map(u),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return s(this,"invoke",()=>(0,d.t)(this.config.invoke).map((a,b)=>{let{src:c,systemId:e}=a,f=a.id??(0,d.x)(this.id,b),g="string"==typeof c?c:`xstate.invoke.${(0,d.x)(this.id,b)}`;return{...a,src:g,id:f,systemId:e,toJSON(){let{onDone:b,onError:c,...d}=a;return{...d,type:"xstate.invoke",src:g,id:f}}}}))}get on(){return s(this,"on",()=>[...this.transitions].flatMap(([a,b])=>b.map(b=>[a,b])).reduce((a,[b,c])=>(a[b]=a[b]||[],a[b].push(c),a),{}))}get after(){return s(this,"delayedTransitions",()=>(0,d.y)(this))}get initial(){return s(this,"initial",()=>(0,d.z)(this,this.config.initial))}next(a,b){let c,e=b.type,f=[];for(let g of s(this,`candidates-${e}`,()=>(0,d.B)(this,e))){let{guard:h}=g,i=a.context,j=!1;try{j=!h||(0,d.w)(h,i,b,a)}catch(b){let a="string"==typeof h?h:"object"==typeof h?h.type:void 0;throw Error(`Unable to evaluate guard ${a?`'${a}' `:""}in transition for event '${e}' in state node '${this.id}':
${b.message}`)}if(j){f.push(...g.actions),c=g;break}}return c?[c]:void 0}get events(){return s(this,"events",()=>{let{states:a}=this,b=new Set(this.ownEvents);if(a)for(let c of Object.keys(a)){let d=a[c];if(d.states)for(let a of d.events)b.add(`${a}`)}return Array.from(b)})}get ownEvents(){return Array.from(new Set([...this.transitions.keys()].filter(a=>this.transitions.get(a).some(a=>!(!a.target&&!a.actions.length&&!a.reenter)))))}}class w{constructor(a,b){this.config=a,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=a.id||"(machine)",this.implementations={actors:b?.actors??{},actions:b?.actions??{},delays:b?.delays??{},guards:b?.guards??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new v(a,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(a){let{actions:b,guards:c,actors:d,delays:e}=this.implementations;return new w(this.config,{actions:{...b,...a.actions},guards:{...c,...a.guards},actors:{...d,...a.actors},delays:{...e,...a.delays}})}resolveState(a){let b=(0,d.C)(this.root,a.value),c=(0,d.D)((0,d.g)(this.root,b));return(0,d.E)({_nodes:[...c],context:a.context||{},children:{},status:(0,d.F)(c,this.root)?"done":a.status||"active",output:a.output,error:a.error,historyValue:a.historyValue},this)}transition(a,b,c){return(0,d.G)(a,b,c,[]).snapshot}microstep(a,b,c){return(0,d.G)(a,b,c,[]).microstates}getTransitionData(a,b){return(0,d.H)(this.root,a.value,a,b)||[]}getPreInitialState(a,b,c){let{context:e}=this.config,f=(0,d.E)({context:"function"!=typeof e&&e?e:{},_nodes:[this.root],children:{},status:"active"},this);return"function"==typeof e?(0,d.I)(f,b,a,[q(({spawn:a,event:b,self:c})=>e({spawn:a,input:b.input,self:c}))],c,void 0):f}getInitialSnapshot(a,b){let c=(0,d.J)(b),e=[],f=this.getPreInitialState(a,c,e),g=(0,d.K)([{target:[...(0,d.L)(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],f,a,c,!0,e),{snapshot:h}=(0,d.G)(g,c,a,e);return h}start(a){Object.values(a.children).forEach(a=>{"active"===a.getSnapshot().status&&a.start()})}getStateNodeById(a){let b=(0,d.M)(a),c=b.slice(1),e=(0,d.O)(b[0])?b[0].slice(1):b[0],f=this.idMap.get(e);if(!f)throw Error(`Child state node '#${e}' does not exist on machine '${this.id}'`);return(0,d.P)(f,c)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(a,b){return(0,d.Q)(a,b)}restoreSnapshot(a,b){let c={},e=a.children;Object.keys(e).forEach(a=>{let f=e[a],g=f.snapshot,h=f.src,i="string"==typeof h?(0,d.R)(this,h):h;if(!i)return;let j=(0,d.c)(i,{id:a,parent:b.self,syncSnapshot:f.syncSnapshot,snapshot:g,src:h,systemId:f.systemId});c[a]=j});let f=function(a,b){if(!b||"object"!=typeof b)return{};let c={};for(let d in b)for(let e of b[d]){let b=function(a,b){if(b instanceof v)return b;try{return a.machine.getStateNodeById(b.id)}catch{}}(a,e);b&&(c[d]??=[],c[d].push(b))}return c}(this.root,a.historyValue),g=(0,d.E)({...a,children:c,_nodes:Array.from((0,d.D)((0,d.g)(this.root,a.value))),historyValue:f},this),h=new Set;return!function a(b,c){if(!h.has(b))for(let e in h.add(b),b){let f=b[e];if(f&&"object"==typeof f){if("xstate$$type"in f&&f.xstate$$type===d.$){b[e]=c[f.id];continue}a(f,c)}}}(g.context,c),g}}function x(a,b){let c=(0,d.t)(b);if(!c.includes(a.type)){let b=1===c.length?`type "${c[0]}"`:`one of types "${c.join('", "')}"`;throw Error(`Expected event ${JSON.stringify(a)} to have ${b}`)}}function y({schemas:a,actors:b,actions:c,guards:d,delays:e}){return{createStateConfig:a=>a,createMachine:f=>new w({...f,schemas:a},{actors:b,actions:c,guards:d,delays:e})}}},622492,a=>{"use strict";a.s(["a",()=>m,"b",()=>k,"e",()=>f,"l",()=>p]);var b=a.i(406329),c=a.i(986165);function d(a,b,c,d,{event:e}){return[b,{event:"function"==typeof e?e(c,d):e},void 0]}function e(a,{event:b}){a.defer(()=>a.emit(b))}function f(a){function b(a,b){}return b.type="xstate.emit",b.event=a,b.resolve=d,b.execute=e,b}let g=function(a){return a.Parent="#_parent",a.Internal="#_internal",a}({});function h(a,b,c,d,{to:e,event:f,id:h,delay:i},j){let k,l,m=b.machine.implementations.delays;if("string"==typeof f)throw Error(`Only event objects may be used with sendTo; use sendTo({ type: "${f}" }) instead`);let n="function"==typeof f?f(c,d):f;if("string"==typeof i){let a=m&&m[i];k="function"==typeof a?a(c,d):a}else k="function"==typeof i?i(c,d):i;let o="function"==typeof e?e(c,d):e;if("string"==typeof o){if(!(l=o===g.Parent?a.self._parent:o===g.Internal?a.self:o.startsWith("#_")?b.children[o.slice(2)]:j.deferredActorIds?.includes(o)?o:b.children[o]))throw Error(`Unable to send event to actor '${o}' from machine '${b.machine.id}'.`)}else l=o||a.self;return[b,{to:l,targetId:"string"==typeof o?o:void 0,event:n,id:h,delay:k},void 0]}function i(a,b,c){"string"==typeof c.to&&(c.to=b.children[c.to])}function j(a,c){a.defer(()=>{let{to:d,event:e,delay:f,id:g}=c;if("number"==typeof f)return void a.system.scheduler.schedule(a.self,d,e,f,g);a.system._relay(a.self,d,e.type===b.T?(0,b.U)(a.self.id,e.data):e)})}function k(a,b,c){function d(a,b){}return d.type="xstate.sendTo",d.to=a,d.event=b,d.id=c?.id,d.delay=c?.delay,d.resolve=h,d.retryResolve=i,d.execute=j,d}function l(a,d,e,h,{collect:i}){let j=[],l=function(a){j.push(a)};return l.assign=(...a)=>{j.push((0,c.a)(...a))},l.cancel=(...a)=>{j.push((0,b.f)(...a))},l.raise=(...a)=>{j.push((0,b.r)(...a))},l.sendTo=(...a)=>{j.push(k(...a))},l.sendParent=(...a)=>{j.push(function(a,b){return k(g.Parent,a,b)}(...a))},l.spawnChild=(...a)=>{j.push((0,b.h)(...a))},l.stopChild=(...a)=>{j.push((0,b.k)(...a))},l.emit=(...a)=>{j.push(f(...a))},i({context:e.context,event:e.event,enqueue:l,check:a=>(0,b.w)(a,d.context,e.event,d),self:a.self,system:a.system},h),[d,void 0,j]}function m(a){function b(a,b){}return b.type="xstate.enqueueActions",b.collect=a,b.resolve=l,b}function n(a,b,c,d,{value:e,label:f}){return[b,{value:"function"==typeof e?e(c,d):e,label:f},void 0]}function o({logger:a},{value:b,label:c}){c?a(c,b):a(b)}function p(a=({context:a,event:b})=>({context:a,event:b}),b){function c(a,b){}return c.type="xstate.log",c.value=a,c.label=b,c.resolve=n,c.execute=o,c}},746974,a=>{"use strict";a.s(["sendTo",()=>b.b]);var b=a.i(622492)},528817,a=>{"use strict";a.s(["assign",()=>b.a]);var b=a.i(986165)},993016,a=>{"use strict";a.s(["createActor",()=>b.c]);var b=a.i(406329)},430702,a=>{"use strict";a.s(["enqueueActions",()=>b.a]);var b=a.i(622492)},800118,a=>{"use strict";a.s(["raise",()=>b.r]);var b=a.i(406329)},581714,a=>{"use strict";a.s(["emit",()=>b.e]);var b=a.i(622492)},57430,a=>{"use strict";a.s(["DOMAIN",()=>p,"MSG_DISCONNECT",()=>s,"MSG_HANDSHAKE_ACK",()=>v,"MSG_HANDSHAKE_SYN",()=>t,"MSG_HANDSHAKE_SYN_ACK",()=>u,"MSG_HEARTBEAT",()=>r,"MSG_RESPONSE",()=>q,"createConnectionMachine",()=>y,"createController",()=>C,"createListenLogic",()=>o,"createNode",()=>E,"createNodeMachine",()=>D,"createRequestMachine",()=>w],57430);var b=a.i(446799),c=a.i(98020),d=a.i(170923),e=a.i(746974),f=a.i(528817),g=a.i(993016),h=a.i(430702),i=a.i(800118),j=a.i(581714),k=a.i(406329),k=k,l=a.i(952535);let m=a=>({context:b})=>{let{count:c,include:d,exclude:e,responseType:f="message.received"}=a;return{count:c,domain:b.domain,from:b.connectTo,include:d?Array.isArray(d)?d:[d]:[],exclude:e?Array.isArray(e)?e:[e]:[],responseType:f,target:b.target,to:b.name}},n=(0,l.defer)(()=>(0,l.fromEvent)(window,"message")),o=a=>(0,c.fromEventObservable)(({input:b})=>{let c;return n.pipe(a?(0,l.map)(a):(0,l.pipe)(),(0,l.filter)((a=>b=>{let{data:c}=b;return(!a.include.length||a.include.includes(c.type))&&(!a.exclude.length||!a.exclude.includes(c.type))&&c.domain===a.domain&&c.from===a.from&&c.to===a.to&&(!a.target||b.source===a.target)})(b)),(0,l.map)((c=b.responseType,a=>({type:c,message:a}))),b.count?(0,l.pipe)((0,l.bufferCount)(b.count),(0,l.concatMap)(a=>a),(0,l.take)(b.count)):(0,l.pipe)())}),p="sanity/comlink",q="comlink/response",r="comlink/heartbeat",s="comlink/disconnect",t="comlink/handshake/syn",u="comlink/handshake/syn-ack",v="comlink/handshake/ack",w=()=>(0,d.setup)({types:{},actors:{listen:(0,c.fromEventObservable)(({input:a})=>{let b,c=a.signal?(0,l.fromEvent)(a.signal,"abort").pipe((b=`Request ${a.requestId} aborted`,a=>a.pipe((0,l.take)(1),(0,l.map)(()=>{throw Error(b)})))):l.EMPTY;return(0,l.fromEvent)(window,"message").pipe((0,l.filter)(b=>b.data?.type===q&&b.data?.responseTo===a.requestId&&!!b.source&&a.sources.has(b.source)),(0,l.take)(a.sources.size),(0,l.takeUntil)(c))})},actions:{"send message":({context:a},b)=>{let{sources:c,targetOrigin:d}=a,{message:e}=b;c.forEach(a=>{a.postMessage(e,{targetOrigin:d})})},"on success":(0,e.sendTo)(({context:a})=>a.parentRef,({context:a,self:b})=>(a.response&&a.resolvable?.resolve(a.response),{type:"request.success",requestId:b.id,response:a.response,responseTo:a.responseTo})),"on fail":(0,e.sendTo)(({context:a})=>a.parentRef,({context:a,self:b})=>(a.suppressWarnings||console.warn(`[@sanity/comlink] Received no response to message '${a.type}' on client '${a.from}' (ID: '${a.id}').`),a.resolvable?.reject(Error("No response received")),{type:"request.failed",requestId:b.id})),"on abort":(0,e.sendTo)(({context:a})=>a.parentRef,({context:a,self:b})=>(a.resolvable?.reject(Error("Request aborted")),{type:"request.aborted",requestId:b.id}))},guards:{expectsResponse:({context:a})=>a.expectResponse},delays:{initialTimeout:0,responseTimeout:({context:a})=>a.responseTimeout??3e3}}).createMachine({context:({input:a})=>({channelId:a.channelId,data:a.data,domain:a.domain,expectResponse:a.expectResponse??!1,from:a.from,id:`msg-${(0,b.v4)()}`,parentRef:a.parentRef,resolvable:a.resolvable,response:null,responseTimeout:a.responseTimeout,responseTo:a.responseTo,signal:a.signal,sources:a.sources instanceof Set?a.sources:new Set([a.sources]),suppressWarnings:a.suppressWarnings,targetOrigin:a.targetOrigin,to:a.to,type:a.type}),initial:"idle",on:{abort:".aborted"},states:{idle:{after:{initialTimeout:[{target:"sending"}]}},sending:{entry:{type:"send message",params:({context:a})=>{let{channelId:b,data:c,domain:d,from:e,id:f,responseTo:g,to:h,type:i}=a;return{message:{channelId:b,data:c,domain:d,from:e,id:f,to:h,type:i,responseTo:g}}}},always:[{guard:"expectsResponse",target:"awaiting"},"success"]},awaiting:{invoke:{id:"listen for response",src:"listen",input:({context:a})=>({requestId:a.id,sources:a.sources,signal:a.signal}),onError:"aborted"},after:{responseTimeout:"failed"},on:{message:{actions:(0,f.assign)({response:({event:a})=>a.data.data,responseTo:({event:a})=>a.data.responseTo}),target:"success"}}},failed:{type:"final",entry:"on fail"},success:{type:"final",entry:"on success"},aborted:{type:"final",entry:"on abort"}},output:({context:a,self:b})=>({requestId:b.id,response:a.response,responseTo:a.responseTo})}),x=(0,c.fromCallback)(({sendBack:a,input:b})=>{let c=()=>{a(b.event)};b.immediate&&c();let d=setInterval(c,b.interval);return()=>{clearInterval(d)}}),y=()=>(0,d.setup)({types:{},actors:{requestMachine:w(),listen:o(),sendBackAtInterval:x},actions:{"buffer message":(0,h.enqueueActions)(({enqueue:a})=>{a.assign({buffer:({event:a,context:b})=>((0,d.assertEvent)(a,"post"),[...b.buffer,a.data])}),a.emit(({event:a})=>((0,d.assertEvent)(a,"post"),{type:"buffer.added",message:a.data}))}),"create request":(0,f.assign)({requests:({context:a,event:c,self:e,spawn:f})=>{(0,d.assertEvent)(c,"request");let g=(Array.isArray(c.data)?c.data:[c.data]).map(c=>f("requestMachine",{id:`req-${(0,b.v4)()}`,input:{channelId:a.channelId,data:c.data,domain:a.domain,expectResponse:c.expectResponse,from:a.name,parentRef:e,responseTo:c.responseTo,sources:a.target,targetOrigin:a.targetOrigin,to:a.connectTo,type:c.type}}));return[...a.requests,...g]}}),"emit received message":(0,h.enqueueActions)(({enqueue:a})=>{a.emit(({event:a})=>((0,d.assertEvent)(a,"message.received"),{type:"message",message:a.message.data}))}),"emit status":(0,j.emit)((a,b)=>({type:"status",status:b.status})),"post message":(0,i.raise)(({event:a})=>((0,d.assertEvent)(a,"post"),{type:"request",data:{data:a.data.data,expectResponse:!0,type:a.data.type}})),"remove request":(0,h.enqueueActions)(({context:a,enqueue:b,event:c})=>{(0,d.assertEvent)(c,["request.success","request.failed","request.aborted"]),(0,k.k)(c.requestId),b.assign({requests:a.requests.filter(({id:a})=>a!==c.requestId)})}),respond:(0,i.raise)(({event:a})=>((0,d.assertEvent)(a,"response"),{type:"request",data:{data:a.data,type:q,responseTo:a.respondTo}})),"send handshake ack":(0,i.raise)({type:"request",data:{type:v}}),"send disconnect":(0,i.raise)(()=>({type:"request",data:{type:s}})),"send handshake syn":(0,i.raise)({type:"request",data:{type:t}}),"send pending messages":(0,h.enqueueActions)(({enqueue:a})=>{a.raise(({context:a})=>({type:"request",data:a.buffer.map(({data:a,type:b})=>({data:a,type:b}))})),a.emit(({context:a})=>({type:"buffer.flushed",messages:a.buffer})),a.assign({buffer:[]})}),"set target":(0,f.assign)({target:({event:a})=>((0,d.assertEvent)(a,"target.set"),a.target)})},guards:{"has target":({context:a})=>!!a.target,"should send heartbeats":({context:a})=>a.heartbeat}}).createMachine({id:"connection",context:({input:a})=>({id:a.id||`${a.name}-${(0,b.v4)()}`,buffer:[],channelId:`chn-${(0,b.v4)()}`,connectTo:a.connectTo,domain:a.domain??p,heartbeat:a.heartbeat??!1,name:a.name,requests:[],target:a.target,targetOrigin:a.targetOrigin}),on:{"target.set":{actions:"set target"},"request.success":{actions:"remove request"},"request.failed":{actions:"remove request"}},initial:"idle",states:{idle:{entry:[{type:"emit status",params:{status:"idle"}}],on:{connect:{target:"handshaking",guard:"has target"},post:{actions:"buffer message"}}},handshaking:{id:"handshaking",entry:[{type:"emit status",params:{status:"handshaking"}}],invoke:[{id:"send syn",src:"sendBackAtInterval",input:()=>({event:{type:"syn"},interval:500,immediate:!0})},{id:"listen for handshake",src:"listen",input:a=>m({include:u,count:1})(a)}],on:{syn:{actions:"send handshake syn"},request:{actions:"create request"},post:{actions:"buffer message"},"message.received":{target:"connected"},disconnect:{target:"disconnected"}},exit:"send handshake ack"},connected:{entry:["send pending messages",{type:"emit status",params:{status:"connected"}}],invoke:{id:"listen for messages",src:"listen",input:m({exclude:[q,r]})},on:{post:{actions:"post message"},request:{actions:"create request"},response:{actions:"respond"},"message.received":{actions:"emit received message"},disconnect:{target:"disconnected"}},initial:"heartbeat",states:{heartbeat:{initial:"checking",states:{checking:{always:{guard:"should send heartbeats",target:"sending"}},sending:{on:{"request.failed":{target:"#handshaking"}},invoke:{id:"send heartbeat",src:"sendBackAtInterval",input:()=>({event:{type:"post",data:{type:r,data:void 0}},interval:2e3,immediate:!1})}}}}}},disconnected:{id:"disconnected",entry:["send disconnect",{type:"emit status",params:{status:"disconnected"}}],on:{request:{actions:"create request"},post:{actions:"buffer message"},connect:{target:"handshaking",guard:"has target"}}}}}),z=(a,c=y())=>{let d=a.id||`${a.name}-${(0,b.v4)()}`,e=(0,g.createActor)(c,{input:{...a,id:d}}),f=new Map,h=new Map;e.on("message",async({message:a})=>{let b=f.get(a.type);if(b)return void b.forEach(async b=>{let c=await b(a.data);c&&e.send({type:"response",respondTo:a.id,data:c})});let c=h.get(a.type);c?c.add(a):h.set(a.type,new Set([a]))});let i=()=>{e.stop()};return{actor:e,connect:()=>{e.send({type:"connect"})},disconnect:()=>{e.send({type:"disconnect"})},id:d,name:a.name,machine:c,on:(a,b,c)=>{let d=f.get(a)||new Set;f.has(a)||f.set(a,d),d.add(b);let g=h.get(a);if(g){let d=c?.replay??1;Array.from(g).slice(-d).forEach(async({data:a,id:c})=>{let d=await b(a);d&&e.send({type:"response",respondTo:c,data:d})}),h.delete(a)}return()=>{d.delete(b)}},onStatus:(a,b)=>{let{unsubscribe:c}=e.on("status",c=>{b&&c.status!==b||a(c.status)});return c},post:(a,b)=>{e.send({type:"post",data:{type:a,data:b}})},setTarget:a=>{e.send({type:"target.set",target:a})},start:()=>(e.start(),i),stop:i,get target(){return e.getSnapshot().context.target}}},A=a=>{a.disconnect(),setTimeout(()=>{a.stop()},0)},B=()=>{},C=a=>{let{targetOrigin:b}=a,c=new Set,d=new Set;return{addTarget:a=>{if(c.has(a))return B;if(!c.size||!d.size)return c.add(a),d.forEach(b=>{b.connections.forEach(b=>{b.setTarget(a),b.connect()})}),()=>{c.delete(a),d.forEach(b=>{b.connections.forEach(b=>{b.target===a&&b.disconnect()})})};c.add(a);let e=new Set;return d.forEach(c=>{let d=z({...c.input,target:a,targetOrigin:b},c.machine);e.add(d),c.connections.add(d),c.subscribers.forEach(({type:a,handler:b,unsubscribers:c})=>{c.push(d.on(a,b))}),c.internalEventSubscribers.forEach(({type:a,handler:b,unsubscribers:c})=>{c.push(d.actor.on(a,b).unsubscribe)}),c.statusSubscribers.forEach(({handler:a,unsubscribers:b})=>{b.push(d.onStatus(b=>a({connection:d.id,status:b})))}),d.start(),d.connect()}),()=>{c.delete(a),e.forEach(a=>{A(a),d.forEach(b=>{b.connections.delete(a)})})}},createChannel:(a,e=y())=>{let f={connections:new Set,input:a,internalEventSubscribers:new Set,machine:e,statusSubscribers:new Set,subscribers:new Set};d.add(f);let{connections:g,internalEventSubscribers:h,statusSubscribers:i,subscribers:j}=f;if(c.size)c.forEach(c=>{let d=z({...a,target:c,targetOrigin:b},e);g.add(d)});else{let c=z({...a,targetOrigin:b},e);g.add(c)}let k=()=>{let a=f.connections;a.forEach(A),a.clear(),d.delete(f)};return{on:(a,b)=>{let c=[];g.forEach(d=>{c.push(d.on(a,b))});let d={type:a,handler:b,unsubscribers:c};return j.add(d),()=>{c.forEach(a=>a()),j.delete(d)}},onInternalEvent:(a,b)=>{let c=[];g.forEach(d=>{c.push(d.actor.on(a,b).unsubscribe)});let d={type:a,handler:b,unsubscribers:c};return h.add(d),()=>{c.forEach(a=>a()),h.delete(d)}},onStatus:a=>{let b=[];g.forEach(c=>{b.push(c.onStatus(b=>a({connection:c.id,status:b})))});let c={handler:a,unsubscribers:b};return i.add(c),()=>{b.forEach(a=>a()),i.delete(c)}},post:(...a)=>{let[b,c]=a;g.forEach(a=>{a.post(b,c)})},start:()=>(g.forEach(a=>{a.start(),a.connect()}),k),stop:k}},destroy:()=>{d.forEach(({connections:a})=>{a.forEach(A),a.clear()}),d.clear(),c.clear()}}},D=()=>(0,d.setup)({types:{},actors:{requestMachine:w(),listen:o()},actions:{"buffer handshake":(0,f.assign)({handshakeBuffer:({event:a,context:b})=>((0,d.assertEvent)(a,"message.received"),[...b.handshakeBuffer,a])}),"buffer message":(0,h.enqueueActions)(({enqueue:a})=>{a.assign({buffer:({event:a,context:b})=>((0,d.assertEvent)(a,"post"),[...b.buffer,{data:a.data,resolvable:a.resolvable,options:a.options}])}),a.emit(({event:a})=>((0,d.assertEvent)(a,"post"),{type:"buffer.added",message:a.data}))}),"create request":(0,f.assign)({requests:({context:a,event:c,self:e,spawn:f})=>{(0,d.assertEvent)(c,"request");let g=(Array.isArray(c.data)?c.data:[c.data]).map(c=>f("requestMachine",{id:`req-${(0,b.v4)()}`,input:{channelId:a.channelId,data:c.data,domain:a.domain,expectResponse:c.expectResponse,from:a.name,parentRef:e,resolvable:c.resolvable,responseTimeout:c.options?.responseTimeout,responseTo:c.responseTo,signal:c.options?.signal,sources:a.target,suppressWarnings:c.options?.suppressWarnings,targetOrigin:a.targetOrigin,to:a.connectTo,type:c.type}}));return[...a.requests,...g]}}),"emit heartbeat":(0,j.emit)(()=>({type:"heartbeat"})),"emit received message":(0,h.enqueueActions)(({enqueue:a})=>{a.emit(({event:a})=>((0,d.assertEvent)(a,"message.received"),{type:"message",message:a.message.data}))}),"emit status":(0,j.emit)((a,b)=>({type:"status",status:b.status})),"post message":(0,i.raise)(({event:a})=>((0,d.assertEvent)(a,"post"),{type:"request",data:{data:a.data.data,expectResponse:!!a.resolvable,type:a.data.type,resolvable:a.resolvable,options:a.options}})),"process pending handshakes":(0,h.enqueueActions)(({context:a,enqueue:b})=>{a.handshakeBuffer.forEach(a=>b.raise(a)),b.assign({handshakeBuffer:[]})}),"remove request":(0,h.enqueueActions)(({context:a,enqueue:b,event:c})=>{(0,d.assertEvent)(c,["request.success","request.failed","request.aborted"]),(0,k.k)(c.requestId),b.assign({requests:a.requests.filter(({id:a})=>a!==c.requestId)})}),"send response":(0,i.raise)(({event:a})=>((0,d.assertEvent)(a,["message.received","heartbeat.received"]),{type:"request",data:{type:q,responseTo:a.message.data.id,data:void 0}})),"send handshake syn ack":(0,i.raise)({type:"request",data:{type:u}}),"send pending messages":(0,h.enqueueActions)(({enqueue:a})=>{a.raise(({context:a})=>({type:"request",data:a.buffer.map(({data:a,resolvable:b,options:c})=>({data:a.data,type:a.type,expectResponse:!!b,resolvable:b,options:c}))})),a.emit(({context:a})=>({type:"buffer.flushed",messages:a.buffer.map(({data:a})=>a)})),a.assign({buffer:[]})}),"set connection config":(0,f.assign)({channelId:({event:a})=>((0,d.assertEvent)(a,"handshake.syn"),a.message.data.channelId),target:({event:a})=>((0,d.assertEvent)(a,"handshake.syn"),a.message.source||void 0),targetOrigin:({event:a})=>((0,d.assertEvent)(a,"handshake.syn"),a.message.origin)})},guards:{hasSource:({context:a})=>null!==a.target}}).createMachine({id:"node",context:({input:a})=>({buffer:[],channelId:null,connectTo:a.connectTo,domain:a.domain??p,handshakeBuffer:[],name:a.name,requests:[],target:void 0,targetOrigin:null}),invoke:{id:"listen for handshake syn",src:"listen",input:m({include:t,responseType:"handshake.syn"})},on:{"request.success":{actions:"remove request"},"request.failed":{actions:"remove request"},"request.aborted":{actions:"remove request"},"handshake.syn":{actions:"set connection config",target:".handshaking"}},initial:"idle",states:{idle:{entry:[{type:"emit status",params:{status:"idle"}}],on:{post:{actions:"buffer message"}}},handshaking:{guard:"hasSource",entry:["send handshake syn ack",{type:"emit status",params:{status:"handshaking"}}],invoke:[{id:"listen for handshake ack",src:"listen",input:m({include:v,count:1,responseType:"handshake.complete"}),onDone:"connected"},{id:"listen for disconnect",src:"listen",input:m({include:s,count:1,responseType:"disconnect"})},{id:"listen for messages",src:"listen",input:m({exclude:[s,t,v,r,q]})}],on:{request:{actions:"create request"},post:{actions:"buffer message"},"message.received":{actions:"buffer handshake"},disconnect:{target:"idle"}}},connected:{entry:["process pending handshakes","send pending messages",{type:"emit status",params:{status:"connected"}}],invoke:[{id:"listen for messages",src:"listen",input:m({exclude:[s,t,v,r,q]})},{id:"listen for heartbeat",src:"listen",input:m({include:r,responseType:"heartbeat.received"})},{id:"listen for disconnect",src:"listen",input:m({include:s,count:1,responseType:"disconnect"})}],on:{request:{actions:"create request"},post:{actions:"post message"},disconnect:{target:"idle"},"message.received":{actions:["send response","emit received message"]},"heartbeat.received":{actions:["send response","emit heartbeat"]}}}}}),E=(a,b=D())=>{let c,d=(0,g.createActor)(b,{input:a}),e=new Map,f=new Map;d.on("message",({message:a})=>{let b=e.get(a.type);if(b)return void b.forEach(b=>b(a.data));let c=f.get(a.type);c?c.add(a):f.set(a.type,new Set([a]))});let h=()=>{d.stop()};return{actor:d,fetch:(a,b,c)=>{let{responseTimeout:e=1e4,signal:f,suppressWarnings:g}=c||{},h=function(){let a,b;return"function"==typeof Promise.withResolvers?Promise.withResolvers():{promise:new Promise((c,d)=>{a=c,b=d}),resolve:a,reject:b}}();return d.send({type:"post",data:{type:a,data:b},resolvable:h,options:{responseTimeout:e,signal:f,suppressWarnings:g}}),h.promise},machine:b,on:(a,b,c)=>{let d=e.get(a)||new Set;e.has(a)||e.set(a,d),d.add(b);let g=f.get(a);if(g){let d=c?.replay??1;Array.from(g).slice(-d).forEach(({data:a})=>b(a)),f.delete(a)}return()=>{d.delete(b)}},onStatus:(a,b)=>{let{unsubscribe:e}=d.on("status",d=>{c=d.status,b&&d.status!==b||a(d.status)});return c&&a(c),e},post:(a,b)=>{d.send({type:"post",data:{type:a,data:b}})},start:()=>(d.start(),h),stop:h}}}];

//# sourceMappingURL=node_modules_cc27f135._.js.map