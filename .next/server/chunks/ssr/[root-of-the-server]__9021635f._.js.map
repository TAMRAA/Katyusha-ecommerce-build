{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///Users/tamra/Desktop/Katyusha-ecommerce/ecommerce-build/app/%28store%29/basket/page.tsx"],"sourcesContent":["// \"use client\";\n\n// import useBasketStore from \"@/app/(store)/store/store\";\n// import { SignInButton, useAuth, useUser } from \"@clerk/nextjs\";\n// import { useRouter } from \"next/navigation\";\n// import { useState, useEffect } from \"react\";\n// import AddToBasketButton from \"@/components/addToBasketButton\";\n// import Image from \"next/image\";\n// import { imageUrl } from \"@/lib/imageUrl\";\n// import Loader from \"@/components/Loader\";\n\n// import {\n//   createCheckoutSession,\n//   Metadata,\n// } from \"@/actions/createCheckoutSession\";\n\n// function BasketPage() {\n//   const groupedItems = useBasketStore((state) => state.getGroupedItems());\n//   const { isSignedIn } = useAuth();\n//   const { user } = useUser();\n//   const router = useRouter();\n//   const [isClient, setIsClient] = useState(false);\n//   const [isLoading, setIsLoading] = useState(false);\n\n//   useEffect(() => {\n//     setIsClient(true);\n//   }, []);\n\n//   if (!isClient) {\n//     return <Loader />;\n//   }\n\n//   if (groupedItems.length === 0) {\n//     return (\n//       <div className=\"container mx-auto p-4 flex flex-col items-center justify-center min-h-[50vh]\">\n//         <h1 className=\"text-2xl font-bold mb-6 text-gray-800\">Your Basket</h1>\n//         <p className=\"text-gray-600 text-lg\">Your basket is empty...</p>\n//       </div>\n//     );\n//   }\n\n//   const handleCheckout = async () => {\n//     if (!isSignedIn) return;\n//     setIsLoading(true);\n\n//     try {\n//       const metadata: Metadata = {\n//         orderNumber: crypto.randomUUID(),\n//         customerName: user?.fullName ?? \"Unknown\",\n//         customerEmail: user?.emailAddresses[0].emailAddress ?? \"Unknown\",\n//         clerkUserId: user!.id,\n//       };\n//       const checkoutUrl = await createCheckoutSession(groupedItems, metadata);\n//       if (checkoutUrl) {\n//         window.location.href = checkoutUrl;\n//       }\n//     } catch (error) {\n//       console.error(\"Error creating checkout session:\", error);\n//     } finally {\n//       setIsLoading(false);\n//     }\n//   };\n\n//   return (\n//     <div className=\"container mx-auto p-4 max-w-6xl\">\n//       <h1 className=\"text-2xl font-bold mb-4\">Your Basket</h1>\n//       <div className=\"flex flex-col lg:flex-row gap-8\">\n//         <div className=\"flex-grow\">\n//           {groupedItems.map((item) => (\n//             <div\n//               key={item.product._id}\n//               className=\"mb-4 p-4 border flex items-center justify-between\"\n//             >\n//               <div\n//                 className=\"flex items-center cursor-pointer flex-1 min-w-0\"\n//                 onClick={() =>\n//                   router.push(`/product/${item.product.slug?.current}`)\n//                 }\n//               >\n//                 <div className=\"w-20 h-20 sm:w-24 sm:h-24 flex-shrink-0 mr-4\">\n//                   {item.product.image && (\n//                     <Image\n//                       src={imageUrl(item.product.image).url()}\n//                       alt={item.product.name ?? \"Product image\"}\n//                       className=\"w-full h-full object-cover rounded\"\n//                       width={96}\n//                       height={96}\n//                     />\n//                   )}\n//                 </div>\n//                 <div className=\"min-w-0\">\n//                   <h2 className=\"text-lg sm:text-xl font-semibold truncate\">\n//                     {item.product.name}\n//                   </h2>\n//                   <p className=\"text-sm sm:text-base\">\n//                     Price: $\n//                     {((item.product.price ?? 0) * item.quantity).toFixed(2)}\n//                   </p>\n//                 </div>\n//               </div>\n//               <div className=\"flex items-center ml-4 flex-shrink-0\">\n//                 <AddToBasketButton product={item.product} />\n//               </div>\n//             </div>\n//           ))}\n//         </div>\n//         <div className=\"w-full lg:w-80 lg:sticky lg:top-4 h-fit bg-white p-6 border rounded order-first lg:order-last fixed bottom-0 left-0 lg:left-auto\">\n//           <h3 className=\"text-xl font-semibold\">Order Summary</h3>\n//           <div className=\"mt-4 space-y-2\">\n//             <p className=\"flex justify-between\">\n//               <span>Items:</span>\n//               <span>\n//                 {groupedItems.reduce((total, item) => total + item.quantity, 0)}\n//               </span>\n//             </p>\n//             <p className=\"flex justify-between text-2xl font-bold border-t pt-2\">\n//               <span>Total:</span>\n//               <span>\n//                 {useBasketStore.getState().getTotalPrice().toFixed(2)}$\n//               </span>\n//             </p>\n//           </div>\n//           {isSignedIn ? (\n//             <button\n//               onClick={handleCheckout}\n//               disabled={isLoading}\n//               className=\"mt-4 w-full bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:bg-gray-400\"\n//             >\n//               {isLoading ? \"Processing...\" : \"Checkout\"}\n//             </button>\n//           ) : (\n//             <SignInButton mode=\"modal\">\n//               <button className=\"mt-4 w-full bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\">\n//                 Sign in to Checkout\n//               </button>\n//             </SignInButton>\n//           )}\n//         </div>\n//         <div className=\"h-64 lg:h-0\">\n//           {/* Spacer for fixed checkout on mobile */}\n//         </div>\n//       </div>\n//     </div>\n//   );\n// }\n\n// export default BasketPage;\n"],"names":[],"mappings":"AAAA,gBAAgB;AAEhB,0DAA0D;AAC1D,kEAAkE;AAClE,+CAA+C;AAC/C,+CAA+C;AAC/C,kEAAkE;AAClE,kCAAkC;AAClC,6CAA6C;AAC7C,4CAA4C;AAE5C,WAAW;AACX,2BAA2B;AAC3B,cAAc;AACd,4CAA4C;AAE5C,0BAA0B;AAC1B,6EAA6E;AAC7E,sCAAsC;AACtC,gCAAgC;AAChC,gCAAgC;AAChC,qDAAqD;AACrD,uDAAuD;AAEvD,sBAAsB;AACtB,yBAAyB;AACzB,YAAY;AAEZ,qBAAqB;AACrB,yBAAyB;AACzB,MAAM;AAEN,qCAAqC;AACrC,eAAe;AACf,uGAAuG;AACvG,iFAAiF;AACjF,2EAA2E;AAC3E,eAAe;AACf,SAAS;AACT,MAAM;AAEN,yCAAyC;AACzC,+BAA+B;AAC/B,0BAA0B;AAE1B,YAAY;AACZ,qCAAqC;AACrC,4CAA4C;AAC5C,qDAAqD;AACrD,4EAA4E;AAC5E,iCAAiC;AACjC,WAAW;AACX,iFAAiF;AACjF,2BAA2B;AAC3B,8CAA8C;AAC9C,UAAU;AACV,wBAAwB;AACxB,kEAAkE;AAClE,kBAAkB;AAClB,6BAA6B;AAC7B,QAAQ;AACR,OAAO;AAEP,aAAa;AACb,wDAAwD;AACxD,iEAAiE;AACjE,0DAA0D;AAC1D,sCAAsC;AACtC,0CAA0C;AAC1C,mBAAmB;AACnB,uCAAuC;AACvC,8EAA8E;AAC9E,gBAAgB;AAChB,qBAAqB;AACrB,8EAA8E;AAC9E,iCAAiC;AACjC,0EAA0E;AAC1E,oBAAoB;AACpB,kBAAkB;AAClB,iFAAiF;AACjF,6CAA6C;AAC7C,6BAA6B;AAC7B,iEAAiE;AACjE,mEAAmE;AACnE,uEAAuE;AACvE,mCAAmC;AACnC,oCAAoC;AACpC,yBAAyB;AACzB,uBAAuB;AACvB,yBAAyB;AACzB,4CAA4C;AAC5C,+EAA+E;AAC/E,0CAA0C;AAC1C,0BAA0B;AAC1B,yDAAyD;AACzD,+BAA+B;AAC/B,+EAA+E;AAC/E,yBAAyB;AACzB,yBAAyB;AACzB,uBAAuB;AACvB,uEAAuE;AACvE,+DAA+D;AAC/D,uBAAuB;AACvB,qBAAqB;AACrB,gBAAgB;AAChB,iBAAiB;AACjB,6JAA6J;AAC7J,qEAAqE;AACrE,6CAA6C;AAC7C,mDAAmD;AACnD,oCAAoC;AACpC,uBAAuB;AACvB,mFAAmF;AACnF,wBAAwB;AACxB,mBAAmB;AACnB,oFAAoF;AACpF,oCAAoC;AACpC,uBAAuB;AACvB,0EAA0E;AAC1E,wBAAwB;AACxB,mBAAmB;AACnB,mBAAmB;AACnB,4BAA4B;AAC5B,sBAAsB;AACtB,yCAAyC;AACzC,qCAAqC;AACrC,wHAAwH;AACxH,gBAAgB;AAChB,2DAA2D;AAC3D,wBAAwB;AACxB,kBAAkB;AAClB,0CAA0C;AAC1C,4GAA4G;AAC5G,sCAAsC;AACtC,0BAA0B;AAC1B,8BAA8B;AAC9B,eAAe;AACf,iBAAiB;AACjB,wCAAwC;AACxC,wDAAwD;AACxD,iBAAiB;AACjB,eAAe;AACf,aAAa;AACb,OAAO;AACP,IAAI;AAEJ,6BAA6B","debugId":null}}]
}