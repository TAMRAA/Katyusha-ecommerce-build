{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/tamra/Desktop/Katyusha-ecommerce/ecommerce-build/lib/formatCurrency.ts"],"sourcesContent":["export function formatCurrency(\n  amount: number,\n  currencyCode: string = \"USD\"\n): string {\n  try {\n    return new Intl.NumberFormat(\"en-US\", {\n      style: \"currency\",\n      currency: currencyCode.toUpperCase(),\n    }).format(amount);\n  } catch (error) {\n    // Fallback formatting if currency code is invalid\n    console.error(\"Invalid currency code:\", currencyCode, error);\n    return `${currencyCode.toUpperCase()} ${amount.toFixed(2)}`;\n  }\n}\n"],"names":[],"mappings":";;;;AAAO,SAAS,eACd,MAAc,EACd,eAAuB,KAAK;IAE5B,IAAI;QACF,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;YACpC,OAAO;YACP,UAAU,aAAa,WAAW;QACpC,GAAG,MAAM,CAAC;IACZ,EAAE,OAAO,OAAO;QACd,kDAAkD;QAClD,QAAQ,KAAK,CAAC,0BAA0B,cAAc;QACtD,OAAO,GAAG,aAAa,WAAW,GAAG,CAAC,EAAE,OAAO,OAAO,CAAC,IAAI;IAC7D;AACF","debugId":null}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///Users/tamra/Desktop/Katyusha-ecommerce/ecommerce-build/lib/imageUrl.ts"],"sourcesContent":["import { client } from \"@/sanity/lib/client\";\nimport imageUrlBuilder from \"@sanity/image-url\";\nimport { SanityImageSource } from \"@sanity/image-url/lib/types/types\";\n\nconst builder = imageUrlBuilder(client);\n\nexport function imageUrl(source: SanityImageSource){\n  return builder.image(source);\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGA,MAAM,UAAU,IAAA,2KAAe,EAAC,iIAAM;AAE/B,SAAS,SAAS,MAAyB;IAChD,OAAO,QAAQ,KAAK,CAAC;AACvB","debugId":null}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/tamra/Desktop/Katyusha-ecommerce/ecommerce-build/sanity/lib/orders/getMyOrders.tsx"],"sourcesContent":["import { defineQuery } from \"next-sanity\";\nimport { sanityFetch } from \"../live\";\n\nexport async function getMyOrders(userId: string) {\n  if (!userId) {\n    throw new Error(\"User ID is required\");\n  }\n  // Define the query to get orders based on user ID, sorted by orderDate descending\n  const MY_ORDERS_QUERY = defineQuery(`\n    *[_type == \"order\" && clerkUserId == $userId] | order(orderDate desc) {\n      ...,\n      products[]{\n        ...,\n        product->\n      }\n    }\n  `);\n  try {\n    // Use sanityFetch to send the query\n    const orders = await sanityFetch({\n      query: MY_ORDERS_QUERY,\n      params: { userId },\n    });\n    // Return the list of orders, or an empty array if none are found\n    return orders.data || [];\n  } catch (error) {\n    throw error;\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,YAAY,MAAc;IAC9C,IAAI,CAAC,QAAQ;QACX,MAAM,IAAI,MAAM;IAClB;IACA,kFAAkF;IAClF,MAAM,kBAAkB,IAAA,kJAAW,EAAC,CAAC;;;;;;;;EAQrC,CAAC;IACD,IAAI;QACF,oCAAoC;QACpC,MAAM,SAAS,MAAM,IAAA,oIAAW,EAAC;YAC/B,OAAO;YACP,QAAQ;gBAAE;YAAO;QACnB;QACA,iEAAiE;QACjE,OAAO,OAAO,IAAI,IAAI,EAAE;IAC1B,EAAE,OAAO,OAAO;QACd,MAAM;IACR;AACF","debugId":null}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///Users/tamra/Desktop/Katyusha-ecommerce/ecommerce-build/app/%28store%29/orders/page.tsx"],"sourcesContent":["\"use server\";\nimport { formatCurrency } from \"@/lib/formatCurrency\";\nimport { imageUrl } from \"@/lib/imageUrl\";\nimport { getMyOrders } from \"@/sanity/lib/orders/getMyOrders\";\nimport { auth } from \"@clerk/nextjs/server\";\nimport Image from \"next/image\";\nimport { redirect } from \"next/navigation\";\n\nasync function Orders() {\n  const { userId } = await auth();\n  if (!userId) {\n    return redirect(\"/\");\n  }\n  const orders = await getMyOrders(userId);\n  return (\n    <div className=\"flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-gray-50 to-gray-100 p-4 sm:p-6\">\n      <div className=\"bg-white p-6 sm:p-8 rounded-2xl shadow-xl w-full max-w-5xl\">\n        <h1 className=\"text-3xl sm:text-4xl font-extrabold text-gray-900 tracking-tight mb-8 sm:mb-10\">\n          My Orders\n        </h1>\n        {orders.length === 0 ? (\n          <div className=\"text-center text-gray-500 py-8\">\n            <p className=\"text-lg font-medium\">\n              You have not placed any orders yet.\n            </p>\n          </div>\n        ) : (\n          <div className=\"space-y-6 sm:space-y-8\">\n            {orders.map((order) => (\n              <div\n                key={order.orderNumber}\n                className=\"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-shadow overflow-hidden\"\n              >\n                <div className=\"p-4 sm:p-6 border-b border-gray-200\">\n                  <div className=\"flex flex-col gap-4 sm:flex-row sm:justify-between sm:items-center mb-6\">\n                    <div>\n                      <p className=\"text-sm font-semibold text-gray-600 mb-1\">\n                        Order Number\n                      </p>\n                      <p className=\"font-mono text-sm text-green-600 break-all\">\n                        {order.orderNumber}\n                      </p>\n                    </div>\n                    <div className=\"sm:text-right\">\n                      <p className=\"text-sm font-semibold text-gray-600 mb-1\">\n                        Order Date\n                      </p>\n                      <p className=\"font-medium text-gray-800\">\n                        {order.orderDate\n                          ? new Date(order.orderDate).toLocaleDateString(\n                              \"en-GB\",\n                              {\n                                day: \"numeric\",\n                                month: \"long\",\n                                year: \"numeric\",\n                              }\n                            )\n                          : \"N/A\"}\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex flex-col gap-4 sm:flex-row sm:justify-between sm:items-center\">\n                    <div className=\"flex items-center\">\n                      <span className=\"text-sm font-semibold text-gray-600 mr-2\">\n                        Status:\n                      </span>\n                      <span\n                        className={`px-3 py-1 rounded-full text-sm font-medium ${\n                          order.status === \"paid\"\n                            ? \"bg-green-100 text-green-800\"\n                            : \"bg-gray-100 text-gray-800\"\n                        }`}\n                      >\n                        {order.status}\n                      </span>\n                    </div>\n                    <div className=\"sm:text-right\">\n                      <p className=\"text-sm font-semibold text-gray-600 mb-1\">\n                        Total Amount\n                      </p>\n                      <p className=\"font-bold text-lg text-gray-900\">\n                        {formatCurrency(order.totalPrice ?? 0, order.currency)}\n                      </p>\n                    </div>\n                  </div>\n                  {order.amountDiscount ? (\n                    <div className=\"mt-4 p-4 sm:p-5 bg-gray-200 rounded-lg font-semibold mb-1 text-sm sm:text-base\">\n                      <p className=\"text-sm text-green-600\">\n                        Original Subtotal:{\" \"}\n                        {formatCurrency(\n                          (order.totalPrice ?? 0) + order.amountDiscount,\n                          order.currency\n                        )}\n                      </p>\n                      <p className=\"text-red-500 font-semibold mb-1 text-sm sm:text-base\">\n                        Discount Applied:{\" \"}\n                        {formatCurrency(order.amountDiscount, order.currency)}\n                      </p>\n                    </div>\n                  ) : null}\n                  <div className=\"px-4 py-4 sm:px-6 sm:py-5\">\n                    <p className=\"text-sm font-semibold text-gray-600 mb-4 sm:mb-5\">\n                      Order Items\n                    </p>\n                    <div className=\"space-y-4 sm:space-y-5\">\n                      {order.products?.map((product) => (\n                        <div\n                          key={product._key}\n                          className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 py-3 border-b last:border-b-0 border-gray-200\"\n                        >\n                          <div className=\"flex items-center gap-4 sm:gap-5\">\n                            {product.product?.image && (\n                              <div className=\"relative h-16 w-16 sm:h-20 sm:w-20 flex-shrink-0 rounded-lg overflow-hidden shadow-sm\">\n                                <Image\n                                  src={imageUrl(product.product.image).url()}\n                                  alt={product.product?.name ?? \"\"}\n                                  className=\"object-cover\"\n                                  fill\n                                />\n                              </div>\n                            )}\n                            <div>\n                              <p className=\"font-semibold text-sm sm:text-base text-gray-800\">\n                                {product.product?.name ?? \"Unknown Product\"}\n                              </p>\n                              <p className=\"text-sm text-gray-600\">\n                                Quantity: {product.quantity ?? \"N/A\"}\n                              </p>\n                            </div>\n                          </div>\n                          <p className=\"font-semibold text-sm sm:text-base text-gray-800 text-right\">\n                            {product.product?.price && product.quantity\n                              ? formatCurrency(\n                                  product.product.price * product.quantity,\n                                  order.currency\n                                )\n                              : \"N/A\"}\n                          </p>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Orders;\n"],"names":[],"mappings":"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","debugId":null}}]
}