module.exports=[638170,(a,b,c)=>{var d=a.r(825103);b.exports=a.r(843902)(function(a,b,c){return b=b.toLowerCase(),a+(c?d(b):b)})},33100,(a,b,c)=>{b.exports=a.r(843902)(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()})},173192,604861,a=>{"use strict";let b;a.s(["BackLink",()=>gc,"DocumentPane",()=>f8,"LOADING_PANE",()=>d5,"LoadingPane",()=>cK,"Pane",()=>cb,"PaneContainer",()=>hK,"PaneContent",()=>ce,"PaneHeader",()=>cw,"PaneHeaderActions",()=>gR,"PaneItem",()=>gV,"PaneLayout",()=>cE,"StructureToolPane",()=>gl,"_DEBUG",()=>d3,"setActivePanes",()=>hN,"structureTool",()=>iA,"useDocumentLastRev",()=>fQ,"usePane",()=>cd,"usePaneLayout",()=>b7,"useStructureTool",()=>cR],173192),a.s(["SerializeError",()=>v,"StructureToolProvider",()=>al,"getExtendedProjection",()=>u,"structureLocaleNamespace",()=>r,"structureUsEnglishLocaleBundle",()=>s],604861);var c=a.i(187924),d=a.i(572131),e=a.i(454320),f=a.i(32274),g=a.i(910980),h=a.i(966539),i=a.i(547663),j=a.i(638170),k=a.i(641881),l=a.i(660311),m=a.i(162970),n=a.i(33100),o=a.i(319150),p=a.i(976896),q=a.i(707465);let r="structure",s=(0,e.defineLocaleResourceBundle)({locale:"en-US",namespace:r,resources:()=>a.A(937719)}),t=["_id","_type","_createdAt","_updatedAt","_rev"];function u(a,b,c=!1){return b.map(b=>(function a(b,c,d=!1){let[e,...f]=c;if(!("fields"in b))return"";let g=b.fields.find(a=>a.name===e);if(!g){if(!t.includes(e)){let a=`The current ordering config targeted the nonexistent field "${e}" on schema type "${b.name}". It should be one of ${b.fields.map(a=>a.name).join(", ")}`;if(d)throw Error(a);console.warn(a)}return""}if("to"in g.type&&"reference"===g.type.name){let b=g.type.to;return`${e}->{${b.map(b=>a(b,f)).join(",")}}`}let h=f.length>0&&a(g.type,f),i=h?`{${h}}`:"";return f.length>0?`${e}${i}`:e})(a,b.field.split("."),c)).join(", ")}class v extends Error{constructor(a,b,c,d){super(a),this.name="SerializeError";let e=typeof c>"u"?"<unknown>":`${c}`;this.path=(b||[]).concat(d?`${e} (${d})`:e)}withHelpUrl(a){return this.helpId=a,this}}let w={ID_REQUIRED:"structure-node-id-required",TITLE_REQUIRED:"structure-title-required",FILTER_REQUIRED:"structure-filter-required",INVALID_LIST_ITEM:"structure-invalid-list-item",COMPONENT_REQUIRED:"structure-view-component-required",DOCUMENT_ID_REQUIRED:"structure-document-id-required",SCHEMA_TYPE_REQUIRED:"structure-schema-type-required",SCHEMA_TYPE_NOT_FOUND:"structure-schema-type-not-found",LIST_ITEMS_MUST_BE_ARRAY:"structure-list-items-must-be-array",QUERY_PROVIDED_FOR_FILTER:"structure-query-provided-for-filter",ACTION_OR_INTENT_REQUIRED:"structure-action-or-intent-required",LIST_ITEM_IDS_MUST_BE_UNIQUE:"structure-list-item-ids-must-be-unique",ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE:"structure-action-and-intent-mutually-exclusive",API_VERSION_REQUIRED_FOR_CUSTOM_FILTER:"structure-api-version-required-for-custom-filter"},x={title:"Last edited",i18n:{title:{key:"menu-items.sort-by.last-edited",ns:r}},name:"lastEditedDesc",by:[{field:"_updatedAt",direction:"desc"}]},y=[x,{title:"Created",i18n:{title:{key:"menu-items.sort-by.created",ns:r}},name:"lastCreatedDesc",by:[{field:"_createdAt",direction:"desc"}]}];function z(a,b,c){return a instanceof A?a.serialize({path:c,index:b}):a}class A{constructor(a,b){this._context=a,this.spec=b||{}}action(a){return this.clone({action:a})}getAction(){return this.spec.action}intent(a){return this.clone({intent:a})}getIntent(){return this.spec.intent}title(a){return this.clone({title:a})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}group(a){return this.clone({group:a})}getGroup(){return this.spec.group}icon(a){return this.clone({icon:a})}getIcon(){return this.spec.icon}params(a){return this.clone({params:a})}getParams(){return this.spec.params}showAsAction(a=!0){return this.clone({showAsAction:!!a})}getShowAsAction(){return this.spec.showAsAction}serialize(a={path:[]}){let{title:b,action:c,intent:d}=this.spec;if(!b){let b="string"==typeof c?`action: "${c}"`:void 0;throw new v("`title` is required for menu item",a.path,a.index,b).withHelpUrl(w.TITLE_REQUIRED)}if(!c&&!d)throw new v(`\`action\` or \`intent\` required for menu item with title ${this.spec.title}`,a.path,a.index,`"${b}"`).withHelpUrl(w.ACTION_OR_INTENT_REQUIRED);if(d&&c)throw new v("cannot set both `action` AND `intent`",a.path,a.index,`"${b}"`).withHelpUrl(w.ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE);return{...this.spec,title:b}}clone(a){let b=new A(this._context);return b.spec={...this.spec,...a},b}}function B(a,{by:b,title:c,i18n:d},e){let f=new A(a).group("sorting").title(a.i18n.t("default-menu-item.fallback-title",{ns:"studio",replace:{title:c}})).icon(i.SortIcon).action("setSortOrder").params({by:b,extendedProjection:e});return d&&(f=f.i18n(d)),f}function C(a,b){let{schema:c}=a,d="string"==typeof b?c.get(b):b;return d&&"orderings"in d?(d.orderings?d.orderings.concat(y):y).map(b=>B(a,b,u(d,b.by))):[]}function D(a,b,c){return a instanceof E?a.serialize({path:c,index:b}):a}class E{constructor(a,b){this._context=a,this._id=b?b.id:"",this._title=b?b.title:"",this._i18n=b?b.i18n:void 0}id(a){return new E(this._context,{id:a,title:this._title,i18n:this._i18n})}getId(){return this._id}title(a){return new E(this._context,{title:a,id:this._id,i18n:this._i18n})}getTitle(){return this._title}i18n(a){return new E(this._context,{i18n:a,id:this._id,title:this._title})}getI18n(){return this._i18n}serialize(a={path:[]}){if(!this._id)throw new v("`id` is required for a menu item group",a.path,a.index,this._title).withHelpUrl(w.ID_REQUIRED);if(!this._title)throw new v("`title` is required for a menu item group",a.path,this._id).withHelpUrl(w.TITLE_REQUIRED);return{id:this._id,title:this._title,i18n:this._i18n}}}let F=/([^A-Za-z0-9-_.])/;function G(a,b,c){if("string"!=typeof a)throw new v(`Structure node id must be of type string, got ${typeof a}`,b,c);let[d]=a.match(F)||[];if(d)throw new v(`Structure node id cannot contain character "${d}"`,b,c);if(a.startsWith("__edit__"))throw new v("Structure node id cannot start with __edit__",b,c);return a}function H(a,b){if(b)return b;let c=(0,j.default)(a);return F.test(c)?(0,j.default)((0,k.default)(a)):c}class I{constructor(a){this.spec={options:{},...a||{}}}id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a,id:H(a,this.spec.id)})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}child(a){return this.clone({child:a})}getChild(){return this.spec.child}component(a){return this.clone({component:a})}getComponent(){return this.spec.component}options(a){return this.clone({options:a})}getOptions(){return this.spec.options||{}}menuItems(a){return this.clone({menuItems:a})}getMenuItems(){return this.spec.menuItems}menuItemGroups(a){return this.clone({menuItemGroups:a})}getMenuItemGroups(){return this.spec.menuItemGroups}canHandleIntent(a){return this.clone({canHandleIntent:a})}serialize(a={path:[]}){let{id:b,title:c,child:d,options:e,component:f}=this.spec;if(!b)throw new v("`id` is required for `component` structure item",a.path,a.index).withHelpUrl(w.ID_REQUIRED);if(!f)throw new v("`component` is required for `component` structure item",a.path,a.index).withHelpUrl(w.ID_REQUIRED);return{id:G(b,a.path,a.index),title:c,type:"component",child:d,component:f,canHandleIntent:this.spec.canHandleIntent,options:e||{},menuItems:(this.spec.menuItems||[]).map((b,c)=>z(b,c,a.path)),menuItemGroups:(this.spec.menuItemGroups||[]).map((b,c)=>D(b,c,a.path))}}clone(a){let b=new I;return b.spec={...this.spec,...a},b}}class J{constructor(a){this.spec={id:(0,l.default)("__divider__"),type:"divider",...a}}title(a){return this.clone({title:a})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}serialize(){return{...this.spec}}clone(a){let b=new J;return b.spec={...this.spec,...a},b}}async function K(a,b){return await a(e.DEFAULT_STUDIO_CLIENT_OPTIONS).fetch("*[sanity::versionOf($publishedId)][0]._type",{publishedId:(0,f.getPublishedId)(b)},{tag:"structure.resolve-type"})}class L{spec={};id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a,id:this.spec.id||(0,n.default)(a)})}getTitle(){return this.spec.title}icon(a){return this.clone({icon:a})}getIcon(){return this.spec.icon}serialize(a={path:[]}){let{id:b,title:c,icon:d}=this.spec;if(!b)throw new v("`id` is required for view item",a.path,a.index).withHelpUrl(w.ID_REQUIRED);if(!c)throw new v("`title` is required for view item",a.path,a.index).withHelpUrl(w.TITLE_REQUIRED);return{id:G(b,a.path,a.index),title:c,icon:d}}}function M(a,b,c){return"function"==typeof a.serialize?a.serialize({path:c,index:b}):a}class N extends L{constructor(a){let b=(a=>(0,e.isRecord)(a)&&"component"===a.type)(a)?{...a}:{options:{}};super(),this.spec=b;let c="function"==typeof a?a:this.spec.component;c&&(this.spec=this.component(c).spec)}component(a){return this.clone({component:a})}getComponent(){return this.spec.component}options(a){return this.clone({options:a})}getOptions(){return this.spec.options||{}}serialize(a={path:[]}){let b=super.serialize(a),c=this.spec.component;if("function"!=typeof c)throw new v("`component` is required and must be a function for `component()` view item",a.path,a.index).withHelpUrl(w.COMPONENT_REQUIRED);return{...b,component:c,options:this.spec.options||{},type:"component"}}clone(a){let b=new N;return b.spec={...this.spec,...a},b}}class O extends L{constructor(a){super(),this.spec={id:"editor",title:"Editor",...a||{}}}serialize(a={path:[]}){return{...super.serialize(a),type:"form"}}clone(a){let b=new O;return b.spec={...this.spec,...a},b}}let P=a=>new O(a);var Q=Object.freeze({__proto__:null,ComponentViewBuilder:N,FormViewBuilder:O,GenericViewBuilder:L,component:a=>new N(a),form:P,maybeSerializeView:M});class R{constructor(a,b){this._context=a,this.spec=b||{}}id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a,id:H(a,this.spec.id)})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}child(a){return this.clone({child:a})}getChild(){return this.spec.child}documentId(a){let b=this.spec.id||a;return this.clone({id:b,options:{...this.spec.options,id:a}})}getDocumentId(){return this.spec.options?.id}schemaType(a){return this.clone({options:{...this.spec.options,type:"string"==typeof a?a:a.name}})}getSchemaType(){return this.spec.options?.type}initialValueTemplate(a,b){return this.clone({options:{...this.spec.options,template:a,templateParameters:b}})}getInitialValueTemplate(){return this.spec.options?.template}getInitialValueTemplateParameters(){return this.spec.options?.templateParameters}views(a){return this.clone({views:a})}getViews(){return this.spec.views||[]}serialize({path:a=[],index:b,hint:c}={path:[]}){let d=a[b||a.length-1],e=this.spec.id||d&&`${d}`||"",f={id:e,type:void 0,template:void 0,templateParameters:void 0,...this.spec.options};if("string"!=typeof e||!e)throw new v("`id` is required for document nodes",a,b,c).withHelpUrl(w.ID_REQUIRED);if(!f||!f.id)throw new v("document id (`id`) is required for document nodes",a,e,c).withHelpUrl(w.DOCUMENT_ID_REQUIRED);if(!f||!f.type)throw new v("document type (`schemaType`) is required for document nodes",a,e,c);let g=(this.spec.views&&this.spec.views.length>0?this.spec.views:[P()]).map((b,c)=>M(b,c,a)),h=g.map(a=>a.id),i=(0,m.default)(h.filter((a,b)=>h.includes(a,b+1)));if(i.length>0)throw new v(`document node has views with duplicate IDs: ${i.join(",  ")}`,a,e,c);return{...this.spec,child:this.spec.child||(({resolveDocumentNode:a,getClient:b})=>async(c,{params:d,path:e})=>{let f=d.type,g=e.slice(0,e.length-1),h=e[e.length-1];if(f||(f=await K(b,c)),!f)throw new v("Failed to resolve document, and no type provided in parameters.",g,h);return a({documentId:c,schemaType:f})})(this._context),id:G(e,a,b),type:"document",options:function(a){let b={id:a.id||"",type:a.type||"*"};return a.template&&(b.template=a.template),a.templateParameters&&(b.templateParameters=a.templateParameters),b}(f),views:g}}clone(a={}){let b=new R(this._context),c={...this.spec.options,...a.options};return b.spec={...this.spec,...a,options:c},b}}class S{constructor(a,b){this._context=a,this.spec=b||{}}id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a})}getTitle(){return this.spec.title}description(a){return this.clone({description:a})}getDescription(){return this.spec.description}templateId(a){let b=this.spec.id||a;return this.clone({id:b,templateId:a})}getTemplateId(){return this.spec.templateId}parameters(a){return this.clone({parameters:a})}getParameters(){return this.spec.parameters}serialize({path:a=[],index:b,hint:c}={path:[]}){if("string"!=typeof this.spec.id||!this.spec.id)throw new v("`id` is required for initial value template item nodes",a,b,c).withHelpUrl(w.ID_REQUIRED);if(!this.spec.templateId)throw new v("template id (`templateId`) is required for initial value template item nodes",a,this.spec.id,c).withHelpUrl(w.ID_REQUIRED);let d=this._context.templates.find(a=>a.id===this.spec.templateId);if(!d)throw new v("template id (`templateId`) is required for initial value template item nodes",a,this.spec.id,c).withHelpUrl(w.ID_REQUIRED);return{id:this.spec.id,templateId:this.spec.id,schemaType:d.schemaType,type:"initialValueTemplateItem",description:this.spec.description||d.description,title:this.spec.title||d.title,subtitle:this.spec.subtitle,icon:this.spec.icon||d.icon,initialDocumentId:this.spec.initialDocumentId,parameters:this.spec.parameters}}clone(a={}){let b=new S(this._context);return b.spec={...this.spec,...a},b}}let T=Symbol("Document type list canHandleIntent"),U=(a,b,{pane:c})=>{let d="create"===a,e=c.options?.filter||"",f=c.options?.params||{},g=c.schemaTypeName?[c.schemaTypeName]:$(e,f),h=c.initialValueTemplates||[];return d&&b.template?h.some(a=>a.templateId===b.template):"edit"===a&&b.id&&g.includes(b.type)||d&&g.includes(b.type)};U.identity=T;let V=["default","card","media","detail","block"];function W(){}let X=(a,b,{pane:c,index:d})=>d<=1&&U(a,b,{pane:c});class Y{initialValueTemplatesSpecified=!1;spec={};id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a,id:H(a,this.spec.id)})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}defaultLayout(a){return this.clone({defaultLayout:a})}getDefaultLayout(){return this.spec.defaultLayout}menuItems(a){return this.clone({menuItems:a})}getMenuItems(){return this.spec.menuItems}menuItemGroups(a){return this.clone({menuItemGroups:a})}getMenuItemGroups(){return this.spec.menuItemGroups}child(a){return this.clone({child:a})}getChild(){return this.spec.child}canHandleIntent(a){return this.clone({canHandleIntent:a})}getCanHandleIntent(){return this.spec.canHandleIntent}showIcons(a=!0){return this.clone({displayOptions:{...this.spec.displayOptions,showIcons:a}})}getShowIcons(){return this.spec.displayOptions?this.spec.displayOptions.showIcons:void 0}initialValueTemplates(a){return this.initialValueTemplatesSpecified=!0,this.clone({initialValueTemplates:Array.isArray(a)?a:[a]})}getInitialValueTemplates(){return this.spec.initialValueTemplates}serialize(a={path:[]}){let b=this.spec.id||"",c=a.path,d=this.spec.defaultLayout;if(d&&!V.includes(d))throw new v(`\`layout\` must be one of ${V.map(a=>`"${a}"`).join(", ")}`,c,b||a.index,this.spec.title);let e=(this.spec.initialValueTemplates||[]).map((a,b)=>a instanceof S?a.serialize({path:c,index:b}):a);return{id:G(b,a.path,b||a.index),title:this.spec.title,i18n:this.spec.i18n,type:"genericList",defaultLayout:d,child:this.spec.child||W,canHandleIntent:this.spec.canHandleIntent||X,displayOptions:this.spec.displayOptions,initialValueTemplates:e,menuItems:(this.spec.menuItems||[]).map((a,b)=>z(a,b,c)),menuItemGroups:(this.spec.menuItemGroups||[]).map((a,b)=>D(a,b,c))}}}class Z extends Y{constructor(a,b){super(),this._context=a,this.spec=b||{},this.initialValueTemplatesSpecified=!!b?.initialValueTemplates}apiVersion(a){return this.clone({options:{...this.spec.options||{filter:""},apiVersion:a}})}getApiVersion(){return this.spec.options?.apiVersion}filter(a){return this.clone({options:{...this.spec.options,filter:a}})}getFilter(){return this.spec.options?.filter}schemaType(a){let b="string"==typeof a?a:a.name;return this.clone({schemaTypeName:b})}getSchemaType(){return this.spec.schemaTypeName}params(a){return this.clone({options:{...this.spec.options||{filter:""},params:a}})}getParams(){return this.spec.options?.params}defaultOrdering(a){if(!Array.isArray(a))throw Error("`defaultOrdering` must be an array of order clauses");return this.clone({options:{...this.spec.options||{filter:""},defaultOrdering:a}})}getDefaultOrdering(){return this.spec.options?.defaultOrdering}serialize(a={path:[]}){let b;if("string"!=typeof this.spec.id||!this.spec.id)throw new v("`id` is required for document lists",a.path,a.index,this.spec.title).withHelpUrl(w.ID_REQUIRED);if(!this.spec.options||!this.spec.options.filter)throw new v("`filter` is required for document lists",a.path,this.spec.id,this.spec.title).withHelpUrl(w.FILTER_REQUIRED);return this.spec.options?.filter!=="_type == $type"&&this.spec.options.filter&&!this.spec.options.apiVersion&&console.warn(`No apiVersion specified for document type list with custom filter: \`${this.spec.options.filter}\`. This will be required in the future. See %s for more info.`,(0,o.generateHelpUrl)(w.API_VERSION_REQUIRED_FOR_CUSTOM_FILTER)),{...super.serialize(a),type:"documentList",schemaTypeName:this.spec.schemaTypeName,child:this.spec.child||(b=this._context,(a,c)=>{let d=c.parent,e=c.params?.template?b.templates.find(a=>a.id===c.params.template):void 0;return Promise.resolve(e?e.schemaType:d.schemaTypeName||K(b.getClient,a)).then(c=>c?b.resolveDocumentNode({schemaType:c,documentId:a}):new R(b).id("editor").documentId(a).schemaType(""))}),options:{...this.spec.options,apiVersion:this.spec.options.apiVersion||e.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion,filter:((a,b)=>{let c=a.options?.filter.trim()||"";if(["*","{"].includes(c[0]))throw new v(`\`filter\` cannot start with \`${c[0]}\` - looks like you are providing a query, not a filter`,b.path,a.id,a.title).withHelpUrl(w.QUERY_PROVIDED_FOR_FILTER);return c})(this.spec,a)}}}clone(a){let b=new Z(this._context);return b.spec={...this.spec,...a},this.initialValueTemplatesSpecified||(b.spec.initialValueTemplates=function(a,b){let{document:c}=a,{schemaTypeName:d,options:e}=b,{filter:f,params:g}=e||{filter:"",params:{}},h=d?[d]:Array.from(new Set($(f,g)));if(0!==h.length)return h.flatMap(a=>c.resolveNewDocumentOptions({type:"structure",schemaType:a})).map(a=>({...a,icon:i.AddIcon}))}(this._context,b.spec)),b.spec.schemaTypeName||(b.spec.schemaTypeName=function(a){let{options:b}=a,{filter:c,params:d}=b||{filter:"",params:{}},e=$(c,d);return 1===e.length?e[0]:void 0}(b.spec)),b}getSpec(){return this.spec}}function $(a,b={}){let c=function(a,b={}){let c,d=/\b_type\s*==\s*(['"].*?['"]|\$.*?(?:\s|$))|\B(['"].*?['"]|\$.*?(?:\s|$))\s*==\s*_type/g,e=[];for(;null!==(c=d.exec(a));)e.push(c[1]||c[2]);return e.map(a=>(("$"===a[0]?b[a.slice(1)]:a)||"").trim().replace(/^["']|["']$/g,"")).filter(Boolean)}(a,b);return 0===c.length&&(c=function(a,b={}){let c=a.match(/\b_type\s+in\s+\[(.*?)\]/);return c?c[1].split(/,\s*/).map(a=>a.trim().replace(/^["']+|["']+$/g,"")).map(a=>"$"===a[0]?b[a.slice(1)]:a).filter(Boolean):[]}(a,b)),c}let _=a=>"listItem"===a.type,aa=(a,b,c)=>(c.pane.items||[]).filter(af).some(a=>a.schemaType.name===b.type&&a._id===b.id)||X(a,b,c),ab=(a,b)=>{let c=(b.parent.items.filter(_).find(b=>b.id===a)||{child:void 0}).child;return c&&"function"==typeof c&&"function"==typeof c?c(a,b):c};class ac extends Y{constructor(a,b){super(),this._context=a,this.spec=b||{},this.initialValueTemplatesSpecified=!!(b&&b.initialValueTemplates)}items(a){return this.clone({items:a})}getItems(){return this.spec.items}serialize(a={path:[]}){let b=this.spec.id;if("string"!=typeof b||!b)throw new v("`id` is required for lists",a.path,a.index).withHelpUrl(w.ID_REQUIRED);let c=typeof this.spec.items>"u"?[]:this.spec.items;if(!Array.isArray(c))throw new v("`items` must be an array of items",a.path,a.index).withHelpUrl(w.LIST_ITEMS_MUST_BE_ARRAY);let d=(a.path||[]).concat(b),f=c.map((a,b)=>(function(a,b,c){if(a instanceof ad)return a.serialize({path:c,index:b});if(a instanceof J)return a.serialize();if(a&&"divider"===a.type)return a;if(!a||"listItem"!==a.type){var d;let f=a&&a.type||(a instanceof ac?"ListBuilder":(d=a,(0,e.isRecord)(d)&&"function"==typeof d.then)?"Promise":Array.isArray(a)?"array":typeof a);throw new v(`List items must be of type "listItem", got "${f}"${"array"===f?" - did you forget to spread (...moreItems)?":""}`,c,b).withHelpUrl(w.INVALID_LIST_ITEM)}return a})(a,b,d)),g=f.filter((a,b)=>(0,p.default)(f,{id:a.id},b+1));if(g.length>0){let b=g.map(a=>a.id).slice(0,5),c=g.length>5?`${b.join(", ")}...`:b.join(", ");throw new v(`List items with same ID found (${c})`,a.path,a.index).withHelpUrl(w.LIST_ITEM_IDS_MUST_BE_UNIQUE)}return{...super.serialize(a),type:"list",canHandleIntent:this.spec.canHandleIntent||aa,child:this.spec.child||ab,items:f}}clone(a){let b=new ac(this._context);return b.spec={...this.spec,...a},b}}class ad{constructor(a,b){this._context=a,this.spec=b||{}}id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a,id:H(a,this.spec.id)})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}icon(a){return this.clone({icon:a})}showIcon(a=!0){return this.clone({displayOptions:{...this.spec.displayOptions,showIcon:a}})}getShowIcon(){return this.spec.displayOptions?this.spec.displayOptions.showIcon:void 0}getIcon(){return this.spec.icon}child(a){return this.clone({child:a})}getChild(){return this.spec.child}schemaType(a){return this.clone({schemaType:a})}getSchemaType(){let a=this.spec.schemaType;return"string"==typeof a?this._context.schema.get(a):this.spec.schemaType}serialize(a={path:[]}){let{id:b,title:c,child:d}=this.spec;if("string"!=typeof b||!b)throw new v("`id` is required for list items",a.path,a.index).withHelpUrl(w.ID_REQUIRED);if(!a.titleIsOptional&&("string"!=typeof c||!c))throw new v("`title` is required for list items",a.path,b).withHelpUrl(w.TITLE_REQUIRED);let e=this.spec.schemaType;if("string"==typeof e){let c=this._context.schema.get(e);if(!c)throw new v(`Could not find type "${e}" in schema`,a.path,b).withHelpUrl(w.SCHEMA_TYPE_NOT_FOUND);e=c}let f={path:a.path.concat(b),hint:"child"},g=d instanceof I||d instanceof Z||d instanceof R||d instanceof ac?d.serialize(f):d;if("function"==typeof g){let a=g;g=(b,c)=>a(b,{...c,serializeOptions:f})}return{...this.spec,id:G(b,a.path,a.index),schemaType:e,child:g,title:c,type:"listItem"}}clone(a){let b=new ad(this._context);return b.spec={...this.spec,...a},b}}class ae extends ad{constructor(a,b){super(a,b),this._context=a,this.spec=b||{}}serialize(a={path:[]}){let b,c=super.serialize({...a,titleIsOptional:!0});if(!c.schemaType)throw new v("`schemaType` is required for document list items",a.path,a.index).withHelpUrl(w.SCHEMA_TYPE_REQUIRED);let d=c.child||(b=this._context,a=>{let d=c.schemaType&&("string"==typeof c.schemaType?c.schemaType:c.schemaType.name);return d?b.resolveDocumentNode({schemaType:d,documentId:a}):new R(b).id("documentEditor").documentId(a)});return{...c,child:d,schemaType:c.schemaType,_id:c.id}}clone(a){let b=new ae(this._context);return b.spec={...this.spec,...a},b}}function af(a){return(0,e.isRecord)(a)&&"u">typeof a.schemaType&&"string"==typeof a._id}class ag extends Z{constructor(a,b){super(a),this._context=a,this.spec=b||{}}child(a){return this.cloneWithoutDefaultIntentHandler({child:a})}clone(a){let b=super.clone(a),c=new ag(this._context);return c.spec={...this.spec,...b.getSpec(),...a},c}cloneWithoutDefaultIntentHandler(a){let b=super.clone(a),c=new ag(this._context),d=this.spec.canHandleIntent,e=d&&d.identity===T?{canHandleIntent:void 0}:{};return c.spec={...b.getSpec(),...this.spec,...a,...e},c}}let ah=["sanity.imageAsset","sanity.fileAsset"];function ai(a){return(function({schema:a}){return a.getTypeNames().filter(b=>{let c=a.get(b);return c&&c.type?.name==="document"}).filter(a=>!ah.includes(a))})(a).map(b=>aj(a,b))}function aj(a,b){let{schema:c}=a,d=c.get(b);if(!d)throw Error(`Schema type with name "${b}" not found`);let e=d.title||(0,q.default)(b);return new ad(a).id(b).title(e).schemaType(d).child((c,d)=>{let e=d.parent,f="list"===e.type?e.items.find(a=>a.id===c):null,g=ak(a,b);return f&&f.title&&(g=g.title(f.title)),g})}function ak(a,b){let{schema:c,resolveDocumentNode:d}=a,e="string"==typeof b?b:b.schemaType,f="string"==typeof e?e:e.name,g="string"==typeof b?{}:b,h=c.get(f);if(!h)throw Error(`Schema type with name "${f}" not found`);let j=h.title||(0,q.default)(f);return new ag(a).id(g.id||f).title(g.title||j).filter("_type == $type").params({type:f}).schemaType(h).defaultOrdering(x.by).menuItemGroups(g.menuItemGroups||[{id:"sorting",title:"Sort",i18n:{title:{key:"menu-item-groups.actions-group",ns:r}}},{id:"layout",title:"Layout",i18n:{title:{key:"menu-item-groups.layout-group",ns:r}}},{id:"actions",title:"Actions",i18n:{title:{key:"menu-item-groups.sorting-group",ns:r}}}]).child(g.child||(a=>d({schemaType:f,documentId:a}))).canHandleIntent(g.canHandleIntent||U).menuItems(g.menuItems||[...C(a,h),new A(a).group("layout").i18n({title:{key:"menu-items.layout.compact-view",ns:r}}).title("Compact view").icon(i.StackCompactIcon).action("setLayout").params({layout:"default"}),new A(a).group("layout").i18n({title:{key:"menu-items.layout.detailed-view",ns:r}}).title("Detailed view").icon(i.StackIcon).action("setLayout").params({layout:"detail"})])}function al({defaultDocumentNode:a,structure:b,children:j}){let[k,l]=(0,d.useState)(!1),m=(0,e.useSource)(),n=(0,e.useConfigContextFromSource)(m),o=(0,e.useDocumentStore)(),{perspectiveStack:p}=(0,e.usePerspective)(),q=(0,d.useMemo)(()=>(function({defaultDocumentNode:a,source:b,perspectiveStack:c}){let d=(0,e.getConfigContextFromSource)(b),g={...b,getStructureBuilder:()=>j,resolveDocumentNode:b=>{let c=a?.(j,{...b,...d})||new R(g);return c.getId()||(c=c.id("documentEditor")),b.documentId&&(c=c.documentId((0,f.getPublishedId)(b.documentId))),c.schemaType(b.schemaType)},perspectiveStack:c},j={defaults:()=>(function(a){let b=ai(a);return new ac(a).id("__root__").title("Content").i18n({title:{key:"default-definition.content-title",ns:r}}).items(b).showIcons(b.some(a=>{var b;return!!(b=a.getSchemaType())&&"string"!=typeof b&&!!b.icon}))})(g),documentTypeList:(...a)=>ak(g,...a),documentTypeListItem:(...a)=>aj(g,...a),documentTypeListItems:(...a)=>ai(g,...a),document:(...a)=>new R(g,...a),documentWithInitialValueTemplate:(...a)=>(function({resolveDocumentNode:a,templates:b},c,d){let e=b.find(a=>a.id===c);if(!e)throw Error(`Template with ID "${c}" not defined`);return a({schemaType:e.schemaType}).initialValueTemplate(c,d)})(g,...a),defaultDocument:g.resolveDocumentNode,list:(...a)=>new ac(g,...a),listItem:(...a)=>new ad(g,...a),menuItem:(...a)=>new A(g,...a),menuItemGroup:(...a)=>new E(g,...a),menuItemsFromInitialValueTemplateItems:(...a)=>(function(a,b){let{schema:c,templates:d}=a;return b.map(b=>{let e=d.find(a=>a.id===b.templateId),f=b.title||e?.title||"Create",g={};e&&e.schemaType&&(g.type=e.schemaType),b.templateId&&(g.template=b.templateId);let h=b.parameters?[g,b.parameters]:g,j=e&&c.get(e.schemaType),k=b.i18n||e?.i18n,l=new A(a).title(f).icon(e&&e.icon||j?.icon||i.AddIcon).intent({type:"create",params:h});return k&&(l=l.i18n(k)),l.serialize()})})(g,...a),documentList:(...a)=>new Z(g,...a),documentListItem:(...a)=>new ae(g,...a),orderingMenuItem:(...a)=>B(g,...a),orderingMenuItemsForType:(...a)=>C(g,...a),editor:(...a)=>(function(a,b){let c=b?.type?a.resolveDocumentNode({schemaType:b.type}):new R(a);if(!b)return c;let{id:d,type:e,template:f,templateParameters:g}=b.options;return c=c.id(b.id).documentId(d),e&&(c=c.schemaType(e)),f&&(c=c.initialValueTemplate(f,g)),b.child&&(c=c.child(b.child)),c})(g,...a),defaultInitialValueTemplateItems:(...a)=>(function(a){let{schema:b,getStructureBuilder:c,templates:d}=a,e=b.getTypeNames();return d.filter(a=>!a.parameters?.length).sort((a,b)=>e.indexOf(a.schemaType)-e.indexOf(b.schemaType)).map(a=>c().initialValueTemplateItem(a.id))})(g,...a),initialValueTemplateItem:(a,b)=>new S(g,{id:a,parameters:b,templateId:a}),component:a=>(0,h.isValidElementType)(a)?new I().component(a):new I(a),divider:a=>new J(a),view:Q,context:g};return j})({defaultDocumentNode:a,source:m,perspectiveStack:p}),[a,m,p]),s=(0,d.useMemo)(()=>b?b(q,{...n,documentStore:o,perspectiveStack:p}):q.defaults(),[b,q,n,o,p]),t=(0,d.useMemo)(()=>({backButton:k,resizablePanes:!k,reviewChanges:!k,splitPanes:!k,splitViews:!k}),[k]),u=(0,d.useMemo)(()=>({features:t,layoutCollapsed:k,setLayoutCollapsed:l,rootPaneNode:s,structureContext:q.context}),[t,k,s,q.context]);return(0,c.jsx)(g.StructureToolContext.Provider,{value:u,children:j})}var am=a.i(997162),an=a.i(64179),ao=a.i(566482),ap=a.i(143242),aq=a.i(248726),ar=a.i(775716),as=a.i(27084),at=a.i(346271),au=a.i(262036),av=a.i(311315),aw=a.i(679679),ax=a.i(174921),ay=a.i(966217),az=a.i(130379),aA=a.i(272036),aB=a.i(952535),aC=a.i(122839),aD=a.i(330466),aE=a.i(902501),aF=a.i(714729),aG=a.i(953113),aH=a.i(573345),aI=a.i(705043),aJ=a.i(727500);let aK=({clientWidth:a,clientHeight:b,scrollWidth:c,scrollHeight:d})=>d>b||c>a,aL=a=>{let b=window.getComputedStyle(a).overflow;return b.includes("auto")||b.includes("scroll")},aM=a=>{if(null==a)return{x:0,y:0};let{scrollTop:b,scrollHeight:c,clientHeight:d,scrollLeft:e,scrollWidth:f,clientWidth:g}=a;return{x:e?e/Math.max(1e-5,f-g):0,y:b?b/Math.max(1e-5,c-d):0}};function aN(){return(aN=Object.assign.bind()).apply(null,arguments)}function aO(a){return a.matches("body *")?a:window}class aP{constructor(a,b={}){var c,d=this;this.elements=void 0,this.defaults={vertical:!0,horizontal:!0,debug:!0},this.options=void 0,this.paused=!1,this.logger=void 0,this.handleScroll=async function(a){if(d.paused||!a.currentTarget)return;let b=d.getScrollContainer(a.currentTarget);await new Promise(a=>{requestAnimationFrame(()=>a())}),d.mirrorScrollPositions(aM(b),b)},this.elements=[...a].filter(Boolean).map(a=>this.getScrollContainer(a)),this.elements=[...new Set(this.elements)],this.options=aN({},this.defaults,b),this.options.debug&&(this.logger=(c="[scroll-mirror]",{log:(...a)=>console.log(c,...a),warn:(...a)=>console.warn(c,...a),error:(...a)=>console.error(c,...a)}),function(a,b){if(a.length<1)null==b||b.warn("No elements provided.");else for(let c of(a.length<2&&(null==b||b.warn("Only one element provided.",a)),a.some(a=>!a)&&(null==b||b.error("Some elements are not defined.",a)),a))c instanceof HTMLElement&&!aK(c)&&(null==b||b.warn("Element doesn't have overflow:",c)),c instanceof HTMLElement&&c.matches("body *")&&!aL(c)&&(null==b||b.warn('No "overflow: auto;" or "overflow: scroll;" set on element:',c))}(this.elements,this.logger)),this.elements.forEach(a=>this.addScrollHandler(a)),this.elements.includes(document.documentElement)&&this.mirrorScrollPositions(aM(document.documentElement),document.documentElement)}pause(){this.paused=!0}resume(){this.paused=!1}destroy(){this.elements.forEach(a=>this.removeScrollHandler(a))}addScrollHandler(a){this.removeScrollHandler(a),aO(a).addEventListener("scroll",this.handleScroll,{passive:!0})}removeScrollHandler(a){aO(a).removeEventListener("scroll",this.handleScroll)}getScrollContainer(a){return a instanceof HTMLElement&&a.matches("body *")?a:document.documentElement}mirrorScrollPositions(a,b){this.elements.forEach(c=>{b!==c&&(this.removeScrollHandler(c),this.setScrollPosition(a,c),window.requestAnimationFrame(()=>{this.addScrollHandler(c)}))})}setScrollPosition(a,b){let{vertical:c,horizontal:d}=this.options,e=b.scrollWidth-b.clientWidth,f=b.scrollHeight-b.clientHeight;c&&f&&b.scrollTo({top:f*a.y,behavior:"instant"}),d&&e&&b.scrollTo({left:e*a.x,behavior:"instant"})}get progress(){return aM(this.elements.find(a=>aK(a)))}set progress(a){"number"==typeof a&&(a={x:a,y:a});let b=aN({},this.progress,a);(function(a,b){let c=!0;for(let[d,e]of Object.entries(a))("number"!=typeof e||e<0||e>1)&&(null==b||b.error(`progress.${d} must be a number between 0-1`),c=!1);return c})(b,this.logger)&&this.mirrorScrollPositions(b)}}var aQ=a.i(495089),aR=a.i(630407),aS=a.i(348074),aT=a.i(147252),aU=a.i(135027),aV=a.i(966051),aW=a.i(881299),aX=a.i(415150),aY=a.i(800515),aZ=a.i(678465),a$=a.i(800724),a_=a.i(547497),a0=a.i(564416),a1=a.i(113028),a2=a.i(586276);function a3(a,b){return"function"==typeof a?a(b):a}function a4(a,b){return c=>{b.setState(b=>({...b,[a]:a3(c,b[a])}))}}function a5(a){return a instanceof Function}function a6(a,b,c){let d,e=[];return f=>{let g,h;c.key&&c.debug&&(g=Date.now());let i=a(f);if(!(i.length!==e.length||i.some((a,b)=>e[b]!==a)))return d;if(e=i,c.key&&c.debug&&(h=Date.now()),d=b(...i),null==c||null==c.onChange||c.onChange(d),c.key&&c.debug&&null!=c&&c.debug()){let a=Math.round((Date.now()-g)*100)/100,b=Math.round((Date.now()-h)*100)/100,d=b/16,e=(a,b)=>{for(a=String(a);a.length<b;)a=" "+a;return a};console.info(`%c⏱ ${e(b,5)} /${e(a,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*d,120))}deg 100% 31%);`,null==c?void 0:c.key)}return d}}function a7(a,b,c,d){return{debug:()=>{var c;return null!=(c=null==a?void 0:a.debugAll)?c:a[b]},key:!1,onChange:d}}let a8="debugHeaders";function a9(a,b,c){var d;let e={id:null!=(d=c.id)?d:b.id,column:b,index:c.index,isPlaceholder:!!c.isPlaceholder,placeholderId:c.placeholderId,depth:c.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{let a=[],b=c=>{c.subHeaders&&c.subHeaders.length&&c.subHeaders.map(b),a.push(c)};return b(e),a},getContext:()=>({table:a,header:e,column:b})};return a._features.forEach(b=>{null==b.createHeader||b.createHeader(e,a)}),e}function ba(a,b,c,d){var e,f;let g=0,h=function(a,b){void 0===b&&(b=1),g=Math.max(g,b),a.filter(a=>a.getIsVisible()).forEach(a=>{var c;null!=(c=a.columns)&&c.length&&h(a.columns,b+1)},0)};h(a);let i=[],j=(a,b)=>{let e={depth:b,id:[d,`${b}`].filter(Boolean).join("_"),headers:[]},f=[];a.forEach(a=>{let g,h=[...f].reverse()[0],i=a.column.depth===e.depth,j=!1;if(i&&a.column.parent?g=a.column.parent:(g=a.column,j=!0),h&&(null==h?void 0:h.column)===g)h.subHeaders.push(a);else{let e=a9(c,g,{id:[d,b,g.id,null==a?void 0:a.id].filter(Boolean).join("_"),isPlaceholder:j,placeholderId:j?`${f.filter(a=>a.column===g).length}`:void 0,depth:b,index:f.length});e.subHeaders.push(a),f.push(e)}e.headers.push(a),a.headerGroup=e}),i.push(e),b>0&&j(f,b-1)};j(b.map((a,b)=>a9(c,a,{depth:g,index:b})),g-1),i.reverse();let k=a=>a.filter(a=>a.column.getIsVisible()).map(a=>{let b=0,c=0,d=[0];return a.subHeaders&&a.subHeaders.length?(d=[],k(a.subHeaders).forEach(a=>{let{colSpan:c,rowSpan:e}=a;b+=c,d.push(e)})):b=1,c+=Math.min(...d),a.colSpan=b,a.rowSpan=c,{colSpan:b,rowSpan:c}});return k(null!=(e=null==(f=i[0])?void 0:f.headers)?e:[]),i}let bb=(a,b,c,d,e,f,g)=>{let h={id:b,index:d,original:c,depth:e,parentId:g,_valuesCache:{},_uniqueValuesCache:{},getValue:b=>{if(h._valuesCache.hasOwnProperty(b))return h._valuesCache[b];let c=a.getColumn(b);if(null!=c&&c.accessorFn)return h._valuesCache[b]=c.accessorFn(h.original,d),h._valuesCache[b]},getUniqueValues:b=>{if(h._uniqueValuesCache.hasOwnProperty(b))return h._uniqueValuesCache[b];let c=a.getColumn(b);if(null!=c&&c.accessorFn)return c.columnDef.getUniqueValues?h._uniqueValuesCache[b]=c.columnDef.getUniqueValues(h.original,d):h._uniqueValuesCache[b]=[h.getValue(b)],h._uniqueValuesCache[b]},renderValue:b=>{var c;return null!=(c=h.getValue(b))?c:a.options.renderFallbackValue},subRows:null!=f?f:[],getLeafRows:()=>(function(a,b){let c=[],d=a=>{a.forEach(a=>{c.push(a);let e=b(a);null!=e&&e.length&&d(e)})};return d(a),c})(h.subRows,a=>a.subRows),getParentRow:()=>h.parentId?a.getRow(h.parentId,!0):void 0,getParentRows:()=>{let a=[],b=h;for(;;){let c=b.getParentRow();if(!c)break;a.push(c),b=c}return a.reverse()},getAllCells:a6(()=>[a.getAllLeafColumns()],b=>b.map(b=>(function(a,b,c,d){let e={id:`${b.id}_${c.id}`,row:b,column:c,getValue:()=>b.getValue(d),renderValue:()=>{var b;return null!=(b=e.getValue())?b:a.options.renderFallbackValue},getContext:a6(()=>[a,c,b,e],(a,b,c,d)=>({table:a,column:b,row:c,cell:d,getValue:d.getValue,renderValue:d.renderValue}),a7(a.options,"debugCells","cell.getContext"))};return a._features.forEach(d=>{null==d.createCell||d.createCell(e,c,b,a)},{}),e})(a,h,b,b.id)),a7(a.options,"debugRows","getAllCells")),_getAllCellsByColumnId:a6(()=>[h.getAllCells()],a=>a.reduce((a,b)=>(a[b.column.id]=b,a),{}),a7(a.options,"debugRows","getAllCellsByColumnId"))};for(let b=0;b<a._features.length;b++){let c=a._features[b];null==c||null==c.createRow||c.createRow(h,a)}return h},bc=(a,b,c)=>{var d,e;let f=null==c||null==(d=c.toString())?void 0:d.toLowerCase();return!!(null==(e=a.getValue(b))||null==(e=e.toString())||null==(e=e.toLowerCase())?void 0:e.includes(f))};bc.autoRemove=a=>bm(a);let bd=(a,b,c)=>{var d;return!!(null==(d=a.getValue(b))||null==(d=d.toString())?void 0:d.includes(c))};bd.autoRemove=a=>bm(a);let be=(a,b,c)=>{var d;return(null==(d=a.getValue(b))||null==(d=d.toString())?void 0:d.toLowerCase())===(null==c?void 0:c.toLowerCase())};be.autoRemove=a=>bm(a);let bf=(a,b,c)=>{var d;return null==(d=a.getValue(b))?void 0:d.includes(c)};bf.autoRemove=a=>bm(a);let bg=(a,b,c)=>!c.some(c=>{var d;return!(null!=(d=a.getValue(b))&&d.includes(c))});bg.autoRemove=a=>bm(a)||!(null!=a&&a.length);let bh=(a,b,c)=>c.some(c=>{var d;return null==(d=a.getValue(b))?void 0:d.includes(c)});bh.autoRemove=a=>bm(a)||!(null!=a&&a.length);let bi=(a,b,c)=>a.getValue(b)===c;bi.autoRemove=a=>bm(a);let bj=(a,b,c)=>a.getValue(b)==c;bj.autoRemove=a=>bm(a);let bk=(a,b,c)=>{let[d,e]=c,f=a.getValue(b);return f>=d&&f<=e};bk.resolveFilterValue=a=>{let[b,c]=a,d="number"!=typeof b?parseFloat(b):b,e="number"!=typeof c?parseFloat(c):c,f=null===b||Number.isNaN(d)?-1/0:d,g=null===c||Number.isNaN(e)?1/0:e;if(f>g){let a=f;f=g,g=a}return[f,g]},bk.autoRemove=a=>bm(a)||bm(a[0])&&bm(a[1]);let bl={includesString:bc,includesStringSensitive:bd,equalsString:be,arrIncludes:bf,arrIncludesAll:bg,arrIncludesSome:bh,equals:bi,weakEquals:bj,inNumberRange:bk};function bm(a){return null==a||""===a}function bn(a,b,c){return!!a&&!!a.autoRemove&&a.autoRemove(b,c)||void 0===b||"string"==typeof b&&!b}let bo={sum:(a,b,c)=>c.reduce((b,c)=>{let d=c.getValue(a);return b+("number"==typeof d?d:0)},0),min:(a,b,c)=>{let d;return c.forEach(b=>{let c=b.getValue(a);null!=c&&(d>c||void 0===d&&c>=c)&&(d=c)}),d},max:(a,b,c)=>{let d;return c.forEach(b=>{let c=b.getValue(a);null!=c&&(d<c||void 0===d&&c>=c)&&(d=c)}),d},extent:(a,b,c)=>{let d,e;return c.forEach(b=>{let c=b.getValue(a);null!=c&&(void 0===d?c>=c&&(d=e=c):(d>c&&(d=c),e<c&&(e=c)))}),[d,e]},mean:(a,b)=>{let c=0,d=0;if(b.forEach(b=>{let e=b.getValue(a);null!=e&&(e*=1)>=e&&(++c,d+=e)}),c)return d/c},median:(a,b)=>{if(!b.length)return;let c=b.map(b=>b.getValue(a));if(!function(a){return Array.isArray(a)&&a.every(a=>"number"==typeof a)}(c))return;if(1===c.length)return c[0];let d=Math.floor(c.length/2),e=c.sort((a,b)=>a-b);return c.length%2!=0?e[d]:(e[d-1]+e[d])/2},unique:(a,b)=>Array.from(new Set(b.map(b=>b.getValue(a))).values()),uniqueCount:(a,b)=>new Set(b.map(b=>b.getValue(a))).size,count:(a,b)=>b.length},bp=()=>({left:[],right:[]}),bq={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},br=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),bs=null;function bt(a){return"touchstart"===a.type}function bu(a,b){return b?"center"===b?a.getCenterVisibleLeafColumns():"left"===b?a.getLeftVisibleLeafColumns():a.getRightVisibleLeafColumns():a.getVisibleLeafColumns()}let bv=()=>({pageIndex:0,pageSize:10}),bw=()=>({top:[],bottom:[]}),bx=(a,b,c,d,e)=>{var f;let g=e.getRow(b,!0);c?(g.getCanMultiSelect()||Object.keys(a).forEach(b=>delete a[b]),g.getCanSelect()&&(a[b]=!0)):delete a[b],d&&null!=(f=g.subRows)&&f.length&&g.getCanSelectSubRows()&&g.subRows.forEach(b=>bx(a,b.id,c,d,e))};function by(a,b){let c=a.getState().rowSelection,d=[],e={},f=function(a,b){return a.map(a=>{var b;let g=bz(a,c);if(g&&(d.push(a),e[a.id]=a),null!=(b=a.subRows)&&b.length&&(a={...a,subRows:f(a.subRows)}),g)return a}).filter(Boolean)};return{rows:f(b.rows),flatRows:d,rowsById:e}}function bz(a,b){var c;return null!=(c=b[a.id])&&c}function bA(a,b,c){var d;if(!(null!=(d=a.subRows)&&d.length))return!1;let e=!0,f=!1;return a.subRows.forEach(a=>{if((!f||e)&&(a.getCanSelect()&&(bz(a,b)?f=!0:e=!1),a.subRows&&a.subRows.length)){let c=bA(a,b);"all"===c?f=!0:("some"===c&&(f=!0),e=!1)}}),e?"all":!!f&&"some"}let bB=/([0-9]+)/gm;function bC(a,b){return a===b?0:a>b?1:-1}function bD(a){return"number"==typeof a?isNaN(a)||a===1/0||a===-1/0?"":String(a):"string"==typeof a?a:""}function bE(a,b){let c=a.split(bB).filter(Boolean),d=b.split(bB).filter(Boolean);for(;c.length&&d.length;){let a=c.shift(),b=d.shift(),e=parseInt(a,10),f=parseInt(b,10),g=[e,f].sort();if(isNaN(g[0])){if(a>b)return 1;if(b>a)return -1;continue}if(isNaN(g[1]))return isNaN(e)?-1:1;if(e>f)return 1;if(f>e)return -1}return c.length-d.length}let bF={alphanumeric:(a,b,c)=>bE(bD(a.getValue(c)).toLowerCase(),bD(b.getValue(c)).toLowerCase()),alphanumericCaseSensitive:(a,b,c)=>bE(bD(a.getValue(c)),bD(b.getValue(c))),text:(a,b,c)=>bC(bD(a.getValue(c)).toLowerCase(),bD(b.getValue(c)).toLowerCase()),textCaseSensitive:(a,b,c)=>bC(bD(a.getValue(c)),bD(b.getValue(c))),datetime:(a,b,c)=>{let d=a.getValue(c),e=b.getValue(c);return d>e?1:d<e?-1:0},basic:(a,b,c)=>bC(a.getValue(c),b.getValue(c))},bG=[{createTable:a=>{a.getHeaderGroups=a6(()=>[a.getAllColumns(),a.getVisibleLeafColumns(),a.getState().columnPinning.left,a.getState().columnPinning.right],(b,c,d,e)=>{var f,g;let h=null!=(f=null==d?void 0:d.map(a=>c.find(b=>b.id===a)).filter(Boolean))?f:[],i=null!=(g=null==e?void 0:e.map(a=>c.find(b=>b.id===a)).filter(Boolean))?g:[];return ba(b,[...h,...c.filter(a=>!(null!=d&&d.includes(a.id))&&!(null!=e&&e.includes(a.id))),...i],a)},a7(a.options,a8,"getHeaderGroups")),a.getCenterHeaderGroups=a6(()=>[a.getAllColumns(),a.getVisibleLeafColumns(),a.getState().columnPinning.left,a.getState().columnPinning.right],(b,c,d,e)=>ba(b,c=c.filter(a=>!(null!=d&&d.includes(a.id))&&!(null!=e&&e.includes(a.id))),a,"center"),a7(a.options,a8,"getCenterHeaderGroups")),a.getLeftHeaderGroups=a6(()=>[a.getAllColumns(),a.getVisibleLeafColumns(),a.getState().columnPinning.left],(b,c,d)=>{var e;return ba(b,null!=(e=null==d?void 0:d.map(a=>c.find(b=>b.id===a)).filter(Boolean))?e:[],a,"left")},a7(a.options,a8,"getLeftHeaderGroups")),a.getRightHeaderGroups=a6(()=>[a.getAllColumns(),a.getVisibleLeafColumns(),a.getState().columnPinning.right],(b,c,d)=>{var e;return ba(b,null!=(e=null==d?void 0:d.map(a=>c.find(b=>b.id===a)).filter(Boolean))?e:[],a,"right")},a7(a.options,a8,"getRightHeaderGroups")),a.getFooterGroups=a6(()=>[a.getHeaderGroups()],a=>[...a].reverse(),a7(a.options,a8,"getFooterGroups")),a.getLeftFooterGroups=a6(()=>[a.getLeftHeaderGroups()],a=>[...a].reverse(),a7(a.options,a8,"getLeftFooterGroups")),a.getCenterFooterGroups=a6(()=>[a.getCenterHeaderGroups()],a=>[...a].reverse(),a7(a.options,a8,"getCenterFooterGroups")),a.getRightFooterGroups=a6(()=>[a.getRightHeaderGroups()],a=>[...a].reverse(),a7(a.options,a8,"getRightFooterGroups")),a.getFlatHeaders=a6(()=>[a.getHeaderGroups()],a=>a.map(a=>a.headers).flat(),a7(a.options,a8,"getFlatHeaders")),a.getLeftFlatHeaders=a6(()=>[a.getLeftHeaderGroups()],a=>a.map(a=>a.headers).flat(),a7(a.options,a8,"getLeftFlatHeaders")),a.getCenterFlatHeaders=a6(()=>[a.getCenterHeaderGroups()],a=>a.map(a=>a.headers).flat(),a7(a.options,a8,"getCenterFlatHeaders")),a.getRightFlatHeaders=a6(()=>[a.getRightHeaderGroups()],a=>a.map(a=>a.headers).flat(),a7(a.options,a8,"getRightFlatHeaders")),a.getCenterLeafHeaders=a6(()=>[a.getCenterFlatHeaders()],a=>a.filter(a=>{var b;return!(null!=(b=a.subHeaders)&&b.length)}),a7(a.options,a8,"getCenterLeafHeaders")),a.getLeftLeafHeaders=a6(()=>[a.getLeftFlatHeaders()],a=>a.filter(a=>{var b;return!(null!=(b=a.subHeaders)&&b.length)}),a7(a.options,a8,"getLeftLeafHeaders")),a.getRightLeafHeaders=a6(()=>[a.getRightFlatHeaders()],a=>a.filter(a=>{var b;return!(null!=(b=a.subHeaders)&&b.length)}),a7(a.options,a8,"getRightLeafHeaders")),a.getLeafHeaders=a6(()=>[a.getLeftHeaderGroups(),a.getCenterHeaderGroups(),a.getRightHeaderGroups()],(a,b,c)=>{var d,e,f,g,h,i;return[...null!=(d=null==(e=a[0])?void 0:e.headers)?d:[],...null!=(f=null==(g=b[0])?void 0:g.headers)?f:[],...null!=(h=null==(i=c[0])?void 0:i.headers)?h:[]].map(a=>a.getLeafHeaders()).flat()},a7(a.options,a8,"getLeafHeaders"))}},{getInitialState:a=>({columnVisibility:{},...a}),getDefaultOptions:a=>({onColumnVisibilityChange:a4("columnVisibility",a)}),createColumn:(a,b)=>{a.toggleVisibility=c=>{a.getCanHide()&&b.setColumnVisibility(b=>({...b,[a.id]:null!=c?c:!a.getIsVisible()}))},a.getIsVisible=()=>{var c,d;let e=a.columns;return null==(c=e.length?e.some(a=>a.getIsVisible()):null==(d=b.getState().columnVisibility)?void 0:d[a.id])||c},a.getCanHide=()=>{var c,d;return(null==(c=a.columnDef.enableHiding)||c)&&(null==(d=b.options.enableHiding)||d)},a.getToggleVisibilityHandler=()=>b=>{null==a.toggleVisibility||a.toggleVisibility(b.target.checked)}},createRow:(a,b)=>{a._getAllVisibleCells=a6(()=>[a.getAllCells(),b.getState().columnVisibility],a=>a.filter(a=>a.column.getIsVisible()),a7(b.options,"debugRows","_getAllVisibleCells")),a.getVisibleCells=a6(()=>[a.getLeftVisibleCells(),a.getCenterVisibleCells(),a.getRightVisibleCells()],(a,b,c)=>[...a,...b,...c],a7(b.options,"debugRows","getVisibleCells"))},createTable:a=>{let b=(b,c)=>a6(()=>[c(),c().filter(a=>a.getIsVisible()).map(a=>a.id).join("_")],a=>a.filter(a=>null==a.getIsVisible?void 0:a.getIsVisible()),a7(a.options,"debugColumns",b));a.getVisibleFlatColumns=b("getVisibleFlatColumns",()=>a.getAllFlatColumns()),a.getVisibleLeafColumns=b("getVisibleLeafColumns",()=>a.getAllLeafColumns()),a.getLeftVisibleLeafColumns=b("getLeftVisibleLeafColumns",()=>a.getLeftLeafColumns()),a.getRightVisibleLeafColumns=b("getRightVisibleLeafColumns",()=>a.getRightLeafColumns()),a.getCenterVisibleLeafColumns=b("getCenterVisibleLeafColumns",()=>a.getCenterLeafColumns()),a.setColumnVisibility=b=>null==a.options.onColumnVisibilityChange?void 0:a.options.onColumnVisibilityChange(b),a.resetColumnVisibility=b=>{var c;a.setColumnVisibility(b?{}:null!=(c=a.initialState.columnVisibility)?c:{})},a.toggleAllColumnsVisible=b=>{var c;b=null!=(c=b)?c:!a.getIsAllColumnsVisible(),a.setColumnVisibility(a.getAllLeafColumns().reduce((a,c)=>({...a,[c.id]:b||!(null!=c.getCanHide&&c.getCanHide())}),{}))},a.getIsAllColumnsVisible=()=>!a.getAllLeafColumns().some(a=>!(null!=a.getIsVisible&&a.getIsVisible())),a.getIsSomeColumnsVisible=()=>a.getAllLeafColumns().some(a=>null==a.getIsVisible?void 0:a.getIsVisible()),a.getToggleAllColumnsVisibilityHandler=()=>b=>{var c;a.toggleAllColumnsVisible(null==(c=b.target)?void 0:c.checked)}}},{getInitialState:a=>({columnOrder:[],...a}),getDefaultOptions:a=>({onColumnOrderChange:a4("columnOrder",a)}),createColumn:(a,b)=>{a.getIndex=a6(a=>[bu(b,a)],b=>b.findIndex(b=>b.id===a.id),a7(b.options,"debugColumns","getIndex")),a.getIsFirstColumn=c=>{var d;return(null==(d=bu(b,c)[0])?void 0:d.id)===a.id},a.getIsLastColumn=c=>{var d;let e=bu(b,c);return(null==(d=e[e.length-1])?void 0:d.id)===a.id}},createTable:a=>{a.setColumnOrder=b=>null==a.options.onColumnOrderChange?void 0:a.options.onColumnOrderChange(b),a.resetColumnOrder=b=>{var c;a.setColumnOrder(b?[]:null!=(c=a.initialState.columnOrder)?c:[])},a._getOrderColumnsFn=a6(()=>[a.getState().columnOrder,a.getState().grouping,a.options.groupedColumnMode],(a,b,c)=>d=>{let e=[];if(null!=a&&a.length){let b=[...a],c=[...d];for(;c.length&&b.length;){let a=b.shift(),d=c.findIndex(b=>b.id===a);d>-1&&e.push(c.splice(d,1)[0])}e=[...e,...c]}else e=d;return function(a,b,c){if(!(null!=b&&b.length)||!c)return a;let d=a.filter(a=>!b.includes(a.id));return"remove"===c?d:[...b.map(b=>a.find(a=>a.id===b)).filter(Boolean),...d]}(e,b,c)},a7(a.options,"debugTable","_getOrderColumnsFn"))}},{getInitialState:a=>({columnPinning:bp(),...a}),getDefaultOptions:a=>({onColumnPinningChange:a4("columnPinning",a)}),createColumn:(a,b)=>{a.pin=c=>{let d=a.getLeafColumns().map(a=>a.id).filter(Boolean);b.setColumnPinning(a=>{var b,e,f,g,h,i;return"right"===c?{left:(null!=(f=null==a?void 0:a.left)?f:[]).filter(a=>!(null!=d&&d.includes(a))),right:[...(null!=(g=null==a?void 0:a.right)?g:[]).filter(a=>!(null!=d&&d.includes(a))),...d]}:"left"===c?{left:[...(null!=(h=null==a?void 0:a.left)?h:[]).filter(a=>!(null!=d&&d.includes(a))),...d],right:(null!=(i=null==a?void 0:a.right)?i:[]).filter(a=>!(null!=d&&d.includes(a)))}:{left:(null!=(b=null==a?void 0:a.left)?b:[]).filter(a=>!(null!=d&&d.includes(a))),right:(null!=(e=null==a?void 0:a.right)?e:[]).filter(a=>!(null!=d&&d.includes(a)))}})},a.getCanPin=()=>a.getLeafColumns().some(a=>{var c,d,e;return(null==(c=a.columnDef.enablePinning)||c)&&(null==(d=null!=(e=b.options.enableColumnPinning)?e:b.options.enablePinning)||d)}),a.getIsPinned=()=>{let c=a.getLeafColumns().map(a=>a.id),{left:d,right:e}=b.getState().columnPinning,f=c.some(a=>null==d?void 0:d.includes(a)),g=c.some(a=>null==e?void 0:e.includes(a));return f?"left":!!g&&"right"},a.getPinnedIndex=()=>{var c,d;let e=a.getIsPinned();return e?null!=(c=null==(d=b.getState().columnPinning)||null==(d=d[e])?void 0:d.indexOf(a.id))?c:-1:0}},createRow:(a,b)=>{a.getCenterVisibleCells=a6(()=>[a._getAllVisibleCells(),b.getState().columnPinning.left,b.getState().columnPinning.right],(a,b,c)=>{let d=[...null!=b?b:[],...null!=c?c:[]];return a.filter(a=>!d.includes(a.column.id))},a7(b.options,"debugRows","getCenterVisibleCells")),a.getLeftVisibleCells=a6(()=>[a._getAllVisibleCells(),b.getState().columnPinning.left],(a,b)=>(null!=b?b:[]).map(b=>a.find(a=>a.column.id===b)).filter(Boolean).map(a=>({...a,position:"left"})),a7(b.options,"debugRows","getLeftVisibleCells")),a.getRightVisibleCells=a6(()=>[a._getAllVisibleCells(),b.getState().columnPinning.right],(a,b)=>(null!=b?b:[]).map(b=>a.find(a=>a.column.id===b)).filter(Boolean).map(a=>({...a,position:"right"})),a7(b.options,"debugRows","getRightVisibleCells"))},createTable:a=>{a.setColumnPinning=b=>null==a.options.onColumnPinningChange?void 0:a.options.onColumnPinningChange(b),a.resetColumnPinning=b=>{var c,d;return a.setColumnPinning(b?bp():null!=(c=null==(d=a.initialState)?void 0:d.columnPinning)?c:bp())},a.getIsSomeColumnsPinned=b=>{var c,d,e;let f=a.getState().columnPinning;return b?!!(null==(c=f[b])?void 0:c.length):!!((null==(d=f.left)?void 0:d.length)||(null==(e=f.right)?void 0:e.length))},a.getLeftLeafColumns=a6(()=>[a.getAllLeafColumns(),a.getState().columnPinning.left],(a,b)=>(null!=b?b:[]).map(b=>a.find(a=>a.id===b)).filter(Boolean),a7(a.options,"debugColumns","getLeftLeafColumns")),a.getRightLeafColumns=a6(()=>[a.getAllLeafColumns(),a.getState().columnPinning.right],(a,b)=>(null!=b?b:[]).map(b=>a.find(a=>a.id===b)).filter(Boolean),a7(a.options,"debugColumns","getRightLeafColumns")),a.getCenterLeafColumns=a6(()=>[a.getAllLeafColumns(),a.getState().columnPinning.left,a.getState().columnPinning.right],(a,b,c)=>{let d=[...null!=b?b:[],...null!=c?c:[]];return a.filter(a=>!d.includes(a.id))},a7(a.options,"debugColumns","getCenterLeafColumns"))}},{createColumn:(a,b)=>{a._getFacetedRowModel=b.options.getFacetedRowModel&&b.options.getFacetedRowModel(b,a.id),a.getFacetedRowModel=()=>a._getFacetedRowModel?a._getFacetedRowModel():b.getPreFilteredRowModel(),a._getFacetedUniqueValues=b.options.getFacetedUniqueValues&&b.options.getFacetedUniqueValues(b,a.id),a.getFacetedUniqueValues=()=>a._getFacetedUniqueValues?a._getFacetedUniqueValues():new Map,a._getFacetedMinMaxValues=b.options.getFacetedMinMaxValues&&b.options.getFacetedMinMaxValues(b,a.id),a.getFacetedMinMaxValues=()=>{if(a._getFacetedMinMaxValues)return a._getFacetedMinMaxValues()}}},{getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:a=>({columnFilters:[],...a}),getDefaultOptions:a=>({onColumnFiltersChange:a4("columnFilters",a),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(a,b)=>{a.getAutoFilterFn=()=>{let c=b.getCoreRowModel().flatRows[0],d=null==c?void 0:c.getValue(a.id);return"string"==typeof d?bl.includesString:"number"==typeof d?bl.inNumberRange:"boolean"==typeof d||null!==d&&"object"==typeof d?bl.equals:Array.isArray(d)?bl.arrIncludes:bl.weakEquals},a.getFilterFn=()=>{var c,d;return a5(a.columnDef.filterFn)?a.columnDef.filterFn:"auto"===a.columnDef.filterFn?a.getAutoFilterFn():null!=(c=null==(d=b.options.filterFns)?void 0:d[a.columnDef.filterFn])?c:bl[a.columnDef.filterFn]},a.getCanFilter=()=>{var c,d,e;return(null==(c=a.columnDef.enableColumnFilter)||c)&&(null==(d=b.options.enableColumnFilters)||d)&&(null==(e=b.options.enableFilters)||e)&&!!a.accessorFn},a.getIsFiltered=()=>a.getFilterIndex()>-1,a.getFilterValue=()=>{var c;return null==(c=b.getState().columnFilters)||null==(c=c.find(b=>b.id===a.id))?void 0:c.value},a.getFilterIndex=()=>{var c,d;return null!=(c=null==(d=b.getState().columnFilters)?void 0:d.findIndex(b=>b.id===a.id))?c:-1},a.setFilterValue=c=>{b.setColumnFilters(b=>{var d,e;let f=a.getFilterFn(),g=null==b?void 0:b.find(b=>b.id===a.id),h=a3(c,g?g.value:void 0);if(bn(f,h,a))return null!=(d=null==b?void 0:b.filter(b=>b.id!==a.id))?d:[];let i={id:a.id,value:h};return g?null!=(e=null==b?void 0:b.map(b=>b.id===a.id?i:b))?e:[]:null!=b&&b.length?[...b,i]:[i]})}},createRow:(a,b)=>{a.columnFilters={},a.columnFiltersMeta={}},createTable:a=>{a.setColumnFilters=b=>{let c=a.getAllLeafColumns();null==a.options.onColumnFiltersChange||a.options.onColumnFiltersChange(a=>{var d;return null==(d=a3(b,a))?void 0:d.filter(a=>{let b=c.find(b=>b.id===a.id);return!(b&&bn(b.getFilterFn(),a.value,b))&&!0})})},a.resetColumnFilters=b=>{var c,d;a.setColumnFilters(b?[]:null!=(c=null==(d=a.initialState)?void 0:d.columnFilters)?c:[])},a.getPreFilteredRowModel=()=>a.getCoreRowModel(),a.getFilteredRowModel=()=>(!a._getFilteredRowModel&&a.options.getFilteredRowModel&&(a._getFilteredRowModel=a.options.getFilteredRowModel(a)),a.options.manualFiltering||!a._getFilteredRowModel)?a.getPreFilteredRowModel():a._getFilteredRowModel()}},{createTable:a=>{a._getGlobalFacetedRowModel=a.options.getFacetedRowModel&&a.options.getFacetedRowModel(a,"__global__"),a.getGlobalFacetedRowModel=()=>a.options.manualFiltering||!a._getGlobalFacetedRowModel?a.getPreFilteredRowModel():a._getGlobalFacetedRowModel(),a._getGlobalFacetedUniqueValues=a.options.getFacetedUniqueValues&&a.options.getFacetedUniqueValues(a,"__global__"),a.getGlobalFacetedUniqueValues=()=>a._getGlobalFacetedUniqueValues?a._getGlobalFacetedUniqueValues():new Map,a._getGlobalFacetedMinMaxValues=a.options.getFacetedMinMaxValues&&a.options.getFacetedMinMaxValues(a,"__global__"),a.getGlobalFacetedMinMaxValues=()=>{if(a._getGlobalFacetedMinMaxValues)return a._getGlobalFacetedMinMaxValues()}}},{getInitialState:a=>({globalFilter:void 0,...a}),getDefaultOptions:a=>({onGlobalFilterChange:a4("globalFilter",a),globalFilterFn:"auto",getColumnCanGlobalFilter:b=>{var c;let d=null==(c=a.getCoreRowModel().flatRows[0])||null==(c=c._getAllCellsByColumnId()[b.id])?void 0:c.getValue();return"string"==typeof d||"number"==typeof d}}),createColumn:(a,b)=>{a.getCanGlobalFilter=()=>{var c,d,e,f;return(null==(c=a.columnDef.enableGlobalFilter)||c)&&(null==(d=b.options.enableGlobalFilter)||d)&&(null==(e=b.options.enableFilters)||e)&&(null==(f=null==b.options.getColumnCanGlobalFilter?void 0:b.options.getColumnCanGlobalFilter(a))||f)&&!!a.accessorFn}},createTable:a=>{a.getGlobalAutoFilterFn=()=>bl.includesString,a.getGlobalFilterFn=()=>{var b,c;let{globalFilterFn:d}=a.options;return a5(d)?d:"auto"===d?a.getGlobalAutoFilterFn():null!=(b=null==(c=a.options.filterFns)?void 0:c[d])?b:bl[d]},a.setGlobalFilter=b=>{null==a.options.onGlobalFilterChange||a.options.onGlobalFilterChange(b)},a.resetGlobalFilter=b=>{a.setGlobalFilter(b?void 0:a.initialState.globalFilter)}}},{getInitialState:a=>({sorting:[],...a}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:a=>({onSortingChange:a4("sorting",a),isMultiSortEvent:a=>a.shiftKey}),createColumn:(a,b)=>{a.getAutoSortingFn=()=>{let c=b.getFilteredRowModel().flatRows.slice(10),d=!1;for(let b of c){let c=null==b?void 0:b.getValue(a.id);if("[object Date]"===Object.prototype.toString.call(c))return bF.datetime;if("string"==typeof c&&(d=!0,c.split(bB).length>1))return bF.alphanumeric}return d?bF.text:bF.basic},a.getAutoSortDir=()=>{let c=b.getFilteredRowModel().flatRows[0];return"string"==typeof(null==c?void 0:c.getValue(a.id))?"asc":"desc"},a.getSortingFn=()=>{var c,d;if(!a)throw Error();return a5(a.columnDef.sortingFn)?a.columnDef.sortingFn:"auto"===a.columnDef.sortingFn?a.getAutoSortingFn():null!=(c=null==(d=b.options.sortingFns)?void 0:d[a.columnDef.sortingFn])?c:bF[a.columnDef.sortingFn]},a.toggleSorting=(c,d)=>{let e=a.getNextSortingOrder(),f=null!=c;b.setSorting(g=>{let h,i=null==g?void 0:g.find(b=>b.id===a.id),j=null==g?void 0:g.findIndex(b=>b.id===a.id),k=[],l=f?c:"desc"===e;if("toggle"!=(h=null!=g&&g.length&&a.getCanMultiSort()&&d?i?"toggle":"add":null!=g&&g.length&&j!==g.length-1?"replace":i?"toggle":"replace")||f||e||(h="remove"),"add"===h){var m;(k=[...g,{id:a.id,desc:l}]).splice(0,k.length-(null!=(m=b.options.maxMultiSortColCount)?m:Number.MAX_SAFE_INTEGER))}else k="toggle"===h?g.map(b=>b.id===a.id?{...b,desc:l}:b):"remove"===h?g.filter(b=>b.id!==a.id):[{id:a.id,desc:l}];return k})},a.getFirstSortDir=()=>{var c,d;return(null!=(c=null!=(d=a.columnDef.sortDescFirst)?d:b.options.sortDescFirst)?c:"desc"===a.getAutoSortDir())?"desc":"asc"},a.getNextSortingOrder=c=>{var d,e;let f=a.getFirstSortDir(),g=a.getIsSorted();return g?(g===f||null!=(d=b.options.enableSortingRemoval)&&!d||!!c&&null!=(e=b.options.enableMultiRemove)&&!e)&&("desc"===g?"asc":"desc"):f},a.getCanSort=()=>{var c,d;return(null==(c=a.columnDef.enableSorting)||c)&&(null==(d=b.options.enableSorting)||d)&&!!a.accessorFn},a.getCanMultiSort=()=>{var c,d;return null!=(c=null!=(d=a.columnDef.enableMultiSort)?d:b.options.enableMultiSort)?c:!!a.accessorFn},a.getIsSorted=()=>{var c;let d=null==(c=b.getState().sorting)?void 0:c.find(b=>b.id===a.id);return!!d&&(d.desc?"desc":"asc")},a.getSortIndex=()=>{var c,d;return null!=(c=null==(d=b.getState().sorting)?void 0:d.findIndex(b=>b.id===a.id))?c:-1},a.clearSorting=()=>{b.setSorting(b=>null!=b&&b.length?b.filter(b=>b.id!==a.id):[])},a.getToggleSortingHandler=()=>{let c=a.getCanSort();return d=>{c&&(null==d.persist||d.persist(),null==a.toggleSorting||a.toggleSorting(void 0,!!a.getCanMultiSort()&&(null==b.options.isMultiSortEvent?void 0:b.options.isMultiSortEvent(d))))}}},createTable:a=>{a.setSorting=b=>null==a.options.onSortingChange?void 0:a.options.onSortingChange(b),a.resetSorting=b=>{var c,d;a.setSorting(b?[]:null!=(c=null==(d=a.initialState)?void 0:d.sorting)?c:[])},a.getPreSortedRowModel=()=>a.getGroupedRowModel(),a.getSortedRowModel=()=>(!a._getSortedRowModel&&a.options.getSortedRowModel&&(a._getSortedRowModel=a.options.getSortedRowModel(a)),a.options.manualSorting||!a._getSortedRowModel)?a.getPreSortedRowModel():a._getSortedRowModel()}},{getDefaultColumnDef:()=>({aggregatedCell:a=>{var b,c;return null!=(b=null==(c=a.getValue())||null==c.toString?void 0:c.toString())?b:null},aggregationFn:"auto"}),getInitialState:a=>({grouping:[],...a}),getDefaultOptions:a=>({onGroupingChange:a4("grouping",a),groupedColumnMode:"reorder"}),createColumn:(a,b)=>{a.toggleGrouping=()=>{b.setGrouping(b=>null!=b&&b.includes(a.id)?b.filter(b=>b!==a.id):[...null!=b?b:[],a.id])},a.getCanGroup=()=>{var c,d;return(null==(c=a.columnDef.enableGrouping)||c)&&(null==(d=b.options.enableGrouping)||d)&&(!!a.accessorFn||!!a.columnDef.getGroupingValue)},a.getIsGrouped=()=>{var c;return null==(c=b.getState().grouping)?void 0:c.includes(a.id)},a.getGroupedIndex=()=>{var c;return null==(c=b.getState().grouping)?void 0:c.indexOf(a.id)},a.getToggleGroupingHandler=()=>{let b=a.getCanGroup();return()=>{b&&a.toggleGrouping()}},a.getAutoAggregationFn=()=>{let c=b.getCoreRowModel().flatRows[0],d=null==c?void 0:c.getValue(a.id);return"number"==typeof d?bo.sum:"[object Date]"===Object.prototype.toString.call(d)?bo.extent:void 0},a.getAggregationFn=()=>{var c,d;if(!a)throw Error();return a5(a.columnDef.aggregationFn)?a.columnDef.aggregationFn:"auto"===a.columnDef.aggregationFn?a.getAutoAggregationFn():null!=(c=null==(d=b.options.aggregationFns)?void 0:d[a.columnDef.aggregationFn])?c:bo[a.columnDef.aggregationFn]}},createTable:a=>{a.setGrouping=b=>null==a.options.onGroupingChange?void 0:a.options.onGroupingChange(b),a.resetGrouping=b=>{var c,d;a.setGrouping(b?[]:null!=(c=null==(d=a.initialState)?void 0:d.grouping)?c:[])},a.getPreGroupedRowModel=()=>a.getFilteredRowModel(),a.getGroupedRowModel=()=>(!a._getGroupedRowModel&&a.options.getGroupedRowModel&&(a._getGroupedRowModel=a.options.getGroupedRowModel(a)),a.options.manualGrouping||!a._getGroupedRowModel)?a.getPreGroupedRowModel():a._getGroupedRowModel()},createRow:(a,b)=>{a.getIsGrouped=()=>!!a.groupingColumnId,a.getGroupingValue=c=>{if(a._groupingValuesCache.hasOwnProperty(c))return a._groupingValuesCache[c];let d=b.getColumn(c);return null!=d&&d.columnDef.getGroupingValue?(a._groupingValuesCache[c]=d.columnDef.getGroupingValue(a.original),a._groupingValuesCache[c]):a.getValue(c)},a._groupingValuesCache={}},createCell:(a,b,c,d)=>{a.getIsGrouped=()=>b.getIsGrouped()&&b.id===c.groupingColumnId,a.getIsPlaceholder=()=>!a.getIsGrouped()&&b.getIsGrouped(),a.getIsAggregated=()=>{var b;return!a.getIsGrouped()&&!a.getIsPlaceholder()&&!!(null!=(b=c.subRows)&&b.length)}}},{getInitialState:a=>({expanded:{},...a}),getDefaultOptions:a=>({onExpandedChange:a4("expanded",a),paginateExpandedRows:!0}),createTable:a=>{let b=!1,c=!1;a._autoResetExpanded=()=>{var d,e;if(!b)return void a._queue(()=>{b=!0});if(null!=(d=null!=(e=a.options.autoResetAll)?e:a.options.autoResetExpanded)?d:!a.options.manualExpanding){if(c)return;c=!0,a._queue(()=>{a.resetExpanded(),c=!1})}},a.setExpanded=b=>null==a.options.onExpandedChange?void 0:a.options.onExpandedChange(b),a.toggleAllRowsExpanded=b=>{(null!=b?b:!a.getIsAllRowsExpanded())?a.setExpanded(!0):a.setExpanded({})},a.resetExpanded=b=>{var c,d;a.setExpanded(b?{}:null!=(c=null==(d=a.initialState)?void 0:d.expanded)?c:{})},a.getCanSomeRowsExpand=()=>a.getPrePaginationRowModel().flatRows.some(a=>a.getCanExpand()),a.getToggleAllRowsExpandedHandler=()=>b=>{null==b.persist||b.persist(),a.toggleAllRowsExpanded()},a.getIsSomeRowsExpanded=()=>{let b=a.getState().expanded;return!0===b||Object.values(b).some(Boolean)},a.getIsAllRowsExpanded=()=>{let b=a.getState().expanded;return"boolean"==typeof b?!0===b:!(!Object.keys(b).length||a.getRowModel().flatRows.some(a=>!a.getIsExpanded()))},a.getExpandedDepth=()=>{let b=0;return(!0===a.getState().expanded?Object.keys(a.getRowModel().rowsById):Object.keys(a.getState().expanded)).forEach(a=>{let c=a.split(".");b=Math.max(b,c.length)}),b},a.getPreExpandedRowModel=()=>a.getSortedRowModel(),a.getExpandedRowModel=()=>(!a._getExpandedRowModel&&a.options.getExpandedRowModel&&(a._getExpandedRowModel=a.options.getExpandedRowModel(a)),a.options.manualExpanding||!a._getExpandedRowModel)?a.getPreExpandedRowModel():a._getExpandedRowModel()},createRow:(a,b)=>{a.toggleExpanded=c=>{b.setExpanded(d=>{var e;let f=!0===d||!!(null!=d&&d[a.id]),g={};if(!0===d?Object.keys(b.getRowModel().rowsById).forEach(a=>{g[a]=!0}):g=d,c=null!=(e=c)?e:!f,!f&&c)return{...g,[a.id]:!0};if(f&&!c){let{[a.id]:b,...c}=g;return c}return d})},a.getIsExpanded=()=>{var c;let d=b.getState().expanded;return!!(null!=(c=null==b.options.getIsRowExpanded?void 0:b.options.getIsRowExpanded(a))?c:!0===d||(null==d?void 0:d[a.id]))},a.getCanExpand=()=>{var c,d,e;return null!=(c=null==b.options.getRowCanExpand?void 0:b.options.getRowCanExpand(a))?c:(null==(d=b.options.enableExpanding)||d)&&!!(null!=(e=a.subRows)&&e.length)},a.getIsAllParentsExpanded=()=>{let c=!0,d=a;for(;c&&d.parentId;)c=(d=b.getRow(d.parentId,!0)).getIsExpanded();return c},a.getToggleExpandedHandler=()=>{let b=a.getCanExpand();return()=>{b&&a.toggleExpanded()}}}},{getInitialState:a=>({...a,pagination:{...bv(),...null==a?void 0:a.pagination}}),getDefaultOptions:a=>({onPaginationChange:a4("pagination",a)}),createTable:a=>{let b=!1,c=!1;a._autoResetPageIndex=()=>{var d,e;if(!b)return void a._queue(()=>{b=!0});if(null!=(d=null!=(e=a.options.autoResetAll)?e:a.options.autoResetPageIndex)?d:!a.options.manualPagination){if(c)return;c=!0,a._queue(()=>{a.resetPageIndex(),c=!1})}},a.setPagination=b=>null==a.options.onPaginationChange?void 0:a.options.onPaginationChange(a=>a3(b,a)),a.resetPagination=b=>{var c;a.setPagination(b?bv():null!=(c=a.initialState.pagination)?c:bv())},a.setPageIndex=b=>{a.setPagination(c=>{let d=a3(b,c.pageIndex);return d=Math.max(0,Math.min(d,void 0===a.options.pageCount||-1===a.options.pageCount?Number.MAX_SAFE_INTEGER:a.options.pageCount-1)),{...c,pageIndex:d}})},a.resetPageIndex=b=>{var c,d;a.setPageIndex(b?0:null!=(c=null==(d=a.initialState)||null==(d=d.pagination)?void 0:d.pageIndex)?c:0)},a.resetPageSize=b=>{var c,d;a.setPageSize(b?10:null!=(c=null==(d=a.initialState)||null==(d=d.pagination)?void 0:d.pageSize)?c:10)},a.setPageSize=b=>{a.setPagination(a=>{let c=Math.max(1,a3(b,a.pageSize)),d=Math.floor(a.pageSize*a.pageIndex/c);return{...a,pageIndex:d,pageSize:c}})},a.setPageCount=b=>a.setPagination(c=>{var d;let e=a3(b,null!=(d=a.options.pageCount)?d:-1);return"number"==typeof e&&(e=Math.max(-1,e)),{...c,pageCount:e}}),a.getPageOptions=a6(()=>[a.getPageCount()],a=>{let b=[];return a&&a>0&&(b=[...Array(a)].fill(null).map((a,b)=>b)),b},a7(a.options,"debugTable","getPageOptions")),a.getCanPreviousPage=()=>a.getState().pagination.pageIndex>0,a.getCanNextPage=()=>{let{pageIndex:b}=a.getState().pagination,c=a.getPageCount();return -1===c||0!==c&&b<c-1},a.previousPage=()=>a.setPageIndex(a=>a-1),a.nextPage=()=>a.setPageIndex(a=>a+1),a.firstPage=()=>a.setPageIndex(0),a.lastPage=()=>a.setPageIndex(a.getPageCount()-1),a.getPrePaginationRowModel=()=>a.getExpandedRowModel(),a.getPaginationRowModel=()=>(!a._getPaginationRowModel&&a.options.getPaginationRowModel&&(a._getPaginationRowModel=a.options.getPaginationRowModel(a)),a.options.manualPagination||!a._getPaginationRowModel)?a.getPrePaginationRowModel():a._getPaginationRowModel(),a.getPageCount=()=>{var b;return null!=(b=a.options.pageCount)?b:Math.ceil(a.getRowCount()/a.getState().pagination.pageSize)},a.getRowCount=()=>{var b;return null!=(b=a.options.rowCount)?b:a.getPrePaginationRowModel().rows.length}}},{getInitialState:a=>({rowPinning:bw(),...a}),getDefaultOptions:a=>({onRowPinningChange:a4("rowPinning",a)}),createRow:(a,b)=>{a.pin=(c,d,e)=>{let f=d?a.getLeafRows().map(a=>{let{id:b}=a;return b}):[],g=new Set([...e?a.getParentRows().map(a=>{let{id:b}=a;return b}):[],a.id,...f]);b.setRowPinning(a=>{var b,d,e,f,h,i;return"bottom"===c?{top:(null!=(e=null==a?void 0:a.top)?e:[]).filter(a=>!(null!=g&&g.has(a))),bottom:[...(null!=(f=null==a?void 0:a.bottom)?f:[]).filter(a=>!(null!=g&&g.has(a))),...Array.from(g)]}:"top"===c?{top:[...(null!=(h=null==a?void 0:a.top)?h:[]).filter(a=>!(null!=g&&g.has(a))),...Array.from(g)],bottom:(null!=(i=null==a?void 0:a.bottom)?i:[]).filter(a=>!(null!=g&&g.has(a)))}:{top:(null!=(b=null==a?void 0:a.top)?b:[]).filter(a=>!(null!=g&&g.has(a))),bottom:(null!=(d=null==a?void 0:a.bottom)?d:[]).filter(a=>!(null!=g&&g.has(a)))}})},a.getCanPin=()=>{var c;let{enableRowPinning:d,enablePinning:e}=b.options;return"function"==typeof d?d(a):null==(c=null!=d?d:e)||c},a.getIsPinned=()=>{let c=[a.id],{top:d,bottom:e}=b.getState().rowPinning,f=c.some(a=>null==d?void 0:d.includes(a)),g=c.some(a=>null==e?void 0:e.includes(a));return f?"top":!!g&&"bottom"},a.getPinnedIndex=()=>{var c,d;let e=a.getIsPinned();if(!e)return -1;let f=null==(c="top"===e?b.getTopRows():b.getBottomRows())?void 0:c.map(a=>{let{id:b}=a;return b});return null!=(d=null==f?void 0:f.indexOf(a.id))?d:-1}},createTable:a=>{a.setRowPinning=b=>null==a.options.onRowPinningChange?void 0:a.options.onRowPinningChange(b),a.resetRowPinning=b=>{var c,d;return a.setRowPinning(b?bw():null!=(c=null==(d=a.initialState)?void 0:d.rowPinning)?c:bw())},a.getIsSomeRowsPinned=b=>{var c,d,e;let f=a.getState().rowPinning;return b?!!(null==(c=f[b])?void 0:c.length):!!((null==(d=f.top)?void 0:d.length)||(null==(e=f.bottom)?void 0:e.length))},a._getPinnedRows=(b,c,d)=>{var e;return(null==(e=a.options.keepPinnedRows)||e?(null!=c?c:[]).map(b=>{let c=a.getRow(b,!0);return c.getIsAllParentsExpanded()?c:null}):(null!=c?c:[]).map(a=>b.find(b=>b.id===a))).filter(Boolean).map(a=>({...a,position:d}))},a.getTopRows=a6(()=>[a.getRowModel().rows,a.getState().rowPinning.top],(b,c)=>a._getPinnedRows(b,c,"top"),a7(a.options,"debugRows","getTopRows")),a.getBottomRows=a6(()=>[a.getRowModel().rows,a.getState().rowPinning.bottom],(b,c)=>a._getPinnedRows(b,c,"bottom"),a7(a.options,"debugRows","getBottomRows")),a.getCenterRows=a6(()=>[a.getRowModel().rows,a.getState().rowPinning.top,a.getState().rowPinning.bottom],(a,b,c)=>{let d=new Set([...null!=b?b:[],...null!=c?c:[]]);return a.filter(a=>!d.has(a.id))},a7(a.options,"debugRows","getCenterRows"))}},{getInitialState:a=>({rowSelection:{},...a}),getDefaultOptions:a=>({onRowSelectionChange:a4("rowSelection",a),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:a=>{a.setRowSelection=b=>null==a.options.onRowSelectionChange?void 0:a.options.onRowSelectionChange(b),a.resetRowSelection=b=>{var c;return a.setRowSelection(b?{}:null!=(c=a.initialState.rowSelection)?c:{})},a.toggleAllRowsSelected=b=>{a.setRowSelection(c=>{b=void 0!==b?b:!a.getIsAllRowsSelected();let d={...c},e=a.getPreGroupedRowModel().flatRows;return b?e.forEach(a=>{a.getCanSelect()&&(d[a.id]=!0)}):e.forEach(a=>{delete d[a.id]}),d})},a.toggleAllPageRowsSelected=b=>a.setRowSelection(c=>{let d=void 0!==b?b:!a.getIsAllPageRowsSelected(),e={...c};return a.getRowModel().rows.forEach(b=>{bx(e,b.id,d,!0,a)}),e}),a.getPreSelectedRowModel=()=>a.getCoreRowModel(),a.getSelectedRowModel=a6(()=>[a.getState().rowSelection,a.getCoreRowModel()],(b,c)=>Object.keys(b).length?by(a,c):{rows:[],flatRows:[],rowsById:{}},a7(a.options,"debugTable","getSelectedRowModel")),a.getFilteredSelectedRowModel=a6(()=>[a.getState().rowSelection,a.getFilteredRowModel()],(b,c)=>Object.keys(b).length?by(a,c):{rows:[],flatRows:[],rowsById:{}},a7(a.options,"debugTable","getFilteredSelectedRowModel")),a.getGroupedSelectedRowModel=a6(()=>[a.getState().rowSelection,a.getSortedRowModel()],(b,c)=>Object.keys(b).length?by(a,c):{rows:[],flatRows:[],rowsById:{}},a7(a.options,"debugTable","getGroupedSelectedRowModel")),a.getIsAllRowsSelected=()=>{let b=a.getFilteredRowModel().flatRows,{rowSelection:c}=a.getState(),d=!!(b.length&&Object.keys(c).length);return d&&b.some(a=>a.getCanSelect()&&!c[a.id])&&(d=!1),d},a.getIsAllPageRowsSelected=()=>{let b=a.getPaginationRowModel().flatRows.filter(a=>a.getCanSelect()),{rowSelection:c}=a.getState(),d=!!b.length;return d&&b.some(a=>!c[a.id])&&(d=!1),d},a.getIsSomeRowsSelected=()=>{var b;let c=Object.keys(null!=(b=a.getState().rowSelection)?b:{}).length;return c>0&&c<a.getFilteredRowModel().flatRows.length},a.getIsSomePageRowsSelected=()=>{let b=a.getPaginationRowModel().flatRows;return!a.getIsAllPageRowsSelected()&&b.filter(a=>a.getCanSelect()).some(a=>a.getIsSelected()||a.getIsSomeSelected())},a.getToggleAllRowsSelectedHandler=()=>b=>{a.toggleAllRowsSelected(b.target.checked)},a.getToggleAllPageRowsSelectedHandler=()=>b=>{a.toggleAllPageRowsSelected(b.target.checked)}},createRow:(a,b)=>{a.toggleSelected=(c,d)=>{let e=a.getIsSelected();b.setRowSelection(f=>{var g;if(c=void 0!==c?c:!e,a.getCanSelect()&&e===c)return f;let h={...f};return bx(h,a.id,c,null==(g=null==d?void 0:d.selectChildren)||g,b),h})},a.getIsSelected=()=>{let{rowSelection:c}=b.getState();return bz(a,c)},a.getIsSomeSelected=()=>{let{rowSelection:c}=b.getState();return"some"===bA(a,c)},a.getIsAllSubRowsSelected=()=>{let{rowSelection:c}=b.getState();return"all"===bA(a,c)},a.getCanSelect=()=>{var c;return"function"==typeof b.options.enableRowSelection?b.options.enableRowSelection(a):null==(c=b.options.enableRowSelection)||c},a.getCanSelectSubRows=()=>{var c;return"function"==typeof b.options.enableSubRowSelection?b.options.enableSubRowSelection(a):null==(c=b.options.enableSubRowSelection)||c},a.getCanMultiSelect=()=>{var c;return"function"==typeof b.options.enableMultiRowSelection?b.options.enableMultiRowSelection(a):null==(c=b.options.enableMultiRowSelection)||c},a.getToggleSelectedHandler=()=>{let b=a.getCanSelect();return c=>{var d;b&&a.toggleSelected(null==(d=c.target)?void 0:d.checked)}}}},{getDefaultColumnDef:()=>bq,getInitialState:a=>({columnSizing:{},columnSizingInfo:br(),...a}),getDefaultOptions:a=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:a4("columnSizing",a),onColumnSizingInfoChange:a4("columnSizingInfo",a)}),createColumn:(a,b)=>{a.getSize=()=>{var c,d,e;let f=b.getState().columnSizing[a.id];return Math.min(Math.max(null!=(c=a.columnDef.minSize)?c:bq.minSize,null!=(d=null!=f?f:a.columnDef.size)?d:bq.size),null!=(e=a.columnDef.maxSize)?e:bq.maxSize)},a.getStart=a6(a=>[a,bu(b,a),b.getState().columnSizing],(b,c)=>c.slice(0,a.getIndex(b)).reduce((a,b)=>a+b.getSize(),0),a7(b.options,"debugColumns","getStart")),a.getAfter=a6(a=>[a,bu(b,a),b.getState().columnSizing],(b,c)=>c.slice(a.getIndex(b)+1).reduce((a,b)=>a+b.getSize(),0),a7(b.options,"debugColumns","getAfter")),a.resetSize=()=>{b.setColumnSizing(b=>{let{[a.id]:c,...d}=b;return d})},a.getCanResize=()=>{var c,d;return(null==(c=a.columnDef.enableResizing)||c)&&(null==(d=b.options.enableColumnResizing)||d)},a.getIsResizing=()=>b.getState().columnSizingInfo.isResizingColumn===a.id},createHeader:(a,b)=>{a.getSize=()=>{let b=0,c=a=>{if(a.subHeaders.length)a.subHeaders.forEach(c);else{var d;b+=null!=(d=a.column.getSize())?d:0}};return c(a),b},a.getStart=()=>{if(a.index>0){let b=a.headerGroup.headers[a.index-1];return b.getStart()+b.getSize()}return 0},a.getResizeHandler=c=>{let d=b.getColumn(a.column.id),e=null==d?void 0:d.getCanResize();return f=>{if(!d||!e||(null==f.persist||f.persist(),bt(f)&&f.touches&&f.touches.length>1))return;let g=a.getSize(),h=a?a.getLeafHeaders().map(a=>[a.column.id,a.column.getSize()]):[[d.id,d.getSize()]],i=bt(f)?Math.round(f.touches[0].clientX):f.clientX,j={},k=(a,c)=>{"number"==typeof c&&(b.setColumnSizingInfo(a=>{var d,e;let f="rtl"===b.options.columnResizeDirection?-1:1,g=(c-(null!=(d=null==a?void 0:a.startOffset)?d:0))*f,h=Math.max(g/(null!=(e=null==a?void 0:a.startSize)?e:0),-.999999);return a.columnSizingStart.forEach(a=>{let[b,c]=a;j[b]=Math.round(100*Math.max(c+c*h,0))/100}),{...a,deltaOffset:g,deltaPercentage:h}}),("onChange"===b.options.columnResizeMode||"end"===a)&&b.setColumnSizing(a=>({...a,...j})))},l=a=>k("move",a),m=a=>{k("end",a),b.setColumnSizingInfo(a=>({...a,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},n=c||("undefined"!=typeof document?document:null),o={moveHandler:a=>l(a.clientX),upHandler:a=>{null==n||n.removeEventListener("mousemove",o.moveHandler),null==n||n.removeEventListener("mouseup",o.upHandler),m(a.clientX)}},p={moveHandler:a=>(a.cancelable&&(a.preventDefault(),a.stopPropagation()),l(a.touches[0].clientX),!1),upHandler:a=>{var b;null==n||n.removeEventListener("touchmove",p.moveHandler),null==n||n.removeEventListener("touchend",p.upHandler),a.cancelable&&(a.preventDefault(),a.stopPropagation()),m(null==(b=a.touches[0])?void 0:b.clientX)}},q=!!function(){if("boolean"==typeof bs)return bs;let a=!1;try{let b=()=>{};window.addEventListener("test",b,{get passive(){return a=!0,!1}}),window.removeEventListener("test",b)}catch(b){a=!1}return bs=a}()&&{passive:!1};bt(f)?(null==n||n.addEventListener("touchmove",p.moveHandler,q),null==n||n.addEventListener("touchend",p.upHandler,q)):(null==n||n.addEventListener("mousemove",o.moveHandler,q),null==n||n.addEventListener("mouseup",o.upHandler,q)),b.setColumnSizingInfo(a=>({...a,startOffset:i,startSize:g,deltaOffset:0,deltaPercentage:0,columnSizingStart:h,isResizingColumn:d.id}))}}},createTable:a=>{a.setColumnSizing=b=>null==a.options.onColumnSizingChange?void 0:a.options.onColumnSizingChange(b),a.setColumnSizingInfo=b=>null==a.options.onColumnSizingInfoChange?void 0:a.options.onColumnSizingInfoChange(b),a.resetColumnSizing=b=>{var c;a.setColumnSizing(b?{}:null!=(c=a.initialState.columnSizing)?c:{})},a.resetHeaderSizeInfo=b=>{var c;a.setColumnSizingInfo(b?br():null!=(c=a.initialState.columnSizingInfo)?c:br())},a.getTotalSize=()=>{var b,c;return null!=(b=null==(c=a.getHeaderGroups()[0])?void 0:c.headers.reduce((a,b)=>a+b.getSize(),0))?b:0},a.getLeftTotalSize=()=>{var b,c;return null!=(b=null==(c=a.getLeftHeaderGroups()[0])?void 0:c.headers.reduce((a,b)=>a+b.getSize(),0))?b:0},a.getCenterTotalSize=()=>{var b,c;return null!=(b=null==(c=a.getCenterHeaderGroups()[0])?void 0:c.headers.reduce((a,b)=>a+b.getSize(),0))?b:0},a.getRightTotalSize=()=>{var b,c;return null!=(b=null==(c=a.getRightHeaderGroups()[0])?void 0:c.headers.reduce((a,b)=>a+b.getSize(),0))?b:0}}}];function bH(a,b){var c,e,f;return a?"function"==typeof(e=c=a)&&(()=>{let a=Object.getPrototypeOf(e);return a.prototype&&a.prototype.isReactComponent})()||"function"==typeof c||"object"==typeof(f=c)&&"symbol"==typeof f.$$typeof&&["react.memo","react.forward_ref"].includes(f.$$typeof.description)?d.createElement(a,b):a:null}let bI="diffView",bJ="previousDocument",bK="nextDocument";function bL(){let a,b,c,d=(0,am.c)(9),{navigate:e,state:f}=(0,aw.useRouter)();d[0]!==e||d[1]!==f?(a=a=>{let{mode:b,previousDocument:c,nextDocument:d}=a,g={...(0,aH.default)(f._searchParams),...b?{[bI]:b}:{},...c?{[bJ]:[c.type,c.id].join(",")}:{},...d?{[bK]:[d.type,d.id].join(",")}:{}};e({...f,_searchParams:(0,aI.default)(g)})},d[0]=e,d[1]=f,d[2]=a):a=d[2];let g=a;d[3]!==e||d[4]!==f?(b=()=>{e({...f,_searchParams:(f._searchParams??[]).filter(bM)})},d[3]=e,d[4]=f,d[5]=b):b=d[5];let h=b;return d[6]!==h||d[7]!==g?(c={navigateDiffView:g,exitDiffView:h},d[6]=h,d[7]=g,d[8]=c):c=d[8],c}function bM(a){let[b]=a;return![bI,bJ,bK].includes(b)}let bN=["version"];function bO({onParamsError:a}={}){let{state:b}=(0,aw.useRouter)(),c=new URLSearchParams(b._searchParams),e=c.get(bJ),f=c.get(bK),g=c.get(bI),h=[e,f,g].some(a=>null!==a),i=(0,d.useMemo)(()=>(function({previousDocument:a,nextDocument:b,mode:c}){let d=[],[e,f]=a.split(",").filter(Boolean),[g,h]=b.split(",").filter(Boolean);return bN.includes(c)||d.push(["invalidModeParam",c]),(typeof e>"u"||typeof f>"u")&&d.push(["invalidPreviousDocumentParam",a]),(typeof g>"u"||typeof h>"u")&&d.push(["invalidNextDocumentParam",b]),0!==d.length?{result:"error",errors:d}:{result:"success",params:{mode:c,documents:{previous:{type:e,id:f},next:{type:g,id:h}}}}})({previousDocument:e??"",nextDocument:f??"",mode:g??""}),[g,f,e]);return(0,d.useEffect)(()=>{"error"===i.result&&h&&a?.(i.errors)},[h,a,i]),"error"===i.result?{isActive:!1}:{state:"ready",isActive:!0,...i.params}}function bP(a){return null!==a}function bQ(a,b){return(0,f.isPublishedId)(a)?"published":(0,f.isDraftId)(a)?"draft":b.find(({_id:b})=>(0,e.getReleaseIdFromReleaseDocumentId)(b)===(0,f.getVersionFromId)(a))}let bR=ar.styled.header`
  display: grid;
  grid-area: header;
  grid-template-columns: 1fr min-content 1fr;
  border-block-end: 1px solid var(--card-border-color);
`,bS=ar.styled.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
`,bT=({documentId:a,state:b})=>{let{t:g}=(0,e.useTranslation)(r),{data:h}=(0,e.useDocumentVersions)({documentId:a}),{exitDiffView:j,navigateDiffView:k}=bL(),{documents:l}=bO(),m=(0,e.useActiveReleases)(),n=h.flatMap(a=>(0,f.getVersionFromId)(a)??[]),o=(0,d.useMemo)(()=>m.data.filter(a=>{let b=(0,e.getReleaseIdFromReleaseDocumentId)(a._id);return"u">typeof b&&n.includes(b)}),[m.data,n]),p=(0,d.useCallback)(a=>{"u">typeof l?.previous&&k({previousDocument:{...l.previous,id:a}})},[l?.previous,k]),q=(0,d.useCallback)(a=>{"u">typeof l?.next&&k({nextDocument:{...l.next,id:a}})},[l?.next,k]);return(0,c.jsxs)(bR,{children:[(0,c.jsxs)(bS,{children:[(0,c.jsx)(an.Box,{padding:4,children:(0,c.jsx)(an.Text,{as:"h1",size:1,muted:!0,children:g("compare-versions.title")})}),"u">typeof l?.previous&&(0,c.jsx)(bU,{releases:o,onSelectRelease:p,role:"previous",documentId:a,state:b,document:l.previous})]}),(0,c.jsx)(an.Flex,{align:"center",paddingX:3,children:(0,c.jsx)(an.Text,{size:1,children:(0,c.jsx)(i.TransferIcon,{})})}),(0,c.jsxs)(bS,{children:["u">typeof l?.next&&(0,c.jsx)(bU,{releases:o,onSelectRelease:q,role:"next",documentId:a,state:b,document:l.next}),(0,c.jsx)(an.Box,{padding:3,style:{justifySelf:"end"},children:(0,c.jsx)(an.Button,{icon:i.CloseIcon,mode:"bleed",onClick:j,padding:2})})]})]})},bU=({releases:a=[],onSelectRelease:b,role:g,documentId:h,document:j})=>{let{published:k,draft:l}=(0,e.useEditState)((0,f.getPublishedId)(j.id),j.type),m=(0,d.useMemo)(()=>bQ(j.id,a),[j.id,a]),{t:n}=(0,e.useTranslation)(r),{t:p}=(0,e.useTranslation)(),{document:{drafts:{enabled:q}}}=(0,e.useWorkspace)();return(0,c.jsx)(o.MenuButton,{id:g,button:(0,c.jsx)(an.Button,{type:"button",mode:"bleed",padding:2,paddingRight:3,radius:"full",selected:!0,...function({selected:a,tCore:b,tStructure:d}){if(typeof a>"u")return{text:b("common.loading"),tone:"neutral",disabled:!0};if((0,e.isReleaseDocument)(a)){let d=a?(0,e.getReleaseTone)(a):"neutral";return{text:a?.metadata.title||b("release.placeholder-untitled-release"),icon:(0,c.jsx)(e.ReleaseAvatar,{padding:1,tone:d}),iconRight:a&&(0,e.isReleaseScheduledOrScheduling)(a)?(0,c.jsx)(i.LockIcon,{}):void 0,tone:d}}let f="published"===a?"positive":"caution";return{text:d(["compare-versions.status",a].join(".")),icon:(0,c.jsx)(e.ReleaseAvatar,{padding:1,tone:f}),tone:f}}({selected:m,tCore:p,tStructure:n})}),menu:(0,c.jsxs)(an.Menu,{children:[k&&(0,c.jsx)(bV,{type:"published",onSelect:b,isSelected:"published"===m,documentId:h}),q&&l&&(0,c.jsx)(bV,{type:"draft",onSelect:b,isSelected:"draft"===m,documentId:h}),a.map(a=>(0,c.jsx)(bV,{release:a,onSelect:b,isSelected:"string"!=typeof m&&m?._id===a._id,documentId:h},a._id))]})})},bV=({type:a,release:b,onSelect:g,isSelected:h,documentId:j})=>{let{t:k}=(0,e.useTranslation)(),{t:l}=(0,e.useTranslation)(r),m=(0,d.useCallback)(()=>"draft"===a?void g((0,f.getDraftId)(j)):"published"===a?void g((0,f.getPublishedId)(j)):void("u">typeof b?._id&&g((0,f.getVersionId)(j,(0,e.getReleaseIdFromReleaseDocumentId)(b._id)))),[a,g,j,b?._id]);if(a)return(0,c.jsx)(an.MenuItem,{padding:1,paddingRight:3,onClick:m,pressed:h,children:(0,c.jsxs)(an.Flex,{gap:1,children:[(0,c.jsx)(e.ReleaseAvatar,{padding:2,tone:"published"===a?"positive":"caution"}),(0,c.jsx)(an.Box,{paddingY:2,children:(0,c.jsx)(an.Text,{size:1,weight:"medium",children:l(["compare-versions.status",a].join("."))})})]})});let n=b?(0,e.getReleaseTone)(b):"neutral";return(0,c.jsx)(an.MenuItem,{padding:1,paddingRight:3,onClick:m,pressed:h,children:(0,c.jsxs)(an.Flex,{gap:1,children:[(0,c.jsx)(e.ReleaseAvatar,{padding:2,tone:n}),(0,c.jsxs)(an.Stack,{flex:1,paddingY:2,paddingRight:2,space:2,children:[(0,c.jsx)(an.Text,{size:1,weight:"medium",children:b.metadata.title||k("release.placeholder-untitled-release")}),["asap","undecided"].includes(b.metadata.releaseType)&&(0,c.jsx)(an.Text,{muted:!0,size:1,children:k(`release.type.${b.metadata.releaseType}`)}),"scheduled"===b.metadata.releaseType&&(0,c.jsx)(an.Text,{muted:!0,size:1,children:(0,e.formatRelativeLocalePublishDate)(b)})]}),(0,c.jsx)(an.Flex,{flex:"none",children:(0,e.isReleaseScheduledOrScheduling)(b)&&(0,c.jsx)(an.Box,{padding:2,children:(0,c.jsx)(an.Text,{size:1,children:(0,c.jsx)(i.LockIcon,{})})})})]})})},bW=ar.styled.div`
  --offset-block: 40px;
  display: grid;
  height: calc(100vh - var(--offset-block));
  min-height: 0;
  overflow: hidden;
  grid-template-areas:
    'header header'
    'previous-document next-document';
  grid-template-columns: 1fr 1fr;
  grid-template-rows: min-content minmax(0, 1fr);
`;function bX(a){return a.document?.components?.unstable_layout}function bY(a){return a.path}function bZ(a,b){return(0,aR.default)(a.path,b.path)}let b$=ar.styled.div`
  position: relative;
  height: 100%;
  overflow: auto;
  scroll-behavior: smooth;
  scrollbar-width: var(--scrollbar-width);
  overscroll-behavior: contain;
  will-change: scroll-position;
`,b_=(0,ar.styled)(an.Card)`
  position: relative;
  grid-area: var(--grid-area);
`,b0=(0,ar.styled)(an.Container)`
  width: auto;
`,b1=(0,d.forwardRef)(function(a,b){let f,h,i,j,k,l,m,n,o,p,q,r,s=(0,am.c)(36),{role:t,documentType:u,documentId:v,scrollElement:w,syncChannel:x,compareDocument:y}=a,z=(0,d.useRef)(null),[A,B]=(0,d.useState)(null),[C,D]=(0,d.useState)(null);s[0]!==y||s[1]!==v||s[2]!==u||s[3]!==t||s[4]!==w||s[5]!==x?(f=()=>(0,c.jsx)(b2,{compareDocument:y,documentId:v,documentType:u,role:t,scrollElement:w,syncChannel:x}),s[0]=y,s[1]=v,s[2]=u,s[3]=t,s[4]=w,s[5]=x,s[6]=f):f=s[6];let E=f;s[7]!==E?(h={pick:bX,defaultComponent:E},s[7]=E,s[8]=h):h=s[8];let F=(0,e.useMiddlewareComponents)(h);s[9]===Symbol.for("react.memo_cache_sentinel")?(i={isInteractive:!1,onOpenReviewChanges:aQ.default,onSetFocus:aQ.default,isReviewChangesOpen:!1},s[9]=i):i=s[9];let G=`${t}-document`;s[10]!==G?(j={"--grid-area":G},s[10]=G,s[11]=j):j=s[11];let H=j,I="next"===t,J="next"!==t&&"none";s[12]!==J?(k={"--scrollbar-width":J},s[12]=J,s[13]=k):k=s[13];let K=k;return s[14]!==F||s[15]!==v||s[16]!==u?(l=(0,c.jsx)(ao.DialogProvider,{position:"absolute",children:(0,c.jsx)(b0,{ref:z,padding:4,width:1,children:(0,c.jsx)(F,{documentId:v,documentType:u})})}),s[14]=F,s[15]=v,s[16]=u,s[17]=l):l=s[17],s[18]!==A||s[19]!==l?(m=(0,c.jsx)(an.PortalProvider,{element:A,children:l}),s[18]=A,s[19]=l,s[20]=m):m=s[20],s[21]!==b||s[22]!==K||s[23]!==m?(n=(0,c.jsx)(b$,{ref:b,style:K,children:m}),s[21]=b,s[22]=K,s[23]=m,s[24]=n):n=s[24],s[25]===Symbol.for("react.memo_cache_sentinel")?(o=(0,c.jsx)("div",{"data-testid":"diffView-document-panel-portal",ref:B}),s[25]=o):o=s[25],s[26]!==n||s[27]!==H||s[28]!==I?(p=(0,c.jsxs)(b_,{ref:D,style:H,borderLeft:I,children:[n,o]}),s[26]=n,s[27]=H,s[28]=I,s[29]=p):p=s[29],s[30]!==C||s[31]!==p?(q=(0,c.jsx)(an.BoundaryElementProvider,{element:C,children:p}),s[30]=C,s[31]=p,s[32]=q):q=s[32],s[33]!==w||s[34]!==q?(r=(0,c.jsx)(g.ReviewChangesContext.Provider,{value:i,children:(0,c.jsx)(e.ChangeIndicatorsTracker,{children:(0,c.jsx)(e.VirtualizerScrollInstanceProvider,{scrollElement:w,containerElement:z,children:q})})}),s[33]=w,s[34]=q,s[35]=r):r=s[35],r}),b2=({role:a,documentType:b,documentId:h,syncChannel:i,compareDocument:j})=>{var k;let l=function(a){let b,c,d,g=(0,am.c)(4),{compareDocument:h}=a;g[0]!==h.id?(b=(0,f.getPublishedId)(h.id),g[0]=h.id,g[1]=b):b=g[1];let i=h.type;g[2]!==h.id?(c=(0,f.getVersionFromId)(h.id),g[2]=h.id,g[3]=c):c=g[3];let j=(0,e.useEditState)(b,i,"low",c);a:{if((0,f.isVersionId)(h.id)){d=j.version??void 0;break a}if((0,f.isDraftId)(h.id)){d=j.draft??void 0;break a}if((0,f.isPublishedId)(h.id)){d=j.published??void 0;break a}d=void 0}return d}({compareDocument:j}),{data:m}=(0,e.useActiveReleases)(),[n]=(0,d.useState)(()=>(0,e.createPatchChannel)()),o=(0,d.useMemo)(()=>bQ(h,m),[h,m]),{formState:p,onChange:q,onFocus:r,onBlur:s,onSetActiveFieldGroup:t,onSetCollapsedFieldSet:u,onSetCollapsedPath:v,collapsedFieldSets:w,ready:x,collapsedPaths:y,schemaType:z,value:A,onProgrammaticFocus:B,...C}=(0,e.useDocumentForm)({documentId:(0,f.getPublishedId)(h),documentType:b,selectedPerspectiveName:function(a){return(0,f.isVersionId)(a)?(0,f.getVersionFromId)(a):(0,f.isPublishedId)(a)?"published":void 0}(h),releaseId:(0,f.getVersionFromId)(h),comparisonValue:l}),D=null===p||!x,E=function(a){let b,c,d,e=(0,am.c)(11),{syncChannel:f,id:g}=a;e[0]!==g||e[1]!==f?(b=a=>f.next({...a,source:g}),e[0]=g,e[1]=f,e[2]=b):b=e[2];let h=b;if(e[3]!==g||e[4]!==f){let a;e[6]!==g?(a=a=>{let{source:b}=a;return b!==g},e[6]=g,e[7]=a):a=e[7],c=f.pipe((0,aB.distinctUntilChanged)(bZ),(0,aB.filter)(a),(0,aB.map)(bY)),e[3]=g,e[4]=f,e[5]=c}else c=e[5];let i=c;return e[8]!==i||e[9]!==h?(d={path:i,push:h},e[8]=i,e[9]=h,e[10]=d):d=e[10],d}({id:a,syncChannel:i}),F=(0,d.useCallback)(b=>{C.onPathOpen(b),E.push({source:a,path:b})},[C,E,a]);return(0,d.useEffect)(()=>{let a=E.path.subscribe(B);return()=>a.unsubscribe()},[B,E.path]),D?(0,c.jsx)(e.LoadingBlock,{showText:!0}):(0,c.jsx)(g.CommentsEnabledContext.Provider,{value:{enabled:!1,mode:null},children:(0,c.jsx)(e.FormBuilder,{__internal_patchChannel:n,id:`diffView-pane-${a}`,onChange:q,onPathFocus:r,onPathOpen:F,onPathBlur:s,onFieldGroupSelect:t,onSetFieldSetCollapsed:u,onSetPathCollapsed:v,collapsedPaths:y,collapsedFieldSets:w,focusPath:p.focusPath,changed:p.changed,focused:p.focused,groups:p.groups,validation:p.validation,members:p.members,perspective:"draft"===(k=o)?"drafts":k,presence:p.presence,schemaType:z,value:A,compareValue:l})})},b3=ar.styled.a`
  flex: 1;
  text-decoration: none;
  color: inherit;
`,b4=a=>{let b,d,e=(0,am.c)(6),{children:f,documentId:g,documentType:h}=a;e[0]!==g||e[1]!==h?(b={intent:"edit",params:{id:g,type:h}},e[0]=g,e[1]=h,e[2]=b):b=e[2];let{href:i}=(0,aw.useIntentLink)(b);return e[3]!==f||e[4]!==i?(d=(0,c.jsx)(b3,{href:i,target:"_blank",rel:"noopener noreferrer",children:f}),e[3]=f,e[4]=i,e[5]=d):d=e[5],d},b5=a=>{let b,e,f,h,i,j,k,l=(0,am.c)(24),{documentId:m}=a,{documents:n,state:p,mode:q}=bO(),{exitDiffView:r}=bL(),s=function(){let a,b=(0,am.c)(1);return b[0]===Symbol.for("react.memo_cache_sentinel")?(a=new aB.Subject,b[0]=a):a=b[0],a}(),[t,u]=(0,d.useState)(null),[v,w]=(0,d.useState)(null),x=(0,d.useContext)(g.ReferenceInputOptionsContext);l[0]!==x?(b={...x,disableNew:!0,EditReferenceLinkComponent:b4},l[0]=x,l[1]=b):b=l[1];let y=b;return l[2]!==v||l[3]!==t?(e=[t,v],l[2]=v,l[3]=t,l[4]=e):e=l[4],function(a){let b,c,e=(0,am.c)(3);e[0]!==a?(b=()=>{let b=a.filter(bP);if(0===b.length)return;let c=new aP(b);return()=>c.destroy()},c=[a],e[0]=a,e[1]=b,e[2]=c):(b=e[1],c=e[2]),(0,d.useEffect)(b,c)}(e),l[5]!==m||l[6]!==q||l[7]!==p?(f="version"===q&&(0,c.jsx)(bT,{documentId:m,state:p}),l[5]=m,l[6]=q,l[7]=p,l[8]=f):f=l[8],l[9]!==n||l[10]!==v||l[11]!==t||l[12]!==p||l[13]!==s?(h="ready"===p&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(b1,{documentType:n.previous.type,documentId:n.previous.id,role:"previous",ref:u,scrollElement:t,syncChannel:s,compareDocument:n.previous}),(0,c.jsx)(b1,{documentType:n.next.type,documentId:n.next.id,role:"next",ref:w,scrollElement:v,syncChannel:s,compareDocument:n.previous})]}),l[9]=n,l[10]=v,l[11]=t,l[12]=p,l[13]=s,l[14]=h):h=l[14],l[15]!==f||l[16]!==h?(i=(0,c.jsxs)(bW,{children:[f,h]}),l[15]=f,l[16]=h,l[17]=i):i=l[17],l[18]!==r||l[19]!==i?(j=(0,c.jsx)(o.Dialog,{id:"diffView",width:"auto",onClose:r,padding:!1,__unstable_hideCloseButton:!0,children:i}),l[18]=r,l[19]=i,l[20]=j):j=l[20],l[21]!==y||l[22]!==j?(k=(0,c.jsx)(g.ReferenceInputOptionsContext.Provider,{value:y,children:j}),l[21]=y,l[22]=j,l[23]=k):k=l[23],k},b6=a=>{let b,d,f,g=(0,am.c)(9),{children:h,documentId:i}=a,j=(0,ao.useToast)(),{t:k}=(0,e.useTranslation)(r);g[0]!==k||g[1]!==j?(b={onParamsError:a=>{j.push({id:"diffViewParamsParsingError",status:"error",title:k("compare-version.error.invalidParams.title"),description:(0,c.jsx)("ul",{children:a.map(a=>{let[b,d]=a;return(0,c.jsx)("li",{children:k(`compare-version.error.${b}`,{input:d})},b)})})})}},g[0]=k,g[1]=j,g[2]=b):b=g[2];let{isActive:l}=bO(b);return g[3]!==i||g[4]!==l?(d=l&&(0,c.jsx)(b5,{documentId:i}),g[3]=i,g[4]=l,g[5]=d):d=g[5],g[6]!==h||g[7]!==d?(f=(0,c.jsxs)(c.Fragment,{children:[h,d]}),g[6]=h,g[7]=d,g[8]=f):f=g[8],f};function b7(){let a=(0,d.useContext)(g.PaneLayoutContext);if(!a)throw Error("PaneLayout: missing context value");return a}let b8=(0,ar.styled)(an.Layer)`
  position: relative;
  width: 1px;
  min-width: 1px;

  &:before {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    width: 1px;
    background-color: var(--card-border-color);
  }

  &:not([data-disabled]) {
    cursor: ew-resize;
    width: 9px;
    min-width: 9px;
    margin: 0 -4px;

    &:before {
      left: 4px;
    }

    &:after {
      content: '';
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    &[data-dragging]:after,
    &:hover:after {
      opacity: 0.2;
    }
  }
`;function b9(a){let b,e,f=(0,am.c)(7),{disabled:g,element:h}=a,{resize:i}=b7(),[j,k]=(0,d.useState)(!1);f[0]!==h||f[1]!==i?(b=a=>{if(!h)return;k(!0),a.preventDefault();let b=a.pageX;i("start",h,0);let c=a=>{a.preventDefault(),i("move",h,a.pageX-b)},d=a=>{a.preventDefault(),k(!1),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",d),i("end",h,0)};window.addEventListener("mousemove",c),window.addEventListener("mouseup",d)},f[0]=h,f[1]=i,f[2]=b):b=f[2];let l=b,m=g?"":void 0,n=j?"":void 0;return f[3]!==l||f[4]!==m||f[5]!==n?(e=(0,c.jsx)(b8,{"data-disabled":m,"data-dragging":n,onMouseDown:l}),f[3]=l,f[4]=m,f[5]=n,f[6]=e):e=f[6],e}let ca=(0,ar.styled)(an.Card)`
  outline: none;

  // NOTE: This will render a border to the right side of each pane
  // without taking up physical space.
  box-shadow: 1px 0 0 var(--card-border-color);
`,cb=(0,d.forwardRef)(function(a,b){let f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J=(0,am.c)(86);J[0]!==a?({children:f,currentMinWidth:i,currentMaxWidth:h,flex:n,id:j,minWidth:l,maxWidth:k,selected:o,...m}=a,J[0]=a,J[1]=f,J[2]=h,J[3]=i,J[4]=j,J[5]=k,J[6]=l,J[7]=m,J[8]=n,J[9]=o):(f=J[1],h=J[2],i=J[3],j=J[4],k=J[5],l=J[6],m=J[7],n=J[8],o=J[9]);let K=void 0===n?1:n,L=void 0!==o&&o,[M,N]=(0,d.useState)(null),{collapse:O,collapsed:P,expand:Q,expandedElement:R,mount:S,panes:T}=b7();if(J[10]!==T||J[11]!==M){let a;J[14]!==M?(a=a=>a.element===M,J[14]=M,J[15]=a):a=J[15],q=(p=T.find(a))&&T.indexOf(p),J[10]=T,J[11]=M,J[12]=p,J[13]=q}else p=J[12],q=J[13];let U=q,V="number"==typeof U?T[U+1]:void 0,W=U===T.length-1,X=R===M,Y=!P&&(p?.collapsed||!1),Z=V?.collapsed||!1,$=(0,d.useRef)(null),_=p?.flex??K,aa=p?.currentMinWidth??i,ab=p?.currentMaxWidth??h;J[16]===Symbol.for("react.memo_cache_sentinel")?(r=()=>$.current,J[16]=r):r=J[16],(0,d.useImperativeHandle)(b,r),J[17]===Symbol.for("react.memo_cache_sentinel")?(s=a=>{N(a),$.current=a},J[17]=s):s=J[17];let ac=s;J[18]!==h||J[19]!==i||J[20]!==K||J[21]!==j||J[22]!==k||J[23]!==l||J[24]!==S||J[25]!==M?(t=()=>{if(M)return S(M,{currentMinWidth:i,currentMaxWidth:h,flex:K,id:j,minWidth:l,maxWidth:k})},u=[i,h,K,j,l,k,S,M],J[18]=h,J[19]=i,J[20]=K,J[21]=j,J[22]=k,J[23]=l,J[24]=S,J[25]=M,J[26]=t,J[27]=u):(t=J[26],u=J[27]),(0,d.useLayoutEffect)(t,u),J[28]!==O||J[29]!==M?(v=()=>{M&&O(M)},J[28]=O,J[29]=M,J[30]=v):v=J[30];let ad=v;J[31]!==Q||J[32]!==M?(w=()=>{M&&Q(M)},J[31]=Q,J[32]=M,J[33]=w):w=J[33];let ae=w,af=!P&&Y;J[34]!==ad||J[35]!==ae||J[36]!==W||J[37]!==U||J[38]!==M||J[39]!==af?(x={collapse:ad,collapsed:af,expand:ae,index:U,isLast:W,rootElement:M},J[34]=ad,J[35]=ae,J[36]=W,J[37]=U,J[38]=M,J[39]=af,J[40]=x):x=J[40];let ag=x;a:{if(P){y=void 0;break a}if(Y){y=51;break a}if(0===aa||W){y=l||204;break a}y=aa||l||204}let ah=y;b:{if(Y){z=51;break b}if(P&&W){z=void 0;break b}if(W){if(k){z=ab??k;break b}z=void 0;break b}z=ab??k}let ai=z,aj=P&&!W;J[41]!==Y||J[42]!==W||J[43]!==P||J[44]!==Z||J[45]!==M?(A=!W&&!P&&(0,c.jsx)(e.LegacyLayerProvider,{zOffset:"paneResizer",children:(0,c.jsx)(b9,{disabled:Y||Z,element:M})}),J[41]=Y,J[42]=W,J[43]=P,J[44]=Z,J[45]=M,J[46]=A):A=J[46];let ak=A,al=ai===1/0?void 0:ai;J[47]!==_||J[48]!==ah||J[49]!==al?(B={flex:_,minWidth:ah,maxWidth:al},J[47]=_,J[48]=ah,J[49]=al,J[50]=B):B=J[50];let ao=B,ap=P?void 0:"hidden",aq=Y?"":void 0,ar=L?"":void 0;return J[51]!==Y||J[52]!==ab||J[53]!==aa||J[54]!==X||J[55]!==_||J[56]!==ai||J[57]!==ah||J[58]!==U?(C=!1,J[51]=Y,J[52]=ab,J[53]=aa,J[54]=X,J[55]=_,J[56]=ai,J[57]=ah,J[58]=U,J[59]=C):C=J[59],J[60]!==f||J[61]!==aj?(D=!aj&&(0,c.jsx)(an.Flex,{direction:"column",height:"fill",children:f}),J[60]=f,J[61]=aj,J[62]=D):D=J[62],J[63]!==M||J[64]!==D?(E=(0,c.jsx)(an.BoundaryElementProvider,{element:M,children:D}),J[63]=M,J[64]=D,J[65]=E):E=J[65],J[66]!==aj||J[67]!==j||J[68]!==U||J[69]!==m||J[70]!==ao||J[71]!==ap||J[72]!==aq||J[73]!==ar||J[74]!==C||J[75]!==E?(F=(0,c.jsxs)(ca,{"data-testid":"pane","data-ui":"Pane",tone:"inherit",hidden:aj,id:j,overflow:ap,...m,"data-pane-collapsed":aq,"data-pane-index":U,"data-pane-selected":ar,ref:ac,style:ao,children:[C,E]}),J[66]=aj,J[67]=j,J[68]=U,J[69]=m,J[70]=ao,J[71]=ap,J[72]=aq,J[73]=ar,J[74]=C,J[75]=E,J[76]=F):F=J[76],J[77]!==W||J[78]!==F?(G=(0,c.jsx)(e.IsLastPaneProvider,{isLastPane:W,children:F}),J[77]=W,J[78]=F,J[79]=G):G=J[79],J[80]!==ag||J[81]!==G?(H=(0,c.jsx)(e.LegacyLayerProvider,{zOffset:"pane",children:(0,c.jsx)(g.PaneContext.Provider,{value:ag,children:G})}),J[80]=ag,J[81]=G,J[82]=H):H=J[82],J[83]!==ak||J[84]!==H?(I=(0,c.jsxs)(c.Fragment,{children:[H,ak]}),J[83]=ak,J[84]=H,J[85]=I):I=J[85],I}),cc=(0,ar.styled)(an.Card)`
  position: relative;
  outline: none;
`;function cd(){let a=(0,d.useContext)(g.PaneContext);if(!a)throw Error("Pane: missing context value");return a}cc.displayName="PaneContent__root";let ce=(0,d.forwardRef)(function(a,b){let d,e,f,g,h,i,j=(0,am.c)(14);j[0]!==a?({as:d,children:e,overflow:f,padding:g,...h}=a,j[0]=a,j[1]=d,j[2]=e,j[3]=f,j[4]=g,j[5]=h):(d=j[1],e=j[2],f=j[3],g=j[4],h=j[5]);let{collapsed:k}=cd(),{collapsed:l}=b7(),m=l?void 0:f;return j[6]!==d||j[7]!==e||j[8]!==k||j[9]!==g||j[10]!==b||j[11]!==h||j[12]!==m?(i=(0,c.jsx)(cc,{"data-testid":"pane-content",forwardedAs:d,...h,flex:1,hidden:k,overflow:m,padding:g,ref:b,tone:"inherit",children:e}),j[6]=d,j[7]=e,j[8]=k,j[9]=g,j[10]=b,j[11]=h,j[12]=m,j[13]=i):i=j[13],i});function cf(a){return a?a.toLocaleLowerCase().replaceAll(" ",""):""}let cg={constrainSize:!0,placement:"left-start",portal:!0};function ch(a){let b,d,f,g,h=(0,am.c)(35),{disabled:i,isAfterGroup:j,node:k}=a,l=(0,e.useGetI18nText)("i18n"in k?k:void 0);if("divider"===k.type){let a;return h[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(an.MenuDivider,{}),h[0]=a):a=h[0],a}h[1]!==l||h[2]!==k?(b=l(k),h[1]=l,h[2]=k,h[3]=b):b=h[3];let{title:m}=b;if("group"===k.type){let a,b,d,e;if(0===k.children.length)return null;if(k.expanded){let a,b,d;return h[4]!==j?(a=j&&(0,c.jsx)(an.MenuDivider,{}),h[4]=j,h[5]=a):a=h[5],h[6]!==i||h[7]!==k.children||h[8]!==k.disabled?(b=k.children.map((a,b)=>(0,c.jsx)(ch,{disabled:i||!!k.disabled,isAfterGroup:k.children[b-1]?.type==="group",node:a},a.key)),h[6]=i,h[7]=k.children,h[8]=k.disabled,h[9]=b):b=h[9],h[10]!==a||h[11]!==b?(d=(0,c.jsxs)(c.Fragment,{children:[a,b]}),h[10]=a,h[11]=b,h[12]=d):d=h[12],d}h[13]!==j?(a=j&&(0,c.jsx)(an.MenuDivider,{}),h[13]=j,h[14]=a):a=h[14];let f=k.icon;return h[15]!==i||h[16]!==k.children||h[17]!==k.disabled?(b=k.children.map((a,b)=>(0,c.jsx)(ch,{disabled:i||!!k.disabled,isAfterGroup:k.children[b-1]?.type==="group",node:a},a.key)),h[15]=i,h[16]=k.children,h[17]=k.disabled,h[18]=b):b=h[18],h[19]!==i||h[20]!==k.icon||h[21]!==b||h[22]!==m?(d=(0,c.jsx)(aF.MenuGroup,{disabled:i,icon:f,popover:cg,text:m,children:b}),h[19]=i,h[20]=k.icon,h[21]=b,h[22]=m,h[23]=d):d=h[23],h[24]!==a||h[25]!==d?(e=(0,c.jsxs)(c.Fragment,{children:[a,d]}),h[24]=a,h[25]=d,h[26]=e):e=h[26],e}return h[27]!==j?(d=j&&(0,c.jsx)(an.MenuDivider,{}),h[27]=j,h[28]=d):d=h[28],h[29]!==i||h[30]!==k?(f=(0,c.jsx)(ci,{disabled:i,node:k}),h[29]=i,h[30]=k,h[31]=f):f=h[31],h[32]!==d||h[33]!==f?(g=(0,c.jsxs)(c.Fragment,{children:[d,f]}),h[32]=d,h[33]=f,h[34]=g):g=h[34],g}function ci(a){let b,d=(0,am.c)(5),{node:e}=a;if(e.intent){let b;return d[0]!==e.intent||d[1]!==a?(b=(0,c.jsx)(ck,{...a,intent:e.intent}),d[0]=e.intent,d[1]=a,d[2]=b):b=d[2],b}return d[3]!==a?(b=(0,c.jsx)(cj,{...a}),d[3]=a,d[4]=b):b=d[4],b}function cj(a){let b,d,f,g,h=(0,am.c)(17),{disabled:j,node:k}=a;h[0]!==k.disabled?(b="object"==typeof k.disabled&&(0,c.jsx)(an.Text,{size:1,children:k.disabled.reason}),h[0]=k.disabled,h[1]=b):b=h[1];let l=b,{title:m}=(0,e.useI18nText)(k),n=j||!!k.disabled;h[2]!==k.hotkey?(d=k.hotkey?.split("+"),h[2]=k.hotkey,h[3]=d):d=h[3];let p=k.iconRight||k.selected&&i.CheckmarkIcon,q=`action-${cf(k.title)}`;return h[4]!==k.icon||h[5]!==k.onAction||h[6]!==k.selected||h[7]!==k.tone||h[8]!==n||h[9]!==d||h[10]!==p||h[11]!==q||h[12]!==m?(f=(0,c.jsx)(o.MenuItem,{disabled:n,hotkeys:d,icon:k.icon,iconRight:p,onClick:k.onAction,pressed:k.selected,text:m,tone:k.tone,"data-testid":q}),h[4]=k.icon,h[5]=k.onAction,h[6]=k.selected,h[7]=k.tone,h[8]=n,h[9]=d,h[10]=p,h[11]=q,h[12]=m,h[13]=f):f=h[13],h[14]!==f||h[15]!==l?(g=(0,c.jsx)(e.TooltipOfDisabled,{content:l,placement:"left",children:f}),h[14]=f,h[15]=l,h[16]=g):g=h[16],g}function ck(a){let b,d,f,g,h,j,k=(0,am.c)(23),{disabled:l,intent:m,node:n}=a;k[0]!==n.disabled?(b="object"==typeof n.disabled&&(0,c.jsx)(an.Text,{size:1,children:n.disabled.reason}),k[0]=n.disabled,k[1]=b):b=k[1];let p=b;k[2]!==m.params||k[3]!==m.type?(d={intent:m.type,params:m.params},k[2]=m.params,k[3]=m.type,k[4]=d):d=k[4];let q=(0,aw.useIntentLink)(d);k[5]!==q||k[6]!==n?(f=a=>{q.onClick(a),n.onAction()},k[5]=q,k[6]=n,k[7]=f):f=k[7];let r=f,{title:s}=(0,e.useI18nText)(n),t=l||!!n.disabled;k[8]!==n.hotkey?(g=n.hotkey?.split("+"),k[8]=n.hotkey,k[9]=g):g=k[9];let u=n.selected?i.CheckmarkIcon:void 0;return k[10]!==r||k[11]!==q.href||k[12]!==n.icon||k[13]!==n.selected||k[14]!==n.tone||k[15]!==t||k[16]!==g||k[17]!==u||k[18]!==s?(h=(0,c.jsx)(o.MenuItem,{as:"a",disabled:t,hotkeys:g,href:q.href,icon:n.icon,iconRight:u,onClick:r,pressed:n.selected,text:s,tone:n.tone}),k[10]=r,k[11]=q.href,k[12]=n.icon,k[13]=n.selected,k[14]=n.tone,k[15]=t,k[16]=g,k[17]=u,k[18]=s,k[19]=h):h=k[19],k[20]!==h||k[21]!==p?(j=(0,c.jsx)(e.TooltipOfDisabled,{content:p,placement:"left",children:h}),k[20]=h,k[21]=p,k[22]=j):j=k[22],j}let cl={constrainSize:!0,placement:"bottom",portal:!0};function cm(a,b){return a.some(a=>"item"===a.type&&a.tone===b||"group"===a.type&&cm(a.children,b))}function cn(a){let b,f,g,h,i,j=(0,am.c)(13),{nodes:k,actionsNodes:l}=a,m=(0,d.useId)(),n=cm(k,"critical"),p=cm(k,"caution"),q=n?"critical":p?"caution":void 0;return j[0]!==q?(b=(0,c.jsx)(e.ContextMenuButton,{tone:q,"data-testid":"pane-context-menu-button"}),j[0]=q,j[1]=b):b=j[1],j[2]!==l?(f=l&&(0,c.jsxs)(c.Fragment,{children:[l,(0,c.jsx)(an.MenuDivider,{})]}),j[2]=l,j[3]=f):f=j[3],j[4]!==k?(g=k.map((a,b)=>{let d=k[b-1]?.type==="group";return(0,c.jsx)(ch,{isAfterGroup:d,node:a},a.key)}),j[4]=k,j[5]=g):g=j[5],j[6]!==f||j[7]!==g?(h=(0,c.jsxs)(an.Menu,{children:[f,g]}),j[6]=f,j[7]=g,j[8]=h):h=j[8],j[9]!==m||j[10]!==b||j[11]!==h?(i=(0,c.jsx)(o.MenuButton,{button:b,id:m,menu:h,popover:cl}),j[9]=m,j[10]=b,j[11]=h,j[12]=i):i=j[12],i}let co=(0,ar.styled)(an.Layer)`
  position: sticky;
  bottom: 0;
`,cp=(0,ar.styled)(an.Card)`
  padding-bottom: env(safe-area-inset-bottom);
`,cq=(0,d.forwardRef)(function(a,b){let d,f,g=(0,am.c)(7),{children:h,padding:i}=a,{collapsed:j}=cd();return g[0]!==h||g[1]!==i?(d=(0,c.jsx)(cp,{tone:"inherit",children:(0,c.jsx)(an.Box,{padding:i,children:h})}),g[0]=h,g[1]=i,g[2]=d):d=g[2],g[3]!==j||g[4]!==b||g[5]!==d?(f=(0,c.jsx)(e.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,c.jsx)(co,{"data-testid":"pane-footer",hidden:j,ref:b,children:d})}),g[3]=j,g[4]=b,g[5]=d,g[6]=f):f=g[6],f}),cr=(0,ar.styled)(an.Layer)(({$border:a})=>ar.css`
    line-height: 0;
    position: sticky;
    top: 0;

    &:not([data-collapsed]):after {
      content: '';
      display: block;
      position: absolute;
      left: 0;
      right: 0;
      bottom: -1px;
      border-bottom: 1px solid ${a?"var(--card-border-color)":"transparent"};
      opacity: 1;
    }
  `),cs=(0,ar.styled)(an.Flex)`
  transform-origin: calc(51px / 2);

  [data-collapsed] > div > & {
    transform: rotate(90deg);
  }
`,ct=(0,ar.styled)(an.Card)(({theme:a})=>{let{fg:b,bg:c}=a.sanity.color.card.enabled;return ar.css`
    background-color: ${c};

    [data-ui='Text'] {
      color: ${b};
    }
  `}),cu=(0,ar.styled)(ao.TextSkeleton)`
  width: 66%;
  max-width: 175px;
`,cv=(0,ar.styled)(an.Text)`
  cursor: default;
  outline: none;
`,cw=(0,d.forwardRef)(function(a,b){let d,f,g,h,i,j,k,l,m,n,o,p,q,r=(0,am.c)(48),{actions:s,backButton:t,border:u,contentAfter:v,loading:w,subActions:x,tabs:y,tabIndex:z,title:A,appendTitle:B}=a,{collapse:C,collapsed:D,expand:E,rootElement:F}=cd(),G=(0,ao.useElementRect)(F||null),H=D?G?.height||window.innerHeight:void 0;r[0]!==H?(d={width:H},r[0]=H,r[1]=d):d=r[1];let I=d;r[2]!==C||r[3]!==D?(f=()=>{D||C()},r[2]=C,r[3]=D,r[4]=f):f=r[4];let J=f;r[5]!==D||r[6]!==E?(g=()=>{D&&E()},r[5]=D,r[6]=E,r[7]=g):g=r[7];let K=g,L=!!(!D&&(y||x)),M=D?"":void 0,N=D?"":void 0;r[8]!==t?(h=t&&(0,c.jsx)(an.Box,{flex:"none",children:t}),r[8]=t,r[9]=h):h=r[9];let O=t?1:2;r[10]!==w?(i=w&&(0,c.jsx)(an.Box,{children:(0,c.jsx)(cu,{animated:!0,radius:1,size:1})}),r[10]=w,r[11]=i):i=r[11],r[12]!==B||r[13]!==w||r[14]!==A?(j=!w&&(0,c.jsxs)(an.Flex,{align:"center",gap:1,children:[(0,c.jsx)(cv,{size:1,textOverflow:"ellipsis",weight:"semibold",children:A}),B]}),r[12]=B,r[13]=w,r[14]=A,r[15]=j):j=r[15],r[16]!==J||r[17]!==O||r[18]!==i||r[19]!==j||r[20]!==z?(k=(0,c.jsxs)(ct,{__unstable_focusRing:!0,flex:1,onClick:J,paddingLeft:O,padding:2,tabIndex:z,children:[i,j]}),r[16]=J,r[17]=O,r[18]=i,r[19]=j,r[20]=z,r[21]=k):k=r[21],r[22]!==s||r[23]!==D?(l=s&&(0,c.jsx)(an.Box,{hidden:D,children:(0,c.jsx)(e.LegacyLayerProvider,{zOffset:"paneHeader",children:s})}),r[22]=s,r[23]=D,r[24]=l):l=r[24],r[25]!==k||r[26]!==l||r[27]!==h?(m=(0,c.jsxs)(an.Flex,{align:"flex-start",gap:3,children:[h,k,l]}),r[25]=k,r[26]=l,r[27]=h,r[28]=m):m=r[28],r[29]!==D||r[30]!==L||r[31]!==x||r[32]!==y?(n=L&&(0,c.jsxs)(an.Flex,{align:"center",hidden:D,overflow:"auto",children:[(0,c.jsx)(an.Box,{flex:1,marginRight:3*!!x,children:y}),x]}),r[29]=D,r[30]=L,r[31]=x,r[32]=y,r[33]=n):n=r[33],r[34]!==K||r[35]!==I||r[36]!==m||r[37]!==n?(o=(0,c.jsxs)(cs,{direction:"column",gap:3,onClick:K,padding:3,sizing:"border",style:I,children:[m,n]}),r[34]=K,r[35]=I,r[36]=m,r[37]=n,r[38]=o):o=r[38];let P=!D&&v;return r[39]!==o||r[40]!==P||r[41]!==N?(p=(0,c.jsx)(e.LegacyLayerProvider,{zOffset:"paneHeader",children:(0,c.jsxs)(an.Card,{"data-collapsed":N,tone:"inherit",children:[o,P]})}),r[39]=o,r[40]=P,r[41]=N,r[42]=p):p=r[42],r[43]!==u||r[44]!==b||r[45]!==p||r[46]!==M?(q=(0,c.jsx)(an.LayerProvider,{zOffset:100,children:(0,c.jsx)(cr,{$border:u,"data-collapsed":M,"data-testid":"pane-header",ref:b,children:p})}),r[43]=u,r[44]=b,r[45]=p,r[46]=M,r[47]=q):q=r[47],q});function cx(a){return a.disabled?{disabledReason:"object"==typeof a.disabled?a.disabled.reason:void 0,ariaLabel:"object"==typeof a.disabled&&"string"==typeof a.disabled?.reason?a.disabled.reason:"This is disabled",isDisabled:!!a.disabled}:{disabledReason:void 0,ariaLabel:void 0,isDisabled:!1}}function cy(a){let b=(0,am.c)(4),{node:d}=a;if("item"===d.type){let a;return b[0]!==d?(a=(0,c.jsx)(cz,{node:d}),b[0]=d,b[1]=a):a=b[1],a}if("group"===d.type){let a;return b[2]!==d?(a=(0,c.jsx)(cB,{node:d}),b[2]=d,b[3]=a):a=b[3],a}return console.warn('unknown menu node (expected `type: "item" | "group"`):',d),null}function cz(a){let b,d,f,g,h,i=(0,am.c)(23),{node:j}=a,{title:k}=(0,e.useI18nText)(j),{t:l}=(0,e.useTranslation)();if(j.intent){let b;return i[0]!==j.intent||i[1]!==a?(b=(0,c.jsx)(cA,{...a,intent:j.intent}),i[0]=j.intent,i[1]=a,i[2]=b):b=i[2],b}i[3]!==j?(b=cx(j),i[3]=j,i[4]=b):b=i[4];let{disabledReason:m,ariaLabel:n,isDisabled:o}=b;i[5]!==n||i[6]!==l||i[7]!==k?(d=n||k||l("status-button.aria-label"),i[5]=n,i[6]=l,i[7]=k,i[8]=d):d=i[8],i[9]!==o||i[10]!==j.hotkey?(f=!o&&j.hotkey?j.hotkey.split("+"):void 0,i[9]=o,i[10]=j.hotkey,i[11]=f):f=i[11];let p=o?m:k;return i[12]!==f||i[13]!==p?(g={hotkeys:f,content:p},i[12]=f,i[13]=p,i[14]=g):g=i[14],i[15]!==o||i[16]!==j.icon||i[17]!==j.onAction||i[18]!==j.selected||i[19]!==j.tone||i[20]!==d||i[21]!==g?(h=(0,c.jsx)(e.StatusButton,{disabled:o,icon:j.icon,onClick:j.onAction,selected:j.selected,tone:j.tone,"aria-label":d,tooltipProps:g}),i[15]=o,i[16]=j.icon,i[17]=j.onAction,i[18]=j.selected,i[19]=j.tone,i[20]=d,i[21]=g,i[22]=h):h=i[22],h}function cA(a){let b,d,f,g,h,i,j,k=(0,am.c)(27),{intent:l,node:m}=a;k[0]!==l.params||k[1]!==l.type?(b={intent:l.type,params:l.params},k[0]=l.params,k[1]=l.type,k[2]=b):b=k[2];let n=(0,aw.useIntentLink)(b),{t:o}=(0,e.useTranslation)();k[3]!==n||k[4]!==m?(d=a=>{n.onClick(a),m.onAction()},k[3]=n,k[4]=m,k[5]=d):d=k[5];let p=d;k[6]!==m?(f=cx(m),k[6]=m,k[7]=f):f=k[7];let{disabledReason:q,ariaLabel:r,isDisabled:s}=f;k[8]!==r||k[9]!==m.title||k[10]!==o?(g=r||m.title||o("status-button.aria-label"),k[8]=r,k[9]=m.title,k[10]=o,k[11]=g):g=k[11],k[12]!==s||k[13]!==m.hotkey?(h=!s&&m.hotkey?m.hotkey.split("+"):void 0,k[12]=s,k[13]=m.hotkey,k[14]=h):h=k[14];let t=s?q:m.title;return k[15]!==h||k[16]!==t?(i={hotkeys:h,content:t,placement:"bottom",portal:!0},k[15]=h,k[16]=t,k[17]=i):i=k[17],k[18]!==p||k[19]!==n.href||k[20]!==s||k[21]!==m.icon||k[22]!==m.selected||k[23]!==m.tone||k[24]!==g||k[25]!==i?(j=(0,c.jsx)(e.StatusButton,{forwardedAs:"a",disabled:s,href:n.href,icon:m.icon,onClick:p,selected:m.selected,tone:m.tone,"aria-label":g,tooltipProps:i}),k[18]=p,k[19]=n.href,k[20]=s,k[21]=m.icon,k[22]=m.selected,k[23]=m.tone,k[24]=g,k[25]=i,k[26]=j):j=k[26],j}function cB(a){let b,f,g,h,j,k=(0,am.c)(16),{node:l}=a,{title:m}=(0,e.useI18nText)(l),n=!!l.disabled,p=l.icon??i.UnknownIcon;k[0]!==l.title?(b={content:l.title,portal:!0},k[0]=l.title,k[1]=b):b=k[1],k[2]!==n||k[3]!==p||k[4]!==b||k[5]!==m?(f=(0,c.jsx)(o.Button,{disabled:n,icon:p,label:m,mode:"bleed",tooltipProps:b}),k[2]=n,k[3]=p,k[4]=b,k[5]=m,k[6]=f):f=k[6];let q=(0,d.useId)();return k[7]!==l.children||k[8]!==l.disabled?(g=l.children.map((a,b)=>(0,c.jsx)(ch,{disabled:!!l.disabled,isAfterGroup:l.children[b-1]?.type==="group",node:a},a.key)),k[7]=l.children,k[8]=l.disabled,k[9]=g):g=k[9],k[10]!==g?(h=(0,c.jsx)(an.Menu,{children:g}),k[10]=g,k[11]=h):h=k[11],k[12]!==f||k[13]!==q||k[14]!==h?(j=(0,c.jsx)(o.MenuButton,{button:f,id:q,menu:h}),k[12]=f,k[13]=q,k[14]=h,k[15]=j):j=k[15],j}let cC=(0,ar.styled)(an.Card)`
  transition: opacity 200ms;
  position: relative;
  z-index: 1;
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  opacity: 0;

  &:not([hidden]) {
    display: flex;
  }

  &:not([data-collapsed]) {
    overflow: auto;
  }

  &[data-mounted] {
    opacity: 1;
  }

  &[data-resizing] {
    pointer-events: none;
  }
`,cD=[];function cE(a){let b,e,f,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=(0,am.c)(41);v[0]!==a?({children:b,minWidth:e,onCollapse:f,onExpand:h,...i}=a,v[0]=a,v[1]=b,v[2]=e,v[3]=f,v[4]=h,v[5]=i):(b=v[1],e=v[2],f=v[3],h=v[4],i=v[5]);let[w]=(0,d.useState)(cF),[x,y]=(0,d.useState)(null),z=(0,ao.useElementRect)(x)?.width||0,A=void 0!==z&&e?z<e:void 0;v[6]===Symbol.for("react.memo_cache_sentinel")?(j={expandedElement:null,panes:[],resizing:!1},v[6]=j):j=v[6];let[B,C]=(0,d.useState)(j);v[7]!==w||v[8]!==x?(k=()=>w.setRootElement(x),l=[w,x],v[7]=w,v[8]=x,v[9]=k,v[10]=l):(k=v[9],l=v[10]),(0,d.useEffect)(k,l),v[11]!==w||v[12]!==z?(m=()=>w.setRootWidth(z),n=[w,z],v[11]=w,v[12]=z,v[13]=m,v[14]=n):(m=v[13],n=v[14]),(0,d.useEffect)(m,n),v[15]!==w?(o=()=>w.subscribe(C),p=[w],v[15]=w,v[16]=o,v[17]=p):(o=v[16],p=v[17]),(0,d.useEffect)(o,p),v[18]!==A||v[19]!==f||v[20]!==h?(q=()=>{void 0!==A&&(A&&f&&f(),!A&&h&&h())},r=[A,f,h],v[18]=A,v[19]=f,v[20]=h,v[21]=q,v[22]=r):(q=v[21],r=v[22]),(0,d.useEffect)(q,r),v[23]!==A||v[24]!==w.collapse||v[25]!==w.expand||v[26]!==w.mount||v[27]!==w.resize||v[28]!==B.expandedElement||v[29]!==B.panes||v[30]!==B.resizing?(s={collapse:w.collapse,collapsed:A,expand:w.expand,expandedElement:B.expandedElement,mount:w.mount,panes:B.panes,resize:w.resize,resizing:B.resizing},v[23]=A,v[24]=w.collapse,v[25]=w.expand,v[26]=w.mount,v[27]=w.resize,v[28]=B.expandedElement,v[29]=B.panes,v[30]=B.resizing,v[31]=s):s=v[31];let D=s,E=A?"":void 0,F=B.resizing?"":void 0,G=z?"":void 0;return v[32]!==b||v[33]!==i||v[34]!==E||v[35]!==F||v[36]!==G?(t=(0,c.jsx)(cC,{"data-ui":"PaneLayout",...i,"data-collapsed":E,"data-resizing":F,"data-mounted":G,ref:y,children:b}),v[32]=b,v[33]=i,v[34]=E,v[35]=F,v[36]=G,v[37]=t):t=v[37],v[38]!==D||v[39]!==t?(u=(0,c.jsx)(g.PaneLayoutContext.Provider,{value:D,children:t}),v[38]=D,v[39]=t,v[40]=u):u=v[40],u}function cF(){return function(){let a=[],b=[],c=new WeakMap,d=new Set,e={},f=null,g=0,h=null,i=new Map,j=!1;function k(a){d.delete(a),h=a,l()}return{collapse:function(a){d.add(a),h===a&&(h=null),l()},expand:k,mount:function(a,d){return c.set(a,{...d,original:d}),b.push(a),f&&function(a,b){let c=new WeakMap;for(let d of b)c.set(d,function(a,b){let c=[],d=b;for(;d!==a;){let b=d.parentElement;if(!b)break;let e=Array.from(b.childNodes).indexOf(d);if(c.unshift(e),b===a)break;d=b}return c}(a,d));b.sort((a,b)=>{let d=c.get(a)||cD,e=c.get(b)||cD,f=Math.max(d.length,e.length);for(let a=0;a<f;a+=1){let b=d[a]||-1,c=e[a]||-1;if(b!==c)return b-c}return 0})}(f,b),k(a),()=>{let d=b.indexOf(a);d>-1&&b.splice(d,1),c.delete(a),l()}},resize:function(a,d,f){let g=b.indexOf(d),h=c.get(d);if(!h)return;let k=b[g+1],m=c.get(k);if(m){if("start"===a&&(j=!0,e.left={element:d,flex:h.flex||1,width:d.offsetWidth},e.right={element:k,flex:m.flex||1,width:k.offsetWidth},l()),"move"===a&&e.left&&e.right){i=new Map;let{leftW:a,rightW:b,leftFlex:c,rightFlex:g}=function(a,b,c,d){let e={flex:a.left.flex+a.right.flex,width:a.left.width+a.right.width},f=b.minWidth??204,g=c.minWidth??204,h=Math.min(b.maxWidth||1/0,e.width-g),i=Math.min(c.maxWidth||1/0,e.width-f),j=f-a.left.width,k=a.right.width-i;j<k&&(j=k);let l=a.right.width-g,m=h-a.left.width;l>m&&(l=m);let n=Math.min(Math.max(d,j),l),o=a.left.width+n,p=a.right.width-n;return{leftFlex:o/e.width*e.flex,leftW:o,rightFlex:p/e.width*e.flex,rightW:p}}(e,h,m,f);i.set(d,{flex:c,width:a}),i.set(k,{flex:g,width:b}),l()}if("end"===a){j=!1;let a=i.get(d),b=i.get(k);c.set(d,{...h,currentMinWidth:0,currentMaxWidth:h.maxWidth??1/0,flex:a?.flex??h.flex}),c.set(k,{...m,currentMinWidth:0,currentMaxWidth:h.maxWidth??1/0,flex:b?.flex??m.flex}),i=new Map,delete e.left,delete e.right,l()}}},setRootElement:function(a){f=a},setRootWidth:function(a){g=a,l()},subscribe:function(b){return a.push(b),()=>{let c=a.push(b);c>-1&&a.splice(c,1)}}};function l(){if(!g)return;let e=[];for(let a of b)a!==h&&e.unshift(a);h&&e.unshift(h);let f=new WeakMap,k=e.length,l=e[0],m=g-(k-1)*51;for(let a of e){let b=c.get(a);if(!b)continue;let e=b.currentMinWidth||b.minWidth||204,g=a===l,h=d.has(a),j=e>m,k=!g&&(h||j),n=i.get(a);f.set(a,{element:a,collapsed:k,currentMinWidth:n?.width??b.currentMinWidth,currentMaxWidth:n?.width??b.currentMaxWidth,flex:n?.flex??b.flex??1}),k?m-=51:m-=e-51}let n=[];for(let a of b){let b=f.get(a);b&&n.push(b)}for(let c of a)c({expandedElement:h||b[b.length-1]||null,panes:n,resizing:j})}}()}function cG(a){let b,d,e,f=(0,am.c)(12),{children:g,currentMinWidth:h,flex:i,minWidth:j,paneKey:k,title:l,tone:m}=a,n=void 0===l?"Error":l,o=void 0===m?"critical":m;return f[0]!==n?(b=(0,c.jsx)(cw,{title:n}),f[0]=n,f[1]=b):b=f[1],f[2]!==g?(d=(0,c.jsx)(ce,{overflow:"auto",children:(0,c.jsx)(an.Box,{paddingX:4,paddingY:5,children:g})}),f[2]=g,f[3]=d):d=f[3],f[4]!==h||f[5]!==i||f[6]!==j||f[7]!==k||f[8]!==b||f[9]!==d||f[10]!==o?(e=(0,c.jsxs)(cb,{currentMinWidth:h,flex:i,id:k,minWidth:j,tone:o,children:[b,d]}),f[4]=h,f[5]=i,f[6]=j,f[7]=k,f[8]=b,f[9]=d,f[10]=o,f[11]=e):e=f[11],e}function cH(a){let b,e,f,g=(0,am.c)(6),{children:h,ms:i}=a,j=void 0===i?0:i,[k,l]=(0,d.useState)(j<=0);if(g[0]!==j?(b=()=>{if(j<=0)return;let a=setTimeout(()=>l(!0),j);return()=>{clearTimeout(a)}},e=[j],g[0]=j,g[1]=b,g[2]=e):(b=g[1],e=g[2]),(0,d.useEffect)(b,e),!k||!h){let a;return g[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(c.Fragment,{}),g[3]=a):a=g[3],a}return g[4]!==h?(f="function"==typeof h?h():h,g[4]=h,g[5]=f):f=g[5],f}function cI(a){let b=[{ms:300,messageKey:"panes.resolving.default-message"},{ms:5e3,messageKey:"panes.resolving.slow-resolve-message"}];if(e.isDev){let c=["Check console for errors?","Is your observable/promise resolving?",a.length>0?`Structure path: ${a.join(" ➝ ")}`:""];b.push({ms:1e4,message:c.join(`
`)})}let c=(0,aB.of)(null);return(0,aB.merge)(...b.map(a=>c.pipe((0,aA.mapTo)("messageKey"in a?{messageKey:a.messageKey}:{message:a.message}),(0,aA.delay)(a.ms))))}let cJ=(0,ar.styled)(an.Flex)`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`,cK=(0,d.memo)(a=>{let b,f,g,h,i,j,k,l,m,n,o=(0,am.c)(28),{delay:p,flex:q,message:s,minWidth:t,paneKey:u,path:v,selected:w,title:x,tone:y}=a,z=void 0===p?300:p,A=void 0===s?cI:s,{t:B}=(0,e.useTranslation)(r);a:{if("function"==typeof A){let a;o[0]!==A||o[1]!==v?(a=A(v?v.split(";"):[]),o[0]=A,o[1]=v,o[2]=a):a=o[2],b=a;break a}b=A}let C=b;o[3]!==C||o[4]!==B?(f=()=>"string"==typeof C?C:B("panes.resolving.default-message"),o[3]=C,o[4]=B,o[5]=f):f=o[5];let[D,E]=(0,d.useState)(f);o[6]!==C||o[7]!==B?(g=()=>{if("object"!=typeof C||"function"!=typeof C.subscribe)return;let a=C.subscribe(a=>{E("messageKey"in a?B(a.messageKey):a.message)});return()=>a.unsubscribe()},h=[C,B],o[6]=C,o[7]=B,o[8]=g,o[9]=h):(g=o[8],h=o[9]),(0,d.useEffect)(g,h);let[F,G]=(0,d.useState)(null),[H,I]=(0,d.useState)(!1);o[10]!==F?(i=()=>{if(F)return(0,ao._raf2)(()=>I(!0))},j=[F],o[10]=F,o[11]=i,o[12]=j):(i=o[11],j=o[12]),(0,d.useEffect)(i,j);let J=H?"":void 0,K=x||D;o[13]!==K?(k=(0,c.jsx)(e.LoadingBlock,{showText:!0,title:K}),o[13]=K,o[14]=k):k=o[14],o[15]!==k||o[16]!==J?(l=(0,c.jsx)(cJ,{align:"center","data-mounted":J,direction:"column",height:"fill",justify:"center",ref:G,children:k}),o[15]=k,o[16]=J,o[17]=l):l=o[17];let L=l;return o[18]!==L||o[19]!==z?(m=(0,c.jsx)(ce,{children:L}),o[18]=L,o[19]=z,o[20]=m):m=o[20],o[21]!==q||o[22]!==t||o[23]!==u||o[24]!==w||o[25]!==m||o[26]!==y?(n=(0,c.jsx)(cb,{flex:q,id:u,minWidth:t,selected:w,tone:y,children:m}),o[21]=q,o[22]=t,o[23]=u,o[24]=w,o[25]=m,o[26]=y,o[27]=n):n=o[27],n});function cL(){let a=(0,d.useContext)(g.DocumentPaneContext);if(!a)throw Error("DocumentPane: missing context value");return a}function cM(a){let b,d,f=(0,am.c)(8),{children:g,documentId:h,documentType:i}=a;return f[0]!==g||f[1]!==h||f[2]!==i?(b=(0,c.jsx)(cN,{documentId:h,documentType:i,children:g}),f[0]=g,f[1]=h,f[2]=i,f[3]=b):b=f[3],f[4]!==h||f[5]!==i||f[6]!==b?(d=(0,c.jsx)(e.CommentsEnabledProvider,{documentId:h,documentType:i,children:b}),f[4]=h,f[5]=i,f[6]=b,f[7]=d):d=f[7],d}function cN(a){let b,f,g,h,i,j,k=(0,am.c)(27),{children:l,documentId:m,documentType:n}=a,{enabled:o}=(0,e.useCommentsEnabled)(),{connectionState:p,onPathOpen:q,inspector:r,openInspector:s}=cL(),{selectedReleaseId:t}=(0,e.usePerspective)(),{params:u,setParams:v}=cO(),{studioUrl:w}=(0,e.useStudioUrl)(window.location.origin),{resolveIntentLink:x}=(0,aw.useRouter)(),y=u?.comment,z=(0,d.useRef)(u);k[0]!==u?(b=()=>{z.current=u},f=[u],k[0]=u,k[1]=b,k[2]=f):(b=k[1],f=k[2]),(0,d.useLayoutEffect)(b,f),k[3]!==m||k[4]!==n||k[5]!==x||k[6]!==w?(g=a=>{let b=x("edit",{id:m,type:n,inspect:e.COMMENTS_INSPECTOR_NAME,comment:a});return`${w}${b}`},k[3]=m,k[4]=n,k[5]=x,k[6]=w,k[7]=g):g=k[7];let A=g;k[8]!==v?(h=()=>{v({...z.current,comment:void 0})},k[8]=v,k[9]=h):h=k[9];let B=h;k[10]!==r?.name||k[11]!==s?(i=()=>{r?.name!==e.COMMENTS_INSPECTOR_NAME&&s(e.COMMENTS_INSPECTOR_NAME)},k[10]=r?.name,k[11]=s,k[12]=i):i=k[12];let C=i;if(!o){let a;return k[13]!==l?(a=(0,c.jsx)(c.Fragment,{children:l}),k[13]=l,k[14]=a):a=k[14],a}let D=r?.name===e.COMMENTS_INSPECTOR_NAME,E="connecting"===p;return k[15]!==l||k[16]!==m||k[17]!==n||k[18]!==A||k[19]!==B||k[20]!==C||k[21]!==q||k[22]!==y||k[23]!==t||k[24]!==D||k[25]!==E?(j=(0,c.jsx)(e.CommentsProvider,{documentId:m,documentType:n,getCommentLink:A,isCommentsOpen:D,isConnecting:E,onClearSelectedComment:B,onCommentsOpen:C,onPathOpen:q,selectedCommentId:y,sortOrder:"desc",type:"field",releaseId:t,children:l}),k[15]=l,k[16]=m,k[17]=n,k[18]=A,k[19]=B,k[20]=C,k[21]=q,k[22]=y,k[23]=t,k[24]=D,k[25]=E,k[26]=j):j=k[26],j}function cO(){return(0,d.useContext)(g.PaneRouterContext)}function cP({displayed:a,documentId:b}){let{selectedReleaseId:c}=(0,e.usePerspective)(),{data:g}=(0,e.useActiveReleases)(),{data:h}=(0,e.useArchivedReleases)(),{data:i}=(0,e.useDocumentVersions)({documentId:b}),j=a&&!a._createdAt,{params:k}=cO();return(0,d.useMemo)(()=>{if(!i)return{notCurrentReleases:[],currentReleases:[],inCreation:null};let b=i.map(a=>(0,f.getVersionFromId)(a)),d=g.reduce((d,g)=>{let h=b.includes((0,e.getReleaseIdFromReleaseDocumentId)(g._id)),i=(0,e.getReleaseIdFromReleaseDocumentId)(g._id);return j&&i===(0,f.getVersionFromId)(a._id||"")&&i===c?d.inCreation=g:h?d.currentReleases.push(g):d.notCurrentReleases.push(g),d},{notCurrentReleases:[],currentReleases:[],inCreation:null});if(!k?.historyVersion)return d;let l=h.find(a=>(0,e.getReleaseIdFromReleaseDocumentId)(a._id)===k?.historyVersion);return l?.state==="archived"&&d.currentReleases.push(l),d},[h,j,a?._id,i,k?.historyVersion,g,c])}function cQ({displayed:a,documentId:b,editState:c}){let{document:{drafts:{enabled:g}}}=(0,e.useWorkspace)(),h=cP({displayed:a,documentId:b}),i=[c?.published?._id,g?c?.draft?._id:[]].flat(),j=h.currentReleases.map(a=>c?.id&&(0,f.getVersionId)(c.id,(0,e.getReleaseIdFromReleaseDocumentId)(a._id))),k=i.concat(j).filter(a=>"string"==typeof a),l=(0,d.useMemo)(()=>k.findIndex(b=>b===a?._id),[a?._id,k]),m=(0,d.useMemo)(()=>k[l-1]??void 0,[l,k]),n=(0,d.useMemo)(()=>k[l+1]??void 0,[l,k]);return{position:l,previousId:m,nextId:n,stack:k}}function cR(){let a=(0,d.useContext)(g.StructureToolContext);if(!a)throw Error("StructureTool: missing context value");return a}cK.displayName="Memo(LoadingPane)";let cS={},cT="inspect:",cU=[{id:"inspectors"},{id:"links"}],cV="sanity/structure/history";function cW(a){let{documentId:b,documentType:f,inspectors:g,onMenuItems:h}=a,i=g.length,[j,k]=(0,d.useState)(()=>Array.from(Array(i)));(0,d.useEffect)(()=>{if(j.length!==i){let a=Array.from(Array(i));for(let b=0;b<i;b++)a[b]=j[b];k(a)}},[i,j]);let l=(0,d.useCallback)((a,b)=>{k(c=>{let d=[...c];return d[a]=b,d})},[]);(0,d.useEffect)(()=>{h(j.filter(Boolean))},[j,h]);let m=(0,d.useMemo)(()=>g.map((a,c)=>a.useMenuItem?[function({documentId:a,documentType:b,index:c,setMenuItem:f,useMenuItem:g}){return(0,d.memo)(function(){let h,i,j,k=(0,am.c)(4);k[0]===Symbol.for("react.memo_cache_sentinel")?(h={documentId:a,documentType:b},k[0]=h):h=k[0];let l=g(h),m=(0,e.useUnique)(l);return k[1]!==m?(i=()=>{f(c,m)},j=[m],k[1]=m,k[2]=i,k[3]=j):(i=k[2],j=k[3]),(0,d.useEffect)(i,j),null})}({documentId:b,documentType:f,index:c,setMenuItem:l,useMenuItem:a.useMenuItem}),a.name]:[()=>null,""]),[b,f,g,l]);return(0,c.jsx)(c.Fragment,{children:m.map(([a,b])=>b&&(0,c.jsx)(a,{},b))})}function cX(){let a,b,c,d=(0,am.c)(22),{connectionState:f,schemaType:g,editState:h,isDeleted:i,lastRevisionDocument:j}=cL(),{t:k}=(0,e.useTranslation)(r),l=i?j:h?.version||h?.draft||h?.published,m=!!l;a:{if(i&&j&&g)try{let b;d[0]!==j||d[1]!==g?(b=(0,e.prepareForPreview)(j,g),d[0]=j,d[1]=g,d[2]=b):b=d[2],a=b;break a}catch(b){console.warn("Failed to prepare preview for deleted document:",b),a=null;break a}a=null}let n=a,o=m&&!i;d[3]!==l||d[4]!==g||d[5]!==o?(b={enabled:o,schemaType:g,value:l},d[3]=l,d[4]=g,d[5]=o,d[6]=b):b=d[6];let{error:p,value:q}=(0,e.unstable_useValuePreview)(b);if("connecting"===f&&!m){let a;return d[7]===Symbol.for("react.memo_cache_sentinel")?(a={error:void 0,title:void 0},d[7]=a):a=d[7],a}if(i&&n){let a;return d[8]!==n.title?(a={error:void 0,title:n.title},d[8]=n.title,d[9]=a):a=d[9],a}if(!q&&!i){let a,b,c=g?.title||g?.name;return d[10]!==k||d[11]!==c?(a=k("panes.document-header-title.new.text",{schemaType:c}),d[10]=k,d[11]=c,d[12]=a):a=d[12],d[13]!==a?(b={error:void 0,title:a},d[13]=a,d[14]=b):b=d[14],b}if(p){let a,b;return d[15]!==p.message||d[16]!==k?(a=k("panes.document-list-pane.error.text",{error:p.message}),d[15]=p.message,d[16]=k,d[17]=a):a=d[17],d[18]!==a?(b={error:a,title:void 0},d[18]=a,d[19]=b):b=d[19],b}let s=q?.title;return d[20]!==s?(c={error:void 0,title:s},d[20]=s,d[21]=c):c=d[21],c}cW.displayName="DocumentInspectorMenuItemsResolver";let cY=["patch","commit"],cZ=(0,d.memo)(function(){let a,b,f,g,h,i=(0,am.c)(13),{push:j}=(0,ao.useToast)(),{documentId:k,documentType:l,value:m}=cL(),n=cX(),o=n.error,p=(0,e.useDocumentOperationEvent)(k,l),q=(0,d.useRef)(p),s=cO(),{t}=(0,e.useTranslation)(r),{handleOpenDialog:u}=(0,e.useDocumentLimitsUpsellContext)();a:{if(!n.title&&!o&&!cY.includes(p?.op)&&"string"==typeof m.title&&p?.type==="success"){a=m.title;break a}a=n.title}let v=a;i[0]!==t||i[1]!==v?(b=v||t("panes.document-operation-results.operation-undefined-title"),i[0]=t,i[1]=v,i[2]=b):b=i[2];let w=b;i[3]!==w?(f=w.length>25?`${w.slice(0,25)}...`:w,i[3]=w,i[4]=f):f=i[4];let x=f;return i[5]!==x||i[6]!==p||i[7]!==u||i[8]!==s||i[9]!==j||i[10]!==t?(g=()=>{let a;if(p&&p!==q.current){if("error"===p.type){if((0,e.isDocumentLimitError)(p.error))return void u("document_action");j({closable:!0,duration:3e4,status:"error",title:t("panes.document-operation-results.operation-error",{context:p.op}),description:(0,c.jsxs)("details",{children:[(0,c.jsx)("summary",{children:t("panes.document-operation-results.error.summary.title")}),p.error.message]})})}return"success"!==p.type||cY.includes(p.op)||j({closable:!0,status:"success",title:(0,c.jsx)(e.Translate,{context:p.op,i18nKey:"panes.document-operation-results.operation-success",t,values:{op:p.op,title:x},components:{Strong:"strong"}})}),"success"===p.type&&"delete"===p.op&&(a=setTimeout(()=>s.closeCurrentAndAfter(),0)),q.current=p,()=>clearTimeout(a)}},h=[p,s,j,t,x,u],i[5]=x,i[6]=p,i[7]=u,i[8]=s,i[9]=j,i[10]=t,i[11]=g,i[12]=h):(g=i[11],h=i[12]),(0,d.useEffect)(g,h),null}),c$=(0,ar.styled)(an.Card)({position:"relative",zIndex:"1",lineHeight:"0"});function c_(a){let b,d,f,g,h,j,k,l,m,n,p,q,s=(0,am.c)(25);s[0]!==a?({as:f,children:b,closeButtonLabel:d,onClose:g,title:j,...h}=a,s[0]=a,s[1]=b,s[2]=d,s[3]=f,s[4]=g,s[5]=h,s[6]=j):(b=s[1],d=s[2],f=s[3],g=s[4],h=s[5],j=s[6]);let{t}=(0,e.useTranslation)(r);return s[7]!==j?(k=(0,c.jsx)(an.Box,{flex:1,padding:3,children:(0,c.jsx)(an.Text,{as:"h1",size:1,weight:"medium",children:j})}),s[7]=j,s[8]=k):k=s[8],s[9]!==t?(l=t("document-inspector.close-button.tooltip"),s[9]=t,s[10]=l):l=s[10],s[11]!==l?(m={content:l},s[11]=l,s[12]=m):m=s[12],s[13]!==d||s[14]!==g||s[15]!==m?(n=(0,c.jsx)(an.Box,{flex:"none",padding:1,children:(0,c.jsx)(o.Button,{"aria-label":d,icon:i.CloseIcon,mode:"bleed",onClick:g,tooltipProps:m})}),s[13]=d,s[14]=g,s[15]=m,s[16]=n):n=s[16],s[17]!==k||s[18]!==n?(p=(0,c.jsxs)(an.Flex,{padding:2,children:[k,n]}),s[17]=k,s[18]=n,s[19]=p):p=s[19],s[20]!==b||s[21]!==f||s[22]!==h||s[23]!==p?(q=(0,c.jsxs)(c$,{...h,as:f,children:[p,b]}),s[20]=b,s[21]=f,s[22]=h,s[23]=p,s[24]=q):q=s[24],q}function c0(a){let b,d,f,g=(0,am.c)(14),{documentId:h,documentType:i,flex:j}=a,{collapsed:k}=cd(),{closeInspector:l,inspector:m}=cL(),{features:n}=cR();g[0]!==l||g[1]!==m?(b=()=>{m&&l(m.name)},g[0]=l,g[1]=m,g[2]=b):b=g[2];let o=b;if(k||!m)return null;let p=m.component;g[3]!==p||g[4]!==h||g[5]!==i||g[6]!==o?(d=(0,c.jsx)(p,{onClose:o,documentId:h,documentType:i}),g[3]=p,g[4]=h,g[5]=i,g[6]=o,g[7]=d):d=g[7];let q=d;if(n.resizablePanes){let a;return g[8]!==q||g[9]!==j?(a=(0,c.jsx)(e.Resizable,{as:"aside","data-ui":"DocumentInspectorPanel",flex:j,resizerPosition:"left",maxWidth:540,minWidth:320,children:q}),g[8]=q,g[9]=j,g[10]=a):a=g[10],a}return g[11]!==q||g[12]!==j?(f=(0,c.jsx)(an.Box,{as:"aside","data-ui":"DocumentInspectorPanel",flex:j,children:q}),g[11]=q,g[12]=j,g[13]=f):f=g[13],f}function c1(a,b,c){let d,f,g,h,i=(0,am.c)(16),j=(0,e.useKeyValueStore)();i[0]!==b||i[1]!==a?(d=["studio.structure-tool",a,b].filter(Boolean),i[0]=b,i[1]=a,i[2]=d):d=i[2];let k=d.join(".");if(i[3]!==c||i[4]!==j||i[5]!==k){let a;i[7]!==c?(a=a=>null===a?c:a,i[7]=c,i[8]=a):a=i[8],f=j.getKey(k).pipe((0,aA.map)(a)),i[3]=c,i[4]=j,i[5]=k,i[6]=f}else f=i[6];let l=(0,av.useObservable)(f,c);i[9]!==j||i[10]!==k||i[11]!==l?(g=a=>{a!==l&&j.setKey(k,a)},i[9]=j,i[10]=k,i[11]=l,i[12]=g):g=i[12];let m=g;return i[13]!==m||i[14]!==l?(h=[l,m],i[13]=m,i[14]=l,i[15]=h):h=i[15],h}let c2={id:"parsed",title:"document-inspector.view-mode.parsed"},c3={id:"raw",title:"document-inspector.view-mode.raw-json"},c4=[c2,c3],c5=new aU.default({maxSize:1e3});function c6(a){let{path:b}=a,c=c5.get(b);void 0!==c&&c5.set(b,!c)}function c7(a){let b=window.getSelection();if(b){let c=document.createRange();b.removeAllRanges(),c.selectNodeContents(a),b.addRange(c)}}function c8(a){c7(a.currentTarget)}function c9(a){65===a.keyCode&&(a.metaKey||a.ctrlKey)&&(a.preventDefault(),c7(a.currentTarget))}let da=ar.styled.div(({theme:a})=>{let{color:b,fonts:c,space:d}=a.sanity;return ar.css`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: ${c.code.family};
      font-size: ${c.code.sizes[1].fontSize}px;
      line-height: ${c.code.sizes[1].lineHeight}px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: ${(0,an.rem)(d[4])};
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: ${(0,an.rem)(d[3])};
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: '▸ ';
      margin-left: calc(0 - ${(0,an.rem)(d[4])} + 3px);
      font-size: ${c.code.sizes[1].fontSize}px;
      line-height: ${c.code.sizes[1].lineHeight}px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: '▾ ';
      font-size: ${c.code.sizes[1].fontSize}px;
      line-height: ${c.code.sizes[1].lineHeight}px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: ${(0,an.rem)(d[4]/2)};
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: ${b.syntax.property};
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: ${b.syntax.constant};
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: ${(0,an.rem)(d[3])};
    }

    & .json-inspector .json-inspector__value_string {
      color: ${b.syntax.string};
    }

    & .json-inspector .json-inspector__value_boolean {
      color: ${b.syntax.boolean};
    }

    & .json-inspector .json-inspector__value_number {
      color: ${b.syntax.number};
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: '↔';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `});function db(a){let b,d,f,g=(0,am.c)(8),{onChange:h,query:j}=a;g[0]!==h?(b=a=>h(a.target.value),g[0]=h,g[1]=b):b=g[1];let k=b,{t:l}=(0,e.useTranslation)(r);g[2]!==l?(d=l("document-inspector.search.placeholder"),g[2]=l,g[3]=d):d=g[3];let m=j||"";return g[4]!==k||g[5]!==d||g[6]!==m?(f=(0,c.jsx)(an.TextInput,{icon:i.SearchIcon,onChange:k,placeholder:d,radius:2,value:m}),g[4]=k,g[5]=d,g[6]=m,g[7]=f):f=g[7],f}function dc(a){let b,d,f,g,h,i,j,k,l,m,n,p,q,s,t,u,v=(0,am.c)(49),{value:w}=a,{onInspectClose:x,paneKey:y}=cL(),z=`${y}_inspect_`,[A,B]=c1("inspect-view-mode",null,"parsed");v[0]!==A?(b=c4.find(a=>a.id===A),v[0]=A,v[1]=b):b=v[1];let C=b;v[2]!==B?(d=()=>{B(c2.id)},v[2]=B,v[3]=d):d=v[3];let D=d;v[4]!==B?(f=()=>{B(c3.id)},v[4]=B,v[5]=f):f=v[5];let E=f,{t:F}=(0,e.useTranslation)(r),G=`${z}dialog`;v[6]!==F||v[7]!==w?(g=(0,e.isRecord)(w)&&(0,e.isString)(w._id)&&(0,e.isString)(w._type)?(0,c.jsx)(e.Translate,{t:F,i18nKey:"document-inspector.dialog.title",components:{DocumentTitle:()=>(0,c.jsx)("em",{children:(0,c.jsx)(gm,{document:w})})}}):(0,c.jsx)("em",{children:F("document-inspector.dialog.title-no-value")}),v[6]=F,v[7]=w,v[8]=g):g=v[8],v[9]===Symbol.for("react.memo_cache_sentinel")?(h={position:"sticky",bottom:0,zIndex:3},v[9]=h):h=v[9];let H=`${z}tabpanel`,I=`${z}tab-${c2.id}`;v[10]!==F?(i=F(c2.title),v[10]=F,v[11]=i):i=v[11];let J=C===c2;v[12]!==D||v[13]!==H||v[14]!==I||v[15]!==i||v[16]!==J?(j=(0,c.jsx)(o.Tab,{"aria-controls":H,id:I,label:i,onClick:D,selected:J}),v[12]=D,v[13]=H,v[14]=I,v[15]=i,v[16]=J,v[17]=j):j=v[17];let K=`${z}tabpanel`,L=`${z}tab-${c3.id}`;v[18]!==F?(k=F(c3.title),v[18]=F,v[19]=k):k=v[19];let M=C===c3;v[20]!==E||v[21]!==K||v[22]!==L||v[23]!==k||v[24]!==M?(l=(0,c.jsx)(o.Tab,{"aria-controls":K,id:L,label:k,onClick:E,selected:M}),v[20]=E,v[21]=K,v[22]=L,v[23]=k,v[24]=M,v[25]=l):l=v[25],v[26]!==j||v[27]!==l?(m=(0,c.jsx)(an.Card,{padding:3,paddingTop:0,shadow:1,style:h,children:(0,c.jsxs)(an.TabList,{space:1,children:[j,l]})}),v[26]=j,v[27]=l,v[28]=m):m=v[28];let N=`${z}tab-${A}`,O=`${z}tabpanel`;return v[29]===Symbol.for("react.memo_cache_sentinel")?(n={outline:"none"},v[29]=n):n=v[29],v[30]!==w||v[31]!==C?(p=C===c2&&(0,c.jsx)(da,{children:(0,c.jsx)(aT.JsonInspector,{data:w,isExpanded:function a(b,c){let d=c5.get(b);return void 0===d?(c5.set(b,Array.isArray(c)||(0,e.isRecord)(c)),a(b,c)):d},onClick:c6,search:db,filterOptions:{ignoreCase:!0}})}),v[30]=w,v[31]=C,v[32]=p):p=v[32],v[33]!==w||v[34]!==C?(q=C===c3&&(0,c.jsx)(an.Code,{language:"json",tabIndex:0,onKeyDown:c9,onDoubleClick:c8,onFocus:c8,size:1,children:JSON.stringify(w,null,2)}),v[33]=w,v[34]=C,v[35]=q):q=v[35],v[36]!==N||v[37]!==O||v[38]!==p||v[39]!==q?(s=(0,c.jsxs)(ao.TabPanel,{"aria-labelledby":N,flex:1,id:O,overflow:"auto",padding:4,style:n,children:[p,q]}),v[36]=N,v[37]=O,v[38]=p,v[39]=q,v[40]=s):s=v[40],v[41]!==m||v[42]!==s?(t=(0,c.jsxs)(an.Flex,{direction:"column",height:"fill",children:[m,s]}),v[41]=m,v[42]=s,v[43]=t):t=v[43],v[44]!==x||v[45]!==t||v[46]!==G||v[47]!==g?(u=(0,c.jsx)(o.Dialog,{bodyHeight:"fill",id:G,header:g,onClose:x,onClickOutside:x,padding:!1,width:2,children:t}),v[44]=x,v[45]=t,v[46]=G,v[47]=g,v[48]=u):u=v[48],u}function dd(a){let b,d,e,f,g,h,i,j,k,l,m,n=(0,am.c)(22);n[0]!==a?({action:d,content:e,icon:b,tone:g,paddingY:h,...f}=a,n[0]=a,n[1]=b,n[2]=d,n[3]=e,n[4]=f,n[5]=g,n[6]=h):(b=n[1],d=n[2],e=n[3],f=n[4],g=n[5],h=n[6]);let p=void 0===g?"transparent":g,q=void 0===h?2:h;return n[7]!==b?(i=b&&(0,c.jsx)(an.Text,{size:0,children:(0,c.jsx)(b,{})}),n[7]=b,n[8]=i):i=n[8],n[9]!==e?(j=(0,c.jsx)(an.Flex,{align:"center",flex:1,gap:2,paddingY:2,children:e}),n[9]=e,n[10]=j):j=n[10],n[11]!==d?(k=d&&(0,c.jsx)(o.Button,{...d,mode:d.mode||"ghost",tone:d.tone||"default"}),n[11]=d,n[12]=k):k=n[12],n[13]!==i||n[14]!==j||n[15]!==k?(l=(0,c.jsxs)(an.Flex,{align:"center",gap:3,paddingX:2,children:[i,j,k]}),n[13]=i,n[14]=j,n[15]=k,n[16]=l):l=n[16],n[17]!==q||n[18]!==f||n[19]!==l||n[20]!==p?(m=(0,c.jsx)(an.Box,{padding:1,children:(0,c.jsx)(an.Card,{radius:3,paddingX:2,paddingY:q,tone:p,...f,children:l})}),n[17]=q,n[18]=f,n[19]=l,n[20]=p,n[21]=m):m=n[21],m}function de(){let a=(0,am.c)(3),{isDeleted:b,isDeleting:d,ready:f}=cL(),{selectedPerspective:g}=(0,e.usePerspective)();if(!f)return null;if(!(0,e.isPublishedPerspective)(g)&&!(0,e.isDraftPerspective)(g)&&"archived"===g.state){let b;return a[0]!==g?(b=(0,c.jsx)(dg,{release:g}),a[0]=g,a[1]=b):b=a[1],b}if(b&&!d){let b;return a[2]===Symbol.for("react.memo_cache_sentinel")?(b=(0,c.jsx)(df,{}),a[2]=b):b=a[2],b}}function df(){let a,b,d,f,g,h,j=(0,am.c)(17),{documentId:k,documentType:l}=cL(),{restore:m}=(0,e.useDocumentOperation)(k,l),{navigateIntent:n}=(0,aw.useRouter)();j[0]!==k||j[1]!==l||j[2]!==n||j[3]!==m?(a=()=>{m.execute("lastRevision"),n("edit",{id:k,type:l})},j[0]=k,j[1]=l,j[2]=n,j[3]=m,j[4]=a):a=j[4];let o=a,{t:p}=(0,e.useTranslation)(r);return j[5]!==p?(b=p("banners.deleted-document-banner.restore-button.text"),j[5]=p,j[6]=b):b=j[6],j[7]!==o||j[8]!==b?(d={onClick:o,text:b},j[7]=o,j[8]=b,j[9]=d):d=j[9],j[10]!==p?(f=p("banners.deleted-document-banner.text"),j[10]=p,j[11]=f):f=j[11],j[12]!==f?(g=(0,c.jsx)(an.Text,{size:1,weight:"medium",children:f}),j[12]=f,j[13]=g):g=j[13],j[14]!==d||j[15]!==g?(h=(0,c.jsx)(dd,{action:d,content:g,"data-testid":"deleted-document-banner",icon:i.ReadOnlyIcon}),j[14]=d,j[15]=g,j[16]=h):h=j[16],h}let dg=a=>{let b,d,f,g=(0,am.c)(8),{release:h}=a,{t:j}=(0,e.useTranslation)();return g[0]!==h.metadata?.title||g[1]!==j?(b=h.metadata?.title||j("release.placeholder-untitled-release"),g[0]=h.metadata?.title,g[1]=j,g[2]=b):b=g[2],g[3]!==b?(d={title:b},g[3]=b,g[4]=d):d=g[4],g[5]!==j||g[6]!==d?(f=(0,c.jsx)(dd,{tone:"caution",content:(0,c.jsx)(an.Text,{size:1,weight:"medium",children:(0,c.jsx)(e.Translate,{t:j,i18nKey:"banners.deleted-release-banner.text",values:d})}),"data-testid":"deleted-release-banner",icon:i.DocumentRemoveIcon}),g[5]=j,g[6]=d,g[7]=f):f=g[7],f};function dh(){let a,b,d=(0,am.c)(5),{schemaType:f}=cL(),{t:g}=(0,e.useTranslation)(r);return(0,ap.isDeprecatedSchemaType)(f)?(d[0]!==g?(a=(0,c.jsx)(e.Translate,{t:g,i18nKey:"banners.deprecated-document-type-banner.text"}),d[0]=g,d[1]=a):a=d[1],d[2]!==f.deprecated.reason||d[3]!==a?(b=(0,c.jsx)(dd,{content:(0,c.jsxs)(an.Text,{size:1,weight:"medium",children:[a," ",f.deprecated.reason]}),"data-testid":"deprecated-document-type-banner",icon:i.ErrorOutlineIcon}),d[2]=f.deprecated.reason,d[3]=a,d[4]=b):b=d[4],b):null}let di=(0,aJ.defineEvent)({name:"Ask To Edit Dialog Opened",version:1,description:'User clicked the "Ask to edit" button in the document permissions banner'}),dj=(0,aJ.defineEvent)({name:"Ask To Edit Request Sent",version:1,description:"User sent a role change request from the dialog"}),dk=(0,ar.styled)(an.Box)`
  box-sizing: border-box;
`;function dl(a){let b,f,g,h,i,j,k,l,m,n,p,q,s,t,u,v=(0,am.c)(56),{onClose:w,onRequestSubmitted:x}=a,{t:y}=(0,e.useTranslation)(r),z=(0,aG.useTelemetry)(),A=`request-permissions-${(0,d.useId)()}`,B=(0,e.useProjectId)();v[0]===Symbol.for("react.memo_cache_sentinel")?(b={apiVersion:"2024-09-26"},v[0]=b):b=v[0];let C=(0,e.useClient)(b),D=(0,ao.useToast)(),E=(0,e.useZIndex)(),[F,G]=(0,d.useState)(!1),[H,I]=(0,d.useState)(""),[J,K]=(0,d.useState)(),[L,M]=(0,d.useState)(!1),[N,O]=(0,d.useState)(!1);a:{let a,b="administrator";if(!B||!C){let a;v[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,aB.of)(b),v[1]=a):a=v[1],f=a;break a}if(v[2]!==C.observable||v[3]!==B){let c,d;v[5]===Symbol.for("react.memo_cache_sentinel")?(c=a=>a.filter(dn).find(dm)?"editor":b,v[5]=c):c=v[5],v[6]===Symbol.for("react.memo_cache_sentinel")?(d=()=>(0,aB.of)(b),v[6]=d):d=v[6],a=C.observable.request({url:`/projects/${B}/roles`}).pipe((0,aB.map)(c),(0,aB.startWith)(b),(0,aB.catchError)(d)),v[2]=C.observable,v[3]=B,v[4]=a}else a=v[4];f=a}let P=(0,av.useObservable)(f);v[7]!==C||v[8]!==H||v[9]!==x||v[10]!==B||v[11]!==P||v[12]!==z||v[13]!==D?(g=()=>{G(!0),C.request({url:`/access/project/${B}/requests`,method:"post",body:{note:H,requestUrl:window?.location.href,requestedRole:P,type:"role"}}).then(a=>{a&&(x&&x(),z.log(dj),D.push({title:"Edit access requested"}))}).catch(a=>{let b=a?.response?.statusCode,c=a?.response?.body?.message;429===b&&(M(!0),K(c)),409===b?(O(!0),K(c)):D.push({title:"There was a problem submitting your request.",status:"error"})}).finally(()=>{G(!1)})},v[7]=C,v[8]=H,v[9]=x,v[10]=B,v[11]=P,v[12]=z,v[13]=D,v[14]=g):g=v[14];let Q=g,R=E.fullscreen;v[15]!==y?(h=y("request-permission-dialog.header.text"),v[15]=y,v[16]=h):h=v[16],v[17]!==y?(i=y("confirm-dialog.cancel-button.fallback-text"),v[17]=y,v[18]=i):i=v[18],v[19]!==w||v[20]!==i?(j={onClick:w,text:i},v[19]=w,v[20]=i,v[21]=j):j=v[21];let S=L||N;return v[22]!==y?(k=y("request-permission-dialog.confirm-button.text"),v[22]=y,v[23]=k):k=v[23],v[24]!==F||v[25]!==Q||v[26]!==S||v[27]!==k?(l={onClick:Q,loading:F,disabled:S,text:k,tone:"primary",type:"submit"},v[24]=F,v[25]=Q,v[26]=S,v[27]=k,v[28]=l):l=v[28],v[29]!==l||v[30]!==j?(m={cancelButton:j,confirmButton:l},v[29]=l,v[30]=j,v[31]=m):m=v[31],v[32]!==y?(n=y("request-permission-dialog.description.text"),v[32]=y,v[33]=n):n=v[33],v[34]!==n?(p=(0,c.jsx)(an.Text,{children:n}),v[34]=n,v[35]=p):p=v[35],v[36]!==N||v[37]!==L||v[38]!==F||v[39]!==J||v[40]!==H||v[41]!==Q||v[42]!==y?(q=L||N?(0,c.jsx)(an.Card,{tone:"caution",padding:3,radius:2,shadow:1,children:(0,c.jsxs)(an.Text,{size:1,children:[L&&(0,c.jsx)(c.Fragment,{children:J??y("request-permission-dialog.warning.limit-reached.text")}),N&&(0,c.jsx)(c.Fragment,{children:J??y("request-permission-dialog.warning.denied.text")})]})}):(0,c.jsxs)(an.Stack,{space:3,paddingBottom:0,children:[(0,c.jsx)(an.TextInput,{placeholder:y("request-permission-dialog.note-input.placeholder.text"),disabled:F,onKeyDown:a=>{"Enter"===a.key&&Q()},maxLength:150,value:H,onChange:a=>{I(a.currentTarget.value)}}),(0,c.jsx)(an.Text,{align:"right",muted:!0,size:1,children:`${H.length}/150`})]}),v[36]=N,v[37]=L,v[38]=F,v[39]=J,v[40]=H,v[41]=Q,v[42]=y,v[43]=q):q=v[43],v[44]!==p||v[45]!==q?(s=(0,c.jsx)(dk,{children:(0,c.jsxs)(an.Stack,{space:4,children:[p,q]})}),v[44]=p,v[45]=q,v[46]=s):s=v[46],v[47]!==A||v[48]!==w||v[49]!==m||v[50]!==s||v[51]!==h?(t=(0,c.jsx)(o.Dialog,{width:1,id:A,header:h,footer:m,onClose:w,onClickOutside:w,children:s}),v[47]=A,v[48]=w,v[49]=m,v[50]=s,v[51]=h,v[52]=t):t=v[52],v[53]!==t||v[54]!==E.fullscreen?(u=(0,c.jsx)(ao.DialogProvider,{position:"fixed",zOffset:R,children:t}),v[53]=t,v[54]=E.fullscreen,v[55]=u):u=v[55],u}function dm(a){return"editor"===a.name}function dn(a){return a?.appliesToUsers}(0,ar.styled)(an.Flex).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;let dp={loading:!0,error:!1,status:void 0},dq={loading:!1,error:!1,status:"none"},dr={loading:!1,error:!1,status:"declined"},ds={loading:!1,error:!1,status:"pending"},dt={loading:!1,error:!1,status:"expired"};function du(a){let b,f,g,h,j,k,l,m,n=(0,am.c)(29),{requiredPermission:o}=a,p=(0,e.useCurrentUser)(),{data:q,loading:s,error:t}=(()=>{let a,b,c,d=(0,am.c)(9);d[0]===Symbol.for("react.memo_cache_sentinel")?(a={apiVersion:"2024-07-01"},d[0]=a):a=d[0];let f=(0,e.useClient)(a),g=(0,e.useProjectId)();a:{var h,i;let a;if(!f||!g){let a;d[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,aB.of)(dq),d[1]=a):a=d[1],b=a;break a}d[2]!==f||d[3]!==g?(h=f,i=g,a=h.observable.request({url:"/access/requests/me",tag:"use-role-requests-status"}).pipe((0,aA.map)(a=>{if(!a||0===a.length)return dq;let b=a.filter(a=>a.resourceId===i&&"role"===a.type),c=b.find(a=>"declined"===a.status);return c&&(0,aV.isAfter)((0,aW.addWeeks)(new Date(c.createdAt),2),new Date)?dr:b.find(a=>"pending"===a.status&&(0,aV.isAfter)((0,aW.addWeeks)(new Date(a.createdAt),2),new Date))?ds:b.find(a=>"pending"===a.status&&(0,aX.isBefore)((0,aW.addWeeks)(new Date(a.createdAt),2),new Date))?dt:dq}),(0,aA.catchError)(a=>(console.error("Failed to fetch access requests",a),(0,aB.of)({loading:!1,error:!0,status:void 0}))),(0,aA.startWith)(dp)),d[2]=f,d[3]=g,d[4]=a):a=d[4],b=a}let j=b,{loading:k,error:l,status:m}=(0,av.useObservable)(j,dp);return d[5]!==l||d[6]!==k||d[7]!==m?(c={data:m,loading:k,error:l},d[5]=l,d[6]=k,d[7]=m,d[8]=c):c=d[8],c})(),[u,v]=(0,d.useState)(!1),w="pending"===q||"declined"===q||u,x=p?.roles||[],y=1===x.length&&"viewer"===x[0].name,[z,A]=(0,d.useState)(!1);n[0]===Symbol.for("react.memo_cache_sentinel")?(b={style:"short"},n[0]=b):b=n[0];let B=(0,e.useListFormat)(b),{t:C}=(0,e.useTranslation)(r),D=(0,aG.useTelemetry)(),E=x.map(dw),F=B.formatToParts(E).map(dv);return n[1]!==F?(f={Roles:()=>(0,c.jsx)(c.Fragment,{children:F})},n[1]=F,n[2]=f):f=n[2],n[3]!==E||n[4]!==F.length?(g={count:F.length,roles:E},n[3]=E,n[4]=F.length,n[5]=g):g=n[5],n[6]!==o||n[7]!==C||n[8]!==f||n[9]!==g?(h=(0,c.jsx)(an.Text,{size:1,weight:"medium",children:(0,c.jsx)(e.Translate,{t:C,i18nKey:"banners.permission-check-banner.missing-permission",components:f,values:g,context:o})}),n[6]=o,n[7]=C,n[8]=f,n[9]=g,n[10]=h):h=n[10],n[11]!==y||n[12]!==w||n[13]!==t||n[14]!==s||n[15]!==q||n[16]!==A||n[17]!==C||n[18]!==D?(j=y&&q&&!t&&!s?{onClick:w?void 0:()=>{A(!0),D.log(di)},text:C(w?"banners.permission-check-banner.request-permission-button.sent":"banners.permission-check-banner.request-permission-button.text"),tone:w?"default":"primary",disabled:w,mode:w?"bleed":void 0}:void 0,n[11]=y,n[12]=w,n[13]=t,n[14]=s,n[15]=q,n[16]=A,n[17]=C,n[18]=D,n[19]=j):j=n[19],n[20]!==h||n[21]!==j?(k=(0,c.jsx)(dd,{content:h,action:j,"data-testid":"permission-check-banner",icon:i.ReadOnlyIcon}),n[20]=h,n[21]=j,n[22]=k):k=n[22],n[23]!==A||n[24]!==z?(l=z&&(0,c.jsx)(dl,{onClose:()=>A(!1),onRequestSubmitted:()=>{v(!0),A(!1)}}),n[23]=A,n[24]=z,n[25]=l):l=n[25],n[26]!==k||n[27]!==l?(m=(0,c.jsxs)(c.Fragment,{children:[k,l]}),n[26]=k,n[27]=l,n[28]=m):m=n[28],m}function dv(a){return"element"===a.type?(0,c.jsx)("code",{children:a.value},a.value):a.value}function dw(a){return a.title}let dx=(0,d.memo)(()=>{let a=(0,e.useDocumentPreviewStore)(),{selectedReleaseId:b}=(0,e.usePerspective)(),{params:g,groupIndex:h,routerPanesState:j,replaceCurrent:k,BackLink:l}=cO(),m=j[h]?.[0].id,n=j[h-1]?.[0],o=n?.id,p=!!n?.params?.rev,q=(0,d.useMemo)(()=>g?.parentRefPath&&(0,aC.fromString)(g.parentRefPath)||null,[g?.parentRefPath]),{t:s}=(0,e.useTranslation)(r),t=(0,d.useMemo)(()=>{let c=q?.[0];if(!o||!c||!q)return(0,aB.of)({loading:!1});let d=(0,f.getPublishedId)(o),e=(0,aC.fromString)(c),g=e.findIndex(a=>"object"==typeof a&&"_key"in a);return(0,aB.concat)((0,aB.of)({loading:!0}),a.unstable_observePathsDocumentPair(d,-1===g?e:e.slice(0,g),{version:b}).pipe((0,aA.debounceTime)(750),(0,aA.map)(({draft:a,published:b,version:c})=>({loading:!1,result:{availability:{draft:a.availability,published:b.availability,...c?.availability?{version:c.availability}:{}},refValue:(0,aC.get)(c?.snapshot||a.snapshot||b.snapshot,q)?._ref}}))))},[b,a,o,q]),u=(0,av.useObservable)(t,{loading:!0}),v=(0,d.useCallback)(()=>{u.loading||u.result?.refValue&&k({id:u.result.refValue,params:g})},[u.loading,u.result,k,g]);return o&&q&&!p&&!u.loading&&(u.result?.availability.draft.available||u.result?.availability.published.available)&&u.result?.refValue!==m?(0,c.jsx)(dd,{action:u.result?.refValue?{onClick:v,icon:i.SyncIcon,text:s("banners.reference-changed-banner.reason-changed.reload-button.text")}:{as:l,icon:i.CloseIcon,text:s("banners.reference-changed-banner.reason-removed.close-button.text")},"data-testid":"reference-changed-banner",content:(0,c.jsx)(an.Text,{size:1,weight:"medium",children:s(u.result?.refValue?"banners.reference-changed-banner.reason-changed.text":"banners.reference-changed-banner.reason-removed.text")}),icon:i.WarningOutlineIcon,tone:"caution"}):null});function dy(){let a,b=(0,am.c)(2),{t:d}=(0,e.useTranslation)(r);return b[0]!==d?(a=(0,c.jsx)(dd,{tone:"caution",icon:i.WarningOutlineIcon,content:(0,c.jsx)(an.Text,{size:1,children:(0,c.jsx)(e.Translate,{t:d,i18nKey:"banners.scheduled-draft-override-banner.text"})})}),b[0]=d,b[1]=a):a=b[1],a}function dz(){let{t:a}=(0,e.useTranslation)(r),{t:b}=(0,e.useTranslation)(),{data:f}=(0,e.useArchivedReleases)(),{params:g,setParams:h}=cO(),i=(0,d.useMemo)(()=>f.find(a=>(0,e.getReleaseIdFromReleaseDocumentId)(a._id)===g?.historyVersion),[f,g?.historyVersion]),j=(0,d.useMemo)(()=>i?.state==="published"?"banners.published-release.description":i&&(0,e.isCardinalityOneRelease)(i)?"banners.archived-scheduled-draft.description":"banners.archived-release.description",[i]),k=i?.metadata.title||b("release.placeholder-untitled-release");return(0,c.jsx)(dd,{tone:"caution",content:(0,c.jsx)(an.Text,{size:1,children:(0,c.jsx)(e.Translate,{t:a,i18nKey:j,values:{title:k},components:{VersionBadge:(0,e.getVersionInlineBadge)(i)}})}),action:g?.archivedRelease?void 0:{text:"Go back to published version",onClick:()=>{h({...g,rev:g?.historyEvent||void 0,since:void 0,historyVersion:void 0})}}})}dx.displayName="Memo(ReferenceChangedBanner)";let dA=ar.styled.img`
  object-fit: cover;
  width: 100%;
  height: 100%;
  height: 180px;
  display: flex;
`,dB=a=>{let b,f,g,h,j,k,l,m,n,p,q,s,t=(0,am.c)(22),{onClose:u}=a,{t:v}=(0,e.useTranslation)(r),w=(0,d.useRef)(null);return t[0]===Symbol.for("react.memo_cache_sentinel")?(b=()=>[w.current],t[0]=b):b=t[0],(0,an.useClickOutsideEvent)(u,b),t[1]===Symbol.for("react.memo_cache_sentinel")?(f=(0,c.jsx)(dA,{src:"https://cdn.sanity.io/images/pyrmmpch/production/b47224e2f3a7d1747e43b9da1ac31739250e628b-632x376.png",alt:"Canvas"}),t[1]=f):f=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(g=(0,c.jsx)(an.Text,{size:1,weight:"semibold",children:"Canvas"}),t[2]=g):g=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(h=(0,c.jsxs)(an.Flex,{paddingY:1,gap:2,children:[g,(0,c.jsx)(an.Text,{size:1,muted:!0,children:(0,c.jsx)(i.ComposeSparklesIcon,{})})]}),t[3]=h):h=t[3],t[4]!==v?(j=v("canvas.banner.popover-heading"),t[4]=v,t[5]=j):j=t[5],t[6]!==j?(k=(0,c.jsx)(an.Box,{paddingTop:3,children:(0,c.jsx)(an.Heading,{size:1,children:j})}),t[6]=j,t[7]=k):k=t[7],t[8]!==v?(l=v("canvas.banner.popover-description"),t[8]=v,t[9]=l):l=t[9],t[10]!==l?(m=(0,c.jsx)(an.Box,{paddingTop:4,children:(0,c.jsx)(an.Text,{size:1,children:l})}),t[10]=l,t[11]=m):m=t[11],t[12]!==k||t[13]!==m?(n=(0,c.jsxs)(an.Flex,{paddingX:4,paddingBottom:4,paddingTop:3,direction:"column",children:[h,k,m]}),t[12]=k,t[13]=m,t[14]=n):n=t[14],t[15]!==v?(p=v("canvas.banner.popover-button-text"),t[15]=v,t[16]=p):p=t[16],t[17]!==p?(q=(0,c.jsx)(an.Flex,{width:"full",gap:3,justify:"flex-end",paddingX:4,paddingBottom:4,children:(0,c.jsx)(o.Button,{mode:"bleed",text:p,autoFocus:!0,tone:"primary",href:"https://snty.link/canvas-docs",target:"_blank",rel:"noopener noreferrer",as:"a",iconRight:i.LaunchIcon})}),t[17]=p,t[18]=q):q=t[18],t[19]!==q||t[20]!==n?(s=(0,c.jsx)(an.Card,{radius:3,overflow:"hidden",width:0,ref:w,children:(0,c.jsxs)(an.Container,{width:0,children:[f,n,q]})}),t[19]=q,t[20]=n,t[21]=s):s=t[21],s},dC=a=>{let b,f,g,h,j,k,l,m,n=(0,am.c)(17),{documentId:p}=a,{t:q}=(0,e.useTranslation)(r),[s,t]=(0,d.useState)(!1),u=(0,e.getDocumentVariantType)(p);a:{let a;if("published"===u){let a;n[0]!==q?(a=q("canvas.banner.linked-text.published"),n[0]=q,n[1]=a):a=n[1],b=a;break a}if("draft"===u){let a;n[2]!==q?(a=q("canvas.banner.linked-text.draft"),n[2]=q,n[3]=a):a=n[3],b=a;break a}n[4]!==q?(a=q("canvas.banner.linked-text.version"),n[4]=q,n[5]=a):a=n[5],b=a}let v=b;n[6]===Symbol.for("react.memo_cache_sentinel")?(f=()=>t(dE),n[6]=f):f=n[6];let w=f;n[7]===Symbol.for("react.memo_cache_sentinel")?(g=()=>t(!1),n[7]=g):g=n[7];let x=g;return n[8]!==v?(h=(0,c.jsx)(an.Text,{size:1,weight:"medium",children:v}),n[8]=v,n[9]=h):h=n[9],n[10]===Symbol.for("react.memo_cache_sentinel")?(j=(0,c.jsx)(dB,{onClose:x}),k=(0,c.jsx)(o.Button,{tooltipProps:null,mode:"bleed",tone:"default",icon:i.InfoOutlineIcon,onClick:w}),n[10]=j,n[11]=k):(j=n[10],k=n[11]),n[12]!==s?(l=(0,c.jsx)(o.Popover,{open:s,size:0,tone:"default",portal:!0,placement:"bottom-start",content:j,children:k}),n[12]=s,n[13]=l):l=n[13],n[14]!==h||n[15]!==l?(m=(0,c.jsxs)(an.Flex,{align:"center",gap:2,children:[h,l]}),n[14]=h,n[15]=l,n[16]=m):m=n[16],m};function dD(){let a,b,d,f,g=(0,am.c)(10),{documentId:h,displayed:i}=cL(),{t:j}=(0,e.useTranslation)(r),k=i?._id||h,{companionDoc:l}=(0,e.useCanvasCompanionDoc)(k),m=(0,e.useNavigateToCanvasDoc)(l?.canvasDocumentId,"banner");return l?(g[0]!==k?(a=(0,c.jsx)(dC,{documentId:k}),g[0]=k,g[1]=a):a=g[1],g[2]!==j?(b=j("canvas.banner.edit-in-canvas-action"),g[2]=j,g[3]=b):b=g[3],g[4]!==m||g[5]!==b?(d={mode:"ghost",text:b,onClick:m},g[4]=m,g[5]=b,g[6]=d):d=g[6],g[7]!==a||g[8]!==d?(f=(0,c.jsx)(dd,{tone:"neutral","data-test-id":"canvas-linked-banner",paddingY:0,content:a,action:d}),g[7]=a,g[8]=d,g[9]=f):f=g[9],f):null}function dE(a){return!a}let dF=a=>{let b,d,f,g,h,j,k,l,m,n=(0,am.c)(27),{schemaType:o,selectedPerspective:p,reason:q}=a,{t:s}=(0,e.useTranslation)(r),{document:t}=(0,e.useWorkspace)(),{drafts:u}=t,{enabled:v}=u;n[0]!==v||n[1]!==o?(b=a=>{let{perspective:b}=a;return{disabled:!(0,e.isPerspectiveWriteable)({selectedPerspective:b,isDraftModelEnabled:v,schemaType:o}).result}},n[0]=v,n[1]=o,n[2]=b):b=n[2];let w=b;return n[3]!==q||n[4]!==s?(d="PUBLISHED_NOT_WRITEABLE"===q&&s("banners.choose-new-document-destination.cannot-create-published-document"),n[3]=q,n[4]=s,n[5]=d):d=n[5],n[6]!==q||n[7]!==s?(f="DRAFTS_NOT_WRITEABLE"===q&&s("banners.choose-new-document-destination.cannot-create-draft-document"),n[6]=q,n[7]=s,n[8]=f):f=n[8],n[9]!==q||n[10]!==p||n[11]!==s?(g="RELEASE_NOT_ACTIVE"===q&&(0,e.isReleaseDocument)(p)&&(0,c.jsx)(e.Translate,{t:s,i18nKey:"banners.choose-new-document-destination.release-inactive",values:{title:p.metadata.title},components:{VersionBadge:(0,e.getVersionInlineBadge)(p)}}),n[9]=q,n[10]=p,n[11]=s,n[12]=g):g=n[12],n[13]!==s?(h=s("banners.choose-new-document-destination.choose-destination"),n[13]=s,n[14]=h):h=n[14],n[15]!==h?(j=(0,c.jsxs)(c.Fragment,{children:[" ",h]}),n[15]=h,n[16]=j):j=n[16],n[17]!==d||n[18]!==f||n[19]!==g||n[20]!==j?(k=(0,c.jsxs)(an.Text,{size:1,children:[d,f,g,j]}),n[17]=d,n[18]=f,n[19]=g,n[20]=j,n[21]=k):k=n[21],n[22]!==w?(l=(0,c.jsx)(e.ReleasesNav,{menuItemProps:w}),n[22]=w,n[23]=l):l=n[23],n[24]!==l||n[25]!==k?(m=(0,c.jsx)(dd,{tone:"caution",icon:i.WarningOutlineIcon,content:(0,c.jsxs)(an.Flex,{align:"center",gap:2,children:[k,l]})}),n[24]=l,n[25]=k,n[26]=m):m=n[26],m};function dG(){let a,b,d=(0,am.c)(5),{value:f}=cL(),{documentLinkedBannerContent:g}=(0,e.useSanityCreateConfig)().components??{};d[0]!==f?(a=(0,e.getSanityCreateLinkMetadata)(f),d[0]=f,d[1]=a):a=d[1];let h=a;return g&&h?(d[2]!==g||d[3]!==h?(b=(0,c.jsx)(dd,{tone:"transparent","data-test-id":"sanity-create-read-only-banner",content:(0,c.jsx)(g,{metadata:h})}),d[2]=g,d[3]=h,d[4]=b):b=d[4],b):null}function dH({documentId:a,currentRelease:b,isScheduledRelease:f}){let g=(0,e.getReleaseTone)(b??e.LATEST),{t:h}=(0,e.useTranslation)(r),{t:i}=(0,e.useTranslation)(),{createVersion:j}=(0,e.useVersionOperations)(),[k,l]=(0,d.useState)(),m=(0,ao.useToast)(),n=(0,d.useCallback)(async()=>{if(b._id){l({status:"creating",lastUpdate:new Date});try{await j((0,e.getReleaseIdFromReleaseDocumentId)(b._id),a),l({status:"created",lastUpdate:new Date})}catch(a){m.push({status:"error",closable:!0,title:h("banners.release.error.title"),description:h("banners.release.error.description",{message:a.message})}),l(void 0)}}},[j,b._id,a,h,m]),o=function(a){let b,c,e,f=(0,am.c)(4);f[0]===Symbol.for("react.memo_cache_sentinel")?(b=new Date,f[0]=b):b=f[0];let[g,h]=(0,d.useState)(b);return 200!==f[1]?(c=()=>{let b=setInterval(()=>{h(new Date)},a);return()=>clearInterval(b)},e=[a],f[1]=a,f[2]=c,f[3]=e):(c=f[2],e=f[3]),(0,d.useEffect)(c,e),g}(200);return(0,e.useConditionalToast)({status:"info",id:"add-document-to-release",enabled:k?.status==="created"&&o.getTime()-k.lastUpdate.getTime()>1e3,closable:!0,title:h("banners.release.waiting.title"),description:h("banners.release.waiting.description")}),(0,c.jsx)(dd,{tone:g,content:(0,c.jsx)(an.Text,{size:1,children:(0,c.jsx)(e.Translate,{i18nKey:"banners.release.not-in-release",t:h,values:{title:b?.metadata?.title||i("release.placeholder-untitled-release")},components:{VersionBadge:(0,e.getVersionInlineBadge)(b)}})}),action:f?void 0:{text:h("banners.release.action.add-to-release"),tone:g,disabled:!!k,onClick:n,mode:"default"}})}let dI=(0,aJ.defineEvent)({name:"LiveEdit Draft Resolved",version:1,description:"User resolved a draft of a live edit document to continue editing"}),dJ=a=>{let b,g,h,j,k,l,m,n,p,q,s,t,u,v,w,x=(0,am.c)(47),{displayed:y,documentId:z,schemaType:A,i18nKey:B,isEditBlocking:C}=a,{t:D}=(0,e.useTranslation)(r),[E,F]=(0,d.useState)(!1),[G,H]=(0,d.useState)(!1),I=(0,aG.useTelemetry)(),{publish:J,discardChanges:K}=(0,e.useDocumentOperation)(z,y?._type||"");x[0]!==J||x[1]!==I?(b=()=>{J.execute(),F(!0),I.log(dI,{liveEditResolveType:"publish"})},x[0]=J,x[1]=I,x[2]=b):b=x[2];let L=b;x[3]!==K||x[4]!==I?(g=()=>{K.execute(),H(!0),I.log(dI,{liveEditResolveType:"discard"})},x[3]=K,x[4]=I,x[5]=g):g=x[5];let M=g;x[6]===Symbol.for("react.memo_cache_sentinel")?(h=()=>()=>{F(!1),H(!1)},x[6]=h):h=x[6],(0,d.useEffect)(h);let N=bL();x[7]!==N||x[8]!==y?._id||x[9]!==A.name?(j=()=>{typeof y?._id>"u"||N.navigateDiffView({mode:"version",previousDocument:{type:A.name,id:(0,f.getPublishedId)(y?._id)},nextDocument:{type:A.name,id:(0,f.getDraftId)(y?._id)}})},x[7]=N,x[8]=y?._id,x[9]=A.name,x[10]=j):j=x[10];let O=j;return x[11]!==A.title?(k={schemaType:A.title},x[11]=A.title,x[12]=k):k=x[12],x[13]!==B||x[14]!==D||x[15]!==k?(l=(0,c.jsx)(an.Text,{size:1,weight:"medium",children:(0,c.jsx)(e.Translate,{t:D,i18nKey:B,values:k})}),x[13]=B,x[14]=D,x[15]=k,x[16]=l):l=x[16],x[17]!==D?(m=D("banners.obsolete-draft.actions.compare-draft.text"),x[17]=D,x[18]=m):m=x[18],x[19]!==O||x[20]!==m?(n=(0,c.jsx)(o.Button,{text:m,mode:"ghost",onClick:O}),x[19]=O,x[20]=m,x[21]=n):n=x[21],x[22]!==D?(p=D("banners.obsolete-draft.actions.publish-draft.text"),x[22]=D,x[23]=p):p=x[23],x[24]!==C||x[25]!==D?(q=C?{content:D("banners.live-edit-draft-banner.publish.tooltip")}:{},x[24]=C,x[25]=D,x[26]=q):q=x[26],x[27]!==L||x[28]!==E||x[29]!==q||x[30]!==p?(s=(0,c.jsx)(o.Button,{onClick:L,text:p,tooltipProps:q,loading:E,tone:"positive"}),x[27]=L,x[28]=E,x[29]=q,x[30]=p,x[31]=s):s=x[31],x[32]!==D?(t=D("banners.obsolete-draft.actions.discard-draft.text"),x[32]=D,x[33]=t):t=x[33],x[34]!==C||x[35]!==D?(u=C?{content:D("banners.live-edit-draft-banner.discard.tooltip")}:{},x[34]=C,x[35]=D,x[36]=u):u=x[36],x[37]!==M||x[38]!==G||x[39]!==t||x[40]!==u?(v=(0,c.jsx)(o.Button,{onClick:M,text:t,tooltipProps:u,loading:G,tone:"caution"}),x[37]=M,x[38]=G,x[39]=t,x[40]=u,x[41]=v):v=x[41],x[42]!==s||x[43]!==v||x[44]!==l||x[45]!==n?(w=(0,c.jsx)(dd,{content:(0,c.jsxs)(an.Flex,{align:"center",justify:"space-between",gap:2,children:[l,n,s,v]}),"data-testid":"live-edit-type-banner",icon:i.ErrorOutlineIcon}),x[42]=s,x[43]=v,x[44]=l,x[45]=n,x[46]=w):w=x[46],w};function dK(a){let b,d,g=(0,am.c)(4),{documentId:h,isPinnedDraftOrPublished:i}=a;g[0]!==h?(b={documentId:h},g[0]=h,g[1]=b):b=g[1];let j=(0,e.useOnlyHasVersions)(b);return(0,f.isVersionId)(h)&&j&&i?(g[2]!==h?(d=(0,c.jsx)(dL,{documentId:h}),g[2]=h,g[3]=d):d=g[3],d):null}function dL({documentId:a}){let{data:b}=(0,e.useActiveReleases)(),g=(0,e.useSetPerspective)(),h=(0,f.getVersionFromId)(a)??"",i=(0,d.useMemo)(()=>b.find(a=>a._id.includes(h)),[b,h]),{t:j}=(0,e.useTranslation)(),{data:k}=(0,e.useDocumentVersions)({documentId:a}),l=(0,d.useMemo)(()=>b.filter(a=>k.find(b=>{let c=(0,f.getVersionFromId)(b)??"";return(0,e.getReleaseIdFromReleaseDocumentId)(a._id)===c})).map(a=>a.metadata.title||j("release.placeholder-untitled-release")),[b,k,j]),m=i&&(0,e.getReleaseTone)(i),{t:n}=(0,e.useTranslation)(r),o=(0,d.useCallback)(async()=>{g(h)},[h,g]);return(0,c.jsx)(dd,{tone:m,"data-testid":"open-release-to-edit-banner",content:(0,c.jsx)(an.Text,{size:1,children:(0,c.jsx)(an.Flex,{direction:"row",gap:1,wrap:"wrap",children:l.length>1?(0,c.jsx)(e.Translate,{t:n,i18nKey:"banners.release.navigate-to-edit-description-multiple",components:{VersionBadge:()=>(0,c.jsxs)(e.VersionInlineBadge,{children:[" ",l[0]]})},values:{count:l.length-1}}):(0,c.jsx)(e.Translate,{t:n,i18nKey:"banners.release.navigate-to-edit-description-single",components:{VersionBadge:()=>(0,c.jsxs)(e.VersionInlineBadge,{children:[" ",l[0]]})}})})}),action:{text:n("banners.release.action.open-to-edit"),tone:m,onClick:o,mode:"default"}})}function dM(){let a,b,d=(0,am.c)(4),{revisionNotFound:f}=cL(),{t:g}=(0,e.useTranslation)(r);return f?(d[0]!==g?(a=g("banners.revision-not-found.description"),d[0]=g,d[1]=a):a=d[1],d[2]!==a?(b=(0,c.jsx)(dd,{tone:"caution","data-test-id":"revision-not-found-banner",icon:i.WarningOutlineIcon,content:(0,c.jsx)(an.Text,{size:1,children:a})}),d[2]=a,d[3]=b):b=d[3],b):null}function dN(a){let b,d,f,g,h,j=(0,am.c)(12),{currentRelease:k}=a,l=k??e.LATEST;j[0]!==l?(b=(0,e.getReleaseTone)(l),j[0]=l,j[1]=b):b=j[1];let m=b,{t:n}=(0,e.useTranslation)();return j[2]!==k?(d=(0,e.formatRelativeLocalePublishDate)(k),j[2]=k,j[3]=d):d=j[3],j[4]!==d?(f={date:d},j[4]=d,j[5]=f):f=j[5],j[6]!==f||j[7]!==n?(g=(0,c.jsx)(an.Text,{size:1,children:(0,c.jsx)(e.Translate,{t:n,i18nKey:"release.banner.scheduled-for-publishing-on",values:f})}),j[6]=f,j[7]=n,j[8]=g):g=j[8],j[9]!==g||j[10]!==m?(h=(0,c.jsx)(dd,{tone:m,icon:i.LockIcon,content:g}),j[9]=g,j[10]=m,j[11]=h):h=j[11],h}function dO(){let a=(0,am.c)(18),{value:b,editState:d}=cL(),{selectedPerspective:f}=(0,e.usePerspective)(),g=(0,e.isGoingToUnpublish)(b)||d?.version&&(0,e.isGoingToUnpublish)(d?.version),{t:h}=(0,e.useTranslation)(r),{t:j}=(0,e.useTranslation)();if((0,e.isReleaseDocument)(f)&&g){let b,d,g,k,l,m,n;a[0]!==f.metadata?.title||a[1]!==j?(b=f.metadata?.title||j("release.placeholder-untitled-release"),a[0]=f.metadata?.title,a[1]=j,a[2]=b):b=a[2];let o=b;return a[3]!==o?(d={title:o},a[3]=o,a[4]=d):d=a[4],a[5]!==f?(g=(0,e.getVersionInlineBadge)(f),a[5]=f,a[6]=g):g=a[6],a[7]!==g?(k={VersionBadge:g},a[7]=g,a[8]=k):k=a[8],a[9]!==h||a[10]!==d||a[11]!==k?(l=(0,c.jsx)(an.Text,{size:1,children:(0,c.jsx)(e.Translate,{t:h,i18nKey:"banners.unpublished-release-banner.text",values:d,components:k})}),a[9]=h,a[10]=d,a[11]=k,a[12]=l):l=a[12],a[13]!==h?(m=(0,c.jsx)(an.Text,{size:1,children:(0,c.jsx)(e.Translate,{t:h,i18nKey:"banners.unpublished-release-banner.text-with-published"})}),a[13]=h,a[14]=m):m=a[14],a[15]!==l||a[16]!==m?(n=(0,c.jsx)(dd,{tone:"critical",content:(0,c.jsxs)(an.Stack,{space:2,children:[l,m]}),icon:i.UnpublishIcon}),a[15]=l,a[16]=m,a[17]=n):n=a[17],n}return null}let dP=(0,ar.styled)(an.Stack)`
  ${({theme:a})=>ar.css`
      @supports not (container-type: inline-size) {
        display: none !important;
      }

      container-type: inline-size;

      [data-heading] {
        font-size: ${a.sanity.fonts.heading.sizes[4].fontSize}px;
        line-height: ${a.sanity.fonts.heading.sizes[4].lineHeight}px;
        overflow-wrap: break-word;
        text-wrap: pretty;
      }

      @container (max-width: 560px) {
        [data-heading] {
          font-size: ${a.sanity.fonts.heading.sizes[3].fontSize}px;
          line-height: ${a.sanity.fonts.heading.sizes[3].lineHeight}px;
        }
      }

      @container (max-width: 420px) {
        [data-heading] {
          font-size: ${a.sanity.fonts.heading.sizes[2].fontSize}px;
          line-height: ${a.sanity.fonts.heading.sizes[2].lineHeight}px;
        }
      }
    `}
`,dQ=a=>{let b,d,f,g,h=(0,am.c)(14),{documentId:j,schemaType:k,title:l}=a,m=j===k.name,n=k.description,{t:p}=(0,e.useTranslation)(r);if(!1===k.__experimental_formPreviewTitle)return null;h[0]!==n||h[1]!==m||h[2]!==k.name||h[3]!==k.title?(b=!m&&(0,c.jsxs)(an.Inline,{space:1,children:[(0,c.jsx)(an.Text,{muted:!0,size:1,children:k.title??k.name}),n&&(0,c.jsx)(o.Tooltip,{content:n,placement:"right",children:(0,c.jsx)(i.InfoOutlineIcon,{"data-testid":"schema-description-icon"})})]}),h[0]=n,h[1]=m,h[2]=k.name,h[3]=k.title,h[4]=b):b=h[4];let q=!l;return h[5]!==p||h[6]!==l?(d=l??p("document-view.form-view.form-title-fallback"),h[5]=p,h[6]=l,h[7]=d):d=h[7],h[8]!==q||h[9]!==d?(f=(0,c.jsx)(an.Heading,{as:"h2","data-heading":!0,muted:q,"data-testid":"document-panel-document-title",children:d}),h[8]=q,h[9]=d,h[10]=f):f=h[10],h[11]!==b||h[12]!==f?(g=(0,c.jsxs)(dP,{marginBottom:6,space:4,children:[b,f]}),h[11]=b,h[12]=f,h[13]=g):g=h[13],g},dR=a=>a.preventDefault(),dS=(0,d.forwardRef)(function(a,b){let f,g,h,i,j,k,l,m,n,o,p,q,s,t,u,v=(0,am.c)(76),{hidden:w,margins:x}=a,{collapsedFieldSets:y,collapsedPaths:z,displayed:A,editState:B,documentId:C,documentType:D,fieldActions:E,onChange:F,validation:G,ready:H,formState:I,onFocus:J,connectionState:K,onBlur:L,onSetCollapsedPath:M,onPathOpen:N,onSetCollapsedFieldSet:O,onSetActiveFieldGroup:P,openPath:Q,compareValue:R}=cL(),{selectedReleaseId:S,selectedPerspective:T}=(0,e.usePerspective)(),U=(0,e.useDocumentStore)(),V=(0,e.useDocumentPresence)(C),{title:W}=cX(),[X]=(0,d.useState)(dT),Y=B?.transactionSyncLock?.enabled,{t:Z}=(0,e.useTranslation)(r);v[0]!==Z?(f=Z("document-view.form-view.sync-lock-toast.title"),v[0]=Z,v[1]=f):f=v[1],v[2]!==Z?(g=Z("document-view.form-view.sync-lock-toast.description"),v[2]=Z,v[3]=g):g=v[3],v[4]!==Y||v[5]!==f||v[6]!==g?(h={id:"sync-lock",status:"warning",enabled:Y,title:f,description:g,closable:!0},v[4]=Y,v[5]=f,v[6]=g,v[7]=h):h=v[7],(0,e.useConditionalToast)(h),v[8]!==C||v[9]!==U.pair||v[10]!==D||v[11]!==X||v[12]!==S?(i=()=>{let a=U.pair.documentEvents(C,D,S).pipe((0,aA.tap)(a=>{"mutation"===a.type&&X.publish(function(a){let b=a.mutations.map(a=>a.patch).filter(Boolean);return{type:"mutation",snapshot:a.document,patches:(0,e.fromMutationPatches)(a.origin,b)}}(a)),"rebase"===a.type&&X.publish(function(a){let b=a.remoteMutations.map(a=>a.patch).filter(Boolean),c=a.localMutations.map(a=>a.patch).filter(Boolean);return{type:"rebase",snapshot:a.document,patches:(0,e.fromMutationPatches)("remote",b).concat((0,e.fromMutationPatches)("local",c))}}(a))})).subscribe();return()=>{a.unsubscribe()}},v[8]=C,v[9]=U.pair,v[10]=D,v[11]=X,v[12]=S,v[13]=i):i=v[13],v[14]!==C||v[15]!==U||v[16]!==D||v[17]!==X||v[18]!==S?(j=[C,U,D,X,S],v[14]=C,v[15]=U,v[16]=D,v[17]=X,v[18]=S,v[19]=j):j=v[19],(0,d.useEffect)(i,j);let $=!!A?._rev;v[20]!==X||v[21]!==A?(k=()=>{X.publish({type:"mutation",patches:[],snapshot:A})},v[20]=X,v[21]=A,v[22]=k):k=v[22];let _=(0,aZ.useEffectEvent)(k);v[23]!==_||v[24]!==$?(l=()=>{$&&_()},v[23]=_,v[24]=$,v[25]=l):l=v[25],v[26]!==$?(m=[$],v[26]=$,v[27]=m):m=v[27],(0,d.useEffect)(l,m);let[aa,ab]=(0,d.useState)(null),[ac,ad]=(0,d.useState)(!1);v[28]!==ac||v[29]!==aa||v[30]!==I?.focusPath.length||v[31]!==H?(n=()=>{!ac&&H&&!I?.focusPath.length&&aa&&(ad(!0),(0,ao.focusFirstDescendant)(aa))},v[28]=ac,v[29]=aa,v[30]=I?.focusPath.length,v[31]=H,v[32]=n):n=v[32];let ae=I?.focusPath.length;v[33]!==ac||v[34]!==aa||v[35]!==H||v[36]!==ae?(o=[ac,aa,ae,H],v[33]=ac,v[34]=aa,v[35]=H,v[36]=ae,v[37]=o):o=v[37],(0,d.useEffect)(n,o),v[38]!==b?(p=a=>{ab(a),"function"==typeof b?b(a):b&&(b.current=a)},v[38]=b,v[39]=p):p=v[39];let af=p,ag="reconnecting"===K||I?.readOnly||!B?.ready,ah=ag?"true":void 0;return v[40]!==y||v[41]!==z||v[42]!==R||v[43]!==K||v[44]!==C||v[45]!==B?.draft||v[46]!==B?.published||v[47]!==E||v[48]!==I||v[49]!==w||v[50]!==ag||v[51]!==L||v[52]!==F||v[53]!==J||v[54]!==N||v[55]!==P||v[56]!==O||v[57]!==M||v[58]!==Q||v[59]!==X||v[60]!==V||v[61]!==T||v[62]!==Z||v[63]!==W||v[64]!==G?(q="connecting"!==K||B?.draft||B?.published?null===I||w?(0,c.jsx)(an.Box,{padding:2,children:(0,c.jsx)(an.Text,{children:Z("document-view.form-view.form-hidden")})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(dQ,{documentId:C,schemaType:I.schemaType,title:W}),(0,c.jsx)(e.FormBuilder,{__internal_fieldActions:E,__internal_patchChannel:X,changed:I.changed,collapsedFieldSets:y,collapsedPaths:z,compareValue:R??void 0,focused:I.focused,focusPath:I.focusPath,groups:I.groups,id:"root",members:I.members,onChange:F,onFieldGroupSelect:P,onPathBlur:L,onPathFocus:J,onPathOpen:N,onSetFieldSetCollapsed:O,onSetPathCollapsed:M,openPath:Q,perspective:T,presence:V,readOnly:ag,schemaType:I.schemaType,validation:G,value:I.value})]}):(0,c.jsx)(cH,{ms:300,children:(0,c.jsxs)(an.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:[(0,c.jsx)(an.Spinner,{muted:!0}),(0,c.jsx)(an.Box,{marginTop:3,children:(0,c.jsx)(an.Text,{align:"center",muted:!0,size:1,children:Z("document-view.form-view.loading")})})]})}),v[40]=y,v[41]=z,v[42]=R,v[43]=K,v[44]=C,v[45]=B?.draft,v[46]=B?.published,v[47]=E,v[48]=I,v[49]=w,v[50]=ag,v[51]=L,v[52]=F,v[53]=J,v[54]=N,v[55]=P,v[56]=O,v[57]=M,v[58]=Q,v[59]=X,v[60]=V,v[61]=T,v[62]=Z,v[63]=W,v[64]=G,v[65]=q):q=v[65],v[66]!==af||v[67]!==ah||v[68]!==q?(s=(0,c.jsx)(an.Box,{as:"form",onSubmit:dR,ref:af,"data-testid":"form-view","data-read-only":ah,children:q}),v[66]=af,v[67]=ah,v[68]=q,v[69]=s):s=v[69],v[70]!==x||v[71]!==s?(t=(0,c.jsx)(e.PresenceOverlay,{margins:x,children:s}),v[70]=x,v[71]=s,v[72]=t):t=v[72],v[73]!==w||v[74]!==t?(u=(0,c.jsx)(an.Container,{hidden:w,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:t}),v[73]=w,v[74]=t,v[75]=u):u=v[75],u});function dT(){return(0,e.createPatchChannel)()}function dU(){let a,b,d=(0,am.c)(11),{activeViewId:e,paneKey:f,views:g}=cL(),h=`${f}tabpanel`;if(d[0]!==e||d[1]!==f||d[2]!==h||d[3]!==g){let b;d[5]!==e||d[6]!==f||d[7]!==h?(b=(a,b)=>(0,c.jsx)(dV,{icon:a.icon,id:`${f}tab-${a.id}`,isActive:e===a.id,label:a.title,tabPanelId:h,viewId:0===b?null:a.id??null},a.id),d[5]=e,d[6]=f,d[7]=h,d[8]=b):b=d[8],a=g.map(b),d[0]=e,d[1]=f,d[2]=h,d[3]=g,d[4]=a}else a=d[4];return d[9]!==a?(b=(0,c.jsx)(an.TabList,{space:1,children:a}),d[9]=a,d[10]=b):b=d[10],b}function dV(a){let b,d,e,f,g,h,i,j,k,l=(0,am.c)(20);l[0]!==a?({icon:b,id:d,isActive:e,label:f,tabPanelId:h,viewId:i,...g}=a,l[0]=a,l[1]=b,l[2]=d,l[3]=e,l[4]=f,l[5]=g,l[6]=h,l[7]=i):(b=l[1],d=l[2],e=l[3],f=l[4],g=l[5],h=l[6],i=l[7]);let{ready:m,editState:n}=cL(),{setView:p}=cO();l[8]!==p||l[9]!==i?(j=()=>p(i),l[8]=p,l[9]=i,l[10]=j):j=l[10];let q=j,r=!m&&!n?.draft&&!n?.published;return l[11]!==q||l[12]!==b||l[13]!==d||l[14]!==e||l[15]!==f||l[16]!==g||l[17]!==r||l[18]!==h?(k=(0,c.jsx)(o.Tab,{...g,"aria-controls":h,disabled:r,icon:b,id:d,label:f,onClick:q,selected:e}),l[11]=q,l[12]=b,l[13]=d,l[14]=e,l[15]=f,l[16]=g,l[17]=r,l[18]=h,l[19]=k):k=l[19],k}function dW(){let a,b,d=(0,am.c)(18),{connectionState:f,schemaType:g,title:h,value:i}=cL(),{title:j,error:k}=cX(),{t:l}=(0,e.useTranslation)(r);if("connecting"===f&&!i){let a;return d[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(c.Fragment,{}),d[0]=a):a=d[0],a}if(h){let a;return d[1]!==h?(a=(0,c.jsx)(c.Fragment,{children:h}),d[1]=h,d[2]=a):a=d[2],a}if(!i){let a,b,e=g?.title||g?.name;return d[3]!==l||d[4]!==e?(a=l("panes.document-header-title.new.text",{schemaType:e}),d[3]=l,d[4]=e,d[5]=a):a=d[5],d[6]!==a?(b=(0,c.jsx)(c.Fragment,{children:a}),d[6]=a,d[7]=b):b=d[7],b}if(k){let a,b;return d[8]!==k||d[9]!==l?(a=l("panes.document-header-title.error.text",{error:k}),d[8]=k,d[9]=l,d[10]=a):a=d[10],d[11]!==a?(b=(0,c.jsx)(c.Fragment,{children:a}),d[11]=a,d[12]=b):b=d[12],b}return d[13]!==j||d[14]!==l?(a=j||(0,c.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:l("panes.document-header-title.untitled.text")}),d[13]=j,d[14]=l,d[15]=a):a=d[15],d[16]!==a?(b=(0,c.jsx)(c.Fragment,{children:a}),d[16]=a,d[17]=b):b=d[17],b}let dX=a=>{let b,d,f,g,h,j,k=(0,am.c)(16);k[0]!==a?({documentExists:b,...d}=a,k[0]=a,k[1]=b,k[2]=d):(b=k[1],d=k[2]);let{isFavorited:l,isReady:m,favorite:n,unfavorite:p}=(0,e.useManageFavorite)(d),{t:q}=(0,e.useTranslation)(r),s=l?"document.favorites.remove-from-favorites":"document.favorites.add-to-favorites";k[3]!==q||k[4]!==s?(f=q(s),k[3]=q,k[4]=s,k[5]=f):f=k[5];let t=f,u=l?p:n,v=!m||!b;return k[6]!==t?(g={content:(0,c.jsx)(an.Text,{size:1,children:t}),placement:"right"},k[6]=t,k[7]=g):g=k[7],k[8]!==l?(h=(0,c.jsx)(an.Text,{size:1,children:l?(0,c.jsx)(i.StarFilledIcon,{}):(0,c.jsx)(i.StarIcon,{})}),k[8]=l,k[9]=h):h=k[9],k[10]!==t||k[11]!==u||k[12]!==v||k[13]!==g||k[14]!==h?(j=(0,c.jsx)(o.Button,{mode:"bleed",onClick:u,disabled:v,"aria-label":t,"aria-live":"assertive",tooltipProps:g,children:h}),k[10]=t,k[11]=u,k[12]=v,k[13]=g,k[14]=h,k[15]=j):j=k[15],j},dY=(0,d.memo)(function(){let a,b,d,g,h,j,k,l=(0,am.c)(26),{editState:m,connectionState:n,views:p,documentId:q,displayed:s}=cL(),{features:t}=cR(),{index:u,BackLink:v}=cO(),{activeWorkspace:w}=(0,e.useActiveWorkspace)();l[0]!==q?(a=(0,f.getPublishedId)(q),l[0]=q,l[1]=a):a=l[1];let x=a,y=p.length>1,{collapsed:z,isLast:A}=cd(),B=A&&!z?-1:0,C=t.backButton&&u>0,{t:D}=(0,e.useTranslation)(r);l[2]===Symbol.for("react.memo_cache_sentinel")?(b=(0,c.jsx)(dW,{}),l[2]=b):b=l[2];let E=b;l[3]!==y?(d=y&&(0,c.jsx)(dU,{}),l[3]=y,l[4]=d):d=l[4];let F=d;l[5]!==v||l[6]!==C||l[7]!==D?(g=C&&(0,c.jsx)(o.Button,{as:v,"data-as":"a",icon:i.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:D("pane-header.back-button.text")}}),l[5]=v,l[6]=C,l[7]=D,l[8]=g):g=l[8];let G=g,H=s?._type??"";l[9]!==w.dataset||l[10]!==w.projectId?(h=[w.projectId,w.dataset],l[9]=w.dataset,l[10]=w.projectId,l[11]=h):h=l[11];let I=h.join("."),J=(m?.ready&&(m.version??m.draft??m.published)!==null)??!1;l[12]!==w.dataset||l[13]!==w.name||l[14]!==w.projectId||l[15]!==x||l[16]!==H||l[17]!==I||l[18]!==J?(j=(0,c.jsx)(e.CapabilityGate,{capability:"comlink",condition:"available",children:(0,c.jsx)(dX,{resourceType:"studio",documentId:x,documentType:H,resourceId:I,schemaName:w.name,projectId:w.projectId,dataset:w.dataset,documentExists:J})}),l[12]=w.dataset,l[13]=w.name,l[14]=w.projectId,l[15]=x,l[16]=H,l[17]=I,l[18]=J,l[19]=j):j=l[19];let K=j,L="connecting"===n&&!m?.draft&&!m?.published;return l[20]!==G||l[21]!==K||l[22]!==L||l[23]!==B||l[24]!==F?(k=(0,c.jsx)(cw,{loading:L,title:E,tabs:F,tabIndex:B,backButton:G,appendTitle:K}),l[20]=G,l[21]=K,l[22]=L,l[23]=B,l[24]=F,l[25]=k):k=l[25],k}),dZ=(0,ar.styled)(an.Box)({position:"relative"}),d$=(0,ar.styled)(e.ScrollContainer)(({$disabled:a})=>a?{height:"100%"}:ar.css`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `),d_=function(a){let b,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=(0,am.c)(108),{footerHeight:w,headerHeight:x,isInspectOpen:y,rootElement:z,setDocumentPanelPortalElement:A,footer:B}=a,{activeViewId:C,displayed:D,documentId:E,editState:F,inspector:G,value:H,views:I,ready:J,schemaType:K,permissions:L,isPermissionsLoading:M}=cL();if(v[0]!==H){let a=(0,e.getSanityCreateLinkMetadata)(H);b=(0,e.isSanityCreateLinked)(a),v[0]=H,v[1]=b}else b=v[1];let N=b,{params:O}=cO(),{collapsed:P}=b7(),{collapsed:Q}=cd(),R=(0,an.usePortal)(),{features:S}=cR(),[T,U]=(0,d.useState)(null),[V,W]=(0,d.useState)(null),X=(0,d.useRef)(null),Y=(0,e.useWorkspace)(),Z=H._createdAt?"update":"create";v[2]!==C||v[3]!==I?(g=I.find(a=>a.id===C)||I[0]||{type:"form"},v[2]=C,v[3]=I,v[4]=g):g=v[4];let $=g,_=S.splitPanes&&T||R.element;a:{let a;if(P){let a,b=x||0,c=w?w+2:2;v[5]!==b||v[6]!==c?(a=[b,0,c,0],v[5]=b,v[6]=c,v[7]=a):a=v[7],h=a;break a}v[8]===Symbol.for("react.memo_cache_sentinel")?(a=[0,0,2,0],v[8]=a):a=v[8],h=a}let aa=h,ab="form"!==$.type;v[9]!==$.component||v[10]!==$.options||v[11]!==$.type||v[12]!==D||v[13]!==E||v[14]!==F?.draft||v[15]!==F?.published||v[16]!==K||v[17]!==H?(i=()=>{if("component"===$.type&&$.component){let a=$.component;return(0,c.jsx)(a,{document:{draft:F?.draft||null,displayed:D||H,historical:D,published:F?.published||null},documentId:E,options:$.options,schemaType:K})}return!1},v[9]=$.component,v[10]=$.options,v[11]=$.type,v[12]=D,v[13]=E,v[14]=F?.draft,v[15]=F?.published,v[16]=K,v[17]=H,v[18]=i):i=v[18],v[19]!==i?(j=i(),v[19]=i,v[20]=j):j=v[20];let ac=j;v[21]!==V?(k=()=>{V?.scrollTo&&V.scrollTo(0,0)},v[21]=V,v[22]=k):k=v[22],v[23]!==E||v[24]!==V?(l=[E,V],v[23]=E,v[24]=V,v[25]=l):l=v[25],(0,d.useEffect)(k,l),v[26]!==_||v[27]!==A?(m=()=>{_&&A(_)},n=[_,A],v[26]=_,v[27]=A,v[28]=m,v[29]=n):(m=v[28],n=v[29]),(0,d.useEffect)(m,n),v[30]!==D||v[31]!==y||v[32]!==H?(o=y?(0,c.jsx)(dc,{value:D||H}):null,v[30]=D,v[31]=y,v[32]=H,v[33]=o):o=v[33];let ad=o,ae=!!(!Q&&G),{selectedPerspective:af,selectedReleaseId:ag}=(0,e.usePerspective)();v[34]!==D||v[35]!==E?(p={displayed:D,documentId:E},v[34]=D,v[35]=E,v[36]=p):p=v[36];let ah=cP(p);b:{let a,b,d,g,h,i,j,k,l,m,n,o,p,r;if(O?.historyVersion){let a;v[37]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(dz,{}),v[37]=a):a=v[37],q=a;break b}v[38]!==af?(a=(0,e.isReleaseDocument)(af)&&(0,e.isReleaseScheduledOrScheduling)(af),v[38]=af,v[39]=a):a=v[39];let s=a,t=!!(s&&D?._id&&(0,f.getVersionFromId)(D?._id)===ag);if(v[40]!==F||v[41]!==K||v[42]!==af||v[43]!==Y.document.drafts.enabled?(d=function({isSelectedPerspectiveWriteable:a,editState:b}){return(0,e.isNewDocument)(b)&&!a.result}({isSelectedPerspectiveWriteable:b=(0,e.isPerspectiveWriteable)({selectedPerspective:af,isDraftModelEnabled:Y.document.drafts.enabled,schemaType:K}),editState:F}),v[40]=F,v[41]=K,v[42]=af,v[43]=Y.document.drafts.enabled,v[44]=b,v[45]=d):(b=v[44],d=v[45]),d){let a;v[46]!==b.reason||v[47]!==b.result||v[48]!==K||v[49]!==af?(a=!b.result&&(0,c.jsx)(dF,{schemaType:K,selectedPerspective:af,reason:b.reason}),v[46]=b.reason,v[47]=b.result,v[48]=K,v[49]=af,v[50]=a):a=v[50],q=a;break b}if(t){let a;v[51]!==af?(a=(0,c.jsx)(dN,{currentRelease:af}),v[51]=af,v[52]=a):a=v[52],q=a;break b}let u=ah.currentReleases.some(e.isCardinalityOneRelease);if("drafts"===af&&u){let a;v[53]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(dy,{}),v[53]=a):a=v[53],q=a;break b}v[54]!==af?(g=(0,e.isSystemBundle)(af),v[54]=af,v[55]=g):g=v[55];let w=g,x=F?.version&&(0,e.isGoingToUnpublish)(F?.version);if(D?._id&&(0,f.getVersionFromId)(D._id)!==ag&&J&&!w&&!1===(0,e.isNewDocument)(F)&&!x){let a;v[56]!==s||v[57]!==af||v[58]!==H._id?(a=(0,c.jsx)(dH,{documentId:H._id,currentRelease:af,isScheduledRelease:s}),v[56]=s,v[57]=af,v[58]=H._id,v[59]=a):a=v[59],q=a;break b}let y=function({editState:a,workspace:b,schemaType:c}){if(!a?.ready)return{result:void 0};let d=null!==a.draft,{document:{drafts:{enabled:e}}}=b;return!1===d?{result:!1}:e?!0===c.liveEdit?{result:!0,reason:"LIVE_EDIT_ACTIVE"}:{result:!1}:{result:!0,reason:"DRAFT_MODEL_INACTIVE"}}({editState:F,workspace:Y,schemaType:K});if("form"===$.type&&!ag&&y.result){if("DRAFT_MODEL_INACTIVE"===y.reason){let a;v[60]!==D||v[61]!==E||v[62]!==K?(a=(0,c.jsx)(dJ,{displayed:D,documentId:E,schemaType:K,i18nKey:"banners.obsolete-draft.draft-model-inactive.text"}),v[60]=D,v[61]=E,v[62]=K,v[63]=a):a=v[63],q=a;break b}if("LIVE_EDIT_ACTIVE"===y.reason){let a;v[64]!==D||v[65]!==E||v[66]!==K?(a=(0,c.jsx)(dJ,{displayed:D,documentId:E,schemaType:K,i18nKey:"banners.live-edit-draft-banner.text",isEditBlocking:!0}),v[64]=D,v[65]=E,v[66]=K,v[67]=a):a=v[67],q=a;break b}}if("form"!==$.type||M){q=null;break b}v[68]!==N?(h=N&&(0,c.jsx)(dG,{}),v[68]=N,v[69]=h):h=v[69],v[70]!==L?.granted||v[71]!==Z?(i=!L?.granted&&(0,c.jsx)(du,{requiredPermission:Z}),v[70]=L?.granted,v[71]=Z,v[72]=i):i=v[72],v[73]===Symbol.for("react.memo_cache_sentinel")?(j=(0,c.jsx)(dM,{}),k=(0,c.jsx)(dx,{}),l=(0,c.jsx)(dh,{}),m=(0,c.jsx)(dD,{}),n=(0,c.jsx)(de,{}),o=(0,c.jsx)(dO,{}),v[73]=j,v[74]=k,v[75]=l,v[76]=m,v[77]=n,v[78]=o):(j=v[73],k=v[74],l=v[75],m=v[76],n=v[77],o=v[78]);let z=D?._id??E;v[79]!==w||v[80]!==z?(p=(0,c.jsx)(dK,{documentId:z,isPinnedDraftOrPublished:w}),v[79]=w,v[80]=z,v[81]=p):p=v[81],v[82]!==h||v[83]!==i||v[84]!==p?(r=(0,c.jsxs)(c.Fragment,{children:[h,i,j,k,l,m,n,o,p]}),v[82]=h,v[83]=i,v[84]=p,v[85]=r):r=v[85],q=r}let ai=q;v[86]!==V?(r={documentScrollElement:V},v[86]=V,v[87]=r):r=v[87];let aj=r,ak=S.resizablePanes||!ae;return v[88]!==ac||v[89]!==ai||v[90]!==V||v[91]!==B||v[92]!==ab||v[93]!==ad||v[94]!==P||v[95]!==aa||v[96]!==_||v[97]!==aj||v[98]!==ak?(s=ak&&(0,c.jsxs)(an.Flex,{height:"fill",direction:"column",width:"fill",flex:2,children:[(0,c.jsxs)(e.LegacyLayerProvider,{zOffset:"paneHeader",children:[ai,(0,c.jsx)(dY,{})]}),(0,c.jsx)(dZ,{flex:2,overflow:"hidden",children:(0,c.jsx)(an.PortalProvider,{element:_,__unstable_elements:aj,children:(0,c.jsx)(an.BoundaryElementProvider,{element:V,children:(0,c.jsxs)(e.VirtualizerScrollInstanceProvider,{scrollElement:V,containerElement:X,children:[(0,c.jsxs)(d$,{$disabled:P||!1,"data-testid":"document-panel-scroller",ref:W,children:[(0,c.jsx)(dS,{hidden:ab,margins:aa,ref:X}),ac]}),ad,(0,c.jsx)("div",{"data-testid":"document-panel-portal",ref:U})]})})})}),B]}),v[88]=ac,v[89]=ai,v[90]=V,v[91]=B,v[92]=ab,v[93]=ad,v[94]=P,v[95]=aa,v[96]=_,v[97]=aj,v[98]=ak,v[99]=s):s=v[99],v[100]!==E||v[101]!==z||v[102]!==K||v[103]!==ae?(t=ae&&(0,c.jsx)(an.BoundaryElementProvider,{element:z,children:(0,c.jsx)(c0,{documentId:E,documentType:K.name,flex:1})}),v[100]=E,v[101]=z,v[102]=K,v[103]=ae,v[104]=t):t=v[104],v[105]!==s||v[106]!==t?(u=(0,c.jsx)(ce,{children:(0,c.jsxs)(an.Flex,{height:"fill",children:[s,t]})}),v[105]=s,v[106]=t,v[107]=u):u=v[107],u};function d0(a){return("item"===a.type||"group"===a.type)&&a.renderAsButton}d_.displayName="DocumentPanel";let d1=(0,aE.default)(d0);function d2(a){let{fieldActions:b=[],menuItems:c,menuItemGroups:d}=a,e=[],f=0;for(let a=0;a<b.length;a+=1){let c=b[a];e.push(function a(b,c){return"divider"===b.type?{type:"divider",key:c}:"group"===b.type?{type:"group",key:c,children:b.children.map((b,d)=>a(b,`${c}-${d}-${b.type}`)),disabled:b.disabled,expanded:b.expanded??!0,icon:b.icon,title:b.title,i18n:b.i18n,renderAsButton:b.renderAsButton??!1}:{type:"item",key:c,intent:b.intent,disabled:b.disabled,icon:b.icon,iconRight:b.iconRight,onAction:b.onAction,renderAsButton:b.renderAsButton??!1,selected:b.selected,title:b.title,i18n:b.i18n,tone:b.tone}}(c,`${a}-${c.type}`))}f+=e.length;let g=[];for(let a of d)g.find(b=>b.key===a.id)||g.push({type:"group",key:a.id,children:[],expanded:!0,renderAsButton:!1,title:a.title,i18n:a.i18n});let h=[];for(let b=0;b<c.length;b+=1){let d=c[b],e=d.group&&g.find(a=>a.key===d.group),i="string"==typeof d.disabled?{reason:d.disabled}:d.disabled;d.group&&!e&&(e={type:"group",key:d.group,disabled:i,expanded:!0,icon:d.icon,title:d.group,children:[],renderAsButton:!1},g.push(e)),e?e.children.push({type:"item",key:`${f+b}-item`,hotkey:d.shortcut,icon:d.icon,intent:d.intent,disabled:i,onAction:()=>a.actionHandler(d),renderAsButton:d.showAsAction??!1,selected:d.selected,title:d.title,i18n:d.i18n,tone:d.tone}):h.push({type:"item",key:`${f+b}-item`,hotkey:d.shortcut,icon:d.icon,intent:d.intent,disabled:i,onAction:()=>a.actionHandler(d),renderAsButton:d.showAsAction??!1,selected:d.selected,title:d.title,i18n:d.i18n,tone:d.tone})}return[...h,...g,...e]}let d3=!1,d4=Object.freeze({}),d5=Symbol("LOADING_PANE"),d6="documentPanelPortalElement",d7=["left","bottom"],d8={small:0,medium:1,large:2,full:"auto"};function d9(a){let b,d,f,g=(0,am.c)(16),{dialog:h,referenceElement:i}=a,{t:j}=(0,e.useTranslation)(r),{cancelButtonIcon:k,cancelButtonText:l,confirmButtonIcon:m,confirmButtonText:n,message:o,onCancel:p,onConfirm:q,tone:s}=h;return g[0]!==l||g[1]!==j?(b=l||j("confirm-dialog.cancel-button.fallback-text"),g[0]=l,g[1]=j,g[2]=b):b=g[2],g[3]!==n||g[4]!==j?(d=n||j("confirm-dialog.confirm-button.fallback-text"),g[3]=n,g[4]=j,g[5]=d):d=g[5],g[6]!==k||g[7]!==m||g[8]!==o||g[9]!==p||g[10]!==q||g[11]!==i||g[12]!==b||g[13]!==d||g[14]!==s?(f=(0,c.jsx)(aF.ConfirmPopover,{cancelButtonIcon:k,cancelButtonText:b,confirmButtonIcon:m,confirmButtonText:d,message:o,onCancel:p,onConfirm:q,open:!0,referenceElement:i,tone:s,placement:"top",fallbackPlacements:d7}),g[6]=k,g[7]=m,g[8]=o,g[9]=p,g[10]=q,g[11]=i,g[12]=b,g[13]=d,g[14]=s,g[15]=f):f=g[15],f}function ea(a){let b,f,g,h=(0,am.c)(12),{dialog:i}=a,j=(0,d.useId)();h[0]!==i.footer?(b=i.footer&&(0,c.jsx)(an.Box,{paddingX:4,paddingY:3,children:i.footer}),h[0]=i.footer,h[1]=b):b=h[1];let k=b,l=!1===i.showCloseButton,m=void 0===i.width?1:d8[i.width];return h[2]!==i.content?(f=(0,c.jsx)(an.Box,{padding:4,children:i.content}),h[2]=i.content,h[3]=f):f=h[3],h[4]!==i.header||h[5]!==i.onClose||h[6]!==j||h[7]!==k||h[8]!==l||h[9]!==m||h[10]!==f?(g=(0,c.jsx)(e.LegacyLayerProvider,{zOffset:"fullscreen",children:(0,c.jsx)(ao.Dialog,{animate:!0,__unstable_hideCloseButton:l,footer:k,header:i.header,id:j,onClose:i.onClose,onClickOutside:i.onClose,width:m,children:f})}),h[4]=i.header,h[5]=i.onClose,h[6]=j,h[7]=k,h[8]=l,h[9]=m,h[10]=f,h[11]=g):g=h[11],g}function eb(a){let b,d,e=(0,am.c)(5),{dialog:f,referenceElement:g}=a;return e[0]!==f?(b=(0,c.jsx)(ec,{dialog:f}),e[0]=f,e[1]=b):b=e[1],e[2]!==g||e[3]!==b?(d=(0,c.jsx)(an.Popover,{content:b,fallbackPlacements:d7,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:g}),e[2]=g,e[3]=b,e[4]=d):d=e[4],d}function ec(a){let b,e,f,g=(0,am.c)(6),{dialog:h}=a,{content:i,onClose:j}=h,{isTopLayer:k}=(0,an.useLayer)(),l=(0,d.useRef)(null);return g[0]!==k||g[1]!==j?(b=a=>{"Escape"===a.key&&k&&j()},g[0]=k,g[1]=j,g[2]=b):b=g[2],(0,an.useGlobalKeyDown)(b),g[3]===Symbol.for("react.memo_cache_sentinel")?(e=()=>[l.current],g[3]=e):e=g[3],(0,an.useClickOutsideEvent)(k&&j,e),g[4]!==i?(f=(0,c.jsx)("div",{ref:l,children:i}),g[4]=i,g[5]=f):f=g[5],f}function ed(a){let b,d=(0,am.c)(3),{children:e}=a,{element:f,elements:g}=(0,an.usePortal)(),h=g?.[d6]||f;return d[0]!==e||d[1]!==h?(b=(0,c.jsx)(an.PortalProvider,{element:h,children:e}),d[0]=e,d[1]=h,d[2]=b):b=d[2],b}function ee(a){let b,e,f=(0,am.c)(17),{dialog:g,referenceElement:h}=a,i=void 0===h?null:h,j=(0,d.useId)();if("confirm"===g.type){let a;return f[0]!==g||f[1]!==i?(a=(0,c.jsx)(d9,{dialog:g,referenceElement:i}),f[0]=g,f[1]=i,f[2]=a):a=f[2],a}if("popover"===g.type){let a;return f[3]!==g||f[4]!==i?(a=(0,c.jsx)(eb,{dialog:g,referenceElement:i}),f[3]=g,f[4]=i,f[5]=a):a=f[5],a}if("dialog"===g.type||!g.type){let a;return f[6]!==g?(a=(0,c.jsx)(ed,{children:(0,c.jsx)(ea,{dialog:g})}),f[6]=g,f[7]=a):a=f[7],a}if("custom"===g.type){let a,b=g?.component;return f[8]!==b?(a=(0,c.jsx)(ed,{children:b}),f[8]=b,f[9]=a):a=f[9],a}return console.warn(`Unsupported modal type ${g.type}`),f[10]!==g.content||f[11]!==g.type?(b=g.content||(0,c.jsxs)(an.Text,{size:1,children:["Unexpected modal type (",(0,c.jsx)("code",{children:g.type}),")"]}),f[10]=g.content,f[11]=g.type,f[12]=b):b=f[12],f[13]!==j||f[14]!==b||f[15]!==g.onClose?(e=(0,c.jsx)(o.Dialog,{id:j,onClose:g.onClose,onClickOutside:g.onClose,width:1,children:b}),f[13]=j,f[14]=b,f[15]=g.onClose,f[16]=e):e=f[16],e}let ef=(0,d.memo)(function(a){let b,f,g,h,i=(0,am.c)(9),{actionStates:j,children:k,referenceElement:l}=a,[m,n]=(0,d.useState)(-1),o=j[m];i[0]===Symbol.for("react.memo_cache_sentinel")?(b=a=>{n(a)},i[0]=b):b=i[0];let p=b;i[1]!==k?(f=k({handleAction:p}),i[1]=k,i[2]=f):f=i[2];let q=f;return i[3]!==o||i[4]!==l?(g=o&&o.dialog&&(0,c.jsx)(e.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,c.jsx)(ee,{dialog:o.dialog,referenceElement:l})}),i[3]=o,i[4]=l,i[5]=g):g=i[5],i[6]!==q||i[7]!==g?(h=(0,c.jsxs)(c.Fragment,{children:[g,q]}),i[6]=q,i[7]=g,i[8]=h):h=i[8],h});function eg(a){let b,f,g,h=(0,am.c)(10),{actionStates:i,disabled:j}=a,k=(0,d.useId)(),[l,m]=(0,d.useState)(null);h[0]===Symbol.for("react.memo_cache_sentinel")?(b={placement:"top-end",portal:!0,preventOverflow:!0},h[0]=b):b=h[0];let n=b,{t:p}=(0,e.useTranslation)(r);h[1]!==i||h[2]!==j||h[3]!==k||h[4]!==p?(f=a=>{let{handleAction:b}=a;return(0,c.jsx)(o.MenuButton,{id:`${k}-action-menu`,button:(0,c.jsx)(e.ContextMenuButton,{"aria-label":p("buttons.action-menu-button.aria-label"),disabled:j,"data-testid":"action-menu-button",tooltipProps:{content:p("buttons.action-menu-button.tooltip")}}),menu:(0,c.jsx)(an.Menu,{padding:1,children:i.map((a,d)=>(0,c.jsx)(eh,{actionState:a,disabled:j,index:d,onAction:b},d))}),popover:n,ref:m})},h[1]=i,h[2]=j,h[3]=k,h[4]=p,h[5]=f):f=h[5];let q=f;return h[6]!==i||h[7]!==l||h[8]!==q?(g=(0,c.jsx)(ef,{actionStates:i,referenceElement:l,children:q}),h[6]=i,h[7]=l,h[8]=q,h[9]=g):g=h[9],g}function eh(a){let b,d,e,f,g=(0,am.c)(18),{actionState:h,disabled:i,index:j,onAction:k}=a,{onHandle:l}=h;g[0]!==j||g[1]!==k||g[2]!==l?(b=()=>{k(j),l&&l()},g[0]=j,g[1]=k,g[2]=l,g[3]=b):b=g[3];let m=b;g[4]!==h.shortcut?(d=h.shortcut?String(h.shortcut).split("+").map(ei):void 0,g[4]=h.shortcut,g[5]=d):d=g[5];let n=d,p=`action-${h.label.replace(" ","")}`,q=i||!!h.disabled;return g[6]!==h.disabled||g[7]!==h.title?(e=h.disabled&&{tooltipProps:{content:h.title}},g[6]=h.disabled,g[7]=h.title,g[8]=e):e=g[8],g[9]!==h.icon||g[10]!==h.label||g[11]!==h.tone||g[12]!==m||g[13]!==n||g[14]!==p||g[15]!==q||g[16]!==e?(f=(0,c.jsx)(o.MenuItem,{"data-testid":p,disabled:q,hotkeys:n,icon:h.icon,onClick:m,text:h.label,tone:h.tone,...e}),g[9]=h.icon,g[10]=h.label,g[11]=h.tone,g[12]=m,g[13]=n,g[14]=p,g[15]=q,g[16]=e,g[17]=f):f=g[17],f}function ei(a){return a.slice(0,1).toUpperCase()+a.slice(1)}let ej={NOTHING_TO_DELETE:"action.delete.disabled.nothing-to-delete",NOT_READY:"action.delete.disabled.not-ready"},ek=a=>{let b,f,g,h,j,k=(0,am.c)(36),{id:l,type:m,draft:n,onComplete:o,release:p}=a,{setIsDeleting:q}=cL(),{delete:s}=(0,e.useDocumentOperation)(l,m,p),[t,u]=(0,d.useState)(!1),[v,w]=(0,d.useState)(!1),{t:x}=(0,e.useTranslation)(r);k[0]!==o?(b=()=>{w(!1),o()},k[0]=o,k[1]=b):b=k[1];let y=b;k[2]!==s||k[3]!==o||k[4]!==q?(f=()=>{u(!0),w(!1),q(!0),s.execute(),o()},k[2]=s,k[3]=o,k[4]=q,k[5]=f):f=k[5];let z=f;k[6]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{w(!0)},k[6]=g):g=k[6];let A=g;k[7]!==l||k[8]!==p||k[9]!==m?(h={id:l,type:m,version:p,permission:"delete"},k[7]=l,k[8]=p,k[9]=m,k[10]=h):h=k[10];let[B,C]=(0,e.useDocumentPairPermissions)(h),D=(0,e.useCurrentUser)();a:{let a,b,d,f;if(!C&&!B?.granted){let a,b,d;k[11]!==x?(a=x("action.delete.label"),k[11]=x,k[12]=a):a=k[12],k[13]!==D?(b=(0,c.jsx)(e.InsufficientPermissionsMessage,{context:"delete-document",currentUser:D}),k[13]=D,k[14]=b):b=k[14],k[15]!==a||k[16]!==b?(d={tone:"critical",icon:i.TrashIcon,disabled:!0,label:a,title:b},k[15]=a,k[16]=b,k[17]=d):d=k[17],j=d;break a}let g=t||!!s.disabled||C;k[18]!==s.disabled||k[19]!==x?(a=s.disabled&&x(ej[s.disabled])||"",k[18]=s.disabled,k[19]=x,k[20]=a):a=k[20],k[21]!==t||k[22]!==x?(b=x(t?"action.delete.running.label":"action.delete.label"),k[21]=t,k[22]=x,k[23]=b):b=k[23],k[24]!==n?._id||k[25]!==y||k[26]!==z||k[27]!==l||k[28]!==v||k[29]!==m?(d=v&&{type:"custom",component:(0,c.jsx)(gI,{action:"delete",id:n?._id||l,type:m,onCancel:y,onConfirm:z})},k[24]=n?._id,k[25]=y,k[26]=z,k[27]=l,k[28]=v,k[29]=m,k[30]=d):d=k[30],k[31]!==g||k[32]!==a||k[33]!==b||k[34]!==d?(f={tone:"critical",icon:i.TrashIcon,disabled:g,title:a,label:b,shortcut:"Ctrl+Alt+D",onHandle:A,dialog:d},k[31]=g,k[32]=a,k[33]=b,k[34]=d,k[35]=f):f=k[35],j=f}return j};ek.action="delete",ek.displayName="DeleteAction";let el={NO_CHANGES:"action.discard-changes.disabled.no-change",NOT_PUBLISHED:"action.discard-changes.disabled.not-published",NOT_READY:"action.discard-changes.disabled.not-ready"},em=({id:a,type:b,published:g,liveEdit:h,onComplete:j,release:k})=>{let{discardChanges:l}=(0,e.useDocumentOperation)(a,b,k),[m,n]=(0,d.useState)(!1),[o,p]=(0,e.useDocumentPairPermissions)({id:a,type:b,version:k,permission:"discardDraft"}),q=(0,e.useCurrentUser)(),{displayed:s}=cL(),{t}=(0,e.useTranslation)(r),u=s?._id&&(0,f.isPublishedId)(s?._id),v=(0,d.useCallback)(()=>{l.execute(),j()},[l,j]),w=(0,d.useCallback)(()=>{n(!0)},[]),x=(0,d.useMemo)(()=>m&&{type:"confirm",tone:"critical",onCancel:j,onConfirm:v,message:t("action.discard-changes.confirm-dialog.confirm-discard-changes")},[v,m,j,t]);return(0,d.useMemo)(()=>!g||h||u?null:p||o?.granted?{tone:"critical",icon:i.ResetIcon,disabled:!!l.disabled||p,title:t(l.disabled&&el[l.disabled]||""),label:t("action.discard-changes.label"),onHandle:w,dialog:x}:{tone:"critical",icon:i.ResetIcon,disabled:!0,label:t("action.discard-changes.label"),title:(0,c.jsx)(e.InsufficientPermissionsMessage,{context:"discard-changes",currentUser:q})},[q,x,l.disabled,w,p,u,h,o?.granted,g,t])};em.action="discardChanges",em.displayName="DiscardChangesAction";let en={NOTHING_TO_DUPLICATE:"action.duplicate.disabled.nothing-to-duplicate",NOT_READY:"action.duplicate.disabled.not-ready"},eo=({id:a,type:b,onComplete:f,release:g,mapDocument:h})=>{let j=(0,e.useDocumentStore)(),{duplicate:k}=(0,e.useDocumentOperation)(a,b,g),{navigateIntent:l}=(0,aw.useRouter)(),[m,n]=(0,d.useState)(!1),[o,p]=(0,e.useDocumentPairPermissions)({id:a,type:b,version:g,permission:"duplicate"}),{t:q}=(0,e.useTranslation)(r),s=(0,e.useCurrentUser)(),t=(0,d.useCallback)(async()=>{let c=(0,aq.uuid)();n(!0);let d=(0,aB.firstValueFrom)(j.pair.operationEvents(a,b).pipe((0,aB.filter)(a=>"duplicate"===a.op&&"success"===a.type)));k.execute(c,{mapDocument:h}),await d,l("edit",{id:c,type:b}),f()},[j.pair,k,a,h,l,f,b]);return(0,d.useMemo)(()=>p||o?.granted?{icon:i.CopyIcon,disabled:m||!!k.disabled||p,label:q(m?"action.duplicate.running.label":"action.duplicate.label"),title:k.disabled?q(en[k.disabled]):"",onHandle:t}:{icon:i.CopyIcon,disabled:!0,label:q("action.duplicate.label"),title:(0,c.jsx)(e.InsufficientPermissionsMessage,{context:"duplicate-document",currentUser:s})},[s,k.disabled,t,m,p,o?.granted,q])};eo.action="duplicate",eo.displayName="DuplicateAction";let ep=a=>{let b,c,f,g,h,j,k=(0,am.c)(27),{id:l,type:m,revision:n,onComplete:o,release:p}=a,{restore:q}=(0,e.useDocumentOperation)(l,m,p),{revisionNotFound:s}=cL(),t=(0,e.useDocumentOperationEvent)(l,m),{navigateIntent:u}=(0,aw.useRouter)(),v=(0,d.useRef)(t),[w,x]=(0,d.useState)(!1),{t:y}=(0,e.useTranslation)(r);k[0]!==o||k[1]!==q||k[2]!==n?(b=()=>{q.execute(n),o()},k[0]=o,k[1]=q,k[2]=n,k[3]=b):b=k[3];let z=b;k[4]!==t||k[5]!==l||k[6]!==u||k[7]!==m?(c=()=>{t&&t!==v.current&&("success"===t.type&&"restore"===t.op&&u("edit",{id:l,type:m}),v.current=t)},f=[t,l,u,m],k[4]=t,k[5]=l,k[6]=u,k[7]=m,k[8]=c,k[9]=f):(c=k[8],f=k[9]),(0,d.useEffect)(c,f),k[10]===Symbol.for("react.memo_cache_sentinel")?(g=()=>{x(!0)},k[10]=g):g=k[10];let A=g;a:{if(w){let a,b;k[11]!==y?(a=y("action.restore.confirm.message"),k[11]=y,k[12]=a):a=k[12],k[13]!==z||k[14]!==o||k[15]!==a?(b={type:"confirm",tone:"critical",onCancel:o,onConfirm:z,message:a},k[13]=z,k[14]=o,k[15]=a,k[16]=b):b=k[16],h=b;break a}h=null}let B=h,C="@initial"===n,D=void 0===n;b:{let a,b,c;if(D||s){j=null;break b}k[17]!==y?(a=y("action.restore.label"),k[17]=y,k[18]=a):a=k[18];let d=C?"action.restore.disabled.cannot-restore-initial":"action.restore.tooltip";k[19]!==y||k[20]!==d?(b=y(d),k[19]=y,k[20]=d,k[21]=b):b=k[21],k[22]!==B||k[23]!==C||k[24]!==a||k[25]!==b?(c={label:a,tone:"caution",onHandle:A,title:b,icon:i.RevertIcon,dialog:B,disabled:C},k[22]=B,k[23]=C,k[24]=a,k[25]=b,k[26]=c):c=k[26],j=c}return j};ep.action="restore",ep.displayName="HistoryRestoreAction";let eq=(0,aJ.defineEvent)({name:"Document Published",version:1,description:'User clicked the "Publish" button in the document pane'}),er={LIVE_EDIT_ENABLED:"action.publish.live-edit.publish-disabled",ALREADY_PUBLISHED:"action.publish.already-published.no-time-ago.tooltip",NO_CHANGES:"action.publish.no-changes.tooltip",NOT_READY:"action.publish.disabled.not-ready"},es={status:"published"};function et(a,b,d){return"ALREADY_PUBLISHED"===a&&b?(0,c.jsx)(eu,{publishedAt:b}):d(er[a])}function eu(a){let b,d,f,g=(0,am.c)(6),{publishedAt:h}=a,{t:i}=(0,e.useTranslation)(r);g[0]===Symbol.for("react.memo_cache_sentinel")?(b={useTemporalPhrase:!0},g[0]=b):b=g[0];let j=(0,e.useRelativeTime)(h,b);return g[1]!==i||g[2]!==j?(d=i("action.publish.already-published.tooltip",{timeSincePublished:j}),g[1]=i,g[2]=j,g[3]=d):d=g[3],g[4]!==d?(f=(0,c.jsx)("span",{children:d}),g[4]=d,g[5]=f):f=g[5],f}let ev=a=>{let b,g,h,j,k,l,m,n,o,p,q,s=(0,am.c)(79),{id:t,type:u,liveEdit:v,draft:w,published:x,release:y}=a,[z,A]=(0,d.useState)(null),{publish:B}=(0,e.useDocumentOperation)(t,u),C=(0,e.useValidationStatus)(t,u),D=(0,e.useSyncState)(t,u),{changesOpen:E,documentId:F,documentType:G,value:H}=cL(),I=(0,e.useEditState)(F,G),{t:J}=(0,e.useTranslation)(r);s[0]!==I?.draft||s[1]!==I?.published?(b=I?.draft||I?.published||{},s[0]=I?.draft,s[1]=I?.published,s[2]=b):b=s[2];let K=b._rev;s[3]!==C.validation?(g=C.validation.some(ap.isValidationErrorMarker),s[3]=C.validation,s[4]=g):g=s[4];let L=g,[M,N]=(0,d.useState)(!1),O=D.isSyncing,P=C.isValidating;s[5]!==t||s[6]!==u?(h={id:t,type:u,permission:"publish"},s[5]=t,s[6]=u,s[7]=h):h=s[7];let[Q,R]=(0,e.useDocumentPairPermissions)(h),S=(0,e.useCurrentUser)();s[8]!==L||s[9]!==B.disabled||s[10]!==x||s[11]!==J?(j=B.disabled?et(B.disabled,(x||{})._updatedAt,J)||"":L?J("action.publish.validation-issues.tooltip"):"",s[8]=L,s[9]=B.disabled,s[10]=x,s[11]=J,s[12]=j):j=s[12];let T=j,U=x?._rev;s[13]!==U||s[14]!==B?(k=()=>{B.execute(),A({status:"publishing",publishRevision:U})},s[13]=U,s[14]=B,s[15]=k):k=s[15];let V=k;s[16]!==V||s[17]!==L||s[18]!==O||s[19]!==M||s[20]!==K||s[21]!==C.isValidating||s[22]!==C.revision?(l=()=>{let a=!1===C.isValidating&&C.revision!==K;M&&!O&&a&&(L||V(),N(!1))},s[16]=V,s[17]=L,s[18]=O,s[19]=M,s[20]=K,s[21]=C.isValidating,s[22]=C.revision,s[23]=l):l=s[23],s[24]!==V||s[25]!==L||s[26]!==O||s[27]!==P||s[28]!==M||s[29]!==K||s[30]!==C.isValidating||s[31]!==C.revision?(m=[O,V,L,M,C.revision,K,P,C.isValidating],s[24]=V,s[25]=L,s[26]=O,s[27]=P,s[28]=M,s[29]=K,s[30]=C.isValidating,s[31]=C.revision,s[32]=m):m=s[32],(0,d.useEffect)(l,m),s[33]!==U||s[34]!==z?(n=()=>{let a=z?.status==="publishing"&&U!==z.publishRevision,b=a?es:null,c=setTimeout(()=>{A(b)},a?200:4e3);return()=>clearTimeout(c)},s[33]=U,s[34]=z,s[35]=n):n=s[35],s[36]!==E||s[37]!==U||s[38]!==z?(o=[E,z,U],s[36]=E,s[37]=U,s[38]=z,s[39]=o):o=s[39],(0,d.useEffect)(n,o);let W=(0,aG.useTelemetry)();s[40]!==V||s[41]!==w?._createdAt||s[42]!==x||s[43]!==K||s[44]!==D.isSyncing||s[45]!==W||s[46]!==C.isValidating||s[47]!==C.revision?(p=()=>{W.log(eq,{publishedImmediately:!w?._createdAt,previouslyPublished:!!x}),D.isSyncing||C.isValidating||C.revision!==K?N(!0):V()},s[40]=V,s[41]=w?._createdAt,s[42]=x,s[43]=K,s[44]=D.isSyncing,s[45]=W,s[46]=C.isValidating,s[47]=C.revision,s[48]=p):p=s[48];let X=p;a:{let a,b,d;if(y||v){q=null;break a}if((0,f.isPublishedId)(H._id)&&null!==w){let a,b,c;s[49]!==J?(a=J("action.publish.label"),s[49]=J,s[50]=a):a=s[50];let d=x?._updatedAt;s[51]!==J||s[52]!==d?(b=et("ALREADY_PUBLISHED",d,J),s[51]=J,s[52]=d,s[53]=b):b=s[53],s[54]!==a||s[55]!==b?(c={tone:"default",icon:i.PublishIcon,label:a,title:b,disabled:!0},s[54]=a,s[55]=b,s[56]=c):c=s[56],q=c;break a}if(!R&&!Q?.granted){let a,b,d;s[57]!==J?(a=J("action.publish.label"),s[57]=J,s[58]=a):a=s[58],s[59]!==S?(b=(0,c.jsx)(e.InsufficientPermissionsMessage,{context:"publish-document",currentUser:S}),s[59]=S,s[60]=b):b=s[60],s[61]!==a||s[62]!==b?(d={tone:"default",icon:i.PublishIcon,label:a,title:b,disabled:!0},s[61]=a,s[62]=b,s[63]=d):d=s[63],q=d;break a}let g=!!(M||I?.transactionSyncLock?.enabled||z?.status==="publishing"||z?.status==="published"||L||B.disabled),h=g||R;s[64]!==M||s[65]!==z?.status||s[66]!==J?(a=J(z?.status==="published"?"action.publish.published.label":M||z?.status==="publishing"?"action.publish.running.label":"action.publish.draft.label"),s[64]=M,s[65]=z?.status,s[66]=J,s[67]=a):a=s[67],s[68]!==M||s[69]!==z?.status||s[70]!==J||s[71]!==T?(b=M?J("action.publish.waiting"):z?.status==="published"||z?.status==="publishing"?null:T,s[68]=M,s[69]=z?.status,s[70]=J,s[71]=T,s[72]=b):b=s[72];let j=g||M?null:"Ctrl+Alt+P";s[73]!==X||s[74]!==h||s[75]!==a||s[76]!==b||s[77]!==j?(d={disabled:h,tone:"default",label:a,icon:i.PublishIcon,title:b,shortcut:j,onHandle:X},s[73]=X,s[74]=h,s[75]=a,s[76]=b,s[77]=j,s[78]=d):d=s[78],q=d}return q};ev.action="publish",ev.displayName="PublishAction";let ew={NOT_PUBLISHED:"action.unpublish.disabled.not-published",NOT_READY:"action.unpublish.disabled.not-ready",LIVE_EDIT_ENABLED:"action.unpublish.disabled.live-edit-enabled"},ex=({id:a,type:b,draft:f,onComplete:g,liveEdit:h,release:j})=>{let{unpublish:k}=(0,e.useDocumentOperation)(a,b),[l,m]=(0,d.useState)(!1),[n,o]=(0,e.useDocumentPairPermissions)({id:a,type:b,permission:"unpublish"}),p=(0,e.useCurrentUser)(),{t:q}=(0,e.useTranslation)(r),{selectedPerspective:s}=(0,e.usePerspective)(),t="drafts"===s,u=(0,d.useCallback)(()=>{m(!1),g()},[g]),v=(0,d.useCallback)(()=>{m(!1),k.execute(),g()},[g,k]),w=(0,d.useMemo)(()=>l?{type:"dialog",onClose:g,content:(0,c.jsx)(gI,{id:f?._id||a,type:b,action:"unpublish",onCancel:u,onConfirm:v})}:null,[f,a,u,v,l,g,b]);return(0,d.useMemo)(()=>j||t||h?null:o||n?.granted?{tone:"critical",icon:i.UnpublishIcon,disabled:!!k.disabled||o,label:q("action.unpublish.label"),title:k.disabled?q(ew[k.disabled]):"",onHandle:()=>m(!0),dialog:w}:{tone:"critical",icon:i.UnpublishIcon,label:"Unpublish",title:(0,c.jsx)(e.InsufficientPermissionsMessage,{context:"unpublish-document",currentUser:p}),disabled:!0},[j,t,h,o,n?.granted,k.disabled,q,w,p])};ex.action="unpublish",ex.displayName="UnpublishAction";let ey=(0,d.memo)(function(a){let b,f,g,h,i,j,k,l,m,n=(0,am.c)(37),{disabled:p,states:q}=a,{__internal_tasks:r}=(0,e.useSource)(),{editState:s}=cL(),{params:t}=cO(),u=!!t?.rev,{selectedReleaseId:v}=(0,e.usePerspective)();n[0]!==q?([b,...f]=q,n[0]=q,n[1]=b,n[2]=f):(b=n[1],f=n[2]);let[w,x]=(0,d.useState)(null);a:{let a,d,e,f;if(!b||!b.title&&!b.shortcut){g=null;break a}n[3]===Symbol.for("react.memo_cache_sentinel")?(a={maxWidth:300},n[3]=a):a=n[3],n[4]!==b.title?(d=b.title&&(0,c.jsx)(an.Text,{size:1,children:b.title}),n[4]=b.title,n[5]=d):d=n[5],n[6]!==b.shortcut?(e=b.shortcut&&(0,c.jsx)(o.Hotkeys,{"data-testid":"document-status-bar-hotkeys",fontSize:1,style:{marginTop:-4,marginBottom:-4},keys:String(b.shortcut).split("+").map(eC)}),n[6]=b.shortcut,n[7]=e):e=n[7],n[8]!==d||n[9]!==e?(f=(0,c.jsxs)(an.Flex,{style:a,align:"center",gap:3,children:[d,e]}),n[8]=d,n[9]=e,n[10]=f):f=n[10],g=f}let y=g;n[11]!==s?.liveEdit||n[12]!==b||n[13]!==v||n[14]!==u?(h=u?!!b:v?b&&!(0,e.isSanityDefinedAction)(b):b&&!s?.liveEdit,n[11]=s?.liveEdit,n[12]=b,n[13]=v,n[14]=u,n[15]=h):h=n[15];let z=h;n[16]!==b||n[17]!==f||n[18]!==z?(i=z?f:[b,...f],n[16]=b,n[17]=f,n[18]=z,n[19]=i):i=n[19];let A=i,B=r&&r.footerAction;return n[20]!==p||n[21]!==b||n[22]!==z||n[23]!==y?(j=z&&(0,c.jsx)(an.LayerProvider,{zOffset:200,children:(0,c.jsx)(o.Tooltip,{disabled:!y,content:y,placement:"top",children:(0,c.jsx)(an.Stack,{children:(0,c.jsx)(o.Button,{"data-testid":`action-${cf(b.label)}`,disabled:p||!!b.disabled,icon:b.icon,onClick:b.onHandle,ref:x,text:b.label,tone:b.tone||"primary"})})})}),n[20]=p,n[21]=b,n[22]=z,n[23]=y,n[24]=j):j=n[24],n[25]!==p||n[26]!==A?(k=A.length>0&&(0,c.jsx)(eg,{actionStates:A,disabled:p}),n[25]=p,n[26]=A,n[27]=k):k=n[27],n[28]!==w||n[29]!==b||n[30]!==z?(l=z&&b&&b.dialog&&(0,c.jsx)(ee,{dialog:b.dialog,referenceElement:w}),n[28]=w,n[29]=b,n[30]=z,n[31]=l):l=n[31],n[32]!==B||n[33]!==j||n[34]!==k||n[35]!==l?(m=(0,c.jsxs)(an.Flex,{align:"center",gap:1,children:[B,j,k,l]}),n[32]=B,n[33]=j,n[34]=k,n[35]=l,n[36]=m):m=n[36],m}),ez=(0,d.memo)(function(){let a,b,d,e,f,g=(0,am.c)(14),{actions:h,connectionState:i,documentId:j,editState:k,isInitialValueLoading:l}=cL();g[0]!==h?(a=h??[],g[0]=h,g[1]=a):a=g[1],g[2]!==a?(b=a.filter(eD),g[2]=a,g[3]=b):b=g[3];let m=b;g[4]!==k||g[5]!==l?(d=k?{...k,initialValueResolved:!l}:null,g[4]=k,g[5]=l,g[6]=d):d=g[6];let n=d;g[7]!==i||g[8]!==j?(e=a=>{let{states:b}=a;return(0,c.jsx)(ey,{disabled:"connected"!==i,states:b},j)},g[7]=i,g[8]=j,g[9]=e):e=g[9];let o=e;return 0!==m.length&&n?(g[10]!==n||g[11]!==m||g[12]!==o?(f=(0,c.jsx)(gX,{actions:m,actionProps:n,group:"default",children:o}),g[10]=n,g[11]=m,g[12]=o,g[13]=f):f=g[13],f):null}),eA=(0,d.memo)(function(){let a,b,d,e,f=(0,am.c)(13),{actions:g,connectionState:h,editState:i,revisionId:j,isInitialValueLoading:k}=cL(),l=(i?.draft||i?.published||{})._rev===j;f[0]!==i||f[1]!==k||f[2]!==j?(a=i?{...i,revision:j||void 0,initialValueResolved:!k}:null,f[0]=i,f[1]=k,f[2]=j,f[3]=a):a=f[3];let m=a;f[4]!==g?(b=(g??[]).filter(eB).slice(-1),f[4]=g,f[5]=b):b=f[5];let n=b;f[6]!==h||f[7]!==l?(d=a=>{let{states:b}=a;return(0,c.jsx)(ey,{disabled:"connected"!==h||!!l,states:b})},f[6]=h,f[7]=l,f[8]=d):d=f[8];let o=d;return m?(f[9]!==m||f[10]!==n||f[11]!==o?(e=(0,c.jsx)(gX,{actions:n,actionProps:m,group:"default",children:o}),f[9]=m,f[10]=n,f[11]=o,f[12]=e):e=f[12],e):null});function eB(a){return a.action===ep.action}function eC(a){return a.slice(0,1).toUpperCase()+a.slice(1).toLowerCase()}function eD(a){return!eB(a)}let eE=a=>{let b=(0,am.c)(16),{release:d}=a,{t:f}=(0,e.useTranslation)();if("archived"===d.state){let a,d;return b[0]!==f?(a=f("release.chip.tooltip.archived"),b[0]=f,b[1]=a):a=b[1],b[2]!==a?(d=(0,c.jsx)(an.Text,{size:1,children:a}),b[2]=a,b[3]=d):d=b[3],d}if("asap"===d.metadata.releaseType){let a,d;return b[4]!==f?(a=f("release.type.asap"),b[4]=f,b[5]=a):a=b[5],b[6]!==a?(d=(0,c.jsx)(an.Text,{size:1,children:a}),b[6]=a,b[7]=d):d=b[7],d}if("scheduled"===d.metadata.releaseType){let a,g="active"===d.state;return b[8]!==g||b[9]!==d||b[10]!==f?(a=d.metadata.intendedPublishAt&&(0,c.jsx)(an.Text,{size:1,children:g?(0,c.jsx)(e.Translate,{t:f,i18nKey:"release.chip.tooltip.intended-for-date",values:{date:(0,e.formatRelativeLocalePublishDate)(d)}}):(0,c.jsx)(e.Translate,{t:f,i18nKey:"release.chip.tooltip.scheduled-for-date",values:{date:(0,e.formatRelativeLocalePublishDate)(d)}})}),b[8]=g,b[9]=d,b[10]=f,b[11]=a):a=b[11],a}if("undecided"===d.metadata.releaseType){let a,d;return b[12]!==f?(a=f("release.type.undecided"),b[12]=f,b[13]=a):a=b[13],b[14]!==a?(d=(0,c.jsx)(an.Text,{size:1,children:a}),b[14]=a,b[15]=d):d=b[15],d}return null},eF={dateStyle:"medium",timeStyle:"short"},eG=(0,d.memo)(function(){let{selectedReleaseId:a,selectedPerspectiveName:b}=(0,e.usePerspective)(),{t:g}=(0,e.useTranslation)(),h=(0,e.useSetPerspective)(),{params:i,setParams:j}=cO(),k=(0,e.useDateTimeFormat)(eF),{loading:l}=(0,e.useActiveReleases)(),m=(0,e.useSchema)(),{editState:n,displayed:o,documentType:p,documentId:q}=cL(),r=o&&!o._createdAt,s=cP({displayed:o,documentId:q}),t=(0,e.useOnlyHasVersions)({documentId:q}),u=(0,e.useWorkspace)(),v=(0,d.useCallback)(a=>()=>{"published"===a&&i?.historyVersion&&j({...i,rev:i?.historyEvent||void 0,since:void 0,historyVersion:void 0}),h(a)},[h,j,i]),w=m.get(p),x=!!w&&!0===w.liveEdit,y=(0,d.useMemo)(()=>(!x||!!a)&&!n?.published,[x,a,n?.published]),z=(0,d.useCallback)(a=>{if(!i?.historyVersion){let b=n?.version&&(0,e.isGoingToUnpublish)(n?.version)&&(0,e.getReleaseIdFromReleaseDocumentId)(a._id)===(0,f.getVersionFromId)(n?.version?._id);return{selected:!!((0,e.getReleaseIdFromReleaseDocumentId)(a._id)===(0,f.getVersionFromId)(o?._id||"")||b)}}let b=(0,e.getReleaseIdFromReleaseDocumentId)(a._id)===i.historyVersion;return{selected:b,disabled:b}},[o?._id,n?.version,i?.historyVersion]),A=(0,d.useMemo)(()=>!!(x&&!n?.draft?._id&&!a||(0,f.isPublishedId)(o?._id||"")&&(0,e.isPublishedPerspective)(b||"")),[o?._id,n?.draft?._id,x,b,a]),B=(0,d.useMemo)(()=>{let a=o?._id||"";return!(A||i?.historyVersion||b||(0,f.isVersionId)(a))&&(!!(0,f.isDraftId)(a)||!((0,f.isPublishedId)(a)&&n?.published&&(0,e.isPublishedPerspective)(b||"")))},[o?._id,n?.published,A,i?.historyVersion,b]),C=(0,d.useMemo)(()=>!!t||!!r&&!!a||(!!n?.draft||!!x)&&!!(r&&a||x),[n?.draft,r,x,t,a]),D=u.document.drafts?.enabled;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(e.VersionChip,{tooltipContent:(0,c.jsx)(an.Text,{size:1,children:n?.published&&n?.published?._updatedAt?(0,c.jsx)(e.Translate,{t:g,i18nKey:"release.chip.tooltip.published-date",values:{date:k.format(new Date(n?.published._updatedAt))}}):(0,c.jsx)(c.Fragment,{children:g("release.chip.tooltip.not-published")})}),disabled:y,onClick:v("published"),selected:A,text:g("release.chip.published"),tone:"positive",contextValues:{documentId:n?.published?._id||n?.id||"",menuReleaseId:n?.published?._id||n?.id||"",releases:s.notCurrentReleases,releasesLoading:l,documentType:p,fromRelease:"published",isVersion:!1,disabled:!n?.published}}),D&&(0,c.jsx)(e.VersionChip,{tooltipContent:(0,c.jsx)(an.Text,{size:1,children:n?.draft?(0,c.jsx)(c.Fragment,{children:n?.draft._updatedAt?(0,c.jsx)(e.Translate,{t:g,i18nKey:"release.chip.tooltip.edited-date",values:{date:k.format(new Date(n?.draft._updatedAt))}}):(0,c.jsx)(e.Translate,{t:g,i18nKey:"release.chip.tooltip.created-date",values:{date:k.format(new Date(n?.draft._createdAt))}})}):(0,c.jsx)(c.Fragment,{children:g(x?"release.chip.tooltip.draft-disabled.live-edit":"release.chip.tooltip.no-edits")})}),selected:B,disabled:C,text:g("release.chip.draft"),tone:n?.draft?"caution":"neutral",onClick:v("drafts"),contextValues:{documentId:n?.draft?._id||n?.published?._id||n?.id||"",menuReleaseId:n?.draft?._id||n?.published?._id||n?.id||"",releases:s.notCurrentReleases,releasesLoading:l,documentType:p,fromRelease:"draft",isVersion:!1}}),s.inCreation&&(0,c.jsx)(e.VersionChip,{tooltipContent:(0,c.jsx)(eE,{release:s.inCreation}),selected:!0,onClick:()=>{},locked:!1,tone:(0,e.getReleaseTone)(s.inCreation),text:s.inCreation.metadata.title||g("release.placeholder-untitled-release"),contextValues:{disabled:!0,documentId:o?._id||"",menuReleaseId:s.inCreation._id,releases:s.notCurrentReleases,releasesLoading:l,documentType:p,fromRelease:(0,e.getReleaseIdFromReleaseDocumentId)(s.inCreation._id),releaseState:s.inCreation.state,isVersion:!0,release:s.inCreation}}),o&&s.currentReleases?.map(a=>(0,c.jsx)(e.VersionChip,{tooltipContent:(0,c.jsx)(eE,{release:a}),...z(a),onClick:v((0,e.getReleaseIdFromReleaseDocumentId)(a._id)),text:a.metadata.title||g("release.placeholder-untitled-release"),tone:(0,e.getReleaseTone)(a),locked:(0,e.isReleaseScheduledOrScheduling)(a),contextValues:{documentId:o?._id||"",menuReleaseId:a._id,releases:s.notCurrentReleases,releasesLoading:l,documentType:p,fromRelease:(0,e.getReleaseIdFromReleaseDocumentId)(a._id),releaseState:a.state,isVersion:!0,isGoingToUnpublish:!!n?.version&&(0,e.isGoingToUnpublish)(n?.version),release:a}},a._id))]})}),eH=(0,ar.styled)(an.Card)(a=>{let b=(0,a$.getTheme_v2)(a.theme);return ar.css`
    scrollbar-width: none;
    z-index: 1;
    flex: 1;
    position: relative;
    > div {
      &::-webkit-scrollbar {
        width: 0;
        height: 0;
      }
    }

    ${a.$showGradient&&ar.css`
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        width: 150px;
        background: linear-gradient(to right, ${(0,a$.rgba)(b.color.bg,0)}, var(--card-bg-color));
        transition: 'opacity 300ms ease-out';
        pointer-events: none;
      }
    `}
  `}),eI=(0,d.memo)((0,d.forwardRef)(function(a,b){let{menuItems:f}=a,{actions:g,editState:h,onMenuAction:j,isInitialValueLoading:k,onPaneClose:l,onPaneSplit:m,menuItemGroups:n,schemaType:p,connectionState:q,views:s,unstable_languageFilter:t}=cL(),{features:u}=cR(),{index:v,BackLink:w,hasGroupSiblings:x}=cO(),{actions:y}=(0,e.useFieldActions)(),[z,A]=(0,d.useState)(null),B=(0,d.useRef)(null),C=function(a){let b,c,e=(0,am.c)(3),[f,g]=(0,d.useState)(!1);return e[0]!==a?(b=()=>{let b=()=>{let b=a.current;if(!b)return;let{scrollWidth:c,clientWidth:d}=b;if(!(c>d))return void g(!1);let{scrollLeft:e}=b;g(!(e+d>=c))},{intersectionObserver:c,mutationObserver:d}=function(){b();let c=a.current;if(!c)return{intersectionObserver:null,mutationObserver:null};let d=new IntersectionObserver(a=>{let b=a[0];b&&g(!b.isIntersecting)}),e=()=>{d.disconnect();let a=c.children[c.children.length-1];d.observe(a)};e();let f=new MutationObserver(()=>{e(),b()});return f.observe(c,{childList:!0,subtree:!1}),{intersectionObserver:d,mutationObserver:f}}();return()=>{c?.disconnect(),d?.disconnect()}},c=[a],e[0]=a,e[1]=b,e[2]=c):(b=e[1],c=e[2]),(0,d.useEffect)(b,c),f}(B),D=(0,d.useMemo)(()=>(g??[]).filter(a=>!eB(a)),[g]),E=(0,d.useMemo)(()=>d2({actionHandler:j,fieldActions:y,menuItems:f,menuItemGroups:n}),[j,y,n,f]),F=(0,d.useMemo)(()=>E.filter(d0),[E]),G=(0,d.useMemo)(()=>E.filter(d1),[E]),{collapsed:H,isLast:I}=cd(),J=u.splitViews&&m&&s.length>1,K=J&&x,L=u.backButton&&v>0,M=!K&&!L&&!!w,{t:N}=(0,e.useTranslation)(r),O=(0,d.useCallback)(({states:a})=>(0,c.jsx)(eJ,{contextMenuNodes:G,setReferenceElement:A,referenceElement:z,states:a}),[G,z]),P=(0,d.useMemo)(()=>(0,c.jsx)(dW,{}),[]),Q=(0,d.useMemo)(()=>L&&(0,c.jsx)(o.Button,{as:w,"data-as":"a",icon:i.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:N("pane-header.back-button.text")}}),[w,L,N]),R=(0,d.useMemo)(()=>(0,c.jsxs)(an.Flex,{align:"center",gap:1,children:[t.length>0&&(0,c.jsx)(c.Fragment,{children:t.map((a,b)=>(0,c.jsx)(a,{schemaType:p},`language-filter-${b}`))}),F.map(a=>(0,c.jsx)(cy,{node:a},a.key)),h&&(0,c.jsx)(gX,{actions:D,actionProps:{...h,initialValueResolved:!k},group:"paneActions",children:O}),J&&(0,c.jsx)(o.Button,{"aria-label":N("buttons.split-pane-button.aria-label"),icon:i.SplitVerticalIcon,mode:"bleed",onClick:m,tooltipProps:{content:N("buttons.split-pane-button.tooltip")}},"split-pane-button"),K&&(0,c.jsx)(o.Button,{icon:i.CloseIcon,mode:"bleed",onClick:l,tooltipProps:{content:N("buttons.split-pane-close-button.title")}},"close-view-button"),M&&(0,c.jsx)(o.Button,{icon:i.CloseIcon,mode:"bleed",tooltipProps:{content:N("buttons.split-pane-close-group-button.title")},as:w},"close-view-button")]}),[w,D,h,k,F,l,m,O,p,M,J,K,N,t]);return(0,c.jsx)(o.TooltipDelayGroupProvider,{children:H?(0,c.jsx)(cw,{border:!0,ref:b,loading:"connecting"===q&&!h?.draft&&!h?.published,title:P,tabIndex:I&&!H?-1:0,backButton:Q}):(0,c.jsx)(an.Card,{hidden:H,style:{lineHeight:0},borderBottom:!0,children:(0,c.jsxs)(an.Flex,{gap:3,paddingY:3,children:[(0,c.jsx)(eH,{$showGradient:C,children:(0,c.jsx)(an.Flex,{flex:1,gap:1,overflow:"auto",paddingX:3,"data-testid":"document-perspective-list",ref:B,children:(0,c.jsx)(eG,{})})}),(0,c.jsx)(an.Box,{flex:"none",paddingRight:3,children:R})]})})})})),eJ=(0,d.memo)(function(a){let b,e=(0,am.c)(5),{setReferenceElement:f,referenceElement:g,contextMenuNodes:h}=a,i=(0,d.useDeferredValue)(a.states);return e[0]!==h||e[1]!==g||e[2]!==f||e[3]!==i?(b=(0,c.jsx)(eK,{setReferenceElement:f,referenceElement:g,contextMenuNodes:h,states:i}),e[0]=h,e[1]=g,e[2]=f,e[3]=i,e[4]=b):b=e[4],b}),eK=(0,d.memo)(function(a){let b,d,e=(0,am.c)(8),{states:f,setReferenceElement:g,contextMenuNodes:h,referenceElement:i}=a;e[0]!==h||e[1]!==g||e[2]!==f?(b=a=>{let{handleAction:b}=a;return(0,c.jsx)("div",{ref:g,children:(0,c.jsx)(cn,{nodes:h,actionsNodes:f.length>0?f.map((a,d)=>(0,c.jsx)(eh,{actionState:a,disabled:!!a.disabled,index:d,onAction:b},a.label)):void 0},"context-menu")})},e[0]=h,e[1]=g,e[2]=f,e[3]=b):b=e[3];let j=b;return e[4]!==i||e[5]!==j||e[6]!==f?(d=(0,c.jsx)(ef,{actionStates:f,referenceElement:i,children:j}),e[4]=i,e[5]=j,e[6]=f,e[7]=d):d=e[7],d});function eL(a){let b,d,e=(0,am.c)(3),{size:f}=a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(b={pointerEvents:"none",visibility:"hidden",width:0},e[0]=b):b=e[0],e[1]!==f?(d=(0,c.jsx)(o.Button,{"aria-hidden":!0,disabled:!0,size:f,style:b,text:"-"}),e[1]=f,e[2]=d):d=e[2],d}let eM={primary:"primary",success:"positive",warning:"caution",danger:"critical"},eN=(0,d.memo)(function(a){let b,d,e=(0,am.c)(4),{states:f}=a;return 0===f.length?null:(e[0]!==f?(b=f.map(eR),e[0]=f,e[1]=b):b=e[1],e[2]!==b?(d=(0,c.jsx)(an.Inline,{space:1,children:b}),e[2]=b,e[3]=d):d=e[3],d)}),eO=(0,d.memo)(function(a){let b,e=(0,am.c)(2),f=(0,d.useDeferredValue)(a.states);return e[0]!==f?(b=(0,c.jsx)(eN,{states:f}),e[0]=f,e[1]=b):b=e[1],b});function eP(){let a,b=(0,am.c)(3),{badges:d,editState:e}=cL();return e&&d?(b[0]!==d||b[1]!==e?(a=(0,c.jsx)(g$,{badges:d,badgeProps:e,children:eQ}),b[0]=d,b[1]=e,b[2]=a):a=b[2],a):null}function eQ(a){let{states:b}=a;return(0,c.jsx)(eO,{states:b})}function eR(a,b){return(0,c.jsx)(o.Tooltip,{content:a.title,disabled:!a.title,placement:"top",portal:!0,children:(0,c.jsx)(an.Badge,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:a.color?eM[a.color]:void 0,style:{whiteSpace:"nowrap"},children:a.label})},`${a.label}-${b}`)}let eS={create:i.AddIcon,delete:i.TrashIcon,discardDraft:i.CloseIcon,initial:i.AddIcon,editDraft:i.EditIcon,editLive:i.EditIcon,publish:i.PublishIcon,unpublish:i.UnpublishIcon},eT=(0,ar.styled)(i.ChevronLeftIcon)`
  transition: transform 200ms;
  &[data-expanded='true'] {
    transform: rotate(-90deg);
  }
`;function eU(a){let b,d,f,g,h,i=(0,am.c)(14),{isExpanded:j,onExpand:k}=a,{t:l}=(0,e.useTranslation)(r);i[0]!==j||i[1]!==k?(b=a=>{a.stopPropagation(),function(a){if(a)return;let b=document.getElementById(e8);if(b){let a=b.children[0];if(!(a.scrollHeight>a.clientHeight)){let b=getComputedStyle(a).overflowY;a.style.overflowY="hidden",setTimeout(()=>{a.style.overflowY=b},0)}}}(j),k()},i[0]=j,i[1]=k,i[2]=b):b=i[2];let m=b;return i[3]!==j?(d=(0,c.jsx)(eT,{"data-expanded":j}),i[3]=j,i[4]=d):d=i[4],i[5]!==j||i[6]!==l?(f=l(j?"timeline-item.menu.action-collapse":"timeline-item.menu.action-expand"),i[5]=j,i[6]=l,i[7]=f):f=i[7],i[8]!==f?(g={content:f},i[8]=f,i[9]=g):g=i[9],i[10]!==m||i[11]!==d||i[12]!==g?(h=(0,c.jsx)(o.Button,{mode:"bleed",icon:d,tooltipProps:g,onClick:m}),i[10]=m,i[11]=d,i[12]=g,i[13]=h):h=i[13],h}let eV=(0,ar.styled)(an.Stack)`
  max-width: 200px;
`,eW=(0,ar.styled)(an.Flex)`
  max-height: ${a=>a.$maxHeight};
  min-width: 244px;
`,eX=(0,ar.styled)(an.Box)(({$visible:a})=>ar.css`
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;

    ${a&&ar.css`
      opacity: 1;
      pointer-events: auto;
    `}
  `),eY={initial:"timeline.operation.created-initial",create:"timeline.operation.created",publish:"timeline.operation.published",editLive:"timeline.operation.edited-live",editDraft:"timeline.operation.edited-draft",unpublish:"timeline.operation.unpublished",discardDraft:"timeline.operation.draft-discarded",delete:"timeline.operation.deleted"};function eZ(a){let b,d,f=(0,am.c)(9),{maxLength:g,userIds:h,size:i,withTooltip:j}=a,k=void 0===j||j;if(f[0]!==h||f[1]!==k){let a;f[3]!==k?(a=a=>(0,c.jsx)(e.UserAvatar,{user:a,withTooltip:k},a),f[3]=k,f[4]=a):a=f[4],b=h.map(a),f[0]=h,f[1]=k,f[2]=b}else b=f[2];return f[5]!==g||f[6]!==i||f[7]!==b?(d=(0,c.jsx)(an.AvatarStack,{maxLength:g,size:i,children:b}),f[5]=g,f[6]=i,f[7]=b,f[8]=d):d=f[8],d}let e$=(0,ar.styled)(an.Flex)(a=>{let b=(0,a$.getTheme_v2)(a.theme),c=a.$color;return ar.css`
    --card-icon-color: ${b.color.avatar[c].fg};
    background-color: ${b.color.avatar[c].bg};
    box-shadow: 0 0 0 1px var(--card-bg-color);

    position: absolute;
    width: ${b.avatar.sizes[0].size}px;
    height: ${b.avatar.sizes[0].size}px;
    right: -3px;
    bottom: -3px;
    border-radius: 50%;
  `}),e_={initial:"blue",create:"blue",publish:"green",editLive:"green",editDraft:"yellow",unpublish:"orange",discardDraft:"orange",delete:"red",withinSelection:"magenta"},e0={minimal:!0,useTemporalPhrase:!0},e1=(0,ar.styled)(ao.Skeleton)(a=>{let b=(0,a$.getTheme_v2)(a.theme);return ar.css`
    width: 6ch;
    height: ${b.font.text.sizes[0].lineHeight}px;
  `}),e2=a=>{let b,d,f,g=(0,am.c)(10),{userId:h}=a,[i,j]=(0,e.useUser)(h);return g[0]!==j||g[1]!==i?(b=(0,c.jsx)(an.Box,{children:j||!i?(0,c.jsx)(e.AvatarSkeleton,{animated:!0}):(0,c.jsx)(e.UserAvatar,{user:i})}),g[0]=j,g[1]=i,g[2]=b):b=g[2],g[3]!==j||g[4]!==i?(d=(0,c.jsx)(an.Box,{children:j||!i?.displayName?(0,c.jsx)(an.Text,{size:1,children:(0,c.jsx)(e1,{animated:!0})}):(0,c.jsx)(an.Text,{muted:!0,size:1,children:i.displayName})}),g[3]=j,g[4]=i,g[5]=d):d=g[5],g[6]!==b||g[7]!==d||g[8]!==h?(f=(0,c.jsxs)(an.Flex,{align:"center",gap:2,padding:1,children:[b,d]},h),g[6]=b,g[7]=d,g[8]=h,g[9]=f):f=g[9],f},e3=a=>{let b,d,f,g,h=(0,am.c)(9),{collaborators:i}=a,{t:j}=(0,e.useTranslation)("studio");return h[0]!==j?(b=j("timeline.changes.title"),h[0]=j,h[1]=b):b=h[1],h[2]!==b?(d=(0,c.jsx)(an.Box,{padding:1,paddingBottom:2,children:(0,c.jsx)(an.Text,{size:1,weight:"medium",children:b})}),h[2]=b,h[3]=d):d=h[3],h[4]!==i?(f=i.map(e5),h[4]=i,h[5]=f):f=h[5],h[6]!==d||h[7]!==f?(g=(0,c.jsxs)(an.Stack,{paddingBottom:1,children:[d,f]}),h[6]=d,h[7]=f,h[8]=g):g=h[8],g};function e4(a){let b,d,f,g,h,i,j,k,l,m,n,p,q,r,s,t,u,v,w,x,y,z=(0,am.c)(55),{chunk:A,isSelected:B,onSelect:C,collaborators:D,optionsMenu:E}=a,{t:F}=(0,e.useTranslation)("studio"),{type:G,endTimestamp:H}=A;z[0]!==G?(b=eS[G],z[0]=G,z[1]=b):b=z[1];let I=b;z[2]!==A.authors?(d=Array.from(A.authors),z[2]=A.authors,z[3]=d):d=z[3];let J=d;z[4]!==D?(f=D?Array.from(D):[],z[4]=D,z[5]=f):f=z[5];let K=f,L="delete"!==G;z[6]===Symbol.for("react.memo_cache_sentinel")?(g={dateStyle:"medium",timeStyle:"short"},z[6]=g):g=z[6];let M=(0,e.useDateTimeFormat)(g);z[7]!==H?(h=new Date(H),z[7]=H,z[8]=h):h=z[8];let N=(0,e.useRelativeTime)(h||"",e0);if(z[9]!==M||z[10]!==H){let a=new Date(H);i=M.format(a),z[9]=M,z[10]=H,z[11]=i}else i=z[11];let O=i;z[12]!==A||z[13]!==L||z[14]!==C?(j=a=>{a.preventDefault(),a.stopPropagation(),L&&C(A)},z[12]=A,z[13]=L,z[14]=C,z[15]=j):j=z[15];let P=j;z[16]===Symbol.for("react.memo_cache_sentinel")?(k={position:"relative"},z[16]=k):k=z[16],z[17]!==J?(l=(0,c.jsx)(eZ,{maxLength:3,userIds:J,size:2}),z[17]=J,z[18]=l):l=z[18];let Q=e_[G];return z[19]!==I?(m=I&&(0,c.jsx)(I,{}),z[19]=I,z[20]=m):m=z[20],z[21]!==m?(n=(0,c.jsx)(an.Text,{size:0,children:m}),z[21]=m,z[22]=n):n=z[22],z[23]!==Q||z[24]!==n?(p=(0,c.jsx)(e$,{align:"center",justify:"center",$color:Q,children:n}),z[23]=Q,z[24]=n,z[25]=p):p=z[25],z[26]!==p||z[27]!==l?(q=(0,c.jsxs)("div",{style:k,children:[l,p]}),z[26]=p,z[27]=l,z[28]=q):q=z[28],z[29]!==F||z[30]!==G?(r=F(eY[G])||(0,c.jsx)("code",{children:G}),z[29]=F,z[30]=G,z[31]=r):r=z[31],z[32]!==r?(s=(0,c.jsx)(an.Text,{size:1,weight:"medium",children:r}),z[32]=r,z[33]=s):s=z[33],z[34]!==O||z[35]!==H||z[36]!==N?(t=(0,c.jsx)(an.Text,{as:"time",size:1,muted:!0,dateTime:H,title:O,children:N}),z[34]=O,z[35]=H,z[36]=N,z[37]=t):t=z[37],z[38]!==s||z[39]!==t?(u=(0,c.jsxs)(an.Stack,{space:2,children:[s,t]}),z[38]=s,z[39]=t,z[40]=u):u=z[40],z[41]!==K?(v=K.length>0&&(0,c.jsx)(an.Flex,{flex:1,justify:"flex-end",align:"center",children:(0,c.jsx)(o.Tooltip,{placement:"top",content:(0,c.jsx)(e3,{collaborators:K}),portal:!0,children:(0,c.jsx)(an.Box,{paddingLeft:2,paddingY:2,children:(0,c.jsx)(eZ,{maxLength:3,userIds:K,size:0,withTooltip:!1})})})}),z[41]=K,z[42]=v):v=z[42],z[43]!==q||z[44]!==u||z[45]!==v?(w=(0,c.jsxs)(an.Flex,{align:"center",gap:3,children:[q,u,v]}),z[43]=q,z[44]=u,z[45]=v,z[46]=w):w=z[46],z[47]!==A.id||z[48]!==P||z[49]!==B||z[50]!==w?(x=(0,c.jsx)(an.Card,{as:"button",onClick:P,padding:2,pressed:B,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-id":A.id,children:w}),z[47]=A.id,z[48]=P,z[49]=B,z[50]=w,z[51]=x):x=z[51],z[52]!==E||z[53]!==x?(y=(0,c.jsxs)(an.Flex,{align:"center",gap:1,children:[x,E]}),z[52]=E,z[53]=x,z[54]=y):y=z[54],y}function e5(a){return(0,c.jsx)(e2,{userId:a},a)}let e6=a=>"publish"!==a.type,e7=a=>"publish"===a.type,e8="timeline-list-wrapper",e9=({chunks:a,hasMoreChunks:b,lastChunk:f,onLoadMore:g,onSelect:h,listMaxHeight:i="calc(100vh - 280px)"})=>{let[j,k]=(0,d.useState)(!1),{t:l}=(0,e.useTranslation)("studio"),m=f?.id,n=(0,d.useMemo)(()=>(function(a){let b=[];for(let c of a){if(e7(c)){b.push({...c,type:"publish",children:[],collaborators:new Set});continue}if(e6(c)){let a=function(a){let b=null;for(let c=a.length-1;c>=0;c--){let d=a[c];if(e7(d)){b=d;break}if("editDraft"!==d.type)break}return b}(b);if("editDraft"===c.type&&a?.type==="publish"){Array.from(c.authors).forEach(b=>{a.collaborators.add(b)}),a.children.push(c.id),b.push({...c,parentId:a.id});continue}}e6(c)&&b.push(c)}return b})(a),[a]),[o,p]=(0,d.useState)(()=>{if(m){let a=n.find(a=>a.id===m);if(a&&e6(a)&&a.parentId)return new Set([a.parentId])}return new Set});(0,d.useEffect)(()=>{if(m){let a=n.find(a=>a.id===m);if(a&&e6(a)&&a.parentId){let b=a.parentId;p(a=>{if(a.has(b))return a;let c=new Set(a);return c.add(b),c})}}},[n,m]);let q=(0,d.useMemo)(()=>n.filter(a=>!!e7(a)||!a.parentId||o.has(a.parentId)),[n,o]);(0,d.useEffect)(()=>{q.length<16&&b&&g()},[q,b,g]);let r=(0,d.useCallback)(a=>()=>p(b=>{let c=new Set(b);return b.has(a)?c.delete(a):c.add(a),c}),[]),s=(0,d.useMemo)(()=>m?q.findIndex(a=>a.id===m):-1,[m,q]),t=(0,d.useCallback)(b=>{let c=a.find(a=>a.id===b.id);c?h(c):(console.error("TimelineItem: chunk not found"),h(b))},[a,h]),u=(0,d.useCallback)((a,{activeIndex:d})=>(0,c.jsxs)(an.Box,{paddingBottom:1,paddingTop:+(0===d),paddingRight:1,paddingLeft:e6(a)&&a.parentId?4:1,children:[(0,c.jsx)(e4,{chunk:a,isSelected:m===a.id,onSelect:t,collaborators:e7(a)?a.collaborators:void 0,optionsMenu:e7(a)&&a.children.length>0?(0,c.jsx)(eU,{isExpanded:o.has(a.id),onExpand:r(a.id)}):null}),d===q.length-1&&b&&(0,c.jsx)(e.LoadingBlock,{})]}),[o,q.length,r,t,b,m]);return(0,d.useEffect)(()=>k(!0),[]),(0,c.jsxs)(eX,{$visible:!s||j,"data-ui":"timeline",children:[0===q.length&&(0,c.jsxs)(eV,{padding:3,space:3,children:[(0,c.jsx)(an.Text,{size:1,weight:"medium",children:l("timeline.error.no-document-history-title")}),(0,c.jsx)(an.Text,{muted:!0,size:1,children:l("timeline.error.no-document-history-description")})]}),q.length>0&&(0,c.jsx)(eW,{direction:"column",$maxHeight:i,id:e8,children:(0,c.jsx)(e.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:l("timeline.list.aria-label"),autoFocus:"list",initialIndex:s,initialScrollAlign:"center",itemHeight:57,items:q,onEndReached:g,onEndReachedIndexOffset:20,overscan:5,renderItem:u,wrapAround:!1})})]})};function fa(a){let b,d,f,g,h,j,k=(0,am.c)(14),{versionError:l}=a,{t:m}=(0,e.useTranslation)("studio");return k[0]===Symbol.for("react.memo_cache_sentinel")?(b=(0,c.jsx)(e.TextWithTone,{tone:"critical",children:(0,c.jsx)(i.ErrorOutlineIcon,{})}),k[0]=b):b=k[0],k[1]!==m||k[2]!==l?(d=m(l?"timeline.error.load-document-changes-version-title":"timeline.error.load-document-changes-title"),k[1]=m,k[2]=l,k[3]=d):d=k[3],k[4]!==d?(f=(0,c.jsx)(e.TextWithTone,{size:1,tone:"critical",weight:"medium",children:d}),k[4]=d,k[5]=f):f=k[5],k[6]!==m||k[7]!==l?(g=m(l?"timeline.error.load-document-changes-version-description":"timeline.error.load-document-changes-description"),k[6]=m,k[7]=l,k[8]=g):g=k[8],k[9]!==g?(h=(0,c.jsx)(e.TextWithTone,{size:1,tone:"critical",children:g}),k[9]=g,k[10]=h):h=k[10],k[11]!==f||k[12]!==h?(j=(0,c.jsxs)(an.Flex,{align:"flex-start",gap:3,padding:4,children:[b,(0,c.jsxs)(an.Stack,{space:4,children:[f,h]})]}),k[11]=f,k[12]=h,k[13]=j):j=k[13],j}e9.displayName="Timeline";let fb=(0,ar.styled)(o.Popover)`
  overflow: hidden;
  overflow: clip;
`,fc="timeline-menu";function fd({chunk:a,mode:b,placement:f}){let{setTimelineRange:g,timelineError:h,ready:j,timelineStore:k}=cL(),[l,m]=(0,d.useState)(!1),[n,p]=(0,d.useState)(null),[q,r]=(0,d.useState)(null),s=(0,ao.useToast)(),t=(0,e.useTimelineSelector)(k,a=>a.chunks),u=(0,e.useTimelineSelector)(k,a=>a.isLoading),v=(0,e.useTimelineSelector)(k,a=>a.hasMoreChunks),w=(0,e.useTimelineSelector)(k,a=>a.realRevChunk),x=(0,e.useTimelineSelector)(k,a=>a.sinceTime),{t:y}=(0,e.useTranslation)("studio"),z=(0,d.useCallback)(()=>{m(!0)},[]),A=(0,d.useCallback)(()=>{m(!1)},[]),B=(0,d.useCallback)(a=>{l&&("Escape"===a.key||"Tab"===a.key)&&(A(),n?.focus())},[n,A,l]);(0,an.useGlobalKeyDown)(B),(0,an.useClickOutsideEvent)(l&&A,()=>[n,q]);let C=(0,d.useCallback)(a=>{try{let[b,c]=k?.findRangeForRev(a)||[null,null];g(b,c)}catch(a){s.push({closable:!0,description:a.message,status:"error",title:y("timeline.error.unable-to-load-revision")})}},[g,y,k,s]),D=(0,d.useCallback)(a=>{try{let[b,c]=k?.findRangeForSince(a)||[null,null];g(b,c)}catch(a){s.push({closable:!0,description:a.message,status:"error",title:y("timeline.error.unable-to-load-revision")})}},[g,y,k,s]),E=(0,d.useCallback)(()=>{u||k?.loadMore()},[u,k]),F=(0,d.useMemo)(()=>{if(h)return(0,c.jsx)(fa,{});if("rev"===b)return(0,c.jsx)(e9,{chunks:t,hasMoreChunks:v,lastChunk:w,onLoadMore:E,onSelect:C});let a=w?t.filter(a=>a.index<w.index):t;return(0,c.jsx)(e9,{chunks:a,hasMoreChunks:v,lastChunk:x,onLoadMore:E,onSelect:D})},[t,E,v,b,w,C,D,x,h]),G={timestamp:{dateStyle:"medium",timeStyle:"short"}},H=a?y(eY[a.type],{context:"timestamp",timestamp:new Date(a?.endTimestamp),formatParams:G}):y("timeline.latest-revision"),I=a?y("timeline.since",{timestamp:new Date(a?.endTimestamp),formatParams:G}):y("timeline.since-version-missing"),J="rev"===b?H:I,K=(0,d.useMemo)(()=>({[fc]:q}),[q]);return(0,c.jsx)(an.PortalProvider,{__unstable_elements:K,children:(0,c.jsx)(fb,{"data-testid":"timeline-menu",constrainSize:!0,content:l&&F,"data-ui":"versionMenu",open:l,placement:f,matchReferenceWidth:!0,portal:!0,ref:r,children:(0,c.jsx)(an.Flex,{width:"fill",children:(0,c.jsx)(o.Button,{"data-testid":l?"timeline-menu-close-button":"timeline-menu-open-button",disabled:!j,mode:"ghost",onClick:l?A:z,ref:p,selected:l,width:"fill",tooltipProps:null,justify:"space-between",style:{maxWidth:"100%"},iconRight:i.ChevronDownIcon,text:j?J:y("timeline.loading-history")})})})})}let fe=(0,ar.styled)(at.motion.path)`
  transform-origin: center;
`,ff=a=>{let b,d=(0,am.c)(2);return d[0]!==a?(b=(0,c.jsx)(at.motion.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...a}),d[0]=a,d[1]=b):b=d[1],b},fg=a=>{let b,d=(0,am.c)(2);return d[0]!==a?(b=(0,c.jsx)(fe,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...a}),d[0]=a,d[1]=b):b=d[1],b},fh=a=>{let b,d=(0,am.c)(2);return d[0]!==a?(b=(0,c.jsx)(at.motion.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...a}),d[0]=a,d[1]=b):b=d[1],b},fi=ar.keyframes`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`,fj=ar.styled.g`
  transform-origin: center;

  &[data-rotate] {
    animation: ${fi} 1s ease-in-out infinite;
  }
`,fk={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},fl={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},fm={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},fn={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}};function fo(a){let b,d,e,f,g,h=(0,am.c)(13),{status:i}=a;if(!i)return null;let j="changes"===i?void 0:"";return h[0]!==i?(b=(0,c.jsx)(fg,{variants:fm,initial:i,animate:i}),d=(0,c.jsx)(ff,{variants:fl,initial:i,animate:i}),h[0]=i,h[1]=b,h[2]=d):(b=h[1],d=h[2]),h[3]!==j||h[4]!==b||h[5]!==d?(e=(0,c.jsxs)(fj,{"data-rotate":j,children:[b,d]}),h[3]=j,h[4]=b,h[5]=d,h[6]=e):e=h[6],h[7]!==i?(f=(0,c.jsx)(fh,{variants:fn,initial:i,animate:i}),h[7]=i,h[8]=f):f=h[8],h[9]!==i||h[10]!==e||h[11]!==f?(g=(0,c.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"animated-status-icon",children:(0,c.jsxs)(at.motion.g,{variants:fk,initial:i,animate:i,children:[e,f]})}),h[9]=i,h[10]=e,h[11]=f,h[12]=g):g=h[12],g}let fp={saved:{i18nKey:"status-bar.document-status-pulse.status.saved.text",tone:"positive"},syncing:{i18nKey:"status-bar.document-status-pulse.status.syncing.text",tone:"default"}},fq=a=>{let b,d,f,g,h,i=(0,am.c)(13),{status:j}=a,{t:k}=(0,e.useTranslation)(r);if("saved"!==j&&"syncing"!==j)return null;let l=fp[j];return i[0]!==j?(b=(0,c.jsx)(fo,{status:j}),i[0]=j,i[1]=b):b=i[1],i[2]!==l.tone||i[3]!==b?(d=(0,c.jsx)(e.TextWithTone,{size:1,tone:l.tone,children:b}),i[2]=l.tone,i[3]=b,i[4]=d):d=i[4],i[5]!==l.i18nKey||i[6]!==k?(f=k(l.i18nKey),i[5]=l.i18nKey,i[6]=k,i[7]=f):f=i[7],i[8]!==f?(g=(0,c.jsx)(an.Text,{muted:!0,size:1,children:f}),i[8]=f,i[9]=g):g=i[9],i[10]!==d||i[11]!==g?(h=(0,c.jsxs)(an.Flex,{align:"center",gap:2,"data-testid":"pane-footer-document-status-pulse",children:[d,g]}),i[10]=d,i[11]=g,i[12]=h):h=i[12],h},fr={minimal:!0,useTemporalPhrase:!0},fs=at.motion.create(an.Button),ft=at.motion.create(an.Box),fu=()=>{let a,b,d=(0,am.c)(2);return d[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)("div",{style:{margin:-5},children:(0,c.jsx)(e.AvatarSkeleton,{$size:0,animated:!0})}),d[0]=a):a=d[0],d[1]===Symbol.for("react.memo_cache_sentinel")?(b=(0,c.jsxs)(an.Flex,{align:"center",gap:3,paddingLeft:1,paddingRight:2,paddingY:2,children:[a,(0,c.jsx)(ao.Skeleton,{animated:!0,style:{width:"80px",height:"15px"},radius:2})]}),d[1]=b):b=d[1],b},fv=a=>{let b,d,f,g,h,i,j,k,l=(0,am.c)(17),{author:m,translationKey:n,timestamp:o}=a,{onHistoryOpen:p,inspector:q,onHistoryClose:r}=cL(),{t:s}=(0,e.useTranslation)(),t=(0,e.useRelativeTime)(void 0===o?"":o,fr);l[0]===Symbol.for("react.memo_cache_sentinel")?(b={opacity:1},d={opacity:0},f={opacity:0},l[0]=b,l[1]=d,l[2]=f):(b=l[0],d=l[1],f=l[2]);let u=q?.name===cV?r:p;return l[3]!==m?(g=m&&(0,c.jsx)("div",{style:{margin:-5},children:(0,c.jsx)(e.UserAvatar,{user:m,size:0})}),l[3]=m,l[4]=g):g=l[4],l[5]!==s||l[6]!==n?(h=s(n),l[5]=s,l[6]=n,l[7]=h):h=l[7],l[8]!==t||l[9]!==h?(i=(0,c.jsxs)(an.Text,{muted:!0,size:1,children:[h," ",t]}),l[8]=t,l[9]=h,l[10]=i):i=l[10],l[11]!==g||l[12]!==i?(j=(0,c.jsxs)(an.Flex,{align:"center",flex:"none",gap:3,children:[g,i]}),l[11]=g,l[12]=i,l[13]=j):j=l[13],l[14]!==u||l[15]!==j?(k=(0,c.jsx)(fs,{"data-testid":"pane-footer-document-status",animate:b,initial:d,exit:f,mode:"bleed",onClick:u,padding:2,muted:!0,children:j}),l[14]=u,l[15]=j,l[16]=k):k=l[16],k},fw=()=>{let{editState:a}=cL(),{selectedPerspective:b}=(0,e.usePerspective)(),f=(0,d.useMemo)(()=>(0,e.isPublishedPerspective)(b)&&a?.published?._updatedAt?{translationKey:e.TIMELINE_ITEM_I18N_KEY_MAPPING.published.createDocumentVersion,timestamp:a.published._updatedAt}:a?.version?._updatedAt?{translationKey:a?.version?._updatedAt===a?.version?._createdAt?e.TIMELINE_ITEM_I18N_KEY_MAPPING.version.createDocumentVersion:e.TIMELINE_ITEM_I18N_KEY_MAPPING.version.editDocumentVersion,timestamp:a.version._updatedAt}:a?.draft?._updatedAt?{translationKey:a?.draft?._updatedAt===a?.draft?._createdAt?e.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.createDocumentVersion:e.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.editDocumentVersion,timestamp:a.draft._updatedAt}:null,[b,a?.published?._updatedAt,a?.version?._updatedAt,a?.version?._createdAt,a?.draft?._updatedAt,a?.draft?._createdAt]);return f?(0,c.jsx)(fv,{author:"",translationKey:f.translationKey,timestamp:f.timestamp}):null},fx=()=>{let a,b=(0,am.c)(6),{events:d,loading:f}=(0,e.useEvents)(),g=d?.[0];if(!g&&f){let a;return b[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(fu,{}),b[0]=a):a=b[0],a}if(!g){let a;return b[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(fw,{}),b[1]=a):a=b[1],a}let h=e.TIMELINE_ITEM_I18N_KEY_MAPPING[g.documentVariantType][g.type];return b[2]!==g.author||b[3]!==g.timestamp||b[4]!==h?(a=(0,c.jsx)(fv,{author:g.author,translationKey:h,timestamp:g.timestamp}),b[2]=g.author,b[3]=g.timestamp,b[4]=h,b[5]=a):a=b[5],a},fy=()=>{let a,b,d=(0,am.c)(8),{timelineStore:f}=cL(),g=(0,e.useTimelineSelector)(f,fA),h=(0,e.useTimelineSelector)(f,fB),i=g?.[0];if(!i&&h){let a;return d[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(fu,{}),d[0]=a):a=d[0],a}if(!i){let a;return d[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(fw,{}),d[1]=a):a=d[1],a}d[2]!==i.authors?(a=Array.from(i.authors),d[2]=i.authors,d[3]=a):a=d[3];let j=a[0],k=eY[i.type];return d[4]!==j||d[5]!==i.endTimestamp||d[6]!==k?(b=(0,c.jsx)(fv,{author:j,translationKey:k,timestamp:i.endTimestamp}),d[4]=j,d[5]=i.endTimestamp,d[6]=k,d[7]=b):b=d[7],b};function fz(){let a,b,f,g,h,i,j,k=(0,am.c)(18),{documentId:l,documentType:m,editState:n,value:o}=cL(),[p,q]=(0,d.useState)(null),r=(0,e.useSource)().beta?.eventsAPI?.documents,s=(0,e.useSyncState)(l,m,n?.release),t=o?._updatedAt;return k[0]!==p||k[1]!==s.isSyncing?(a=()=>{if("syncing"===p&&!s.isSyncing){let a=setTimeout(()=>q("saved"),1e3);return()=>clearTimeout(a)}if("saved"===p){let a=setTimeout(()=>q(null),3e3);return()=>clearTimeout(a)}},k[0]=p,k[1]=s.isSyncing,k[2]=a):a=k[2],k[3]!==t||k[4]!==p||k[5]!==s.isSyncing?(b=[p,t,s.isSyncing],k[3]=t,k[4]=p,k[5]=s.isSyncing,k[6]=b):b=k[6],(0,d.useEffect)(a,b),k[7]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{q(null)},k[7]=f):f=k[7],k[8]!==l?(g=[l],k[8]=l,k[9]=g):g=k[9],(0,d.useLayoutEffect)(f,g),k[10]!==s.isSyncing?(h=()=>{s.isSyncing&&q("syncing")},k[10]=s.isSyncing,k[11]=h):h=k[11],k[12]!==t||k[13]!==s.isSyncing?(i=[s.isSyncing,t],k[12]=t,k[13]=s.isSyncing,k[14]=i):i=k[14],(0,d.useLayoutEffect)(h,i),k[15]!==r||k[16]!==p?(j=(0,c.jsx)(au.AnimatePresence,{children:p?(0,c.jsx)(ft,{paddingLeft:2,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},children:(0,c.jsx)(fq,{status:p||void 0})}):(0,c.jsx)(c.Fragment,{children:r?(0,c.jsx)(fx,{}):(0,c.jsx)(fy,{})})}),k[15]=r,k[16]=p,k[17]=j):j=k[17],j}function fA(a){return a.chunks}function fB(a){return a.isLoading}let fC=(0,ar.styled)(an.Text)`
  color: var(--card-muted-fg-color);

  em {
    color: var(--card-fg-color);
    font-weight: 500;
    font-style: normal;
  }
`;function fD(){let a,b,d,f,g,h=(0,am.c)(12),{displayed:j,revisionNotFound:k}=cL(),{t:l}=(0,e.useTranslation)(),m=j?._updatedAt||j?._createdAt;h[0]!==m||h[1]!==l?(a=m?(0,c.jsx)(e.Translate,{t:l,i18nKey:"document-status.revision-from",values:{date:(0,aY.format)(new Date(m),"MMM d, yyyy '@' pp")}}):null,h[0]=m,h[1]=l,h[2]=a):a=h[2],h[3]!==a?(b={name:"revision",text:a,tone:"caution"},h[3]=a,h[4]=b):b=h[4];let n=b;return h[5]===Symbol.for("react.memo_cache_sentinel")?(d=(0,c.jsx)(an.Box,{flex:"none",children:(0,c.jsx)(an.Text,{size:1,children:(0,c.jsx)(i.RestoreIcon,{})})}),h[5]=d):d=h[5],h[6]!==n||h[7]!==k||h[8]!==l?(f=k?(0,c.jsx)(e.Translate,{t:l,i18nKey:"document-status.revision-not-found"}):n.text,h[6]=n,h[7]=k,h[8]=l,h[9]=f):f=h[9],h[10]!==f?(g=(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(an.Flex,{flex:1,gap:3,padding:2,children:[d,(0,c.jsx)(an.Box,{flex:1,children:(0,c.jsx)(fC,{size:1,textOverflow:"ellipsis",children:f})})]})}),h[10]=f,h[11]=g):g=h[11],g}let fE=at.motion.create(an.Card);function fF(a){let b,f,g,h,i,j,k,l,m=(0,am.c)(22),{actionsBoxRef:n,createLinkMetadata:o}=a,{editState:p,onChange:q,revisionNotFound:r}=cL(),{params:s}=cO(),t=void 0===s?cS:s,{selectedPerspective:u}=(0,e.usePerspective)(),{title:v}=cX(),w=(0,e.useSanityCreateConfig)().components?.documentLinkedActions,x=!!t.rev,[y,z]=(0,d.useState)(null),[A,B]=(0,d.useState)(null);m[0]===Symbol.for("react.memo_cache_sentinel")?(b=a=>{z(a.contentRect.width<480)},m[0]=b):b=m[0];let C=b;m[1]!==A?(f={element:A,onResize:C},m[1]=A,m[2]=f):f=m[2],function(a){let b,c,f=(0,am.c)(4),{element:g,onResize:h}=a;f[0]!==g||f[1]!==h?(b=()=>(g&&e.resizeObserver.observe(g,h),()=>{g&&e.resizeObserver.unobserve(g)}),c=[g,h],f[0]=g,f[1]=h,f[2]=b,f[3]=c):(b=f[2],c=f[3]),(0,d.useLayoutEffect)(b,c)}(f);a:{let a=!!(p?.ready&&"boolean"==typeof y);if(u){if((0,e.isPublishedPerspective)(u)){g=a&&!!p?.published;break a}if((0,e.isReleaseDocument)(u)){g=a&&!!p?.version;break a}}g=a}let D=g;if(o&&(0,e.isSanityCreateLinked)(o)&&w){let a;m[3]!==w||m[4]!==o||m[5]!==q||m[6]!==v?(a=(0,c.jsx)(w,{metadata:o,panelPortalElementId:d6,onDocumentChange:q,documentTitle:v}),m[3]=w,m[4]=o,m[5]=q,m[6]=v,m[7]=a):a=m[7],h=a}else if(x){let a;m[8]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(eA,{}),m[8]=a):a=m[8],h=a}else{let a;m[9]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(ez,{}),m[9]=a):a=m[9],h=a}if(x&&r)return null;let E=x?"revision":"published";m[10]===Symbol.for("react.memo_cache_sentinel")?(i={opacity:.2},m[10]=i):i=m[10],m[11]===Symbol.for("react.memo_cache_sentinel")?(j={opacity:1,transition:{duration:.3}},m[11]=j):j=m[11];let F=x?"caution":void 0;return m[12]!==h||m[13]!==n||m[14]!==y||m[15]!==D||m[16]!==x?(k=D&&(0,c.jsxs)(an.Flex,{align:"stretch",gap:1,justify:"space-between",paddingLeft:+!x,paddingRight:+!x,children:[(0,c.jsxs)(an.Flex,{align:"center",flex:1,gap:y?2:3,wrap:"wrap",paddingRight:3,children:[(0,c.jsxs)(an.Flex,{align:"center",children:[x?(0,c.jsx)(fD,{}):(0,c.jsx)(fz,{}),(0,c.jsx)(eL,{})]}),(0,c.jsx)(eP,{})]}),(0,c.jsxs)(an.Flex,{align:"flex-start",justify:"flex-end",ref:n,style:{flexShrink:0,marginLeft:"auto"},children:[(0,c.jsx)(eL,{}),h]})]}),m[12]=h,m[13]=n,m[14]=y,m[15]=D,m[16]=x,m[17]=k):k=m[17],m[18]!==E||m[19]!==F||m[20]!==k?(l=(0,c.jsx)(fE,{initial:i,animate:j,tone:F,radius:3,ref:B,sizing:"border",padding:2,children:k},E),m[18]=E,m[19]=F,m[20]=k,m[21]=l):l=m[21],l}let fG=(0,d.memo)(function(a){let b,d,f,g,h,i,j,k,l,m,n,o,p,q=(0,am.c)(26);q[0]!==a?({actionsBoxElement:b,activeIndex:d,as:m,children:f,id:g,onActionStart:h,onKeyDown:i,rootRef:k,states:l,...j}=a,q[0]=a,q[1]=b,q[2]=d,q[3]=f,q[4]=g,q[5]=h,q[6]=i,q[7]=j,q[8]=k,q[9]=l,q[10]=m):(b=q[1],d=q[2],f=q[3],g=q[4],h=q[5],i=q[6],j=q[7],k=q[8],l=q[9],m=q[10]);let r=void 0===m?"div":m,s=l[d];q[11]!==h||q[12]!==i||q[13]!==l?(n=a=>{let b=l.filter(b=>b.shortcut&&(0,aS.isHotkey)(b.shortcut,a)),c=b[0];if(b.length>1&&console.warn(`Keyboard shortcut conflict: More than one document action matches the shortcut "${c.shortcut}"`),c&&!c.disabled&&c.onHandle){a.preventDefault(),c.onHandle(),h(l.indexOf(c));return}i&&i(a)},q[11]=h,q[12]=i,q[13]=l,q[14]=n):n=q[14];let t=n;return q[15]!==b||q[16]!==s?(o=s&&s.dialog&&(0,c.jsx)(e.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,c.jsx)(ee,{dialog:s.dialog,referenceElement:b})}),q[15]=b,q[16]=s,q[17]=o):o=q[17],q[18]!==r||q[19]!==f||q[20]!==t||q[21]!==g||q[22]!==j||q[23]!==k||q[24]!==o?(p=(0,c.jsxs)(r,{id:g,onKeyDown:t,tabIndex:-1,...j,ref:k,children:[f,o]}),q[18]=r,q[19]=f,q[20]=t,q[21]=g,q[22]=j,q[23]=k,q[24]=o,q[25]=p):p=q[25],p}),fH=(0,d.memo)(a=>{let b,e,f,g,h,i,j,k,l=(0,am.c)(20);l[0]!==a?({actionsBoxElement:b,as:g,children:e,...f}=a,l[0]=a,l[1]=b,l[2]=e,l[3]=f,l[4]=g):(b=l[1],e=l[2],f=l[3],g=l[4]);let m=void 0===g?"div":g,{actions:n,editState:o,isInitialValueLoading:p,revisionId:q}=cL(),[r,s]=(0,d.useState)(-1);l[5]===Symbol.for("react.memo_cache_sentinel")?(h=a=>{s(a)},l[5]=h):h=l[5];let t=h;l[6]!==o||l[7]!==p||l[8]!==q?(i=o&&{...o,onComplete:fI,revision:q||void 0,initialValueResolved:!p},l[6]=o,l[7]=p,l[8]=q,l[9]=i):i=l[9];let u=i;l[10]!==b||l[11]!==r||l[12]!==m||l[13]!==e||l[14]!==f?(j=a=>{let{states:d}=a;return(0,c.jsx)(fG,{...f,activeIndex:r,actionsBoxElement:b,as:m,onActionStart:t,states:d,children:e})},l[10]=b,l[11]=r,l[12]=m,l[13]=e,l[14]=f,l[15]=j):j=l[15];let v=j;return u&&n?(l[16]!==u||l[17]!==n||l[18]!==v?(k=(0,c.jsx)(gX,{actionProps:u,actions:n,children:v}),l[16]=u,l[17]=n,l[18]=v,l[19]=k):k=l[19],k):null});function fI(){}function fJ(a){let b,d,f,g,h,i,j,k=(0,am.c)(23),{documentType:l,value:m,currentMinWidth:n,paneKey:o,minWidth:p}=a,{t:q}=(0,e.useTranslation)();return k[0]!==l?(b={documentType:l},k[0]=l,k[1]=b):b=k[1],k[2]!==q||k[3]!==b?(d=(0,c.jsx)(e.Translate,{t:q,i18nKey:"panes.document-pane.document-unknown-type.title",values:b}),k[2]=q,k[3]=b,k[4]=d):d=k[4],k[5]!==l||k[6]!==q?(f=l&&(0,c.jsx)(an.Text,{as:"p",children:(0,c.jsx)(e.Translate,{t:q,i18nKey:"panes.document-pane.document-unknown-type.text",values:{documentType:l}})}),k[5]=l,k[6]=q,k[7]=f):f=k[7],k[8]!==l||k[9]!==q?(g=!l&&(0,c.jsx)(an.Text,{as:"p",children:q("panes.document-pane.document-unknown-type.without-schema.text")}),k[8]=l,k[9]=q,k[10]=g):g=k[10],k[11]!==m?(h=e.isDev&&m&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(an.Text,{as:"p",children:"Here is the JSON representation of the document:"}),(0,c.jsx)(an.Card,{padding:3,overflow:"auto",radius:2,shadow:1,tone:"inherit",children:(0,c.jsx)(an.Code,{language:"json",size:[1,1,2],children:JSON.stringify(m,null,2)})})]}),k[11]=m,k[12]=h):h=k[12],k[13]!==f||k[14]!==g||k[15]!==h?(i=(0,c.jsxs)(an.Stack,{space:4,children:[f,g,h]}),k[13]=f,k[14]=g,k[15]=h,k[16]=i):i=k[16],k[17]!==n||k[18]!==p||k[19]!==o||k[20]!==d||k[21]!==i?(j=(0,c.jsx)(cG,{currentMinWidth:n,flex:2.5,minWidth:p,paneKey:o,title:d,tone:"caution",children:i}),k[17]=n,k[18]=p,k[19]=o,k[20]=d,k[21]=i,k[22]=j):j=k[22],j}fH.displayName="Memo(DocumentActionShortcuts)";let fK=["fixed","fixed","absolute"];function fL(a){let b,d,f,g,h,i,j=(0,am.c)(16),{documentPanelPortalElement:k,setFooterElement:l,setActionsBoxElement:m}=a,n=(0,e.useZIndex)(),{value:p}=cL();j[0]!==k?(b={[d6]:k},j[0]=k,j[1]=b):b=j[1];let q=b;j[2]!==p?(d=(0,e.getSanityCreateLinkMetadata)(p),j[2]=p,j[3]=d):d=j[3];let r=d;return j[4]!==r||j[5]!==m?(f=(0,c.jsx)(o.TooltipDelayGroupProvider,{children:(0,c.jsx)(fF,{actionsBoxRef:m,createLinkMetadata:r})}),j[4]=r,j[5]=m,j[6]=f):f=j[6],j[7]!==l||j[8]!==f?(g=(0,c.jsx)(cq,{ref:l,padding:1,children:f}),j[7]=l,j[8]=f,j[9]=g):g=j[9],j[10]!==g||j[11]!==n.portal?(h=(0,c.jsx)(ao.DialogProvider,{position:fK,zOffset:n.portal,children:g}),j[10]=g,j[11]=n.portal,j[12]=h):h=j[12],j[13]!==q||j[14]!==h?(i=(0,c.jsx)(an.PortalProvider,{__unstable_elements:q,children:h}),j[13]=q,j[14]=h,j[15]=i):i=j[15],i}let fM=[],fN=["fixed","fixed","absolute"],fO=(0,ar.styled)(e.ChangeConnectorRoot)`
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  min-width: 0;
`;function fP(){let{changesOpen:a,displayed:b,documentId:f,documentType:g,editState:h,fieldActions:j,focusPath:k,inspectOpen:l,inspector:m,inspectors:n,onFocus:o,onHistoryOpen:p,onMenuAction:q,onPathOpen:s,paneKey:t,schemaType:u,value:v,previewUrl:w}=cL(),{params:x}=cO(),{features:y}=cR(),{t:z}=(0,e.useTranslation)(r),{collapsed:A}=b7(),B=(0,e.useZIndex)(),[C,D]=(0,d.useState)(null),[E,F]=(0,d.useState)(null),[G,H]=(0,d.useState)(null),[I,J]=(0,d.useState)(null),[K,L]=(0,d.useState)(null);(0,e.useGlobalCopyPasteElementHandler)({element:C,focusPath:k,value:v});let[M,N]=(0,d.useState)([]),[O,P]=(0,d.useState)([]),Q=(0,ao.useElementRect)(E),R=(0,ao.useElementRect)(G),S=Q?.height,T=R?.height,U=600+320*!!m,V=320+320*!!m,W=(0,d.useMemo)(()=>n?.find(a=>a.name===m?.name),[n,m?.name]),X=cQ({displayed:b,documentId:f,editState:h}),Y=!!v,Z=(0,d.useMemo)(()=>(function(a){let b=function({currentInspector:a,hasValue:b,inspectors:c,inspectorMenuItems:d}){return c.map((c,e)=>{let f=d[e];return!f||f.hidden?null:{action:`${cT}${c.name}`,group:f.showAsAction?void 0:"inspectors",icon:f.icon,disabled:!b,selected:a?.name===c.name,shortcut:f.hotkeys?.join("+"),showAsAction:f.showAsAction,title:f.title,tone:f.tone}}).filter(Boolean)}(a),c=[function({previewUrl:a,t:b}){return a?{action:"production-preview",group:"links",title:b("production-preview.menu-item.title"),icon:i.EarthAmericasIcon,shortcut:"Ctrl+Alt+O"}:null}(a),function({documentIdStack:a,t:b}){let c=typeof a?.previousId>"u"&&{reason:b("compare-versions.menu-item.disabled-reason")};return{action:"compareVersions",group:"inspectors",title:b("compare-versions.menu-item.title"),icon:i.TransferIcon,disabled:c}}(a)].filter(Boolean);return[{action:"copy-document-url",showAsAction:!0,title:a.t("action.copy-document-url.label"),icon:i.LinkIcon},...b,function({hasValue:a,t:b}){return{action:"inspect",group:"inspectors",title:b("document-inspector.menu-item.title"),icon:i.JsonIcon,disabled:!a,shortcut:"Ctrl+Alt+I"}}(a),...c]})({currentInspector:W,features:y,hasValue:Y,inspectorMenuItems:M,inspectors:n,previewUrl:w,documentIdStack:X,t:z}),[W,X,y,Y,M,n,w,z]),$=(0,d.useCallback)(a=>{for(let b of Z)if(b.shortcut&&(0,aS.isHotkey)(b.shortcut,a)){a.preventDefault(),a.stopPropagation(),q(b);return}},[q,Z]),_=(0,d.useCallback)(a=>{s(a),o(a)},[s,o]);return u?(0,c.jsxs)(e.GetFormValueProvider,{value:v,children:[n.length>0&&(0,c.jsx)(cW,{documentId:f,documentType:g,inspectors:n,onMenuItems:N}),j.length>0&&u&&(0,c.jsx)(e.FieldActionsResolver,{actions:j,documentId:f,documentType:g,onActions:P,path:fM,schemaType:u}),(0,c.jsx)(e.FieldActionsProvider,{actions:O,path:fM,children:(0,c.jsxs)(fH,{actionsBoxElement:I,as:cb,currentMinWidth:U,"data-testid":"document-pane",flex:2.5,id:t,minWidth:V,onKeyUp:$,rootRef:D,children:[(0,c.jsx)(eI,{ref:H,menuItems:Z}),(0,c.jsx)(ao.DialogProvider,{position:fN,zOffset:B.paneDialog,children:(0,c.jsx)(an.Flex,{direction:"column",flex:1,height:A?void 0:"fill",children:(0,c.jsx)(fO,{"data-testid":"change-connector-root",isReviewChangesOpen:a&&x?.changesInspectorTab==="review",onOpenReviewChanges:p,onSetFocus:_,children:(0,c.jsx)(d_,{footerHeight:S||null,headerHeight:T||null,isInspectOpen:l,rootElement:C,setDocumentPanelPortalElement:L,footer:(0,c.jsx)(fL,{documentPanelPortalElement:K,setFooterElement:F,setActionsBoxElement:J})})})})}),(0,c.jsx)(cZ,{})]})})]}):(0,c.jsx)(fJ,{currentMinWidth:U,documentType:g,minWidth:V,paneKey:t,value:v})}let fQ=(a,b)=>{let c,f,g,h,i=(0,am.c)(11),j=(0,e.useHistoryStore)(),[k,l]=(0,d.useState)(null),[m,n]=(0,d.useState)(!1);i[0]!==a||i[1]!==b?(c={documentId:a,documentType:b},i[0]=a,i[1]=b,i[2]=c):c=i[2];let o=(0,e.useTimelineStore)(c),p=(0,e.useTimelineSelector)(o,fR);return i[3]!==a||i[4]!==j||i[5]!==p?(f=()=>{p&&a?(n(!0),j.getDocumentAtRevision(a,p).then(a=>{l(a||null),n(!1)}).catch(()=>{l(null),n(!1)})):(l(null),n(!1))},g=[a,p,j],i[3]=a,i[4]=j,i[5]=p,i[6]=f,i[7]=g):(f=i[6],g=i[7]),(0,d.useEffect)(f,g),i[8]!==k||i[9]!==m?(h={lastRevisionDocument:k,loading:m},i[8]=k,i[9]=m,i[10]=h):h=i[10],h};function fR(a){return a.lastNonDeletedRevId}let fS=(0,aJ.defineEvent)({name:"DocumentURLCopied",version:1,description:"User copied document URL to clipboard"});function fT(a){let b=(0,e.isRecord)(a)&&"string"==typeof a.message?a.message:"Unknown error";throw Error(`An error was thrown while trying to get your preview url: ${b}`)}let fU=(0,d.memo)(a=>{let{children:b,index:h,pane:i,paneKey:j,onFocusPath:k,forcedVersion:l,historyStore:m}=a,{store:n,error:o,ready:p,revisionDocument:q,onOlderRevision:s,sinceDocument:t,isPristine:u,revisionId:v,lastNonDeletedRevId:w}=m,x=(0,e.useSchema)(),{setDocumentMeta:y}=(0,e.useCopyPaste)(),{document:{actions:z,badges:A,unstable_fieldActions:B,unstable_languageFilter:C,drafts:{enabled:D}}}=(0,e.useSource)(),E=(0,aG.useTelemetry)(),F=cO(),G=F.setParams,{push:H}=(0,ao.useToast)(),{options:I,menuItemGroups:J=cU,title:K=null,views:L=[]}=i,M=(0,e.useUnique)(I),N=M.id,O=(0,f.getPublishedId)(N),P=I.type,Q=(0,e.useUnique)(F.params)||cS,{buildStudioUrl:R}=(0,e.useStudioUrl)(),S=(0,e.usePerspective)(),{document:{drafts:{enabled:T}}}=(0,e.useWorkspace)(),{selectedReleaseId:U,selectedPerspectiveName:V}=(0,d.useMemo)(()=>l||{selectedPerspectiveName:S.selectedPerspectiveName,selectedReleaseId:S.selectedReleaseId},[l,S.selectedPerspectiveName,S.selectedReleaseId]),W=bL(),X=(a=>{let b,c,d=(0,am.c)(13),{paneOptions:f,documentType:g,documentId:h,params:i}=a,j=(0,e.useTemplates)(),k=cO(),l=(0,e.useUnique)(k.payload);d[0]!==g||d[1]!==f.template||d[2]!==f.templateParameters||d[3]!==l||d[4]!==i.template||d[5]!==j?(b=function(a,b){let c=b.panePayload||{},d=b.templateName;b.urlTemplate&&d&&d!==b.urlTemplate&&console.warn(`Conflicting templates: URL says "${b.urlTemplate}", structure node says "${d}". Using "${d}".`);let e=d||b.urlTemplate,f=a.filter(a=>a.schemaType===b.documentType),g={...b.templateParams,..."object"==typeof c&&c||{}},h=e;return e||1!==f.length||(h=f[0].id),{templateName:h,templateParams:g}}(j,{documentType:g,templateName:f.template,templateParams:f.templateParameters,panePayload:l,urlTemplate:i.template}),d[0]=g,d[1]=f.template,d[2]=f.templateParameters,d[3]=l,d[4]=i.template,d[5]=j,d[6]=b):b=d[6];let{templateName:m,templateParams:n}=b;d[7]!==h||d[8]!==g||d[9]!==i.version||d[10]!==m||d[11]!==n?(c={documentId:h,documentType:g,templateName:m,templateParams:n,version:i.version},d[7]=h,d[8]=g,d[9]=i.version,d[10]=m,d[11]=n,d[12]=c):c=d[12];let o=(0,e.useInitialValue)(c);return(0,e.useUnique)(o)})({paneOptions:M,documentId:O,documentType:P,params:Q}),Y=X.loading,{changesOpen:Z,currentInspector:$,inspectors:_,closeInspector:aa,openInspector:ab,handleHistoryClose:ac,handleHistoryOpen:ad,handleInspectorAction:ae,inspectOpen:af,handleLegacyInspectClose:ag}=function({documentId:a,documentType:b,params:c,setParams:f}){let{features:g}=cR(),h=(0,e.useSource)().document.inspectors,i=(0,d.useMemo)(()=>h({documentId:a,documentType:b}),[a,b,h]),[j,k]=(0,d.useState)(()=>c.inspect||null),l=(0,d.useRef)(c.inspect);(0,d.useEffect)(()=>{l.current!==c.inspect&&(l.current=c.inspect,k(c.inspect||null))},[c.inspect]);let m=(0,d.useMemo)(()=>i?.find(a=>a.name===j),[i,j]),n=(0,d.useMemo)(()=>i.find(a=>a.name===cV),[i]),o=m?.name===cV,p=(0,d.useCallback)(a=>{let b=a&&i.find(b=>b.name===a);if(a&&!b)return void console.warn(`No inspector named "${a}"`);if(m){if(b){let a=b.onClose?.({params:c})??{params:c};k(null),l.current=void 0,f({...a.params,inspect:void 0});return}if(m){let a=m.onClose?.({params:c})??{params:c};k(null),l.current=void 0,f({...a.params,inspect:void 0})}}},[m,i,c,f]),q=(0,d.useCallback)((a,b)=>{let d=i.find(b=>b.name===a);if(!d)return void console.warn(`No inspector named "${a}"`);if(m?.name===d.name)return void f({...c,...b,inspect:d.name});let e=c;m&&(e=(d.onClose?.({params:e})??{params:e}).params);let g=d.onOpen?.({params:e})??{params:e};k(d.name),l.current=d.name,f({...g.params,...b,inspect:d.name})},[m,i,c,f]),r=(0,d.useCallback)(()=>{n&&p(n.name)},[p,n]),s=(0,d.useCallback)(()=>{g.reviewChanges&&n&&q(n.name,{changesInspectorTab:"review"})},[g.reviewChanges,q,n]),t="on"===c.inspect,u=(0,d.useCallback)((a=!t)=>{f(a?{...c,inspect:"on"}:{...c,inspect:void 0})},[t,c,f]),v=(0,d.useCallback)(()=>u(!1),[u]),w=(0,d.useCallback)(a=>{if("inspect"===a.action)return u(!0),!0;if("string"!=typeof a.action)return!1;let b=a.action.slice(cT.length),c=i.find(a=>a.name===b);return!!c&&(c.name===j?p(c.name):q(c.name),!0)},[p,j,i,q,u]);return{changesOpen:o,currentInspector:m,inspectors:i,closeInspector:p,openInspector:q,handleHistoryClose:r,handleHistoryOpen:s,handleInspectorAction:w,handleLegacyInspectClose:v,inspectOpen:t}}({documentId:O,documentType:P,params:Q,setParams:G}),[ah,ai]=(0,d.useState)(!1),{lastRevisionDocument:aj}=fQ(O,P),ak=(0,d.useCallback)(a=>!!p&&!a?.draft&&!a?.published&&!a?.version&&!u,[p,u]),al=(0,d.useCallback)(a=>Z?t||a?.published:a?.published||null,[Z,t]),an=x.get(P),ap=(0,d.useCallback)(a=>{let b=ak(a);return!!Q.rev||ah||b||!(0,e.isPerspectiveWriteable)({selectedPerspective:S.selectedPerspective,isDraftModelEnabled:T,schemaType:an}).result},[ak,ah,T,Q.rev,S.selectedPerspective,an]),aq=(0,d.useCallback)(a=>s?q||{_id:a._id,_type:a._type}:!a._createdAt&&!a._updatedAt&&w&&aj?aj:a,[s,q,w,aj]),{editState:ar,connectionState:as,focusPath:at,onChange:au,validation:aw,ready:ax,value:ay,formState:az,permissions:aD,onPathOpen:aE,isPermissionsLoading:aF,formStateRef:aH,onProgrammaticFocus:aI,collapsedFieldSets:aJ,collapsedPaths:aK,onBlur:aL,onFocus:aM,onSetActiveFieldGroup:aN,onSetCollapsedPath:aO,onSetCollapsedFieldSet:aP,openPath:aQ}=(0,e.useDocumentForm)({changesOpen:Z,documentType:P,documentId:O,initialValue:X,comparisonValue:al,releaseId:U,selectedPerspectiveName:V,initialFocusPath:Q.path?(0,aC.fromString)(Q.path):e.EMPTY_ARRAY,readOnly:ap,onFocusPath:k,getFormDocumentValue:aq}),{data:aR=[]}=(0,e.useActiveReleases)(),aS=(0,d.useCallback)(()=>{let a;switch(!0){case!!Q.rev:a="revision";break;case U&&(0,f.isVersionId)(ay._id):{let b=aR.find(a=>(0,e.getReleaseIdFromReleaseDocumentId)(a._id)===U);a=b&&(0,e.isCardinalityOneRelease)(b)?"scheduled-draft":"version";break}case"published"===V:a="published";break;case D:a="draft";break;default:a="published"}return a},[Q.rev,U,ay._id,V,D,aR]),aT=(0,d.useMemo)(()=>aS(),[aS]),aU=(0,d.useMemo)(()=>({schemaType:P,documentId:O,versionType:aT,releaseId:U}),[P,O,aT,U]),aV=(0,d.useMemo)(()=>z(aU),[z,aU]),aW=(0,d.useMemo)(()=>A({schemaType:P,documentId:O}),[A,O,P]),aX=(0,d.useMemo)(()=>C({schemaType:P,documentId:O}),[O,P,C]),aY=(0,e.useUnique)(L),aZ=Q.view||aY[0]&&aY[0].id||null,a$=function(a){let b,c,f,g,h=(0,am.c)(6),{resolveProductionUrl:i}=(0,e.useSource)().document;h[0]===Symbol.for("react.memo_cache_sentinel")?(b=new aB.BehaviorSubject(void 0),h[0]=b):b=h[0];let j=b;return h[1]!==a?(c=()=>{j.next(a)},f=[j,a],h[1]=a,h[2]=c,h[3]=f):(c=h[2],f=h[3]),(0,d.useEffect)(c,f),h[4]!==i?(g=j.asObservable().pipe((0,aA.distinctUntilChanged)(),(0,aA.debounceTime)(500),(0,aA.switchMap)(a=>(0,e.isRecord)(a)&&"string"==typeof a._id&&"string"==typeof a._type?(0,aB.from)(i({document:a})):(0,aB.of)(void 0)),(0,aA.distinctUntilChanged)(),(0,aA.catchError)(fT)),h[4]=i,h[5]=g):g=h[5],(0,av.useObservable)(g)}(ay),{t:a_}=(0,e.useTranslation)(r),a0=(0,d.useMemo)(()=>an?B({documentId:O,documentType:P,schemaType:an}):[],[O,P,B,an]),a1=ax&&(!Q.rev||p||!!o),a2=(0,d.useMemo)(()=>aq(ay),[aq,ay]),{previousId:a3}=cQ({displayed:a2,documentId:O,editState:ar}),a4=(0,d.useCallback)((a,b)=>{G({...Q,since:a,rev:b||void 0})},[Q,G]),a5=(0,d.useCallback)(()=>F.closeCurrent(),[F]),a6=(0,d.useCallback)(()=>F.duplicateCurrent(),[F]),a7=(0,d.useCallback)(async a=>{if("production-preview"===a.action&&a$)return window.open(a$),!0;if("copy-document-url"===a.action&&navigator){E.log(fS);let a=R({coreUi:a=>`${a}/intent/edit/id=${O};type=${P}`});return await navigator.clipboard.writeText(a),H({id:"copy-document-url",status:"info",title:a_("panes.document-operation-results.operation-success_copy-url")}),!0}return"reviewChanges"===a.action?(ad(),!0):(("inspect"===a.action||"string"==typeof a.action&&a.action.startsWith(cT))&&ae(a),"compareVersions"===a.action&&"u">typeof a3&&(W.navigateDiffView({mode:"version",previousDocument:{type:P,id:a3},nextDocument:{type:P,id:ay._id}}),!0))},[a$,a3,E,R,H,a_,O,P,ad,ae,W,ay._id]);(0,d.useEffect)(()=>{y({documentId:O,documentType:P,schemaType:an,onChange:au})},[O,P,an,au,y]);let a8=(0,d.useMemo)(()=>al(ar),[ar,al]),a9=(0,d.useMemo)(()=>ak(ar),[ar,ak]),ba=s&&!q,bb=(0,d.useMemo)(()=>ar.version&&(0,e.isGoingToUnpublish)(ar.version)?ar.published:a2,[ar.version,ar.published,a2]),bc=(0,d.useMemo)(()=>({actions:aV,activeViewId:aZ,badges:aW,changesOpen:Z,closeInspector:aa,collapsedFieldSets:aJ,collapsedPaths:aK,compareValue:a8,connectionState:as,displayed:bb,documentId:O,documentIdRaw:N,documentType:P,editState:ar,fieldActions:a0,focusPath:at,inspector:$||null,inspectors:_,onBlur:aL,onChange:au,onFocus:aM,onPathOpen:aE,onHistoryClose:ac,onHistoryOpen:ad,onInspectClose:ag,onMenuAction:a7,onPaneClose:a5,onPaneSplit:a6,onSetActiveFieldGroup:aN,onSetCollapsedPath:aO,onSetCollapsedFieldSet:aP,openInspector:ab,openPath:aQ,index:h,inspectOpen:af,validation:aw,menuItemGroups:J||[],paneKey:j,previewUrl:a$,ready:a1,schemaType:an,isPermissionsLoading:aF,isInitialValueLoading:Y,permissions:aD,setTimelineRange:a4,setIsDeleting:ai,isDeleting:ah,isDeleted:a9,timelineError:o,timelineStore:n,title:K,value:ay,selectedReleaseId:U,views:aY,formState:az,unstable_languageFilter:aX,revisionId:v,revisionNotFound:ba,lastNonDeletedRevId:w,lastRevisionDocument:aj}),[aV,aZ,aW,Z,aa,aJ,aK,a8,as,bb,O,N,P,ar,a0,at,$,_,aL,au,aM,aE,ac,ad,ag,a7,a5,a6,aN,aO,aP,ab,aQ,h,af,aw,J,j,a$,a1,an,aF,Y,aD,a4,ah,a9,o,n,K,ay,U,aY,az,aX,v,ba,w,aj]),bd=(0,d.useRef)(void 0);return(0,d.useEffect)(()=>{if(a1&&Q.path){let{path:a,...b}=Q;a!==bd.current&&aI((0,aC.resolveKeyedPath)(aH.current?.value,(0,aC.fromString)(a))),F.setParams(b)}bd.current=Q.path},[aH,aI,F,Q,a1]),(0,c.jsx)(g.DocumentPaneContext.Provider,{value:bc,children:b})});fU.displayName="Memo(DocumentPaneProvider)";let fV=a=>{let b,d,g,h,i,j,k,l=(0,am.c)(37),{params:m}=cO(),n=void 0===m?cS:m,o=gb(a.pane.options,n),p=(0,e.useSchema)(),q=o.type,r=!!p.get(o.type)?.liveEdit,{selectedPerspectiveName:s,selectedReleaseId:t,selectedPerspective:u}=(0,e.usePerspective)(),{data:v}=(0,e.useArchivedReleases)();l[0]!==o.id?(b=(0,f.getPublishedId)(o.id),l[0]=o.id,l[1]=b):b=l[1];let w=(0,e.useEditState)(b,q,"default",t),x=r&&"drafts"===u&&!w?.draft,{rev:y,since:z}=n,A=n.historyVersion;a:{if(x){let a;l[2]!==o.id?(a=(0,f.getPublishedId)(o.id),l[2]=o.id,l[3]=a):a=l[3],d=a;break a}if(A&&v.some(a=>(0,e.getReleaseIdFromReleaseDocumentId)(a._id)===A)){let a;l[4]!==A||l[5]!==o.id?(a=(0,f.getVersionId)(o.id,A),l[4]=A,l[5]=o.id,l[6]=a):a=l[6],d=a;break a}if(typeof s>"u"){let a;l[7]!==o.id?(a=(0,f.getDraftId)(o.id),l[7]=o.id,l[8]=a):a=l[8],d=a;break a}if("published"===s){let a;l[9]!==o.id?(a=(0,f.getPublishedId)(o.id),l[9]=o.id,l[10]=a):a=l[10],d=a;break a}if(t){let a;l[11]!==o.id||l[12]!==s?(a=(0,f.getVersionId)(o.id,s),l[11]=o.id,l[12]=s,l[13]=a):a=l[13],d=a;break a}d=o.id}let B=d;l[14]!==B||l[15]!==o.type||l[16]!==y||l[17]!==z?(g={documentId:B,documentType:o.type,rev:y,since:z},l[14]=B,l[15]=o.type,l[16]=y,l[17]=z,l[18]=g):g=l[18];let C=(0,e.useEventsStore)(g),D=C.error,E=C.revision?.revisionId||null,F=!!(y&&!C.revision?.loading),G=C.revision?.document||null,H=C.sinceRevision?.document||null,I=!C.loading,J=0===C.events.length;l[19]!==C.events?(h=C.events.find(fW)?.id||null,l[19]=C.events,l[20]=h):h=l[20],l[21]!==C.error||l[22]!==J||l[23]!==h||l[24]!==E||l[25]!==F||l[26]!==G||l[27]!==H||l[28]!==I?(i={error:D,revisionId:E,onOlderRevision:F,revisionDocument:G,sinceDocument:H,ready:I,isPristine:J,lastNonDeletedRevId:h},l[21]=C.error,l[22]=J,l[23]=h,l[24]=E,l[25]=F,l[26]=G,l[27]=H,l[28]=I,l[29]=i):i=l[29];let K=i;return l[30]!==K||l[31]!==A||l[32]!==a?(j=A?(0,c.jsx)(e.PerspectiveProvider,{selectedPerspectiveName:A,excludedPerspectives:e.EMPTY_ARRAY,children:(0,c.jsx)(fU,{...a,historyStore:K})}):(0,c.jsx)(fU,{...a,historyStore:K}),l[30]=K,l[31]=A,l[32]=a,l[33]=j):j=l[33],l[34]!==j||l[35]!==C?(k=(0,c.jsx)(e.EventsProvider,{value:C,children:j}),l[34]=j,l[35]=C,l[36]=k):k=l[36],k};function fW(a){return!(0,e.isDeleteDocumentGroupEvent)(a)&&!(0,e.isDeleteDocumentVersionEvent)(a)}let fX=a=>{let b,g,h,i,j=(0,am.c)(20),{pane:k}=a,l=cO(),m=gb(k.options,l.params),n=l.params||cS,[o,p]=(0,d.useState)(null);j[0]!==m.id?(b=(0,f.getPublishedId)(m.id),j[0]=m.id,j[1]=b):b=j[1],j[2]!==m.type||j[3]!==n.rev||j[4]!==n.since||j[5]!==b?(g={documentId:b,documentType:m.type,onError:p,rev:n.rev,since:n.since},j[2]=m.type,j[3]=n.rev,j[4]=n.since,j[5]=b,j[6]=g):g=j[6];let q=(0,e.useTimelineStore)(g),r=(0,e.useTimelineSelector)(q,fY),s=(0,e.useTimelineSelector)(q,fZ),t=(0,e.useTimelineSelector)(q,f$),u=(0,e.useTimelineSelector)(q,f_),v=(0,e.useTimelineSelector)(q,f0),w=(0,e.useTimelineSelector)(q,f1),x=(0,e.useTimelineSelector)(q,f2),y=s?.id||null,z=!!w;j[7]!==x||j[8]!==r||j[9]!==q||j[10]!==y||j[11]!==u||j[12]!==t||j[13]!==z||j[14]!==o||j[15]!==v?(h={store:q,error:o,revisionId:y,onOlderRevision:r,revisionDocument:u,sinceDocument:t,ready:v,isPristine:z,lastNonDeletedRevId:x},j[7]=x,j[8]=r,j[9]=q,j[10]=y,j[11]=u,j[12]=t,j[13]=z,j[14]=o,j[15]=v,j[16]=h):h=j[16];let A=h;return j[17]!==A||j[18]!==a?(i=(0,c.jsx)(fU,{...a,historyStore:A}),j[17]=A,j[18]=a,j[19]=i):i=j[19],i};function fY(a){return a.onOlderRevision}function fZ(a){return a.revTime}function f$(a){return a.sinceAttributes}function f_(a){return a.timelineDisplayed}function f0(a){return a.timelineReady}function f1(a){return a.isPristine}function f2(a){return a.lastNonDeletedRevId}let f3=a=>{let b,c,f,h=(0,am.c)(13),{documentId:i}=a,j=(0,d.useContext)(g.RawPerspectiveContext);h[0]!==i?(b={documentId:i},h[0]=i,h[1]=b):b=h[1];let{data:k,loading:l}=(0,e.useDocumentVersions)(b),m=(0,e.useSetPerspective)();return h[2]!==k||h[3]!==l||h[4]!==j||h[5]!==m?(c=()=>{if(!(l||!j||!(0,e.isCardinalityOnePerspective)(j.selectedPerspective))){if(!k?.length)return void m(void 0);k.map(f6).includes(j.selectedReleaseId)||m(void 0)}},h[2]=k,h[3]=l,h[4]=j,h[5]=m,h[6]=c):c=h[6],h[7]!==i||h[8]!==k||h[9]!==l||h[10]!==j||h[11]!==m?(f=[i,j,k,l,m],h[7]=i,h[8]=k,h[9]=l,h[10]=j,h[11]=m,h[12]=f):f=h[12],(0,d.useEffect)(c,f),null};function f4(a){let b,f,h,i,j=(0,am.c)(21),{children:k,documentId:l}=a,m=(0,d.useContext)(g.RawPerspectiveContext),n=(0,d.useContext)(g.PerspectiveContext);j[0]!==l?(b={documentId:l},j[0]=l,j[1]=b):b=j[1];let{data:o,loading:p}=(0,e.useDocumentVersions)(b),{document:q}=(0,e.useWorkspace)(),{drafts:r}=q,{enabled:s}=r,t=s?e.LATEST:e.PUBLISHED;a:{let a;if(!m||!n||!(0,e.isCardinalityOnePerspective)(m.selectedPerspective)){f=n;break a}if(p||!o?.length){let a;j[2]!==t||j[3]!==n?(a={...n,selectedPerspective:t,selectedPerspectiveName:void 0,selectedReleaseId:void 0},j[2]=t,j[3]=n,j[4]=a):a=j[4],f=a;break a}if(!o.map(f5).includes(m.selectedReleaseId)){let a;j[5]!==t||j[6]!==n?(a={...n,selectedPerspective:t,selectedPerspectiveName:void 0,selectedReleaseId:void 0},j[5]=t,j[6]=n,j[7]=a):a=j[7],f=a;break a}j[8]!==n||j[9]!==m.selectedPerspective||j[10]!==m.selectedPerspectiveName||j[11]!==m.selectedReleaseId?(a={...n,selectedPerspective:m.selectedPerspective,selectedPerspectiveName:m.selectedPerspectiveName,selectedReleaseId:m.selectedReleaseId},j[8]=n,j[9]=m.selectedPerspective,j[10]=m.selectedPerspectiveName,j[11]=m.selectedReleaseId,j[12]=a):a=j[12],f=a}let u=f;if(!u){let a;return j[13]!==k?(a=(0,c.jsx)(c.Fragment,{children:k}),j[13]=k,j[14]=a):a=j[14],a}return j[15]!==l?(h=(0,c.jsx)(f3,{documentId:l}),j[15]=l,j[16]=h):h=j[16],j[17]!==k||j[18]!==h||j[19]!==u?(i=(0,c.jsxs)(g.PerspectiveContext.Provider,{value:u,children:[k,h]}),j[17]=k,j[18]=h,j[19]=u,j[20]=i):i=j[20],i}function f5(a){return(0,f.getVersionFromId)(a)}function f6(a){return(0,f.getVersionFromId)(a)}let f7=(0,d.memo)(a=>{let b,d,g,h=(0,am.c)(8),i=(0,e.useSource)();h[0]!==a.itemId?(b=(0,f.getPublishedId)(a.itemId),h[0]=a.itemId,h[1]=b):b=h[1];let j=b;return h[2]!==a||h[3]!==i.beta?.eventsAPI?.documents?(d=i.beta?.eventsAPI?.documents?(0,c.jsx)(fV,{...a}):(0,c.jsx)(fX,{...a}),h[2]=a,h[3]=i.beta?.eventsAPI?.documents,h[4]=d):d=h[4],h[5]!==j||h[6]!==d?(g=(0,c.jsx)(f4,{documentId:j,children:d}),h[5]=j,h[6]=d,h[7]=g):g=h[7],g});f7.displayName="Memo(DocumentPaneProviderWrapper)";let f8=(0,d.memo)(function(a){let b,d,f=(0,am.c)(5),{name:g}=(0,e.useSource)(),h=a.pane.source||g;return f[0]!==a?(b=(0,c.jsx)(e.CopyPasteProvider,{children:(0,c.jsx)(f9,{...a})}),f[0]=a,f[1]=b):b=f[1],f[2]!==h||f[3]!==b?(d=(0,c.jsx)(e.SourceProvider,{name:h,children:b}),f[2]=h,f[3]=b,f[4]=d):d=f[4],d});function f9(a){var b,f,g;let h,i,j,k,l,m,n,o,p,q,s=(0,am.c)(57),{pane:t,paneKey:u}=a,{resolveNewDocumentOptions:v}=(0,e.useSource)().document,{selectedPerspectiveName:w}=(0,e.usePerspective)(),x=cO(),y=gb(t.options,x.params),{documentType:z,isLoaded:A}=(0,e.useDocumentType)(y.id,y.type);!function(){let a,b,c,f,g,h=(0,am.c)(10),{params:i,setParams:j}=cO(),k=void 0===i?cS:i,{selectedPerspectiveName:l}=(0,e.usePerspective)(),m=(0,d.useRef)(!1);h[0]!==k||h[1]!==j?(a=a=>{["since","historyVersion","rev","preserveRev"].some(a=>k[a])&&j({...k,rev:"true"===k.preserveRev?k.rev:void 0,preserveRev:void 0,since:void 0,historyVersion:void 0})},h[0]=k,h[1]=j,h[2]=a):a=h[2];let n=(0,aZ.useEffectEvent)(a);h[3]!==l||h[4]!==n?(b=()=>{m.current&&n(l)},h[3]=l,h[4]=n,h[5]=b):b=h[5],h[6]!==l?(c=[l],h[6]=l,h[7]=c):c=h[7],(0,d.useEffect)(b,c),h[8]===Symbol.for("react.memo_cache_sentinel")?(f=()=>(m.current=!0,()=>{m.current=!1}),g=[],h[8]=f,h[9]=g):(f=h[8],g=h[9]),(0,d.useEffect)(f,g)}();let B=function(){let a,b=(0,am.c)(1);return b[0]===Symbol.for("react.memo_cache_sentinel")?(a={pick:bX,defaultComponent:fP},b[0]=a):a=b[0],(0,e.useMiddlewareComponents)(a)}();s[0]!==y.id||s[1]!==y.type||s[2]!==v?(h=v({type:"document",documentId:y.id,schemaType:y.type}),s[0]=y.id,s[1]=y.type,s[2]=v,s[3]=h):h=s[3];let C=h;s[4]!==C?(i={templateItems:C},s[4]=C,s[5]=i):i=s[5];let[D,E]=(0,e.useTemplatePermissions)(i),F=A&&!E;s[6]!==z||s[7]!==F||s[8]!==y||s[9]!==a?(j=F&&z&&y.type!==z?(b=a,f=y,g=z,{...b,pane:{...b.pane,options:{...f,type:g}}}):a,s[6]=z,s[7]=F,s[8]=y,s[9]=a,s[10]=j):j=s[10];let G=j,{ReferenceChildLink:H,handleEditReference:I,groupIndex:J,routerPanesState:K}=x;s[11]!==J||s[12]!==K?(k=K[J+1]?.[0].params||{},s[11]=J,s[12]=K,s[13]=k):k=s[13];let L=k,M=K.length,{parentRefPath:N}=L;s[14]!==J||s[15]!==N||s[16]!==M?(l=N?{path:(0,aC.fromString)(N),state:J>=M-1?"none":J>=M-2?"selected":"pressed"}:{path:[],state:"none"},s[14]=J,s[15]=N,s[16]=M,s[17]=l):l=s[17];let O=l,{t:P}=(0,e.useTranslation)(r);if("*"===y.type&&!F){let a,b;return s[18]!==P?(a=P("panes.document-pane.document-not-found.loading"),s[18]=P,s[19]=a):a=s[19],s[20]!==u||s[21]!==a?(b=(0,c.jsx)(cK,{flex:2.5,minWidth:320,paneKey:u,title:a}),s[20]=u,s[21]=a,s[22]=b):b=s[22],b}if(!z){let a,b,d,f,g;return s[23]!==P?(a=P("panes.document-pane.document-not-found.title"),s[23]=P,s[24]=a):a=s[24],s[25]!==y.id?(b={id:y.id},s[25]=y.id,s[26]=b):b=s[26],s[27]===Symbol.for("react.memo_cache_sentinel")?(d={Code:ga},s[27]=d):d=s[27],s[28]!==P||s[29]!==b?(f=(0,c.jsx)(an.Stack,{space:4,children:(0,c.jsx)(an.Text,{as:"p",children:(0,c.jsx)(e.Translate,{t:P,i18nKey:"panes.document-pane.document-not-found.text",values:b,components:d})})}),s[28]=P,s[29]=b,s[30]=f):f=s[30],s[31]!==u||s[32]!==a||s[33]!==f?(g=(0,c.jsx)(cG,{flex:2.5,minWidth:320,paneKey:u,title:a,children:f}),s[31]=u,s[32]=a,s[33]=f,s[34]=g):g=s[34],g}let Q=`${z}-${y.id}-${w||""}`;return s[35]!==B||s[36]!==y.id||s[37]!==y.type?(m=(0,c.jsx)(B,{documentId:y.id,documentType:y.type}),s[35]=B,s[36]=y.id,s[37]=y.type,s[38]=m):m=s[38],s[39]!==y.id||s[40]!==y.type||s[41]!==m?(n=(0,c.jsx)(cM,{documentId:y.id,documentType:y.type,children:m}),s[39]=y.id,s[40]=y.type,s[41]=m,s[42]=n):n=s[42],s[43]!==y.id||s[44]!==y.type||s[45]!==n?(o=(0,c.jsx)(b6,{documentId:y.id,documentType:y.type,children:n}),s[43]=y.id,s[44]=y.type,s[45]=n,s[46]=o):o=s[46],s[47]!==H||s[48]!==O||s[49]!==I||s[50]!==o||s[51]!==D?(p=(0,c.jsx)(e.ReferenceInputOptionsProvider,{EditReferenceLinkComponent:H,onEditReference:I,initialValueTemplateItems:D,activePath:O,children:o}),s[47]=H,s[48]=O,s[49]=I,s[50]=o,s[51]=D,s[52]=p):p=s[52],s[53]!==G||s[54]!==Q||s[55]!==p?(q=(0,c.jsx)(f7,{...G,children:p},Q),s[53]=G,s[54]=Q,s[55]=p,s[56]=q):q=s[56],q}function ga(a){let{children:b}=a;return(0,c.jsx)("code",{children:b})}function gb(a,b){let c,d,f=(0,am.c)(8);f[0]!==b?(c=void 0===b?{}:b,f[0]=b,f[1]=c):c=f[1];let g=c,h=(0,e.useTemplates)();a:{let b,c;if(a.type&&"*"!==a.type){d=a;break a}let e=a.template||g.template;f[2]!==e||f[3]!==h?(b=e?h.find(a=>a.id===e):void 0,f[2]=e,f[3]=h,f[4]=b):b=f[4];let i=b?.schemaType;if(!i){d=a;break a}f[5]!==i||f[6]!==a?(c={...a,type:i},f[5]=i,f[6]=a,f[7]=c):c=f[7],d=c}return d}let gc=(0,d.forwardRef)(function(a,b){let e,f,h,i=(0,am.c)(9),{routerPanesState:j,groupIndex:k}=(0,d.useContext)(g.PaneRouterContext);i[0]!==k||i[1]!==j?(e=j.slice(0,k),i[0]=k,i[1]=j,i[2]=e):e=i[2];let l=e;i[3]!==l?(f={panes:l},i[3]=l,i[4]=f):f=i[4];let m=f;return i[5]!==a||i[6]!==b||i[7]!==m?(h=(0,c.jsx)(aw.StateLink,{...a,ref:b,state:m}),i[5]=a,i[6]=b,i[7]=m,i[8]=h):h=i[8],h}),gd=(0,d.forwardRef)(function(a,b){let e,f,h,i,j,k,l=(0,am.c)(19);l[0]!==a?({childId:e,childPayload:h,childParameters:f,...i}=a,l[0]=a,l[1]=e,l[2]=f,l[3]=h,l[4]=i):(e=l[1],f=l[2],h=l[3],i=l[4]);let{routerPanesState:m,groupIndex:n}=(0,d.useContext)(g.PaneRouterContext);if(l[5]!==e||l[6]!==f||l[7]!==h||l[8]!==n||l[9]!==m){let a;l[11]!==e||l[12]!==f||l[13]!==h?(a=[{id:e,params:f,payload:h}],l[11]=e,l[12]=f,l[13]=h,l[14]=a):a=l[14],j={panes:[...m.slice(0,n+1),a]},l[5]=e,l[6]=f,l[7]=h,l[8]=n,l[9]=m,l[10]=j}else j=l[10];return l[15]!==b||l[16]!==i||l[17]!==j?(k=(0,c.jsx)(aw.StateLink,{...i,ref:b,state:j}),l[15]=b,l[16]=i,l[17]=j,l[18]=k):k=l[18],k}),ge=(0,d.forwardRef)(function(a,b){let f,h,i,j,k,l,m,n=(0,am.c)(20),{routerPanesState:o,groupIndex:p,siblingIndex:q}=(0,d.useContext)(g.PaneRouterContext);n[0]!==a?({params:f,payload:h,...i}=a,n[0]=a,n[1]=f,n[2]=h,n[3]=i):(f=n[1],h=n[2],i=n[3]);let r=(0,e.useUnique)(f),s=(0,e.useUnique)(h),t=o[p],u=t[q],v=r??u.params,w=s??u.payload;n[4]!==u||n[5]!==v||n[6]!==w?(j={...u,params:v,payload:w},n[4]=u,n[5]=v,n[6]=w,n[7]=j):j=n[7];let x=j;n[8]!==t||n[9]!==x||n[10]!==q?(k=[...t.slice(0,q),x,...t.slice(q+1)],n[8]=t,n[9]=x,n[10]=q,n[11]=k):k=n[11];let y=k;n[12]!==o||n[13]!==p||n[14]!==y?(l={panes:[...o.slice(0,p),y,...o.slice(p+1)]},n[12]=o,n[13]=p,n[14]=y,n[15]=l):l=n[15];let z=l;return n[16]!==z||n[17]!==b||n[18]!==i?(m=(0,c.jsx)(aw.StateLink,{ref:b,...i,state:z}),n[16]=z,n[17]=b,n[18]=i,n[19]=m):m=n[19],m}),gf=(0,d.forwardRef)(function(a,b){let d,e,f,g,h,i,j,k,l,m,n=(0,am.c)(22);n[0]!==a?({documentId:e,documentType:f,parentRefPath:g,children:d,template:i,...h}=a,n[0]=a,n[1]=d,n[2]=e,n[3]=f,n[4]=g,n[5]=h,n[6]=i):(d=n[1],e=n[2],f=n[3],g=n[4],h=n[5],i=n[6]);let o=i?.params;return n[7]!==g?(j=(0,aC.toString)(g),n[7]=g,n[8]=j):j=n[8],n[9]!==i?(k=i&&{template:i?.id},n[9]=i,n[10]=k):k=n[10],n[11]!==f||n[12]!==j||n[13]!==k?(l={type:f,parentRefPath:j,...k},n[11]=f,n[12]=j,n[13]=k,n[14]=l):l=n[14],n[15]!==d||n[16]!==e||n[17]!==b||n[18]!==h||n[19]!==o||n[20]!==l?(m=(0,c.jsx)(gd,{...h,ref:b,childId:e,childPayload:o,childParameters:l,children:d}),n[15]=d,n[16]=e,n[17]=b,n[18]=h,n[19]=o,n[20]=l,n[21]=m):m=n[21],m}),gg=[];function gh(a){let b,d,e,f,h,i,j,k,l,m,n,o,p,q=(0,am.c)(60),{children:r,flatIndex:s,index:t,params:u,payload:v,siblingIndex:w}=a,{navigate:x,navigateIntent:y,resolvePathFromState:z}=(0,aw.useRouter)(),A=(0,aw.useRouterState)(),{panes:B,expand:C}=b7(),D=A?.panes||gg,E=B?.[B.length-2],F=t-1;q[0]!==F||q[1]!==D||q[2]!==A||q[3]!==w?(b=a=>{let b=D[F]||[],c=b[w],d=a(b,c),e=[...D.slice(0,F),d,...D.slice(F+1)];return{...A,panes:e}},q[0]=F,q[1]=D,q[2]=A,q[3]=w,q[4]=b):b=q[4];let G=b;q[5]!==G||q[6]!==x?(d=a=>{let b=G(a);return setTimeout(()=>x(b),0),b},q[5]=G,q[6]=x,q[7]=d):d=q[7];let H=d;q[8]!==G||q[9]!==z||q[10]!==w?(e=a=>z(G((b,c)=>[...b.slice(0,w),{...c,params:a},...b.slice(w+1)])),q[8]=G,q[9]=z,q[10]=w,q[11]=e):e=q[11];let I=e;q[12]!==H||q[13]!==w?(f=a=>{H((b,c)=>[...b.slice(0,w),{...c,payload:a},...b.slice(w+1)])},q[12]=H,q[13]=w,q[14]=f):f=q[14];let J=f;q[15]!==H||q[16]!==w?(h=a=>{H((b,c)=>[...b.slice(0,w),{...c,params:a},...b.slice(w+1)])},q[15]=H,q[16]=w,q[17]=h):h=q[17];let K=h;q[18]!==F||q[19]!==x||q[20]!==D?(i=a=>{let{id:b,parentRefPath:c,type:d,template:e,version:f}=a;x({panes:[...D.slice(0,F+1),[{id:b,params:{template:e.id,parentRefPath:(0,aC.toString)(c),type:d,version:f},payload:e.params}]]})},q[18]=F,q[19]=x,q[20]=D,q[21]=i):i=q[21];let L=i,M=!!D[F]&&D[F].length>1,N=D[F]?D[F].length:0,O=s?gc:void 0;q[22]!==H?(k=a=>{let b=void 0===a?{}:a;H(()=>[{id:b.id||"",payload:b.payload,params:b.params||{}}])},j=()=>{H(gi)},q[22]=H,q[23]=j,q[24]=k):(j=q[23],k=q[24]),q[25]!==C||q[26]!==F||q[27]!==E||q[28]!==x||q[29]!==D?(l=a=>{(void 0===a||a)&&E&&C(E.element),x({panes:D.slice(0,F)})},q[25]=C,q[26]=F,q[27]=E,q[28]=x,q[29]=D,q[30]=l):l=q[30],q[31]!==H||q[32]!==w?(m=a=>{H((b,c)=>{let d={...c,payload:a?.payload||c.payload,params:a?.params||c.params};return[...b.slice(0,w),d,...b.slice(w)]})},q[31]=H,q[32]=w,q[33]=m):m=q[33],q[34]!==u||q[35]!==K?(n=a=>{let b=(0,ax.default)(u,"view");return K(a?{...b,view:a}:b)},q[34]=u,q[35]=K,q[36]=n):n=q[36],q[37]!==I||q[38]!==s||q[39]!==F||q[40]!==L||q[41]!==y||q[42]!==u||q[43]!==v||q[44]!==D||q[45]!==K||q[46]!==J||q[47]!==w||q[48]!==j||q[49]!==l||q[50]!==m||q[51]!==n||q[52]!==M||q[53]!==N||q[54]!==O||q[55]!==k?(o={index:s,groupIndex:F,siblingIndex:w,payload:v,params:u,hasGroupSiblings:M,groupLength:N,routerPanesState:D,ChildLink:gd,BackLink:O,ReferenceChildLink:gf,handleEditReference:L,ParameterizedLink:ge,replaceCurrent:k,closeCurrent:j,closeCurrentAndAfter:l,duplicateCurrent:m,setView:n,setParams:K,setPayload:J,createPathWithParams:I,navigateIntent:y},q[37]=I,q[38]=s,q[39]=F,q[40]=L,q[41]=y,q[42]=u,q[43]=v,q[44]=D,q[45]=K,q[46]=J,q[47]=w,q[48]=j,q[49]=l,q[50]=m,q[51]=n,q[52]=M,q[53]=N,q[54]=O,q[55]=k,q[56]=o):o=q[56];let P=o;return q[57]!==r||q[58]!==P?(p=(0,c.jsx)(g.PaneRouterContext.Provider,{value:P,children:r}),q[57]=r,q[58]=P,q[59]=p):p=q[59],p}function gi(a,b){return a.length>1?a.filter(a=>a!==b):a}function gj(a){let b,d,f,g,h,i=(0,am.c)(14),{isSelected:j,pane:k,paneKey:l}=a;i[0]!==k?(b=(0,e.isRecord)(k)&&k.type||null,i[0]=k,i[1]=b):b=i[1];let m=b,{t:n}=(0,e.useTranslation)(r);return i[2]!==n?(d=n("panes.unknown-pane-type.title"),i[2]=n,i[3]=d):d=i[3],i[4]!==d?(f=(0,c.jsx)(cw,{title:d}),i[4]=d,i[5]=f):f=i[5],i[6]!==n||i[7]!==m?(g=(0,c.jsx)(ce,{children:(0,c.jsx)(an.Box,{padding:4,children:"string"==typeof m?(0,c.jsx)(an.Text,{as:"p",muted:!0,children:(0,c.jsx)(e.Translate,{t:n,i18nKey:"panes.unknown-pane-type.unknown-type.text",values:{type:m}})}):(0,c.jsx)(an.Text,{as:"p",muted:!0,children:(0,c.jsx)(e.Translate,{t:n,i18nKey:"panes.unknown-pane-type.missing-type.text"})})})}),i[6]=n,i[7]=m,i[8]=g):g=i[8],i[9]!==j||i[10]!==l||i[11]!==f||i[12]!==g?(h=(0,c.jsxs)(cb,{id:l,selected:j,children:[f,g]}),i[9]=j,i[10]=l,i[11]=f,i[12]=g,i[13]=h):h=i[13],h}let gk={component:(0,d.lazy)(()=>a.A(62339)),document:(0,d.lazy)(()=>Promise.resolve().then(function(){return iB})),documentList:(0,d.lazy)(()=>Promise.resolve().then(function(){return iC})),list:(0,d.lazy)(()=>a.A(201632))},gl=(0,d.memo)(function(a){let b,e,f,g,h=(0,am.c)(23),{active:i,childItemId:j,groupIndex:k,index:l,itemId:m,pane:n,paneKey:o,params:p,payload:q,path:r,selected:s,siblingIndex:t}=a,u=gk[n.type]||gj;h[0]!==o||h[1]!==r||h[2]!==s?(b=(0,c.jsx)(cK,{paneKey:o,path:r,selected:s}),h[0]=o,h[1]=r,h[2]=s,h[3]=b):b=h[3];let v=j||"";return h[4]!==u||h[5]!==i||h[6]!==l||h[7]!==m||h[8]!==n||h[9]!==o||h[10]!==s||h[11]!==v?(e=(0,c.jsx)(u,{childItemId:v,index:l,itemId:m,isActive:i,isSelected:s,paneKey:o,pane:n}),h[4]=u,h[5]=i,h[6]=l,h[7]=m,h[8]=n,h[9]=o,h[10]=s,h[11]=v,h[12]=e):e=h[12],h[13]!==b||h[14]!==e?(f=(0,c.jsx)(d.Suspense,{fallback:b,children:e}),h[13]=b,h[14]=e,h[15]=f):f=h[15],h[16]!==k||h[17]!==l||h[18]!==p||h[19]!==q||h[20]!==t||h[21]!==f?(g=(0,c.jsx)(gh,{flatIndex:l,index:k,params:p,payload:q,siblingIndex:t,children:f}),h[16]=k,h[17]=l,h[18]=p,h[19]=q,h[20]=t,h[21]=f,h[22]=g):g=h[22],g},({params:a={},payload:b=null,...c},{params:d={},payload:e=null,...f})=>{if(!(0,ay.default)(a,d)||!(0,ay.default)(b,e))return!1;for(let a of new Set([...Object.keys(c),...Object.keys(f)]))if(c[a]!==f[a])return!1;return!0});function gm(a){let b,d,f=(0,am.c)(10),{document:g}=a,h=(0,e.useSchema)().get(g._type),{t:i}=(0,e.useTranslation)(r),{title:j}=cX();if(!h){let a,b;return f[0]!==g._type||f[1]!==i?(a=i("doc-title.unknown-schema-type.text",{schemaType:g._type}),f[0]=g._type,f[1]=i,f[2]=a):a=f[2],f[3]!==a?(b=(0,c.jsx)("code",{children:a}),f[3]=a,f[4]=b):b=f[4],b}return f[5]!==i||f[6]!==j?(b=j||(0,c.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:i("doc-title.fallback.text")}),f[5]=i,f[6]=j,f[7]=b):b=f[7],f[8]!==b?(d=(0,c.jsx)(c.Fragment,{children:b}),f[8]=b,f[9]=d):d=f[9],d}let gn=(0,ar.styled)(an.Box)`
  margin-left: auto;
`,go=ar.styled.details`
  flex: none;

  &[open] ${gn} {
    transform: rotate(180deg);
  }
`,gp=ar.styled.summary`
  list-style: none;

  &::-webkit-details-marker {
    display: none;
  }
`,gq=ar.styled.table`
  width: 100%;
  text-align: left;
  padding: 0 ${({theme:a})=>(0,an.rem)(a.sanity.space[2])};
  border-collapse: collapse;

  th {
    padding: ${({theme:a})=>(0,an.rem)(a.sanity.space[1])};
  }

  td {
    padding: 0 ${({theme:a})=>(0,an.rem)(a.sanity.space[1])};
  }

  tr > *:last-child {
    text-align: right;
  }
`,gr=(0,ar.styled)(an.Flex)`
  min-height: 33px;
`,gs=a=>{let b,d,f,g,h,j,k=(0,am.c)(13),{t:l}=(0,e.useTranslation)(r),m=a.totalCount-a.references.length;return m?(k[0]!==m||k[1]!==l?(b=l("confirm-delete-dialog.other-reference-count.title",{count:m}),k[0]=m,k[1]=l,k[2]=b):b=k[2],k[3]!==b?(d=(0,c.jsx)(an.Text,{size:1,muted:!0,children:b}),k[3]=b,k[4]=d):d=k[4],k[5]!==l?(f=l("confirm-delete-dialog.other-reference-count.tooltip"),k[5]=l,k[6]=f):f=k[6],k[7]===Symbol.for("react.memo_cache_sentinel")?(g=(0,c.jsx)(an.Text,{size:1,muted:!0,children:(0,c.jsx)(i.InfoOutlineIcon,{})}),k[7]=g):g=k[7],k[8]!==f?(h=(0,c.jsx)(o.Tooltip,{portal:!0,placement:"top",content:f,children:g}),k[8]=f,k[9]=h):h=k[9],k[10]!==d||k[11]!==h?(j=(0,c.jsx)(an.Box,{padding:2,children:(0,c.jsxs)(an.Inline,{space:2,children:[d,h]})}),k[10]=d,k[11]=h,k[12]=j):j=k[12],j):null};function gt(a){let b,d,f,g,h,i,j=(0,am.c)(27),{icon:k,layout:l,presence:m,schemaType:n,value:p}=a,q=(0,e.useDocumentVersionInfo)(p._id),{perspectiveStack:r}=(0,e.usePerspective)();j[0]!==r||j[1]!==a.documentPreviewStore||j[2]!==n||j[3]!==p._id?(b=(0,e.getPreviewStateObservable)(a.documentPreviewStore,n,p._id,r),j[0]=r,j[1]=a.documentPreviewStore,j[2]=n,j[3]=p._id,j[4]=b):b=j[4];let s=b;j[5]===Symbol.for("react.memo_cache_sentinel")?(d={snapshot:null,isLoading:!0,original:null},j[5]=d):d=j[5];let{snapshot:t,original:u,isLoading:v}=(0,av.useObservable)(s,d);j[6]!==v||j[7]!==m||j[8]!==q.draft||j[9]!==q.published||j[10]!==q.versions?(f=v?null:(0,c.jsx)(o.TooltipDelayGroupProvider,{children:(0,c.jsxs)(an.Flex,{align:"center",gap:3,children:[m&&m.length>0&&(0,c.jsx)(e.DocumentPreviewPresence,{presence:m}),(0,c.jsx)(e.DocumentStatusIndicator,{draft:q.draft,published:q.published,versions:q.versions})]})}),j[6]=v,j[7]=m,j[8]=q.draft,j[9]=q.published,j[10]=q.versions,j[11]=f):f=j[11];let w=f;j[12]!==q.draft||j[13]!==q.published||j[14]!==q.versions?(g=(0,c.jsx)(e.DocumentStatus,{draft:q.draft,published:q.published,versions:q.versions}),j[12]=q.draft,j[13]=q.published,j[14]=q.versions,j[15]=g):g=j[15];let x=g;return j[16]!==u||j[17]!==t||j[18]!==p?(h=(0,e.getPreviewValueWithFallback)({snapshot:t,original:u,fallback:p}),j[16]=u,j[17]=t,j[18]=p,j[19]=h):h=j[19],j[20]!==k||j[21]!==v||j[22]!==l||j[23]!==w||j[24]!==h||j[25]!==x?(i=(0,c.jsx)(e.SanityDefaultPreview,{...h,isPlaceholder:v,icon:k,layout:l,status:w,tooltip:x}),j[20]=k,j[21]=v,j[22]=l,j[23]=w,j[24]=h,j[25]=x,j[26]=i):i=j[26],i}let gu=[];function gv(a){let b,d,g,h,i=(0,am.c)(16),{onClick:j,type:k,value:l}=a,m=l?._id;i[0]!==m?(b=(0,f.getPublishedId)(m),i[0]=m,i[1]=b):b=i[1];let n=(0,e.useDocumentPresence)(b),o=(0,e.useDocumentPreviewStore)(),{ReferenceChildLink:p}=cO();i[2]!==p||i[3]!==k?.name||i[4]!==l?._id?(d=function(a){return(0,c.jsx)(p,{documentId:l?._id,documentType:k?.name,parentRefPath:gu,...a})},i[2]=p,i[3]=k?.name,i[4]=l?._id,i[5]=d):d=i[5];let q=d,r=k?.icon,s=n?.length>0?n:gu;return i[6]!==o||i[7]!==r||i[8]!==s||i[9]!==k||i[10]!==l?(g=(0,c.jsx)(gt,{documentPreviewStore:o,icon:r,layout:"compact",presence:s,schemaType:k,value:l}),i[6]=o,i[7]=r,i[8]=s,i[9]=k,i[10]=l,i[11]=g):g=i[11],i[12]!==j||i[13]!==q||i[14]!==g?(h=(0,c.jsx)(e.PreviewCard,{__unstable_focusRing:!0,as:q,"data-as":"a",onClick:j,radius:2,children:g}),i[12]=j,i[13]=q,i[14]=g,i[15]=h):h=i[15],h}function gw(a){let b,d,f,g,h,j,k,l,m,n,p,q,s,t,u,v,w=(0,am.c)(59),{crossDatasetReferences:x,internalReferences:y,documentTitle:z,totalCount:A,action:B,datasetNames:C,hasUnknownDatasetNames:D,onReferenceLinkClick:E}=a,F=(0,e.useSchema)(),G=(0,ao.useToast)(),{t:H}=(0,e.useTranslation)(r);w[0]!==E||w[1]!==F||w[2]!==H?(b=a=>{let b=F.get(a._type);return b?(0,c.jsx)(gv,{type:b,value:a,onClick:E}):(0,c.jsx)(an.Box,{padding:2,children:(0,c.jsx)(e.SanityDefaultPreview,{icon:i.UnknownIcon,title:H("confirm-delete-dialog.preview-item.preview-unavailable.title"),subtitle:H("confirm-delete-dialog.preview-item.preview-unavailable.subtitle",{documentId:a._id}),layout:"default"})})},w[0]=E,w[1]=F,w[2]=H,w[3]=b):b=w[3];let I=b;if(y?.totalCount===0&&x?.totalCount===0){let a,b;return w[4]!==z?(a={DocumentTitle:()=>(0,c.jsx)("strong",{children:z})},w[4]=z,w[5]=a):a=w[5],w[6]!==B||w[7]!==H||w[8]!==a?(b=(0,c.jsx)(an.Text,{as:"p",size:1,children:(0,c.jsx)(e.Translate,{t:H,i18nKey:"confirm-delete-dialog.confirmation.text",context:B,components:a})}),w[6]=B,w[7]=H,w[8]=a,w[9]=b):b=w[9],b}w[10]!==D?(d=D?["unavailable"]:[],w[10]=D,w[11]=d):d=w[11],w[12]!==C||w[13]!==d?(f=[...C,...d],w[12]=C,w[13]=d,w[14]=f):f=w[14];let J=f,K=J.length,L=J.join(", "),M=D&&J.length?"unavailable":"";w[15]!==J.length||w[16]!==H||w[17]!==L||w[18]!==M?(g=H("confirm-delete-dialog.cdr-summary.subtitle",{count:K,datasets:L,context:M}),w[15]=J.length,w[16]=H,w[17]=L,w[18]=M,w[19]=g):g=w[19];let N=g;return w[20]===Symbol.for("react.memo_cache_sentinel")?(h=(0,c.jsx)(an.Text,{"aria-hidden":"true",size:1,children:(0,c.jsx)(i.WarningOutlineIcon,{})}),w[20]=h):h=w[20],w[21]!==z?(j={DocumentTitle:()=>z},w[21]=z,w[22]=j):j=w[22],w[23]!==A?(k={count:A},w[23]=A,w[24]=k):k=w[24],w[25]!==H||w[26]!==k||w[27]!==j?(l=(0,c.jsx)(an.Card,{padding:3,radius:2,tone:"caution",flex:"none",children:(0,c.jsxs)(an.Flex,{children:[h,(0,c.jsx)(an.Box,{flex:1,marginLeft:3,children:(0,c.jsx)(an.Text,{size:1,children:(0,c.jsx)(e.Translate,{i18nKey:"confirm-delete-dialog.referring-document-count.text",components:j,t:H,values:k})})})]})}),w[25]=H,w[26]=k,w[27]=j,w[28]=l):l=w[28],w[29]!==z?(m={DocumentTitle:()=>z},w[29]=z,w[30]=m):m=w[30],w[31]!==B||w[32]!==H||w[33]!==m?(n=(0,c.jsx)(an.Box,{flex:"none",children:(0,c.jsx)(an.Text,{size:1,children:(0,c.jsx)(e.Translate,{i18nKey:"confirm-delete-dialog.referring-documents-descriptor.text",t:H,context:B,components:m})})}),w[31]=B,w[32]=H,w[33]=m,w[34]=n):n=w[34],w[35]!==y||w[36]!==I?(p=y.totalCount>0&&(0,c.jsxs)(an.Stack,{as:"ul",marginBottom:2,space:2,"data-testid":"internal-references",children:[y?.references.map(a=>(0,c.jsx)(an.Box,{as:"li",children:I(a)},a._id)),y.totalCount>y.references.length&&(0,c.jsx)(an.Box,{as:"li",padding:3,children:(0,c.jsx)(gs,{...y})})]}),w[35]=y,w[36]=I,w[37]=p):p=w[37],w[38]!==x||w[39]!==N||w[40]!==y.totalCount||w[41]!==J.length||w[42]!==H||w[43]!==G?(q=x.totalCount>0&&(0,c.jsxs)(go,{"data-testid":"cross-dataset-references",style:{borderTop:y.totalCount>0?"1px solid var(--card-shadow-outline-color)":void 0},children:[(0,c.jsx)(gp,{children:(0,c.jsx)(an.Card,{as:"a",marginTop:2*(y.totalCount>0),radius:2,shadow:1,paddingY:1,children:(0,c.jsxs)(an.Flex,{align:"center",gap:3,paddingX:3,paddingY:1,children:[(0,c.jsx)(an.Text,{size:1,children:(0,c.jsx)(i.DocumentsIcon,{})}),(0,c.jsxs)(an.Stack,{space:2,children:[(0,c.jsx)(an.Text,{textOverflow:"ellipsis",size:1,children:H("confirm-delete-dialog.cdr-summary.title",{count:J.length,documentCount:H("confirm-delete-dialog.cdr-summary.document-count",{count:x.totalCount})})}),(0,c.jsx)(an.Text,{title:N,textOverflow:"ellipsis",size:1,muted:!0,children:N})]}),(0,c.jsx)(gn,{children:(0,c.jsx)(an.Text,{muted:!0,size:1,children:(0,c.jsx)(i.ChevronDownIcon,{})})})]})})}),(0,c.jsxs)(an.Box,{overflow:"auto",paddingTop:2,children:[(0,c.jsxs)(gq,{children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:(0,c.jsx)(an.Text,{muted:!0,size:1,style:{minWidth:"5rem"},weight:"medium",children:H("confirm-delete-dialog.cdr-table.project-id.label")})}),(0,c.jsx)("th",{children:(0,c.jsx)(an.Text,{muted:!0,size:1,weight:"medium",children:H("confirm-delete-dialog.cdr-table.dataset.label")})}),(0,c.jsx)("th",{children:(0,c.jsx)(an.Text,{muted:!0,size:1,weight:"medium",children:H("confirm-delete-dialog.cdr-table.document-id.label")})})]})}),(0,c.jsx)("tbody",{children:x.references.filter(gx).map((a,b)=>{let{projectId:d,datasetName:e,documentId:f}=a;return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsx)(an.Text,{size:1,children:d})}),(0,c.jsx)("td",{children:(0,c.jsx)(an.Text,{size:1,children:e||"unavailable"})}),(0,c.jsx)("td",{children:(0,c.jsxs)(gr,{align:"center",gap:2,justify:"flex-end",children:[(0,c.jsx)(an.Text,{textOverflow:"ellipsis",size:1,children:f||"unavailable"}),f&&(0,c.jsx)(o.Button,{mode:"bleed",icon:i.CopyIcon,tooltipProps:{content:H("confirm-delete-dialog.cdr-table.copy-id-button.tooltip")},onClick:()=>{navigator.clipboard.writeText(f).catch(()=>{G.push({status:"error",title:H("confirm-delete-dialog.cdr-table.id-copied-toast.title-failed")})})}})]})})]},`${f}-${b}`)})})]}),(0,c.jsx)(gs,{...x})]})]}),w[38]=x,w[39]=N,w[40]=y.totalCount,w[41]=J.length,w[42]=H,w[43]=G,w[44]=q):q=w[44],w[45]!==p||w[46]!==q?(s=(0,c.jsx)(an.Card,{radius:2,shadow:1,flex:"auto",padding:2,children:(0,c.jsxs)(an.Flex,{direction:"column",children:[p,q]})}),w[45]=p,w[46]=q,w[47]=s):s=w[47],w[48]!==z?(t={DocumentTitle:()=>z},w[48]=z,w[49]=t):t=w[49],w[50]!==B||w[51]!==H||w[52]!==t?(u=(0,c.jsx)(an.Box,{flex:"none",children:(0,c.jsx)(an.Text,{size:1,children:(0,c.jsx)(e.Translate,{i18nKey:"confirm-delete-dialog.referential-integrity-disclaimer.text",t:H,context:B,components:t})})}),w[50]=B,w[51]=H,w[52]=t,w[53]=u):u=w[53],w[54]!==l||w[55]!==n||w[56]!==s||w[57]!==u?(v=(0,c.jsxs)(an.Flex,{direction:"column",gap:4,children:[l,n,s,u]}),w[54]=l,w[55]=n,w[56]=s,w[57]=u,w[58]=v):v=w[58],v}function gx(a){return"projectId"in a}let gy=()=>(b||(b=(0,aB.fromEvent)(document,"visibilitychange").pipe((0,aA.startWith)(null),(0,aA.map)(()=>"visible"===document.visibilityState),(0,aA.distinctUntilChanged)(),(0,aA.switchMap)(a=>a?(0,aB.timer)(0,5e3):aB.EMPTY),(0,aA.shareReplay)({refCount:!0,bufferSize:1}))),b),gz=(0,e.createHookFromObservableFactory)(([a,b])=>b.listenQuery({fetch:'{"references":*[references($documentId)][0...100]{_id,_type},"totalCount":count(*[references($documentId)])}',listen:"*[references($documentId)]"},{documentId:a},{tag:"use-referring-documents",transitions:["appear","disappear"],throttleTime:5e3})),gA=(0,e.createHookFromObservableFactory)(([a,b])=>gy().pipe((0,aA.switchMap)(()=>(function(a,b){let{versionedClient:c}=b;return gy().pipe((0,aA.switchMap)(()=>(function(a,{versionedClient:b}){let c=(0,f.getDraftId)(a),d=(0,f.getPublishedId)(a),e={uri:b.getDataUrl("doc",`${c},${d}`),json:!0,query:{excludeContent:"true"},tag:"use-referring-documents.document-existence"};return b.observable.request(e).pipe((0,aA.map)(({omitted:a})=>{let b=a.filter(a=>"existence"===a.reason);if(2!==b.length)return 0===b.length||b.some(a=>a.id===c)?d:c}))})(a,b)),(0,aA.switchMap)(a=>{if(!a)return(0,aB.of)({totalCount:0,references:[]});let b=c.config().dataset;return c.observable.request({url:`/data/references/${b}/documents/${a}/to?excludeInternalReferences=true&excludePaths=true`,tag:"use-referring-documents.external"}).pipe((0,aA.catchError)(a=>{if("object"==typeof a&&a&&"statusCode"in a&&"response"in a&&404===a.statusCode)return(0,aB.of)({totalCount:0,references:[]});throw a}))}))})(a,{versionedClient:b}))));function gB(a){return"string"!=typeof a.datasetName}function gC(a){return!!a&&""!==a}function gD(a){return a?.datasetName||""}function gE(a){return a.projectId}let gF=(0,ar.styled)(an.Box)`
  box-sizing: border-box;
`,gG=(0,ar.styled)(an.Flex).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;function gH(a){let b,g,h,i,j,k,l,m,n,p=(0,am.c)(40),{id:q,type:s,action:t,onCancel:u,onConfirm:v}=a,w=void 0===t?"delete":t,{t:x}=(0,e.useTranslation)(r),y=`deletion-confirmation-${(0,d.useId)()}`,{internalReferences:z,crossDatasetReferences:A,isLoading:B,totalCount:C,projectIds:D,datasetNames:E,hasUnknownDatasetNames:F}=function(a){let b,c,d,g,h,i,j,k,l=(0,am.c)(24),m=(0,e.useClient)(e.DEFAULT_STUDIO_CLIENT_OPTIONS),n=(0,e.useDocumentStore)();l[0]!==a?(b=(0,f.getPublishedId)(a),l[0]=a,l[1]=b):b=l[1];let o=b;l[2]!==n||l[3]!==o?(c=[o,n],l[2]=n,l[3]=o,l[4]=c):c=l[4];let[p,q]=gz(c);l[5]!==o||l[6]!==m?(d=[o,m],l[5]=o,l[6]=m,l[7]=d):d=l[7];let[r,s]=gA(d);l[8]!==r?.references?(g=()=>Array.from(new Set(r?.references.map(gE).filter(Boolean))).sort(),l[8]=r?.references,l[9]=g):g=l[9],l[10]!==g?(h=g(),l[10]=g,l[11]=h):h=l[11];let t=h;l[12]!==r?.references?(i=Array.from(new Set(r?.references.map(gD).filter(gC))).sort(),l[12]=r?.references,l[13]=i):i=l[13];let u=i;l[14]!==r?.references?(j=()=>!!r?.references.some(gB),l[14]=r?.references,l[15]=j):j=l[15];let v=j(),w=(p?.totalCount||0)+(r?.totalCount||0),x=q||s;return l[16]!==r||l[17]!==u||l[18]!==v||l[19]!==p||l[20]!==t||l[21]!==w||l[22]!==x?(k={totalCount:w,projectIds:t,datasetNames:u,hasUnknownDatasetNames:v,internalReferences:p,crossDatasetReferences:r,isLoading:x},l[16]=r,l[17]=u,l[18]=v,l[19]=p,l[20]=t,l[21]=w,l[22]=x,l[23]=k):k=l[23],k}(q);p[0]!==q||p[1]!==s?(b={_id:q,_type:s},p[0]=q,p[1]=s,p[2]=b):b=p[2];let G=b;p[3]!==G?(g=(0,c.jsx)(gm,{document:G}),p[3]=G,p[4]=g):g=p[4];let H=g,I=!B;return p[5]!==w||p[6]!==x?(h=x("confirm-delete-dialog.header.text",{context:w}),p[5]=w,p[6]=x,p[7]=h):h=p[7],p[8]!==x?(i=x("confirm-delete-dialog.cancel-button.text"),p[8]=x,p[9]=i):i=p[9],p[10]!==u||p[11]!==i?(j={onClick:u,text:i},p[10]=u,p[11]=i,p[12]=j):j=p[12],p[13]!==w||p[14]!==v||p[15]!==I||p[16]!==x||p[17]!==C?(k=I?{text:x(C>0?"confirm-delete-dialog.confirm-anyway-button.text":"confirm-delete-dialog.confirm-button.text",{context:w}),onClick:v}:void 0,p[13]=w,p[14]=v,p[15]=I,p[16]=x,p[17]=C,p[18]=k):k=p[18],p[19]!==j||p[20]!==k?(l={cancelButton:j,confirmButton:k},p[19]=j,p[20]=k,p[21]=l):l=p[21],p[22]!==w||p[23]!==A||p[24]!==E||p[25]!==H||p[26]!==F||p[27]!==z||p[28]!==B||p[29]!==u||p[30]!==D||p[31]!==x||p[32]!==C?(m=(0,c.jsx)(gF,{children:A&&z&&!B?(0,c.jsx)(gw,{crossDatasetReferences:A,internalReferences:z,documentTitle:H,isLoading:B,totalCount:C,action:w,projectIds:D,datasetNames:E,hasUnknownDatasetNames:F,onReferenceLinkClick:u}):(0,c.jsx)(gG,{"data-testid":"loading-container",children:(0,c.jsx)(e.LoadingBlock,{showText:!0,title:x("confirm-delete-dialog.loading.text")})})}),p[22]=w,p[23]=A,p[24]=E,p[25]=H,p[26]=F,p[27]=z,p[28]=B,p[29]=u,p[30]=D,p[31]=x,p[32]=C,p[33]=m):m=p[33],p[34]!==y||p[35]!==u||p[36]!==m||p[37]!==h||p[38]!==l?(n=(0,c.jsx)(o.Dialog,{width:1,id:y,header:h,footer:l,onClose:u,onClickOutside:u,children:m}),p[34]=y,p[35]=u,p[36]=m,p[37]=h,p[38]=l,p[39]=n):n=p[39],n}function gI(a){let b,f,g=(0,am.c)(6),{t:h}=(0,e.useTranslation)(r),i=(0,d.useId)(),[j,k]=(0,d.useState)(null);g[0]===Symbol.for("react.memo_cache_sentinel")?(b=()=>k(null),g[0]=b):b=g[0];let l=b;return g[1]!==j||g[2]!==i||g[3]!==a||g[4]!==h?(f=j?(0,c.jsx)(o.Dialog,{id:`dialog-error-${i}`,"data-testid":"confirm-delete-error-dialog",header:h("confirm-delete-dialog.error.title.text"),footer:{confirmButton:{text:h("confirm-delete-dialog.error.retry-button.text"),onClick:l,tone:"default"}},onClose:a.onCancel,children:(0,c.jsx)(an.Box,{padding:4,children:(0,c.jsx)(an.Text,{size:1,children:h("confirm-delete-dialog.error.message.text")})})}):(0,c.jsx)(o.ErrorBoundary,{onCatch:k,children:(0,c.jsx)(gH,{...a})}),g[1]=j,g[2]=i,g[3]=a,g[4]=h,g[5]=f):f=g[5],f}let gJ=(0,d.forwardRef)(function(a,b){let e,f,g,h,i=(0,am.c)(10);i[0]!==a?({intent:e,...f}=a,i[0]=a,i[1]=e,i[2]=f):(e=i[1],f=i[2]),i[3]!==e?(g=(0,d.forwardRef)(function(a,b){return(0,c.jsx)(aw.IntentLink,{...a,intent:e.type,params:e.params,ref:b,searchParams:e.searchParams})}),i[3]=e,i[4]=g):g=i[4];let j=g;return i[5]!==j||i[6]!==a.disabled||i[7]!==b||i[8]!==f?(h=a.disabled?(0,c.jsx)(o.Button,{...f,as:"a",role:"link","aria-disabled":"true"}):(0,c.jsx)(o.Button,{...f,as:j,"data-as":"a",ref:b}),i[5]=j,i[6]=a.disabled,i[7]=b,i[8]=f,i[9]=h):h=i[9],h});function gK(a){let b,d,f,g=(0,am.c)(12),{reveal:h,context:i,loading:j,children:k}=a,l=(0,e.useCurrentUser)(),{t:m}=(0,e.useTranslation)(r);if(!h){let a;return g[0]!==k?(a=(0,c.jsx)(c.Fragment,{children:k}),g[0]=k,g[1]=a):a=g[1],a}return g[2]!==i||g[3]!==l||g[4]!==j||g[5]!==m?(b=j?m("insufficient-permissions-message-tooltip.loading-text"):(0,c.jsx)(e.InsufficientPermissionsMessage,{context:i,currentUser:l}),g[2]=i,g[3]=l,g[4]=j,g[5]=m,g[6]=b):b=g[6],g[7]!==k?(d=(0,c.jsx)("div",{children:k}),g[7]=k,g[8]=d):d=g[8],g[9]!==b||g[10]!==d?(f=(0,c.jsx)(o.Tooltip,{content:b,portal:!0,children:d}),g[9]=b,g[10]=d,g[11]=f):f=g[11],f}let gL={constrainSize:!0,placement:"bottom",portal:!0},gM=(a,b,c)=>{let d=a.find(a=>a.id===b.templateId)?.schemaType;if(!d)return null;let e={template:b.templateId,type:d,version:c,id:b.initialDocumentId};return{type:"create",params:b.parameters?[e,b.parameters]:e,searchParams:c?[["perspective",c]]:void 0}};function gN(a){let b,f,g,h,j,k,l,m,n=(0,am.c)(60),{templateItems:p}=a,q=(0,e.useTemplates)(),{selectedReleaseId:s}=(0,e.usePerspective)(),{t}=(0,e.useTranslation)(r);n[0]!==p||n[1]!==q?(b=[...p,...q],n[0]=p,n[1]=q,n[2]=b):b=n[2];let u=(0,e.useGetI18nText)(b);n[3]!==p?(f={templateItems:p},n[3]=p,n[4]=f):f=n[4];let[v,w]=(0,e.useTemplatePermissions)(f),x=!w&&v?.length!==0&&v?.every(gP);a:{let a;if(!v){let a;n[5]===Symbol.for("react.memo_cache_sentinel")?(a={},n[5]=a):a=n[5],g=a;break a}n[6]!==v?(a=v.reduce(gO,{}),n[6]=v,n[7]=a):a=n[7],g=a}let y=g;if(0===p.length)return null;if(x){let a,b,d;return n[8]!==t?(a=t("pane-header.disabled-created-button.aria-label"),n[8]=t,n[9]=a):a=n[9],n[10]!==a?(b=(0,c.jsx)(o.Button,{"aria-label":a,icon:i.AddIcon,"data-testid":"action-intent-button",disabled:!0,mode:"bleed",tooltipProps:null}),n[10]=a,n[11]=b):b=n[11],n[12]!==w||n[13]!==b?(d=(0,c.jsx)(gK,{context:"create-document-type",reveal:!0,loading:w,children:b}),n[12]=w,n[13]=b,n[14]=d):d=n[14],d}if(1===p.length){let a,b,d,e,f,g,h=p[0],j=!y[h.id]?.granted;n[15]!==h||n[16]!==s||n[17]!==q?(a=gM(q,h,s),n[15]=h,n[16]=s,n[17]=q,n[18]=a):a=n[18];let k=a;if(!k)return null;n[19]!==h||n[20]!==u?(b=u(h),n[19]=h,n[20]=u,n[21]=b):b=n[21];let l=b.title,m=h.icon||i.AddIcon;return n[22]!==t?(d=t("pane-header.create-new-button.tooltip"),n[22]=t,n[23]=d):d=n[23],n[24]!==d?(e={content:d},n[24]=d,n[25]=e):e=n[25],n[26]!==j||n[27]!==k||n[28]!==b.title||n[29]!==m||n[30]!==e?(f=(0,c.jsx)(gJ,{"aria-label":l,icon:m,intent:k,mode:"bleed",disabled:j,"data-testid":"action-intent-button",tooltipProps:e}),n[26]=j,n[27]=k,n[28]=b.title,n[29]=m,n[30]=e,n[31]=f):f=n[31],n[32]!==j||n[33]!==w||n[34]!==f?(g=(0,c.jsx)(gK,{reveal:j,loading:w,context:"create-document-type",children:f}),n[32]=j,n[33]=w,n[34]=f,n[35]=g):g=n[35],g}if(n[36]!==t?(h=t("pane-header.create-new-button.tooltip"),n[36]=t,n[37]=h):h=n[37],n[38]!==h?(j=(0,c.jsx)(o.Button,{icon:i.AddIcon,mode:"bleed","data-testid":"multi-action-intent-button",tooltipProps:{content:h}}),n[38]=h,n[39]=j):j=n[39],n[40]!==u||n[41]!==w||n[42]!==y||n[43]!==s||n[44]!==t||n[45]!==p||n[46]!==q){let a;n[48]!==u||n[49]!==w||n[50]!==y||n[51]!==s||n[52]!==t||n[53]!==q?(a=(a,b)=>{let e=!y[a.id]?.granted,f=gM(q,a,s),g=q.find(b=>b.id===a.templateId);if(!g||!f)return null;let h=(0,d.forwardRef)((a,b)=>e?(0,c.jsx)("button",{type:"button",disabled:!0,...a,ref:b}):(0,c.jsx)(aw.IntentLink,{...a,intent:f.type,params:f.params,searchParams:f.searchParams,ref:b}));h.displayName="Link";let{title:i}=u({...a,title:a.title||u(g).title});return(0,c.jsx)(gK,{context:"create-document-type",reveal:e,loading:w,children:(0,c.jsx)(o.MenuItem,{as:h,"data-as":e?"button":"a",text:i,"aria-label":e?t("pane-header.disabled-created-button.aria-label"):i,disabled:e,"data-testid":`action-intent-button-${b}`})},a.id)},n[48]=u,n[49]=w,n[50]=y,n[51]=s,n[52]=t,n[53]=q,n[54]=a):a=n[54],k=p.map(a),n[40]=u,n[41]=w,n[42]=y,n[43]=s,n[44]=t,n[45]=p,n[46]=q,n[47]=k}else k=n[47];return n[55]!==k?(l=(0,c.jsx)(an.Menu,{children:k}),n[55]=k,n[56]=l):l=n[56],n[57]!==j||n[58]!==l?(m=(0,c.jsx)(o.MenuButton,{button:j,id:"create-menu",menu:l,popover:gL}),n[57]=j,n[58]=l,n[59]=m):m=n[59],m}function gO(a,b){return a[b.id]=b,a}function gP(a){return!a.granted}function gQ(a){return null!=a}let gR=(0,d.memo)(function(a){let{initialValueTemplateItems:b=e.EMPTY_ARRAY,menuItems:f=e.EMPTY_ARRAY,menuItemGroups:g=e.EMPTY_ARRAY,actionHandlers:h=e.EMPTY_OBJECT}=a,i=(0,e.useTemplates)(),j=(0,d.useCallback)(a=>{if("string"==typeof a.action&&!(a.action in h))return console.warn("No handler for action:",a.action),!1;let b="function"==typeof a.action?a.action:"string"==typeof a.action?h[a.action]:null;return!!b&&(b(a.params),!0)},[h]),k=(0,d.useMemo)(()=>d2({actionHandler:j,menuItemGroups:g,menuItems:f.filter(a=>a.intent?.type!=="create")}),[j,g,f]),l=(0,d.useMemo)(()=>k.filter(d0),[k]),m=(0,d.useMemo)(()=>k.filter(d1),[k]),n=(0,d.useMemo)(()=>f.map((a,b)=>{if(a.intent?.type!=="create")return null;let{params:c}=a.intent;if(!c)return null;let d=Array.isArray(c)?c[0]:c,e=Array.isArray(c)?c[1]:void 0,f=d.template||d.type;if(!f)return null;let g=i.find(a=>a.id===f);return g?{item:a,template:g,templateParams:e,menuItemIndex:b,initialDocumentId:d.id}:null}).filter(gQ).map(({initialDocumentId:a,item:b,template:c,menuItemIndex:d,templateParams:e})=>({id:`menuItem${d}`,initialDocumentId:a,templateId:c.id,type:"initialValueTemplateItem",title:b.title||c.title,i18n:b.i18n||c.i18n,icon:b.icon,description:c.description,parameters:e,schemaType:c.schemaType})),[f,i]),o=(0,d.useMemo)(()=>(0,aD.default)([...n,...b],a=>(a=>{let b=a=>"object"==typeof a&&a?Array.isArray(a)?a.map(b):Object.entries(a).sort(([a],[b])=>a.localeCompare(b,"en")):a;return JSON.stringify(b(JSON.parse(JSON.stringify(a))))})([a.initialDocumentId,a.templateId,a.parameters])),[n,b]);return(0,c.jsxs)(an.Flex,{gap:1,children:[(0,c.jsx)(gN,{templateItems:o}),l.map(a=>(0,c.jsx)(cy,{node:a},a.key)),m.length>0&&(0,c.jsx)(cn,{nodes:m})]})});function gS(a){let b,d,f,g,h,i,j,k=(0,am.c)(16),{t:l}=(0,e.useTranslation)(r),{layout:m,value:n}=a;return k[0]===Symbol.for("react.memo_cache_sentinel")?(b={Code:"code"},k[0]=b):b=k[0],k[1]!==n._type?(d={documentType:n._type},k[1]=n._type,k[2]=d):d=k[2],k[3]!==l||k[4]!==d?(f=(0,c.jsx)("em",{children:(0,c.jsx)(e.Translate,{t:l,i18nKey:"pane-item.missing-schema-type.title",components:b,values:d})}),k[3]=l,k[4]=d,k[5]=f):f=k[5],k[6]===Symbol.for("react.memo_cache_sentinel")?(g={Code:"code"},k[6]=g):g=k[6],k[7]!==n._id?(h={documentId:n._id},k[7]=n._id,k[8]=h):h=k[8],k[9]!==l||k[10]!==h?(i=(0,c.jsx)(e.Translate,{t:l,i18nKey:"pane-item.missing-schema-type.subtitle",components:g,values:h}),k[9]=l,k[10]=h,k[11]=i):i=k[11],k[12]!==m||k[13]!==f||k[14]!==i?(j=(0,c.jsx)(e.SanityDefaultPreview,{title:f,subtitle:i,media:gT,layout:m}),k[12]=m,k[13]=f,k[14]=i,k[15]=j):j=k[15],j}function gT(){return(0,c.jsx)(i.WarningOutlineIcon,{})}function gU(a,b,c){return!1!==a&&(a||b&&b.icon||c||!1)}function gV(a){let b,f,g,h,j,k,l,m,n=(0,am.c)(42),{icon:o,id:p,layout:q,pressed:r,schemaType:s,selected:t,title:u,value:v,margin:w,marginBottom:x,marginTop:y}=a,z=void 0===q?"default":q,A=(0,e.useSchema)(),B=(0,e.useDocumentPreviewStore)(),{ChildLink:C}=cO(),D=(0,e.useDocumentPresence)(p),E=!!(s&&s.name&&A.get(s.name)),[F,G]=(0,d.useState)(!1);a:{let a,d,f,g;if(v&&(0,ap.isSanityDocument)(v)){let a,d;if(!s||!E){let a;n[0]!==v?(a=(0,c.jsx)(gS,{value:v}),n[0]=v,n[1]=a):a=n[1],b=a;break a}n[2]!==o||n[3]!==s?(a=gU(o,s,i.DocumentIcon),n[2]=o,n[3]=s,n[4]=a):a=n[4],n[5]!==D||n[6]!==B||n[7]!==z||n[8]!==s||n[9]!==a||n[10]!==v?(d=(0,c.jsx)(gt,{documentPreviewStore:B,icon:a,layout:z,schemaType:s,value:v,presence:D}),n[5]=D,n[6]=B,n[7]=z,n[8]=s,n[9]=a,n[10]=v,n[11]=d):d=n[11],b=d;break a}n[12]===Symbol.for("react.memo_cache_sentinel")?(a={opacity:.5},n[12]=a):a=n[12],n[13]===Symbol.for("react.memo_cache_sentinel")?(d=(0,c.jsx)(an.Box,{style:a,children:(0,c.jsx)(an.Text,{muted:!0,size:1,children:(0,c.jsx)(i.ChevronRightIcon,{})})}),n[13]=d):d=n[13],n[14]!==o||n[15]!==s?(f=gU(o,s,i.FolderIcon),n[14]=o,n[15]=s,n[16]=f):f=n[16],n[17]!==f||n[18]!==u?(g=(0,c.jsx)(e.SanityDefaultPreview,{status:d,icon:f,layout:"compact",title:u}),n[17]=f,n[18]=u,n[19]=g):g=n[19],b=g}let H=b;n[20]===Symbol.for("react.memo_cache_sentinel")?(f=a=>{if(a.metaKey)return void G(!1);G(!0)},n[20]=f):f=n[20];let I=f;n[21]===Symbol.for("react.memo_cache_sentinel")?(g=()=>G(!1),n[21]=g):g=n[21],n[22]!==t?(h=[t],n[22]=t,n[23]=h):h=n[23],(0,d.useEffect)(g,h);let[J,K]=(0,d.useState)(!1),L=(0,d.useRef)(null);n[24]===Symbol.for("react.memo_cache_sentinel")?(j=()=>{L.current=setTimeout(()=>(0,d.startTransition)(()=>K(!0)),400)},n[24]=j):j=n[24];let M=j;n[25]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{L.current&&clearTimeout(L.current),(0,d.startTransition)(()=>K(!1))},n[25]=k):k=n[25];let N=k,O=`pane-item-${u}`,P=t||F;return n[26]!==p||n[27]!==J||n[28]!==s||n[29]!==v?(l=J&&s?.name&&v&&(0,ap.isSanityDocument)(v)&&(0,c.jsx)(gW,{documentId:p,documentType:s.name}),n[26]=p,n[27]=J,n[28]=s,n[29]=v,n[30]=l):l=n[30],n[31]!==p||n[32]!==w||n[33]!==x||n[34]!==y||n[35]!==r||n[36]!==H||n[37]!==l||n[38]!==O||n[39]!==C||n[40]!==P?(m=(0,c.jsxs)(e.PreviewCard,{"data-testid":O,__unstable_focusRing:!0,as:C,childId:p,"data-as":"a",margin:w,marginBottom:x,marginTop:y,onClick:I,onMouseEnter:M,onMouseLeave:N,pressed:r,radius:2,selected:P,sizing:"border",tabIndex:-1,tone:"inherit",children:[H,l]}),n[31]=p,n[32]=w,n[33]=x,n[34]=y,n[35]=r,n[36]=H,n[37]=l,n[38]=O,n[39]=C,n[40]=P,n[41]=m):m=n[41],m}function gW(a){let b,c=(0,am.c)(2),{documentId:d,documentType:g}=a;return c[0]!==d?(b=(0,f.getPublishedId)(d),c[0]=d,c[1]=b):b=c[1],(0,e.useEditState)(b,g),null}gW.displayName="PreloadDocumentPane";let gX=(0,d.memo)(a=>{let b,d,g=(0,am.c)(10),{actions:h,children:i,actionProps:j,onActionComplete:k,group:l}=a;return g[0]!==j.id||g[1]!==j.liveEditSchemaType||g[2]!==i?(b=a=>{let{states:b}=a;return(0,c.jsx)(gZ,{states:b,documentId:j.liveEditSchemaType?(0,f.getPublishedId)(j.id):(0,f.getDraftId)(j.id),children:i})},g[0]=j.id,g[1]=j.liveEditSchemaType,g[2]=i,g[3]=b):b=g[3],g[4]!==j||g[5]!==h||g[6]!==l||g[7]!==k||g[8]!==b?(d=(0,c.jsx)(e.GetHookCollectionState,{onReset:k,hooks:h,args:j,group:l,children:b}),g[4]=j,g[5]=h,g[6]=l,g[7]=k,g[8]=b,g[9]=d):d=g[9],d});gX.displayName="Memo(RenderActionCollectionState)";let gY=["delete","duplicate","publish","unpublish","unlinkFromCanvas","editInCanvas","linkToCanvas","schedule"],gZ=a=>{let b,c=(0,am.c)(9),{states:d,children:f,documentId:g}=a,{t:h}=(0,e.useTranslation)(r),{isLinked:i}=(0,e.useCanvasCompanionDoc)(g);a:{let a;if(i){let a;if(c[0]!==f||c[1]!==d||c[2]!==h){let b;c[4]!==h?(b=a=>a.action&&gY.includes(a.action)?a:{...a,disabled:!0,title:h("action.disabled-by-canvas.tooltip")},c[4]=h,c[5]=b):b=c[5],a=f({states:d.map(b)}),c[0]=f,c[1]=d,c[2]=h,c[3]=a}else a=c[3];b=a;break a}c[6]!==f||c[7]!==d?(a=f({states:d}),c[6]=f,c[7]=d,c[8]=a):a=c[8],b=a}return b},g$=(0,d.memo)(a=>{let b,d=(0,am.c)(4),{badges:f,children:g,badgeProps:h}=a;return d[0]!==h||d[1]!==f||d[2]!==g?(b=(0,c.jsx)(e.GetHookCollectionState,{hooks:f,args:h,children:g}),d[0]=h,d[1]=f,d[2]=g,d[3]=b):b=d[3],b});g$.displayName="Memo(RenderBadgeCollectionState)";let g_={by:[{field:"_updatedAt",direction:"desc"}]},g0={},g1=(0,ar.styled)(an.Box)`
  position: relative;
  opacity: ${a=>a.$opacity||1};
  transition: opacity 0.4s;
`,g2=(0,ar.styled)(an.Box)`
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
`,g3=[...Array(30).keys()];function g4(a){let b,d,f=(0,am.c)(4),{layout:g}=a;return f[0]!==g?(b=g3.map(a=>(0,c.jsx)(e.SanityDefaultPreview,{isPlaceholder:!0,layout:g},a)),f[0]=g,f[1]=b):b=f[1],f[2]!==b?(d=(0,c.jsx)(an.Stack,{paddingX:3,paddingY:2,paddingTop:0,space:1,children:b}),f[2]=b,f[3]=d):d=f[3],d}function g5(a){let b,g,h,i,j,k,l,m=(0,am.c)(66),{childItemId:n,error:o,isRetrying:p,autoRetry:q,filterIsSimpleTypeConstraint:s,hasMaxItems:t,hasSearchQuery:u,isActive:v,isLazyLoading:w,muted:x,isLoading:y,isConnected:z,retryCount:A,canRetry:B,items:C,layout:D,loadingVariant:E,onEndReached:F,onRetry:G,paneTitle:H,searchInputElement:I,showIcons:J}=a,K=(0,e.useSchema)(),{collapsed:L}=b7(),{collapsed:M,index:N}=cd(),[O,P]=(0,d.useState)(!M),{t:Q}=(0,e.useTranslation)(r);m[0]!==F||m[1]!==O?(b=()=>{O&&F()},m[0]=F,m[1]=O,m[2]=b):b=m[2];let R=b;m[3]!==M?(g=()=>{if(M)return;let a=setTimeout(()=>{P(!0)},0);return()=>{clearTimeout(a)}},m[3]=M,m[4]=g):g=m[4],m[5]!==M||m[6]!==C?(h=[M,C],m[5]=M,m[6]=C,m[7]=h):h=m[7],(0,d.useEffect)(g,h),m[8]!==n||m[9]!==t||m[10]!==v||m[11]!==w||m[12]!==C.length||m[13]!==D||m[14]!==K||m[15]!==J||m[16]!==Q?(i=(a,b)=>{let{activeIndex:d}=b,g=(0,f.getPublishedId)(a._id),h=n===g,i=!v&&h,j=v&&h,k=d===C.length-1,l=k&&w,m=k&&t;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(gV,{icon:!1!==J&&void 0,id:g,layout:D,marginBottom:1,pressed:i,schemaType:K.get(a._type),selected:j,value:a}),l&&(0,c.jsx)(e.LoadingBlock,{}),m&&(0,c.jsx)(an.Box,{marginY:1,paddingX:3,paddingY:4,children:(0,c.jsx)(an.Text,{align:"center",muted:!0,size:1,children:Q("panes.document-list-pane.max-items.text",{limit:2e3})})})]})},m[8]=n,m[9]=t,m[10]=v,m[11]=w,m[12]=C.length,m[13]=D,m[14]=K,m[15]=J,m[16]=Q,m[17]=i):i=m[17];let S=i;a:{let a,b;if(u){let a,b;m[18]!==Q?(a=Q("panes.document-list-pane.no-documents.text"),m[18]=Q,m[19]=a):a=m[19],m[20]!==a?(b=(0,c.jsx)(an.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,c.jsx)(an.Container,{width:1,children:(0,c.jsx)(an.Box,{paddingX:4,paddingY:5,children:(0,c.jsx)(an.Text,{align:"center",muted:!0,children:a})})})}),m[20]=a,m[21]=b):b=m[21],j=b;break a}m[22]!==s||m[23]!==Q?(a=Q(s?"panes.document-list-pane.no-documents-of-type.text":"panes.document-list-pane.no-matching-documents.text"),m[22]=s,m[23]=Q,m[24]=a):a=m[24],m[25]!==a?(b=(0,c.jsx)(an.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,c.jsx)(an.Container,{width:1,children:(0,c.jsx)(an.Box,{paddingX:4,paddingY:5,children:(0,c.jsx)(an.Text,{align:"center",muted:!0,children:a})})})}),m[25]=a,m[26]=b):b=m[26],j=b}let T=j;b:{let a,b;if(!O){k=null;break b}let d=window.navigator.onLine;if(o){let a,b,f,g,h,i,j;m[27]!==Q?(a=Q("panes.document-list-pane.error.title"),m[27]=Q,m[28]=a):a=m[28],m[29]!==a?(b=(0,c.jsx)(an.Heading,{as:"h3",children:a}),m[29]=a,m[30]=b):b=m[30],m[31]!==o||m[32]!==Q?(f=e.isDev?(0,c.jsx)(e.Translate,{t:Q,i18nKey:"panes.document-list-pane.error.text.dev",values:{error:o.message},components:{Code:g6}}):Q(d?"panes.document-list-pane.error.text":"panes.document-list-pane.error.text.offline"),m[31]=o,m[32]=Q,m[33]=f):f=m[33],m[34]!==f?(g=(0,c.jsx)(an.Text,{as:"p",children:f}),m[34]=f,m[35]=g):g=m[35];let l=d&&B?G:void 0;m[36]!==o||m[37]!==p||m[38]!==l?(h=(0,c.jsx)(e.ErrorActions,{error:o,eventId:null,onRetry:l,isRetrying:p}),m[36]=o,m[37]=p,m[38]=l,m[39]=h):h=m[39],m[40]!==q||m[41]!==B||m[42]!==p||m[43]!==A||m[44]!==Q?(i=B?(0,c.jsx)(an.Text,{as:"p",muted:!0,size:1,children:p?Q("panes.document-list-pane.error.retrying",{count:A}):q?Q("panes.document-list-pane.error.will-retry-automatically",{count:A}):Q("panes.document-list-pane.error.max-retries-attempted",{count:A})}):null,m[40]=q,m[41]=B,m[42]=p,m[43]=A,m[44]=Q,m[45]=i):i=m[45],m[46]!==h||m[47]!==i||m[48]!==b||m[49]!==g?(j=(0,c.jsx)(an.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,c.jsx)(an.Container,{width:1,children:(0,c.jsxs)(an.Stack,{paddingX:4,paddingY:5,space:4,children:[b,g,h,i]})})}),m[46]=h,m[47]=i,m[48]=b,m[49]=g,m[50]=j):j=m[50],k=j;break b}if(z&&!y&&0===C.length){k=T;break b}if("initial"===E&&y){let a;m[51]!==D?(a=(0,c.jsx)(cH,{ms:300,children:(0,c.jsx)(g4,{layout:D})}),m[51]=D,m[52]=a):a=m[52],k=a;break b}if("spinner"===E&&y){k=null;break b}let f=`${N}-${M}`,g=x?.8:1;m[53]!==R||m[54]!==C||m[55]!==f||m[56]!==H||m[57]!==S||m[58]!==I?(a=(0,c.jsx)(g2,{children:(0,c.jsx)(e.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:H,canReceiveFocus:!0,inputElement:I,itemHeight:51,items:C,onEndReached:R,onlyShowSelectionWhenActive:!0,overscan:10,paddingBottom:1,paddingX:3,renderItem:S,wrapAround:!1},f)}),m[53]=R,m[54]=C,m[55]=f,m[56]=H,m[57]=S,m[58]=I,m[59]=a):a=m[59],m[60]!==g||m[61]!==a?(b=(0,c.jsx)(g1,{overflow:"hidden",height:"fill",$opacity:g,children:a}),m[60]=g,m[61]=a,m[62]=b):b=m[62],k=b}let U=k,V=L||"initial"===E?"hidden":"auto";return m[63]!==U||m[64]!==V?(l=(0,c.jsx)(ce,{"data-testid":"document-list-pane",overflow:V,children:U}),m[63]=U,m[64]=V,m[65]=l):l=m[65],l}function g6(a){let{children:b}=a;return(0,c.jsx)("code",{children:b})}function g7(a,b={}){try{let c=function a(b){switch(b.type){case"OpCall":{let{left:a,right:c}=b;switch(b.op){case"==":return"AccessAttribute"!==a.type||"_type"!==a.name||a.base?"AccessAttribute"!==c.type||"_type"!==c.name||c.base||"Value"!==a.type||"string"!=typeof a.value?null:new Set([a.value]):"Value"!==c.type||"string"!=typeof c.value?null:new Set([c.value]);case"in":{if("AccessAttribute"!==a.type||"_type"!==a.name||a.base||"Array"!==c.type)return null;let b=new Set;for(let a of c.elements){if(a.isSplat||"Value"!==a.value.type||"string"!=typeof a.value.value)return null;b.add(a.value.value)}return b.size?b:null}default:return null}}case"Group":return a(b.base);case"Or":{let c=a(b.left);if(!c)return null;let d=a(b.right);return d?new Set([...c,...d]):null}case"And":{let c=a(b.left),d=a(b.right);return c||d?new Set([...c||[],...d||[]]):null}default:return null}}((0,a_.parse)(a,{params:b}));return c?Array.from(c).sort():null}catch{return null}}let g8=(0,e.createSWR)({maxSize:100});function g9(a){let{client:b,schema:c,sort:d,perspective:f,limit:g,params:h,filter:i,searchQuery:j,staticTypeNames:k,maxFieldDepth:l,searchStrategy:m}=a,n=d.by,o=d?.extendedProjection,p=(0,aB.defer)(()=>b.listen(`*[${i}]`,h,{events:["welcome","mutation","reconnect"],includeAllVersions:!0,includeResult:!1,visibility:"query",tag:"listen-search-query"})).pipe((0,aB.mergeMap)((a,b)=>{let c=0===b;return c&&"reconnect"===a.type?(0,aB.throwError)(()=>Error("Failed to establish EventSource connection")):c&&"welcome"!==a.type?(0,aB.throwError)(()=>Error(`Received unexpected type of first event "${a.type}"`)):(0,aB.of)(a)}),(0,aB.share)()),[q,r]=(0,aB.partition)(p,a=>"welcome"===a.type),s=JSON.stringify({fiilter:i,limit:g,params:h,searchQuery:j,perspective:f,sort:d,staticTypeNames:k});return(0,aB.merge)(q,r.pipe((0,aB.throttleTime)(1e3,aB.asyncScheduler,{leading:!0,trailing:!0}))).pipe((0,a2.exhaustMapWithTrailing)(a=>(k?(0,aB.of)(k):b.observable.fetch(`array::unique(*[${i}][]._type)`,h)).pipe((0,aB.mergeMap)(p=>{let q=(0,e.getSearchableTypes)(c,k||[]).filter(a=>!!p.includes(a.name)&&(u(a,d.by,!0),!0)),r=(0,e.createSearch)(q,b,{filter:i,params:h,strategy:m,maxDepth:l}),s=()=>r({query:j||"",types:q},{__unstable_extendedProjection:o,comments:[`findability-source: ${j?"list-query":"list"}`],limit:g,skipSortByScore:!0,sort:n,perspective:f}).pipe((0,aB.map)(a=>a.hits.map(({hit:a})=>a)),(0,aB.map)(a=>({type:"result",documents:a})));return"mutation"===a.type&&"query"!==a.visibility?(0,aB.timer)(1200).pipe((0,aB.mergeMap)(s)):"reconnect"===a.type?(0,aB.of)(a):s()}))),(0,aA.scan)((a,b)=>({connected:"reconnect"!==b.type,documents:"result"===b.type?b.documents:a?.documents||[]}),null),(0,aB.filter)(a=>null!==a),g8(s),(0,aB.map)(({fromCache:a,value:b})=>({fromCache:a,...b})))}let ha={error:null,isRetrying:!1,retryCount:0,autoRetry:!1,canRetry:!1,isLoading:!0,isLoadingFullList:!1,fromCache:!1,items:[]},hb="[WARNING: This was thrown as a non-error. Only Error instances should be thrown]",hc=ar.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,hd=ar.keyframes`
  0% {
    opacity: 0;
  }
  50% {
    opacity: 0.1;
  }
  100% {
    opacity: 0.4;
  }
`,he=(0,ar.styled)(i.SpinnerIcon)`
  animation: ${hc} 500ms linear infinite;
`,hf=(0,ar.styled)(i.SpinnerIcon)`
  animation: ${hc} 1500ms linear infinite;
  opacity: 0.4;
`,hg=(0,ar.styled)(i.SpinnerIcon)`
  animation:
    ${hc} 1500ms linear infinite,
    ${hd} 1000ms linear;
  opacity: 0.4;
`,hh=(0,d.memo)(function(a){let{childItemId:b,isActive:f,pane:g,paneKey:h,sortOrder:j,layout:k}=a,l=(0,e.useSchema)(),m=(0,e.useActiveReleases)(),{perspectiveStack:n}=(0,e.usePerspective)(),{displayOptions:o,options:p}=g,{apiVersion:q,filter:s}=p,t=hJ(p.params||g0),u=(0,d.useMemo)(()=>{let a=g7(s,t);return a?.length===1?a[0]:null},[s,t]),v=o?.showIcons!==!1,{t:w}=(0,e.useTranslation)(r),{title:x}=(0,e.useI18nText)(g),[y,z]=(0,d.useState)(""),[A,B]=(0,d.useState)(""),[C,D]=(0,d.useState)(null),E=u&&j?function(a,b){let c=a.by.map(a=>{if(a.mapWith)return a;let c=function(a,b){let c=aC.fromString(b),d=a;for(let a of c){if(!d)return;if("string"==typeof a){d=function(a,b){if(!("fields"in a))return;let c=a.fields.find(a=>a.name===b);return c?c.type:void 0}(d,a);continue}if(!((0,ap.isKeySegment)(a)||(0,ap.isIndexSegment)(a))||"array"!==d.jsonType)return;let[b,c]=d.of||[];if(c||!b)return;if(!(0,ap.isReferenceSchemaType)(b)){d=b;continue}let[e,f]=b.to||[];if(f||!e)return;d=e}return d}(b,a.field);return c?!function(a,b){let c=a.type;for(;c;){if(c.name===b||!c.type&&c.jsonType===b)return!0;c=c.type}return!1}(c,"datetime")?"string"===c.jsonType?{...a,mapWith:"lower"}:a:{...a,mapWith:"dateTime"}:a});return c.every((b,c)=>b===a.by[c])?a:{...a,by:c}}(j,l.get(u)):j,F=(0,e.useUnique)(E),{error:G,isLoadingFullList:H,isLoading:I,items:J,fromCache:K,isRetrying:L,autoRetry:M,canRetry:N,retryCount:O,connected:P,onLoadFullList:Q,onRetry:R}=function(a){let{filter:b,params:c,sortOrder:f,searchQuery:g,perspective:h,apiVersion:i}=a,j=(0,e.useClient)({...e.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:i||e.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion}),{strategy:k}=(0,e.useWorkspace)().search,l=(0,e.useSchema)(),m=(0,e.useSearchMaxFieldDepth)(),n=(0,d.useMemo)(()=>g7(b,c),[b,c]),[[o,p]]=(0,d.useState)(()=>(0,a1.observableCallback)()),[[q,r]]=(0,d.useState)(()=>(0,a1.observableCallback)()),s=(0,d.useMemo)(()=>{let a={client:j,filter:b,limit:100,params:c,schema:l,perspective:h,searchQuery:g||"",sort:f||g_,staticTypeNames:n,maxFieldDepth:m,searchStrategy:k},d=g9(a).pipe((0,aA.shareReplay)({refCount:!0,bufferSize:1})),i=q.pipe((0,aA.withLatestFrom)(d),(0,aA.filter)(([,a])=>a?.documents.length===100),(0,aA.take)(1),(0,aA.mergeMap)(()=>(0,aB.concat)((0,aB.of)({type:"loadFullList"}),g9({...a,limit:2e3}).pipe((0,aA.map)(a=>({type:"result",result:a}))))),(0,aA.share)());return(0,aB.merge)(d.pipe((0,aA.map)(a=>({type:"result",result:a})),(0,aA.takeUntil)(i)),i).pipe((0,e.catchWithCount)((a,b,c)=>{var d,e;let f=(e=a)instanceof Error?e:"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message?Error(`${e.message} ${hb}`):Error(`${String(e)} ${hb}`),g=window.navigator.onLine,h=g&&!((d=a)instanceof a0.ChannelError)&&(d instanceof a0.ServerError||!(d instanceof a0.ClientError)||403===d.statusCode),i=b<10,j=(0,aB.merge)(g?o:(0,aB.fromEvent)(window,"online"),g&&i?(0,aB.timer)(1e3*b):aB.NEVER).pipe((0,aA.take)(1),(0,aA.switchMap)(()=>(0,aB.merge)((0,aB.of)({type:"error",error:f,retrying:!0,autoRetry:i,canRetry:h,retryCount:b}),c)));return(0,aB.concat)((0,aB.of)({type:"error",error:f,retrying:!1,autoRetry:i,canRetry:h,retryCount:b}),j)}),(0,aA.scan)((a,b)=>{if("error"===b.type)return{...a,error:b.error,retryCount:b.retryCount,isRetrying:b.retrying,autoRetry:b.autoRetry,canRetry:b.canRetry};if("result"===b.type){var c;return{...a,error:null,isRetrying:!1,fromCache:b.result.fromCache,connected:b.result.connected,isLoading:!1,items:(c=b.result.documents,(0,e.collate)(c).map(a=>{let b=a.draft||a.published||a.versions[0],c=!!a.draft;return{...b,hasPublished:!!a.published,hasDraft:c}})),isLoadingFullList:!1}}if("loadFullList"===b.type)return{...a,error:null,isLoadingFullList:!0};throw Error(`Unexpected event type: ${b.type}`)},ha))},[j,b,c,l,h,g,f,n,m,k,q,o]),{error:t,items:u,isLoading:v,fromCache:w,connected:x,canRetry:y,isLoadingFullList:z,isRetrying:A,autoRetry:B,retryCount:C}=(0,av.useObservable)(s,ha);return{error:t,onRetry:p,isLoading:v,items:u,isRetrying:A,canRetry:y,retryCount:C,autoRetry:B,connected:x,fromCache:w,onLoadFullList:r,isLoadingFullList:z}}({apiVersion:q,filter:s,perspective:n,params:t,searchQuery:y?.trim(),sortOrder:F}),S=I||m.loading,T=(0,av.useObservableEvent)(a=>a.pipe((0,aB.map)(a=>a.target.value),(0,aB.tap)(B),(0,aB.debounce)(a=>""===a?(0,aB.of)(""):(0,aB.timer)(300)),(0,aB.tap)(z))),U=(0,d.useCallback)(()=>{z(""),B("")},[]),V=(0,d.useCallback)(a=>{"Escape"===a.key&&U()},[U]),[W,X]=(0,d.useState)();(0,d.useEffect)(()=>{W||S||X(h)},[W,S,h]),(0,d.useEffect)(()=>{U(),X()},[h,U]);let Y=(0,d.useMemo)(()=>P&&S&&W===h?"spinner":P&&K?"subtle":"initial",[P,W,K,S,h]),Z=(0,d.useMemo)(()=>"spinner"===Y?he:A&&"subtle"===Y?hf:i.SearchIcon,[Y,A]);return(0,e.useReconnectingToast)(!P),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(an.Box,{paddingX:3,paddingBottom:3,children:(0,c.jsx)(an.TextInput,{"aria-label":w("panes.document-list-pane.search-input.aria-label"),autoComplete:"off",border:!1,clearButton:!!y,fontSize:[2,2,1],icon:Z,iconRight:P&&("subtle"!==Y||A)?null:hg,onChange:T,onClear:U,onKeyDown:V,padding:2,placeholder:w("panes.document-list-pane.search-input.placeholder"),radius:2,ref:D,spellCheck:!1,value:A})}),(0,c.jsx)(g5,{childItemId:b,error:G,filterIsSimpleTypeConstraint:!!u,hasMaxItems:2e3===J.length,hasSearchQuery:!!y,isActive:f,isLazyLoading:H,isLoading:S,autoRetry:M,canRetry:N,retryCount:O,isRetrying:L,isConnected:P,items:J,layout:k,muted:"subtle"===Y,loadingVariant:Y,onEndReached:Q,onRetry:R,paneTitle:x,searchInputElement:C,showIcons:v},h)]})}),hi=(0,d.memo)(a=>{let b,d,e,f,g,h,j,k,l,m=(0,am.c)(27),{contentAfter:n,index:p,initialValueTemplates:q,menuItemGroups:r,menuItems:s,setLayout:t,setSortOrder:u,title:v}=a;m[0]!==q?(b=void 0===q?[]:q,m[0]=q,m[1]=b):b=m[1];let w=b;m[2]!==r?(d=void 0===r?[]:r,m[2]=r,m[3]=d):d=m[3];let x=d;m[4]!==s?(e=void 0===s?[]:s,m[4]=s,m[5]=e):e=m[5];let y=e,{features:z}=cR(),{collapsed:A,isLast:B}=cd(),C=B&&!A?-1:0;m[6]!==t?(f=a=>{let{layout:b}=a;t(b)},m[6]=t,m[7]=f):f=m[7],m[8]!==u?(g=a=>{u(a)},m[8]=u,m[9]=g):g=m[9],m[10]!==f||m[11]!==g?(h={setLayout:f,setSortOrder:g},m[10]=f,m[11]=g,m[12]=h):h=m[12];let D=h;return m[13]!==D||m[14]!==w||m[15]!==x||m[16]!==y?(j=(0,c.jsx)(gR,{initialValueTemplateItems:w,actionHandlers:D,menuItemGroups:x,menuItems:y}),m[13]=D,m[14]=w,m[15]=x,m[16]=y,m[17]=j):j=m[17],m[18]!==z.backButton||m[19]!==p?(k=z.backButton&&p>0&&(0,c.jsx)(o.Button,{as:gc,"data-as":"a",icon:i.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:"Back"}}),m[18]=z.backButton,m[19]=p,m[20]=k):k=m[20],m[21]!==n||m[22]!==j||m[23]!==k||m[24]!==C||m[25]!==v?(l=(0,c.jsx)(o.TooltipDelayGroupProvider,{children:(0,c.jsx)(cw,{actions:j,backButton:k,contentAfter:n,tabIndex:C,title:v})}),m[21]=n,m[22]=j,m[23]=k,m[24]=C,m[25]=v,m[26]=l):l=m[26],l});function hj(a){let{row:b,table:e}=a,{selectedAnchor:f,setSelectedAnchor:g}=e.options.meta||{},h=(0,d.useCallback)(a=>{if(a.shiftKey&&null!=f){let a=b.index,c=a<f?a:f,d=a<f?f:a,g=e.getRowModel().flatRows.slice(c,d+1).map(({id:a})=>a),h=e.getSelectedRowModel().rows.map(({id:a})=>a);e.setRowSelection(()=>[...g,...h].reduce((a,b)=>({...a,[b]:!0}),{}))}else g&&(g(b.getIsSelected()?null:b.index),b.toggleSelected())},[f,b,g,e]);return(0,c.jsx)(an.Checkbox,{style:{paddingLeft:4},checked:a.row.getIsSelected(),disabled:!a.row.getCanSelect(),onChange:()=>null,onClick:h})}function hk({children:a,table:b}){let[e,f]=(0,d.useState)(null),[h,i]=(0,d.useState)([]),j=(0,d.useCallback)((a=null)=>{e?.state==="focused"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),f(a),i([])},[e]),k=(0,d.useCallback)(()=>j(),[j]),l=(0,d.useCallback)(a=>{if(!e)return;let c=b.getVisibleLeafColumns(),d=c.findIndex(a=>a.id===e.colId)+("left"===a?-1:1);d<0||d>=c.length||j({colId:c[d].id,rowIndex:e.rowIndex,state:"selected"})},[j,e,b]),m=(0,d.useCallback)(a=>{e&&i(b=>{let{rowIndex:c}=e,d=b=>b+("down"===a?1:-1);if(!b.length){let a=d(c);return a<0?[]:[a]}let f=d(b[b.length-1]);return f<0?b:f===c?[]:b.includes(f)?b.slice(0,-1):[...b,f]})},[e]),n=(0,d.useCallback)((a,b)=>{j({colId:a,rowIndex:b,state:"selected"})},[j]),o=(0,d.useCallback)(()=>{e&&(h.length?i([]):j("selected"===e.state?null:{...e,state:"selected"}))},[j,e,h.length]),p=(0,d.useCallback)((a,b)=>{if(!e)return;let c="ArrowDown"===b?"down":"up",d="down"===c?1:-1;if(a)m(c);else{let a=e.rowIndex+d;if(a<0)return;n(e.colId,a)}},[m,e,n]),q=(0,d.useCallback)(a=>{if(!e)return;let{key:b,shiftKey:c}=a;switch(b){case"Shift":break;case"Escape":o();break;case"ArrowDown":case"ArrowUp":a.preventDefault(),p(c,b);break;case"ArrowLeft":case"ArrowRight":"selected"===e.state&&(a.preventDefault(),l("ArrowLeft"===b?"left":"right"))}},[e,o,p,l]),r=(0,d.useCallback)(a=>{e&&(document.getElementById(`cell-${e.colId}-${e.rowIndex}`)?.contains(a.target)||k())},[k,e]);(0,d.useEffect)(()=>(e&&(document.addEventListener("keydown",q),document.addEventListener("click",r)),()=>{e&&(document.removeEventListener("keydown",q),document.removeEventListener("click",r))}),[r,q,e]);let s=(0,d.useCallback)(()=>f(a=>a?{...a,state:"focused"}:null),[]),t=(0,d.useCallback)((a,b)=>e?.colId!==a?null:e.rowIndex===b?"focused"===e.state?"focused":"selectedAnchor":h.includes(b)?"selectedRange":null,[e,h]),u=(0,d.useCallback)(()=>{e&&j({colId:e.colId,rowIndex:e.rowIndex+1,state:"selected"})},[j,e]),v=(0,d.useMemo)(()=>({focusAnchorCell:s,resetFocusSelection:k,setSelectedAnchorCell:n,getStateByCellId:t,submitFocusedCell:u}),[s,k,n,t,u]);return(0,c.jsx)(g.DocumentSheetListContext.Provider,{value:v,children:a})}hi.displayName="Memo(PaneHeader)";let hl=ar.styled.td`
  display: flex;
  overflow: hidden;
  box-sizing: border-box;
  width: ${({width:a})=>a}px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-bg-color);
`,hm=(0,ar.styled)(hl)`
  position: sticky;
  z-index: 2;
`;function hn(a){let{getValue:b,column:e,row:f,fieldType:h}=a,i=`cell-${e.id}-${f.index}`,[j,k]=(0,d.useState)(b()),[l,m]=(0,d.useState)(!1),n=(0,d.useRef)(null),{focusAnchorCell:o,resetFocusSelection:p,setSelectedAnchorCell:q,getStateByCellId:r,submitFocusedCell:s}=(()=>{let a=(0,d.useContext)(g.DocumentSheetListContext);if(void 0===a)throw Error("useDocumentSheetListContext must be used within an DocumentSheetListProvider");return a})(),t=r(e.id,f.index),u=(0,d.useCallback)(()=>{q(e.id,f.index),o()},[e.id,o,f.index,q]),{patchDocument:v}=a.table.options.meta||{},w=()=>{n.current?.focus(),n.current instanceof HTMLInputElement&&n.current.select()},x=(0,d.useCallback)(a=>{let{key:b}=a;"Enter"===b&&("selectedAnchor"===t&&w(),"focused"===t&&s())},[t,s]),y=(0,d.useCallback)(a=>{let b=a.clipboardData?.getData("Text");("string"==typeof b||"number"==typeof b)&&(k(b),v?.(f.id,e.id,b))},[e.id,v,f.id]),z=(0,d.useCallback)(()=>{navigator.clipboard.writeText(j.toString())},[j]);(0,d.useEffect)(()=>(("selectedAnchor"===t||"focused"===t)&&document.addEventListener("keydown",x),("selectedAnchor"===t||"selectedRange"===t)&&document.addEventListener("paste",y),"selectedAnchor"===t&&document.addEventListener("copy",z),()=>{("selectedAnchor"===t||"focused"===t)&&document.removeEventListener("keydown",x),("selectedAnchor"===t||"selectedRange"===t)&&document.removeEventListener("paste",y),"selectedAnchor"===t&&document.removeEventListener("copy",z)}),[i,t,e.id,r,z,x,y,f.index]);let A=()=>"focused"===t?"2px solid blue":"selectedRange"===t?"1px solid green":"selectedAnchor"===t?"1px solid blue":"1px solid transparent",B={onFocus:u,onBlur:()=>{l&&(v?.(f.id,e.id,j),m(!1)),p()},onMouseDown:a=>{2===a.detail?w():(a.preventDefault(),q(e.id,f.index))},"aria-selected":!!t,"data-testid":i,id:i,ref:a=>{n.current=a}};return"boolean"===h.name?(0,c.jsxs)(an.Select,{...B,onChange:()=>null,radius:0,style:{boxShadow:"none",border:A(),padding:0},value:JSON.stringify(j),children:[(0,c.jsx)("option",{value:"True",children:"True"}),(0,c.jsx)("option",{value:"False",children:"False"})]}):(0,c.jsx)(an.TextInput,{...B,size:0,radius:0,border:!1,style:{border:A(),padding:"22px 16px"},value:"string"==typeof j||"number"==typeof j?j:JSON.stringify(j),onChange:a=>{m(!0),k(a.target.value)}})}function ho(a){let b=a.column.getIsPinned(),d=b&&a.column.getIsLastColumn("left")?2:1;return(0,c.jsx)(b?hm:hl,{style:{left:a.column.getStart("left")??void 0,borderRight:`${d}px solid var(--card-border-color)`},width:a.column.getSize(),children:bH(a.column.columnDef.cell,a.getContext?.())},a.row.original._id+a.id)}let hp=a=>{let{documentPreviewStore:b,row:f,schemaType:g}=a,h=(0,d.useMemo)(()=>(0,e.getPreviewStateObservable)(b,g,f.original._id),[b,f.original._id,g]),i=(0,e.useDocumentVersionInfo)(f.original._id),{snapshot:j,isLoading:k}=(0,av.useObservable)(h,{snapshot:null,isLoading:!0});if(k)return(0,c.jsx)(an.Text,{size:1,muted:!0,children:"Loading..."});let l=j?.title??"Untitled";return(0,c.jsxs)(an.Flex,{align:"center",gap:3,children:[(0,c.jsx)(e.DocumentStatusIndicator,{draft:i.draft,published:i.published,versions:void 0}),(0,c.jsx)(an.Text,{size:1,children:l})]})},hq={accessor:(a,b)=>"function"==typeof a?{...b,accessorFn:a}:{...b,accessorKey:a},display:a=>a,group:a=>a},hr=["string","number","boolean"],hs=(a,b)=>a.fields.reduce((a,d)=>{let{type:e,name:f}=d;return hr.includes(e.name)?[...a,hq.accessor(b?`${b}.${d.name}`:d.name,{id:b?`${b}_${d.name}`:d.name,header:d.type.title,enableHiding:!0,cell:a=>(0,c.jsx)(hn,{...a,fieldType:e})})]:"object"===e.name&&(0,ap.isObjectSchemaType)(e)&&!b?[...a,hq.group({header:f,columns:hs(e,d.name)})]:a},[]),ht=a=>a.flatMap(a=>"accessorKey"in a?a:"columns"in a&&a.columns?ht(a.columns):[]);function hu({table:a}){let{t:b}=(0,e.useTranslation)(),f=a.getVisibleLeafColumns().filter(a=>a.getCanHide()).length>=5,g=(0,d.useCallback)(()=>{a.resetColumnVisibility()},[a]);return(0,c.jsx)(o.MenuButton,{button:(0,c.jsx)(o.Button,{mode:"bleed",text:b("sheet-list.edit-columns")}),id:"columns-control",menu:(0,c.jsx)(an.Menu,{padding:3,paddingTop:4,style:{width:240},children:(0,c.jsxs)(an.Flex,{direction:"column",height:"fill",gap:3,children:[(0,c.jsx)(an.Text,{weight:"semibold",size:1,children:b("sheet-list.select-fields")}),(0,c.jsx)(an.Flex,{style:{flex:"1 1 auto",maxHeight:320,overflowY:"scroll"},children:(0,c.jsx)(an.Stack,{children:a.getAllLeafColumns().filter(a=>a.getCanHide()).map(b=>(0,c.jsxs)(an.Flex,{marginY:2,align:"center",children:[(0,c.jsx)(an.Checkbox,{readOnly:(b=>{let c=b.getIsVisible(),d=1===a.getVisibleLeafColumns().filter(a=>a.getCanHide()).length;return f&&!c||d&&c})(b),checked:b.getIsVisible(),onChange:()=>{b.toggleVisibility()},id:`col-visibility-${b.id}`,style:{display:"block"}}),(0,c.jsx)(an.Box,{flex:1,paddingLeft:3,children:(0,c.jsx)(an.Text,{size:1,children:(0,c.jsx)("label",{htmlFor:`col-visibility-${b.id}`,children:b.columnDef.header?.toString()})})})]},b.id))})}),(0,c.jsx)(o.Button,{width:"fill",mode:"ghost",text:b("sheet-list.reset-columns"),onClick:g})]})}),placement:"bottom",popover:{portal:!0}})}let hv=(0,ar.styled)(an.Flex)`
  flex-shrink: 0;
`;function hw(){let a,b,d,f=(0,am.c)(5),{state:g}=(0,e.useSearchState)(),{filtersVisible:h}=g;return f[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(e.SearchHeader,{}),f[0]=a):a=f[0],f[1]!==h?(b=h&&(0,c.jsx)(e.Filters,{showTypeFilter:!1}),f[1]=h,f[2]=b):b=f[2],f[3]!==b?(d=(0,c.jsxs)(hv,{children:[a,b]}),f[3]=b,f[4]=d):d=f[4],d}let hx=ar.styled.th`
  margin: 16px;
  z-index: 1;
  padding: 22px 0px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-badge-default-bg-color);
  box-sizing: border-box;
  text-align: left;
  width: ${({width:a})=>a}px;
  max-width: ${({width:a})=>a}px;
`,hy=(0,ar.styled)(hx)`
  position: sticky;
  z-index: 2;
`,hz=ar.styled.div`
  visibility: hidden;

  ${hx}:hover & {
    visibility: visible;
  }
`;function hA(a){let{header:b,headerGroup:d}=a,{t:f}=(0,e.useTranslation)(),g=b.column.getIsPinned(),h=d.depth>0&&!b.column.parent?null:(0,c.jsx)(an.Text,{size:1,weight:"semibold",textOverflow:"ellipsis",children:bH(b.column.columnDef.header,b.getContext())}),j=b.column.getCanHide()&&(0===d.depth?!b.column.columns.length:b.column.parent),k=g&&b.column.getIsLastColumn("left")?2:1;return(0,c.jsx)(g?hy:hx,{style:{left:b.column.getStart("left")??void 0,borderRight:`${k}px solid var(--card-border-color)`},"data-testid":`header-${b.id}`,width:b.getSize(),children:(0,c.jsxs)(an.Flex,{justify:"space-between",marginX:2,align:"baseline",children:[(0,c.jsx)(o.Tooltip,{delay:500,content:h,children:(0,c.jsx)(an.Box,{style:{boxSizing:"border-box"},marginLeft:3,marginRight:3,children:h})}),j&&(0,c.jsx)(hz,{children:(0,c.jsx)(o.MenuButton,{button:(0,c.jsx)(o.Button,{tooltipProps:{content:"Open field menu"},mode:"bleed",icon:i.EllipsisHorizontalIcon,"data-testid":"field-menu-button"}),id:"field menu",popover:{placement:"bottom-end"},menu:(0,c.jsx)(an.Menu,{children:(0,c.jsx)(o.MenuItem,{text:f("sheet-list.hide-field"),icon:i.CloseIcon,onClick:()=>b.column.toggleVisibility()})})})})]})},b.id)}function hB({table:a}){return(0,c.jsx)(o.TooltipDelayGroupProvider,{children:(0,c.jsxs)(an.Flex,{gap:3,align:"center",children:[(0,c.jsx)(o.Button,{onClick:()=>a.setPageIndex(0),disabled:!a.getCanPreviousPage(),icon:i.DoubleChevronLeftIcon,tooltipProps:{content:"Go to first page"}}),(0,c.jsx)(o.Button,{onClick:()=>a.previousPage(),disabled:!a.getCanPreviousPage(),icon:i.ChevronLeftIcon,tooltipProps:{content:"Go to previous page"}}),(0,c.jsxs)(an.Text,{style:{whiteSpace:"nowrap"},children:[a.getState().pagination.pageIndex+1," of ",a.getPageCount()]}),(0,c.jsx)(o.Button,{onClick:()=>a.nextPage(),disabled:!a.getCanNextPage(),icon:i.ChevronRightIcon,tooltipProps:{content:"Go to next page"}}),(0,c.jsx)(o.Button,{onClick:()=>a.setPageIndex(a.getPageCount()-1),disabled:!a.getCanNextPage(),icon:i.DoubleChevronRightIcon,tooltipProps:{content:"Go to last page"}}),(0,c.jsx)("select",{value:a.getState().pagination.pageSize,onChange:b=>{a.setPageSize(Number(b.target.value))},children:[25,50,100].map(a=>(0,c.jsx)("option",{value:a,children:a},a))})]})})}function hC(a,b){switch(b.type){case"DOCUMENTS_SET":{let c=b.documents.reduce((a,b)=>({...a,[b._id]:b}),{});return{...a,documents:c}}case"DOCUMENT_RECEIVED":{let c=b.payload;return{...a,documents:{...a.documents,[c._id]:c}}}case"DOCUMENT_DELETED":{let{[b.id]:c,...d}=a.documents;return{...a,documents:d}}case"DOCUMENT_UPDATED":{let c=b.payload,d=c._id,e={...a.documents[d],...c};return{...a,documents:{...a.documents,[d]:e}}}default:return a}}let hD={events:["welcome","mutation","reconnect"],includeResult:!0,visibility:"query",includeAllVersions:!0,tag:"document-sheet-list-store"},hE=(0,ar.styled)(an.Flex)`
  height: 100%;
`,hF=ar.styled.div`
  overflow: auto; //our scrollable table container
  position: relative; //needed for sticky header
`,hG=ar.styled.table`
  border-collapse: separate;
  border-spacing: 0;
  font-family: arial, sans-serif;
  white-space: nowrap;
  width: 100%;
  border: 1px solid lightgray;

  thead {
    display: grid;
    position: sticky;
    top: 0;
    z-index: 10;
  }
  tr {
    padding: 0;
  }
  tr:last-child {
    border-bottom: none;
  }
`;function hH({documentSchemaType:a}){let{dispatch:b,state:g}=(0,e.useSearchState)(),{columns:h,initialColumnsVisibility:i}=function(a){let b=(0,e.useDocumentPreviewStore)(),f=(0,d.useMemo)(()=>a?[hq.display({id:"selected",enableHiding:!1,header:a=>(0,c.jsxs)(an.Box,{children:[(0,c.jsx)(an.Checkbox,{style:{paddingLeft:4},indeterminate:a.table.getIsSomeRowsSelected(),onChange:a.table.getToggleAllPageRowsSelectedHandler()}),a.table.getSelectedRowModel().rows.length," selected"]}),cell:hj}),hq.accessor("Preview",{enableHiding:!1,id:"Preview",cell:d=>(0,c.jsx)(hp,{...d,documentPreviewStore:b,schemaType:a})}),...hs(a)]:[],[b,a]),[g]=(0,d.useMemo)(()=>ht(f).reduce(([a,b],c)=>{if(!c.id)throw Error("Column must have an id");let d=c.id;return c.enableHiding?5===b?[{...a,[d]:!1},b]:[{...a,[d]:!0},b+1]:[{...a,[d]:!0},b]},[{},0]),[f]);return{columns:f,initialColumnsVisibility:g}}(a),{data:j}=function(a){let b,c,g,h,i=(0,am.c)(12),{typeName:j}=a,{state:k}=(0,e.useSearchState)();i[0]!==k.result.hits?(b=new Map,k.result.hits.forEach(a=>b.set((0,f.getPublishedId)(a.hit._id),a.hit)),i[0]=k.result.hits,i[1]=b):b=i[1];let l=b,m=`_type == "${j}"`;i[2]!==m?(c={filter:m},i[2]=m,i[3]=c):c=i[3];let{data:n,isLoading:o}=function(a){let b,c,g,h,i,j,k,l,m,n,o=(0,am.c)(27),{filter:p,params:q,apiVersion:r}=a,s=`*[${p}][0...2000]`,t=r||e.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion;o[0]!==t?(b={...e.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:t},o[0]=t,o[1]=b):b=o[1];let u=(0,e.useClient)(b);o[2]===Symbol.for("react.memo_cache_sentinel")?(c={documents:{}},o[2]=c):c=o[2];let[v,w]=(0,d.useReducer)(hC,c),[x,y]=(0,d.useState)(null!==u),[z,A]=(0,d.useState)(null);o[3]!==s||o[4]!==u||o[5]!==q?(g=async()=>{if(!u)return void y(!1);try{let a=await u.fetch(s,q);w({type:"DOCUMENTS_SET",documents:a}),y(!1)}catch(a){A(a)}},o[3]=s,o[4]=u,o[5]=q,o[6]=g):g=o[6];let B=g;o[7]!==B?(h=async a=>{if("welcome"===a.type&&(y(!0),await B(),y(!1)),"reconnect"===a.type&&y(!0),"mutation"===a.type){if("appear"===a.transition){let b=a.result;b&&w({type:"DOCUMENT_RECEIVED",payload:b})}if("disappear"===a.transition&&w({type:"DOCUMENT_DELETED",id:a.documentId}),"update"===a.transition){let b=a.result;b&&w({type:"DOCUMENT_UPDATED",payload:b})}}},o[7]=B,o[8]=h):h=o[8];let C=h;a:{let a;if(!u){let a;o[9]===Symbol.for("react.memo_cache_sentinel")?(a=(0,aB.of)(),o[9]=a):a=o[9],i=a;break a}if(o[10]!==s||o[11]!==u.observable||o[12]!==q){let b;o[14]===Symbol.for("react.memo_cache_sentinel")?(b=a=>(A(a),(0,aB.of)(a)),o[14]=b):b=o[14],a=u.observable.listen(s,q,hD).pipe((0,aB.catchError)(b)),o[10]=s,o[11]=u.observable,o[12]=q,o[13]=a}else a=o[13];i=a}let D=i;o[15]!==C||o[16]!==D?(j=()=>{let a=D.subscribe(C);return()=>{a?.unsubscribe()}},k=[C,D],o[15]=C,o[16]=D,o[17]=j,o[18]=k):(j=o[17],k=o[18]),(0,d.useEffect)(j,k),o[19]!==v.documents?(l=Object.keys(v.documents).reduce((a,b)=>{let c=v.documents[b],d=c._id===(0,f.getDraftId)(c._id),e=d?c._id:(0,f.getDraftId)(c._id);return a[e]&&!d||(a[e]=c),a},{}),o[19]=v.documents,o[20]=l):l=o[20];let E=l;o[21]!==E?(m=Object.values(E),o[21]=E,o[22]=m):m=o[22];let F=m;return o[23]!==F||o[24]!==z||o[25]!==x?(n={data:F,isLoading:x,error:z},o[23]=F,o[24]=z,o[25]=x,o[26]=n):n=o[26],n}(c);if(i[4]!==n||i[5]!==l){let a;i[7]!==l?(a=a=>l.has((0,f.getPublishedId)(a._id)),i[7]=l,i[8]=a):a=i[8],g=n.filter(a),i[4]=n,i[5]=l,i[6]=g}else g=i[6];let p=g;return i[9]!==p||i[10]!==o?(h={data:p,isLoading:o},i[9]=p,i[10]=o,i[11]=h):h=i[11],h}({typeName:a.name}),[k,l]=(0,d.useState)(null),m=g.result.hits.length,n=function(a){let b={state:{},onStateChange:()=>{},renderFallbackValue:null,...a},[c]=d.useState(()=>({current:function(a){var b,c;let d=[...bG,...null!=(b=a._features)?b:[]],e={_features:d},f=e._features.reduce((a,b)=>Object.assign(a,null==b.getDefaultOptions?void 0:b.getDefaultOptions(e)),{}),g={...null!=(c=a.initialState)?c:{}};e._features.forEach(a=>{var b;g=null!=(b=null==a.getInitialState?void 0:a.getInitialState(g))?b:g});let h=[],i=!1,j={_features:d,options:{...f,...a},initialState:g,_queue:a=>{h.push(a),i||(i=!0,Promise.resolve().then(()=>{for(;h.length;)h.shift()();i=!1}).catch(a=>setTimeout(()=>{throw a})))},reset:()=>{e.setState(e.initialState)},setOptions:a=>{var b;b=a3(a,e.options),e.options=e.options.mergeOptions?e.options.mergeOptions(f,b):{...f,...b}},getState:()=>e.options.state,setState:a=>{null==e.options.onStateChange||e.options.onStateChange(a)},_getRowId:(a,b,c)=>{var d;return null!=(d=null==e.options.getRowId?void 0:e.options.getRowId(a,b,c))?d:`${c?[c.id,b].join("."):b}`},getCoreRowModel:()=>(e._getCoreRowModel||(e._getCoreRowModel=e.options.getCoreRowModel(e)),e._getCoreRowModel()),getRowModel:()=>e.getPaginationRowModel(),getRow:(a,b)=>{let c=(b?e.getPrePaginationRowModel():e.getRowModel()).rowsById[a];if(!c&&!(c=e.getCoreRowModel().rowsById[a]))throw Error();return c},_getDefaultColumnDef:a6(()=>[e.options.defaultColumn],a=>{var b;return a=null!=(b=a)?b:{},{header:a=>{let b=a.header.column.columnDef;return b.accessorKey?b.accessorKey:b.accessorFn?b.id:null},cell:a=>{var b,c;return null!=(b=null==(c=a.renderValue())||null==c.toString?void 0:c.toString())?b:null},...e._features.reduce((a,b)=>Object.assign(a,null==b.getDefaultColumnDef?void 0:b.getDefaultColumnDef()),{}),...a}},a7(a,"debugColumns","_getDefaultColumnDef")),_getColumnDefs:()=>e.options.columns,getAllColumns:a6(()=>[e._getColumnDefs()],a=>{let b=function(a,c,d){return void 0===d&&(d=0),a.map(a=>{let f=function(a,b,c,d){var e,f;let g,h={...a._getDefaultColumnDef(),...b},i=h.accessorKey,j=null!=(e=null!=(f=h.id)?f:i?"function"==typeof String.prototype.replaceAll?i.replaceAll(".","_"):i.replace(/\./g,"_"):void 0)?e:"string"==typeof h.header?h.header:void 0;if(h.accessorFn?g=h.accessorFn:i&&(g=i.includes(".")?a=>{let b=a;for(let a of i.split(".")){var c;b=null==(c=b)?void 0:c[a]}return b}:a=>a[h.accessorKey]),!j)throw Error();let k={id:`${String(j)}`,accessorFn:g,parent:d,depth:c,columnDef:h,columns:[],getFlatColumns:a6(()=>[!0],()=>{var a;return[k,...null==(a=k.columns)?void 0:a.flatMap(a=>a.getFlatColumns())]},a7(a.options,"debugColumns","column.getFlatColumns")),getLeafColumns:a6(()=>[a._getOrderColumnsFn()],a=>{var b;return null!=(b=k.columns)&&b.length?a(k.columns.flatMap(a=>a.getLeafColumns())):[k]},a7(a.options,"debugColumns","column.getLeafColumns"))};for(let b of a._features)null==b.createColumn||b.createColumn(k,a);return k}(e,a,d,c);return f.columns=a.columns?b(a.columns,f,d+1):[],f})};return b(a)},a7(a,"debugColumns","getAllColumns")),getAllFlatColumns:a6(()=>[e.getAllColumns()],a=>a.flatMap(a=>a.getFlatColumns()),a7(a,"debugColumns","getAllFlatColumns")),_getAllFlatColumnsById:a6(()=>[e.getAllFlatColumns()],a=>a.reduce((a,b)=>(a[b.id]=b,a),{}),a7(a,"debugColumns","getAllFlatColumnsById")),getAllLeafColumns:a6(()=>[e.getAllColumns(),e._getOrderColumnsFn()],(a,b)=>b(a.flatMap(a=>a.getLeafColumns())),a7(a,"debugColumns","getAllLeafColumns")),getColumn:a=>e._getAllFlatColumnsById()[a]};Object.assign(e,j);for(let a=0;a<e._features.length;a++){let b=e._features[a];null==b||null==b.createTable||b.createTable(e)}return e}(b)})),[e,f]=d.useState(()=>c.current.initialState);return c.current.setOptions(b=>({...b,...a,state:{...e,...a.state},onStateChange:b=>{f(b),null==a.onStateChange||a.onStateChange(b)}})),c.current}({data:j,columns:h,getCoreRowModel:a=>a6(()=>[a.options.data],b=>{let c={rows:[],flatRows:[],rowsById:{}},d=function(b,e,f){void 0===e&&(e=0);let g=[];for(let i=0;i<b.length;i++){let j=bb(a,a._getRowId(b[i],i,f),b[i],i,e,void 0,null==f?void 0:f.id);if(c.flatRows.push(j),c.rowsById[j.id]=j,g.push(j),a.options.getSubRows){var h;j.originalSubRows=a.options.getSubRows(b[i],i),null!=(h=j.originalSubRows)&&h.length&&(j.subRows=d(j.originalSubRows,e+1,j))}}return g};return c.rows=d(b),c},a7(a.options,"debugTable","getRowModel",()=>a._autoResetPageIndex())),getFilteredRowModel:a=>a6(()=>[a.getPreFilteredRowModel(),a.getState().columnFilters,a.getState().globalFilter],(b,c,d)=>{var e,f;let g,h;if(!b.rows.length||!(null!=c&&c.length)&&!d){for(let a=0;a<b.flatRows.length;a++)b.flatRows[a].columnFilters={},b.flatRows[a].columnFiltersMeta={};return b}let i=[],j=[];(null!=c?c:[]).forEach(b=>{var c;let d=a.getColumn(b.id);if(!d)return;let e=d.getFilterFn();e&&i.push({id:b.id,filterFn:e,resolvedValue:null!=(c=null==e.resolveFilterValue?void 0:e.resolveFilterValue(b.value))?c:b.value})});let k=(null!=c?c:[]).map(a=>a.id),l=a.getGlobalFilterFn(),m=a.getAllLeafColumns().filter(a=>a.getCanGlobalFilter());d&&l&&m.length&&(k.push("__global__"),m.forEach(a=>{var b;j.push({id:a.id,filterFn:l,resolvedValue:null!=(b=null==l.resolveFilterValue?void 0:l.resolveFilterValue(d))?b:d})}));for(let a=0;a<b.flatRows.length;a++){let c=b.flatRows[a];if(c.columnFilters={},i.length)for(let a=0;a<i.length;a++){let b=(g=i[a]).id;c.columnFilters[b]=g.filterFn(c,b,g.resolvedValue,a=>{c.columnFiltersMeta[b]=a})}if(j.length){for(let a=0;a<j.length;a++){let b=(h=j[a]).id;if(h.filterFn(c,b,h.resolvedValue,a=>{c.columnFiltersMeta[b]=a})){c.columnFilters.__global__=!0;break}}!0!==c.columnFilters.__global__&&(c.columnFilters.__global__=!1)}}return e=b.rows,f=a=>{for(let b=0;b<k.length;b++)if(!1===a.columnFilters[k[b]])return!1;return!0},a.options.filterFromLeafRows?function(a,b,c){var d;let e=[],f={},g=null!=(d=c.options.maxLeafRowFilterDepth)?d:100,h=function(a,d){void 0===d&&(d=0);let i=[];for(let k=0;k<a.length;k++){var j;let l=a[k],m=bb(c,l.id,l.original,l.index,l.depth,void 0,l.parentId);if(m.columnFilters=l.columnFilters,null!=(j=l.subRows)&&j.length&&d<g){if(m.subRows=h(l.subRows,d+1),b(l=m)&&!m.subRows.length||b(l)||m.subRows.length){i.push(l),f[l.id]=l,e.push(l);continue}}else b(l=m)&&(i.push(l),f[l.id]=l,e.push(l))}return i};return{rows:h(a),flatRows:e,rowsById:f}}(e,f,a):function(a,b,c){var d;let e=[],f={},g=null!=(d=c.options.maxLeafRowFilterDepth)?d:100,h=function(a,d){void 0===d&&(d=0);let i=[];for(let k=0;k<a.length;k++){let l=a[k];if(b(l)){var j;if(null!=(j=l.subRows)&&j.length&&d<g){let a=bb(c,l.id,l.original,l.index,l.depth,void 0,l.parentId);a.subRows=h(l.subRows,d+1),l=a}i.push(l),e.push(l),f[l.id]=l}}return i};return{rows:h(a),flatRows:e,rowsById:f}}(e,f,a)},a7(a.options,"debugTable","getFilteredRowModel",()=>a._autoResetPageIndex())),getPaginationRowModel:a=>a6(()=>[a.getState().pagination,a.getPrePaginationRowModel(),a.options.paginateExpandedRows?void 0:a.getState().expanded],(b,c)=>{let d;if(!c.rows.length)return c;let{pageSize:e,pageIndex:f}=b,{rows:g,flatRows:h,rowsById:i}=c,j=e*f;g=g.slice(j,j+e),(d=a.options.paginateExpandedRows?{rows:g,flatRows:h,rowsById:i}:function(a){let b=[],c=a=>{var d;b.push(a),null!=(d=a.subRows)&&d.length&&a.getIsExpanded()&&a.subRows.forEach(c)};return a.rows.forEach(c),{rows:b,flatRows:a.flatRows,rowsById:a.rowsById}}({rows:g,flatRows:h,rowsById:i})).flatRows=[];let k=a=>{d.flatRows.push(a),a.subRows.length&&a.subRows.forEach(k)};return d.rows.forEach(k),d},a7(a.options,"debugTable","getPaginationRowModel")),autoResetPageIndex:!1,initialState:{columnPinning:{left:["selected","Preview"]},pagination:{pageSize:25},columnVisibility:i},getRowId:a=>a._id,meta:{selectedAnchor:k,setSelectedAnchor:l,patchDocument:(a,b,c)=>null}}),{rows:o}=n.getRowModel();(0,d.useEffect)(()=>(b({type:"TERMS_TYPE_ADD",schemaType:a}),()=>{b({type:"TERMS_TYPE_REMOVE",schemaType:a})}),[a,b]);let p=(0,d.useCallback)(a=>(0,c.jsx)(an.Box,{as:"tr",paddingY:2,style:{display:"flex",width:"100%"},children:a.getVisibleCells().map(b=>(0,c.jsx)(ho,{...b},a.original._id+b.id))},a.original._id+a.id),[]),q=`Total: ${m} rows, showing ${o.length} rows`;return(0,c.jsxs)(hE,{direction:"column",paddingX:3,"data-testid":"document-sheet-list-pane",children:[(0,c.jsxs)(an.Flex,{direction:"row",align:"center",paddingY:3,paddingX:1,justify:"space-between",children:[(0,c.jsxs)(an.Flex,{direction:"row",align:"center",children:[(0,c.jsx)(hw,{}),(0,c.jsx)(an.Text,{size:0,muted:!0,children:q})]}),(0,c.jsx)(hu,{table:n})]}),(0,c.jsx)(hF,{children:(0,c.jsx)(hk,{table:n,children:(0,c.jsxs)(hG,{children:[(0,c.jsx)("thead",{children:n.getHeaderGroups().map(a=>(0,c.jsx)(an.Box,{as:"tr",children:a.headers.map(b=>(0,c.jsx)(hA,{header:b,headerGroup:a},b.id))},a.id))}),(0,c.jsx)("tbody",{children:n.getRowModel().rows.map(p)})]})})}),(0,c.jsx)(an.Flex,{justify:"flex-end",padding:3,gap:4,paddingY:5,children:(0,c.jsx)(hB,{table:n})})]})}function hI(a){let b=(0,e.useSchema)(),d=a.pane.schemaTypeName,f=b.get(d);if(!f||!(0,ap.isDocumentSchemaType)(f))throw Error(`Schema type "${d}" not found or not a document schema`);return(0,c.jsx)(e.SearchProvider,{children:(0,c.jsx)(hH,{...a,documentSchemaType:f})})}function hJ(a){let[b,c]=(0,d.useState)(a);return(0,az.default)(b,a)?b:(c(a),a)}let hK=(0,d.memo)(function(a){let b,d,f,g,h,i,j,k,l,m=(0,am.c)(36),{index:n,isSelected:o,pane:p,paneKey:q}=a,{name:r}=(0,e.useSource)(),{defaultLayout:s,initialValueTemplates:t,menuItemGroups:u,menuItems:v,options:w}=p,x=void 0===t?e.EMPTY_ARRAY:t,{defaultOrdering:y,filter:z}=w,A=void 0===y?e.EMPTY_ARRAY:y,B=hJ(w.params||g0),C=p.source;a:{let a;m[0]!==z||m[1]!==B?(a=g7(z,B),m[0]=z,m[1]=B,m[2]=a):a=m[2];let c=a;if(c?.length===1){b=c[0];break a}b=null}let D=b,[E,F]=c1("layout",D??p.id,void 0===s?"default":s),{title:G}=(0,e.useI18nText)(p);m[3]!==A?(d=A?.length>0?{by:A}:g_,m[3]=A,m[4]=d):d=m[4];let H=d,[I,J]=c1("sort-order",D??p.id,H);m[5]!==E||m[6]!==v||m[7]!==I?(f=(a=>{let{menuItems:b,sortOrderRaw:c,layout:d}=a;return b?.map(a=>a.params?.layout?{...a,selected:d===a.params?.layout}:a?.params?.by?{...a,selected:(0,ay.default)(c?.by,a?.params?.by||e.EMPTY_ARRAY)}:{...a,selected:!1})})({menuItems:v,sortOrderRaw:I,layout:E}),m[5]=E,m[6]=v,m[7]=I,m[8]=f):f=m[8];let K=f,L="sheetList"===E;m[9]!==L||m[10]!==E||m[11]!==a||m[12]!==I?(g=L?(0,c.jsx)(hI,{...a},a.pane.id):(0,c.jsx)(hh,{...a,sortOrder:I,layout:E}),m[9]=L,m[10]=E,m[11]=a,m[12]=I,m[13]=g):g=m[13];let M=g,N=C||r;return m[14]!==L?(h=L?{}:{currentMaxWidth:350,maxWidth:640},m[14]=L,m[15]=h):h=m[15],m[16]!==p.source?(i=d3,m[16]=p.source,m[17]=i):i=m[17],m[18]!==n||m[19]!==x||m[20]!==u||m[21]!==K||m[22]!==F||m[23]!==J||m[24]!==G?(j=(0,c.jsx)(hi,{index:n,initialValueTemplates:x,menuItemGroups:u,menuItems:K,setLayout:F,setSortOrder:J,title:G}),m[18]=n,m[19]=x,m[20]=u,m[21]=K,m[22]=F,m[23]=J,m[24]=G,m[25]=j):j=m[25],m[26]!==o||m[27]!==q||m[28]!==M||m[29]!==j||m[30]!==h||m[31]!==i?(k=(0,c.jsxs)(cb,{"data-ui":"DocumentListPane",id:q,minWidth:320,...h,selected:o,children:[i,j,M]}),m[26]=o,m[27]=q,m[28]=M,m[29]=j,m[30]=h,m[31]=i,m[32]=k):k=m[32],m[33]!==k||m[34]!==N?(l=(0,c.jsx)(e.SourceProvider,{name:N,children:k}),m[33]=k,m[34]=N,m[35]=l):l=m[35],l});hK.displayName="Memo(PaneContainer)";let hL=a=>{let{liveEditSchemaType:b,version:c}=a;return b&&!c?{label:"Live",color:"danger"}:null};hL.displayName="LiveEditBadge";let hM={activePanes:[]};function hN(a){hM.activePanes=a}function hO(a,b,c,d){let e=c?.panes||[],f=hM.activePanes||[],g=b.id||(0,aq.uuid)();for(let c=f.length-1;c>=0;c--){let h=f[c];if("object"==typeof h&&(h.canHandleIntent?.(a,b,{pane:h,index:c})||"documentList"===h.type&&h.schemaTypeName===b.type&&"_type == $type"===h.options.filter)){let f=function(a,{template:b,version:c}){return"create"!==a?d4:b&&c?{template:b,version:c}:b?{template:b}:c?{version:c}:d4}(a,b);return{panes:e.slice(0,c).concat([[{id:g,params:f,payload:d}]])}}}return{intent:a,params:b,payload:d}}let hP=(0,ar.styled)(e.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,hQ=(0,ar.styled)(an.Box)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`;function hR(a){let b,f,g,h,i,j,k,l,m,n,o,p,q=(0,am.c)(39),{showChanges:s}=a,{documentId:t,schemaType:u,timelineError:v,timelineStore:w,value:x}=cL(),{selectedReleaseId:y}=(0,e.usePerspective)(),[z,A]=(0,d.useState)(null),B=(0,e.useTimelineSelector)(w,hX),C=(0,e.useTimelineSelector)(w,hW),D=(0,e.useTimelineSelector)(w,hV),E=(0,e.useTimelineSelector)(w,hU),F=(0,e.useTimelineSelector)(w,hT),G="loading"===E,H=!D,{t:I}=(0,e.useTranslation)(r);q[0]!==C||q[1]!==t||q[2]!==H||q[3]!==u||q[4]!==x?(b={documentId:t,schemaType:u,FieldWrapper:hS,rootDiff:C,isComparingCurrent:H,value:x,showFromValue:!0},q[0]=C,q[1]=t,q[2]=H,q[3]=u,q[4]=x,q[5]=b):b=q[5];let J=b;if(y){let a;return q[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(an.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,c.jsx)(an.Card,{flex:1,padding:2,paddingTop:0,children:(0,c.jsx)(fa,{versionError:!0})})}),q[6]=a):a=q[6],a}return q[7]!==I?(f=I("changes.from.label"),q[7]=I,q[8]=f):f=q[8],q[9]!==f?(g=(0,c.jsx)(an.Text,{size:1,muted:!0,children:f}),q[9]=f,q[10]=g):g=q[10],q[11]!==F?(h=(0,c.jsx)(fd,{mode:"since",chunk:F,placement:"bottom-start"}),q[11]=F,q[12]=h):h=q[12],q[13]!==I?(i=I("changes.to.label"),q[13]=I,q[14]=i):i=q[14],q[15]!==i?(j=(0,c.jsx)(an.Text,{size:1,muted:!0,children:i}),q[15]=i,q[16]=j):j=q[16],q[17]!==B?(k=(0,c.jsx)(fd,{chunk:B,mode:"rev",placement:"bottom-end"}),q[17]=B,q[18]=k):k=q[18],q[19]!==g||q[20]!==h||q[21]!==j||q[22]!==k?(l=(0,c.jsx)(an.Box,{padding:3,children:(0,c.jsxs)(hQ,{paddingX:2,paddingBottom:2,children:[g,h,j,k]})}),q[19]=g,q[20]=h,q[21]=j,q[22]=k,q[23]=l):l=q[23],q[24]!==C||q[25]!==J||q[26]!==G||q[27]!==u||q[28]!==s||q[29]!==v?(m=s&&(0,c.jsx)(hY,{diff:C,documentContext:J,error:v,loading:G,schemaType:u}),q[24]=C,q[25]=J,q[26]=G,q[27]=u,q[28]=s,q[29]=v,q[30]=m):m=q[30],q[31]!==m?(n=(0,c.jsx)(hP,{"data-ui":"Scroller",ref:A,children:(0,c.jsx)(an.Box,{flex:1,paddingX:3,height:"fill",children:m})}),q[31]=m,q[32]=n):n=q[32],q[33]!==z||q[34]!==n?(o=(0,c.jsx)(an.Card,{flex:1,paddingX:2,paddingY:2,children:(0,c.jsx)(an.BoundaryElementProvider,{element:z,children:n})}),q[33]=z,q[34]=n,q[35]=o):o=q[35],q[36]!==o||q[37]!==l?(p=(0,c.jsxs)(an.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[l,o]}),q[36]=o,q[37]=l,q[38]=p):p=q[38],p}function hS(a){return(0,c.jsx)(e.ChangeFieldWrapper,{...a,hasRevertHover:!1})}function hT(a){return a.sinceTime}function hU(a){return a.selectionState}function hV(a){return a.onOlderRevision}function hW(a){return a.diff}function hX(a){return a.revTime}function hY(a){let b,d,f=(0,am.c)(9),{error:h,diff:i,documentContext:j,loading:k,schemaType:l}=a;if(h){let a;return f[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(e.NoChanges,{}),f[0]=a):a=f[0],a}if(k){let a;return f[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(e.LoadingBlock,{showText:!0}),f[1]=a):a=f[1],a}if(!i){let a;return f[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(e.NoChanges,{}),f[2]=a):a=f[2],a}return f[3]!==i||f[4]!==l?(b=(0,c.jsx)(e.ChangeList,{diff:i,schemaType:l}),f[3]=i,f[4]=l,f[5]=b):b=f[5],f[6]!==j||f[7]!==b?(d=(0,c.jsx)(g.DocumentChangeContext.Provider,{value:j,children:b}),f[6]=j,f[7]=b,f[8]=d):d=f[8],d}function hZ(a){let b,d,f,g,h,i,j,k,l=(0,am.c)(27),{event:m,isSelected:n,onSelect:p,optionsMenu:q}=a,{t:r}=(0,e.useTranslation)("studio");l[0]!==m?(b=!(0,e.isDeleteDocumentVersionEvent)(m)&&!(0,e.isDeleteDocumentGroupEvent)(m)&&!(0,e.isUnpublishDocumentEvent)(m)&&!(0,e.isScheduleDocumentVersionEvent)(m)&&!(0,e.isUnscheduleDocumentVersionEvent)(m),l[0]=m,l[1]=b):b=l[1];let s=b;l[2]!==m||l[3]!==s||l[4]!==p?(d=a=>{a.preventDefault(),a.stopPropagation(),s&&p(m)},l[2]=m,l[3]=s,l[4]=p,l[5]=d):d=l[5];let t=d;l[6]!==s||l[7]!==r?(f=s?"":r("changes.not-selectable"),l[6]=s,l[7]=r,l[8]=f):f=l[8];let u=s?"button":"div",v=s?"pointer":"default";return l[9]!==v?(g={cursor:v,width:"100%"},l[9]=v,l[10]=g):g=l[10],l[11]!==m?(h=(0,c.jsx)(e.Event,{event:m,showChangesBy:"tooltip"}),l[11]=m,l[12]=h):h=l[12],l[13]!==m.timestamp||l[14]!==t||l[15]!==n||l[16]!==u||l[17]!==g||l[18]!==h?(i=(0,c.jsx)(an.Card,{as:u,onClick:t,padding:2,pressed:n,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-timestamp":m.timestamp,style:g,children:h}),l[13]=m.timestamp,l[14]=t,l[15]=n,l[16]=u,l[17]=g,l[18]=h,l[19]=i):i=l[19],l[20]!==s||l[21]!==f||l[22]!==i?(j=(0,c.jsx)(o.Tooltip,{content:f,disabled:s,children:i}),l[20]=s,l[21]=f,l[22]=i,l[23]=j):j=l[23],l[24]!==q||l[25]!==j?(k=(0,c.jsxs)(an.Flex,{gap:1,children:[j,q]}),l[24]=q,l[25]=j,l[26]=k):k=l[26],k}function h$(a){let b,d,g,h,i,j,k,l,m,n,p,q=(0,am.c)(41),{event:s}=a,{t}=(0,e.useTranslation)(r),{t:u}=(0,e.useTranslation)(),v=(0,an.usePortal)(),{params:w,setParams:x}=cO(),y=(0,e.useSetPerspective)();q[0]!==s.id||q[1]!==s.versionId||q[2]!==s.versionRevisionId||q[3]!==w||q[4]!==x?(b=()=>{x({...w,rev:s.versionRevisionId||"@lastPublished",since:void 0,historyEvent:s.id,historyVersion:(0,f.getVersionFromId)(s.versionId)})},q[0]=s.id,q[1]=s.versionId,q[2]=s.versionRevisionId,q[3]=w,q[4]=x,q[5]=b):b=q[5];let z=b;q[6]!==s.versionRevisionId||q[7]!==w||q[8]!==x||q[9]!==y?(d=()=>{x({...w,rev:s.versionRevisionId,preserveRev:"true",since:void 0}),setTimeout(()=>{y("drafts")},100)},q[6]=s.versionRevisionId,q[7]=w,q[8]=x,q[9]=y,q[10]=d):d=q[10];let A=d;q[11]!==s.release?(g=a=>{let{children:b}=a;return(0,c.jsx)(e.VersionInlineBadge,{$tone:s.release?(0,e.isReleaseDocument)(s.release)?(0,e.getReleaseTone)(s.release):"default":void 0,children:b})},q[11]=s.release,q[12]=g):g=q[12];let B=g,C=s.release&&!(0,e.isReleaseDocument)(s.release),D=`timeline-item-menu-button-${s.versionId}`;q[13]!==t?(h=t("timeline-item.menu-button.aria-label"),q[13]=t,q[14]=h):h=q[14],q[15]!==s.release||q[16]!==C||q[17]!==t?(i=C?t("timeline-item.not-found-release.tooltip",{releaseId:s.release?._id?(0,e.getReleaseIdFromReleaseDocumentId)(s.release._id):void 0}):t("timeline-item.menu-button.tooltip"),q[15]=s.release,q[16]=C,q[17]=t,q[18]=i):i=q[18],q[19]!==i?(j={content:i},q[19]=i,q[20]=j):j=q[20],q[21]!==C||q[22]!==h||q[23]!==j?(k=(0,c.jsx)(e.ContextMenuButton,{"aria-label":h,tooltipProps:j,disabled:C}),q[21]=C,q[22]=h,q[23]=j,q[24]=k):k=q[24],q[25]!==B||q[26]!==s.release||q[27]!==s.versionRevisionId||q[28]!==A||q[29]!==z||q[30]!==t||q[31]!==u?(l=(0,c.jsx)(an.Menu,{padding:1,children:s.release?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(aw.IntentLink,{intent:e.RELEASES_INTENT,params:{id:(0,e.getReleaseIdFromReleaseDocumentId)(s.release._id)},style:{textDecoration:"none"},children:(0,c.jsx)(an.MenuItem,{padding:3,children:(0,c.jsx)(an.Flex,{align:"center",justify:"flex-start",children:(0,c.jsx)(an.Text,{size:1,style:{textDecoration:"none"},children:(0,c.jsx)(e.Translate,{components:{VersionBadge:a=>{let{children:b}=a;return(0,c.jsx)(B,{children:b})}},i18nKey:"events.open.release",values:{releaseTitle:s.release.metadata?.title||u("release.placeholder-untitled-release")},t})})})})}),(0,c.jsx)(an.MenuItem,{onClick:z,children:(0,c.jsx)(an.Flex,{align:"center",justify:"flex-start",children:(0,c.jsx)(an.Text,{size:1,children:(0,c.jsx)(e.Translate,{components:{VersionBadge:a=>{let{children:b}=a;return(0,c.jsx)(B,{children:b})}},i18nKey:"events.inspect.release",values:{releaseTitle:s.release.metadata?.title||u("release.placeholder-untitled-release")},t})})})})]}):(0,c.jsx)(an.MenuItem,{onClick:A,disabled:!s.versionRevisionId,children:(0,c.jsx)(an.Flex,{align:"center",children:(0,c.jsx)(an.Text,{size:1,children:(0,c.jsx)(e.Translate,{components:{VersionBadge:h_},i18nKey:"events.open.draft",t})})})})}),q[25]=B,q[26]=s.release,q[27]=s.versionRevisionId,q[28]=A,q[29]=z,q[30]=t,q[31]=u,q[32]=l):l=q[32];let E=!v.elements?.[fc]||fc;return q[33]===Symbol.for("react.memo_cache_sentinel")?(m=["bottom-end","bottom-start"],q[33]=m):m=q[33],q[34]!==E?(n={portal:E,placement:"bottom",fallbackPlacements:m},q[34]=E,q[35]=n):n=q[35],q[36]!==n||q[37]!==D||q[38]!==k||q[39]!==l?(p=(0,c.jsx)(o.MenuButton,{id:D,button:k,menu:l,popover:n}),q[36]=n,q[37]=D,q[38]=k,q[39]=l,q[40]=p):p=q[40],p}function h_(a){let{children:b}=a;return(0,c.jsx)(e.VersionInlineBadge,{$tone:"caution",children:b})}let h0=at.motion.create(an.Box),h1={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},h2=({events:a,hasMoreEvents:b,selectedEventId:f,onLoadMore:g,onSelect:h,listMaxHeight:i="calc(100vh - 280px)",fetchEventChildren:j})=>{let[k,l]=(0,d.useState)(!1),{t:m}=(0,e.useTranslation)("studio"),[n,o]=(0,d.useState)(()=>{if(f){let b=a.find(a=>a.id===f);if(b&&"parentId"in b&&b.parentId)return new Set([b.parentId])}return new Set}),[p,q]=(0,d.useState)(new Set),r=(0,d.useMemo)(()=>a.filter(b=>(0,e.isCreateDocumentVersionEvent)(b)&&b.parentId?a[a.length-1].id===b.id||n.has(b.parentId):!(0,e.isEditDocumentVersionEvent)(b)||!b.parentId||n.has(b.parentId)),[n,a]),s=(0,d.useCallback)(a=>async()=>{let b=a.id,c=!1;o(a=>{let d=new Set(a);return a.has(b)?d.delete(b):(c=!0,d.add(b)),d}),c&&(q(a=>{let c=new Set(a);return c.add(b),c}),await j(a),q(a=>{let c=new Set(a);return c.delete(b),c}))},[j,q]),t=(0,d.useCallback)(a=>{h(a)},[h]),u=(0,d.useCallback)(a=>{let b=(0,e.getDocumentVariantType)(a.documentId);return(0,e.isPublishDocumentVersionEvent)(a)&&"published"===b?(0,c.jsx)(h$,{event:a}):(0,e.isPublishDocumentVersionEvent)(a)&&"draft"===b&&a.creationEvent||(0,e.isDeleteDocumentVersionEvent)(a)&&a.creationEvent?(0,c.jsx)(eU,{isExpanded:n.has(a.id),onExpand:s(a)}):null},[n,s]),v=(0,d.useCallback)((a,{activeIndex:d})=>{let g=(0,e.isCreateDocumentVersionEvent)(a)&&a.parentId&&p.has(a.parentId),h=d===r.length-1;return g?(0,c.jsx)(h0,{animate:{opacity:1},initial:{opacity:0},transition:{duration:.2,delay:.2},children:(0,c.jsx)(an.Flex,{align:"center",justify:"center",style:{height:57},children:(0,c.jsx)(an.Spinner,{})})}):(0,c.jsxs)(h0,{paddingBottom:1,paddingRight:1,animate:"animate",exit:"exit",initial:"initial",variants:"parentId"in a?h1:void 0,paddingLeft:((0,e.isEditDocumentVersionEvent)(a)||(0,e.isCreateDocumentVersionEvent)(a))&&a.parentId&&!h?4:1,children:[(0,c.jsx)(hZ,{event:a,isSelected:a.id===f,onSelect:t,optionsMenu:u(a)}),h&&b&&(0,c.jsx)(e.LoadingBlock,{})]},a.timestamp)},[p,f,t,u,r.length,b]);(0,d.useEffect)(()=>l(!0),[]);let w=r.findIndex(a=>a.id===f);return(0,c.jsx)(eX,{$visible:!w||k,"data-ui":"timeline",children:r.length>0?(0,c.jsx)(eW,{direction:"column",$maxHeight:i,id:"timeline-list-wrapper",children:(0,c.jsx)(e.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:m("timeline.list.aria-label"),autoFocus:"list",initialIndex:w,initialScrollAlign:"center",itemHeight:57,items:r,onEndReached:g,onEndReachedIndexOffset:20,overscan:5,renderItem:v,wrapAround:!1})}):(0,c.jsxs)(an.Stack,{padding:3,space:3,children:[(0,c.jsx)(an.Text,{size:1,weight:"medium",children:m("timeline.error.no-document-history-title")}),(0,c.jsx)(an.Text,{muted:!0,size:1,children:m("timeline.error.no-document-history-description")})]})})};h2.displayName="EventsTimeline";let h3=(0,ar.styled)(o.Popover)`
  overflow: hidden;
  overflow: clip;
`,h4={timestamp:{dateStyle:"medium",timeStyle:"short"}};function h5({event:a,events:b,mode:f,placement:g}){let{setTimelineRange:h}=cL(),[j,k]=(0,d.useState)(!1),[l,m]=(0,d.useState)(null),[n,p]=(0,d.useState)(null),q=(0,ao.useToast)(),{nextCursor:r,loading:s,error:t,findRangeForRevision:u,findRangeForSince:v,loadMoreEvents:w,expandEvent:x}=(0,e.useEvents)(),{t:y}=(0,e.useTranslation)("studio"),z=(0,d.useCallback)(()=>{k(!0)},[]),A=(0,d.useCallback)(()=>{k(!1)},[]),B=(0,d.useCallback)(a=>{j&&("Escape"===a.key||"Tab"===a.key)&&(A(),l?.focus())},[l,A,j]);(0,an.useGlobalKeyDown)(B),(0,an.useClickOutsideEvent)(j&&A,()=>[l,n]);let C=(0,d.useCallback)(a=>{try{if((0,e.isDeleteDocumentVersionEvent)(a)||(0,e.isDeleteDocumentGroupEvent)(a)||(0,e.isUnpublishDocumentEvent)(a)||(0,e.isScheduleDocumentVersionEvent)(a)||(0,e.isUnscheduleDocumentVersionEvent)(a))return void console.error("Event is not selectable");let[b,c]=u(a?.id);h(b,c),A()}catch(a){q.push({closable:!0,description:a.message,status:"error",title:y("timeline.error.unable-to-load-revision")})}},[y,q,h,u,A]),D=(0,d.useCallback)(a=>{try{let[b,c]=v(a.id);h(b,c),A()}catch(a){q.push({closable:!0,description:a.message,status:"error",title:y("timeline.error.unable-to-load-revision")})}},[v,h,q,y,A]),E=(0,d.useCallback)(()=>{!s&&r&&w()},[s,w,r]),F=(0,d.useMemo)(()=>t?(0,c.jsx)(fa,{}):(0,c.jsx)(h2,{events:b,fetchEventChildren:x,hasMoreEvents:!!r,selectedEventId:a?.id,onLoadMore:E,onSelect:"rev"===f?C:D}),[t,f,x,b,r,a?.id,E,D,C]),G=a?y(e.TIMELINE_ITEM_I18N_KEY_MAPPING[a.documentVariantType][a.type],{context:"timestamp",timestamp:new Date(a.timestamp),formatParams:h4}):y("timeline.latest-revision"),H=a?y(e.TIMELINE_ITEM_I18N_KEY_MAPPING[a.documentVariantType][a.type],{context:"timestamp",timestamp:new Date(a.timestamp),formatParams:h4}):b.length>0?y("timeline.since-version-missing"):y("timeline.no-previous-events"),I="rev"===f?G:H,J=(0,d.useMemo)(()=>({"timeline-menu":n}),[n]);return(0,c.jsx)(an.PortalProvider,{__unstable_elements:J,children:(0,c.jsx)(h3,{"data-testid":"timeline-menu",constrainSize:!0,content:j&&F,"data-ui":"versionMenu",open:j,placement:g,matchReferenceWidth:!0,portal:!0,ref:p,children:(0,c.jsx)(an.Flex,{width:"fill",children:(0,c.jsx)(o.Button,{"data-testid":j?"timeline-menu-close-button":"timeline-menu-open-button",disabled:s||!b.length,mode:"ghost",onClick:j?A:z,ref:m,selected:j,width:"fill",tooltipProps:null,justify:"space-between",style:{maxWidth:"100%"},iconRight:i.ChevronDownIcon,text:s?y("timeline.loading-history"):I})})})})}let h6=(0,ar.styled)(e.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,h7=(0,ar.styled)(an.Box)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`,h8=(0,ar.styled)(an.Flex)`
  width: 100%;
  position: absolute;
  bottom: -4px;
`,h9={diff:null,loading:!0,error:null},ia=()=>{let a,b,d,f,h,i,j,k,l,m,n,o=(0,am.c)(31),{documentId:p,schemaType:q,editState:s,displayed:t}=cL(),{selectedPerspective:u,selectedPerspectiveName:v,selectedReleaseId:w}=(0,e.usePerspective)(),{t:x}=(0,e.useTranslation)(r);o[0]!==t||o[1]!==s?.published?(a=(0,as.diffInput)((0,as.wrap)(s?.published??{},{author:""}),(0,as.wrap)(t??{},{author:""})),o[0]=t,o[1]=s?.published,o[2]=a):a=o[2];let y=a;return(!w||s?.version)&&("drafts"!==u||s?.draft)&&"published"!==v&&t?._rev?(o[3]!==x?(b=x("events.compare-with-published.title"),o[3]=x,o[4]=b):b=o[4],o[5]!==b?(d=(0,c.jsx)(an.Text,{size:1,weight:"medium",children:b}),o[5]=b,o[6]=d):d=o[6],o[7]!==u?(f=(0,e.isReleaseDocument)(u)?u.metadata?.title:"draft",o[7]=u,o[8]=f):f=o[8],o[9]!==f?(h={version:f},o[9]=f,o[10]=h):h=o[10],o[11]!==x||o[12]!==h?(i=(0,c.jsx)(an.Text,{size:1,muted:!0,children:(0,c.jsx)(e.Translate,{i18nKey:"events.compare-with-published.description",t:x,values:h})}),o[11]=x,o[12]=h,o[13]=i):i=o[13],o[14]!==d||o[15]!==i?(j=(0,c.jsx)(an.Card,{borderBottom:!0,paddingBottom:3,children:(0,c.jsxs)(an.Stack,{space:3,paddingTop:1,children:[d,i]})}),o[14]=d,o[15]=i,o[16]=j):j=o[16],o[17]!==t||o[18]!==p||o[19]!==y||o[20]!==q?(k={documentId:p,schemaType:q,rootDiff:y,isComparingCurrent:!0,FieldWrapper:ie,value:t,showFromValue:!0},o[17]=t,o[18]=p,o[19]=y,o[20]=q,o[21]=k):k=o[21],o[22]!==y||o[23]!==q?(l=(0,c.jsx)(an.Box,{paddingY:1,children:(0,c.jsx)(e.ChangeList,{diff:y,schemaType:q})}),o[22]=y,o[23]=q,o[24]=l):l=o[24],o[25]!==k||o[26]!==l?(m=(0,c.jsx)(g.DocumentChangeContext.Provider,{value:k,children:l}),o[25]=k,o[26]=l,o[27]=m):m=o[27],o[28]!==j||o[29]!==m?(n=(0,c.jsxs)(an.Stack,{space:2,marginBottom:3,children:[j,m]}),o[28]=j,o[29]=m,o[30]=n):n=o[30],n):null};function ib({showChanges:a}){let{documentId:b,schemaType:f,timelineError:g,value:h,formState:i}=cL(),[j,k]=(0,d.useState)(null),{events:l,revision:m,sinceRevision:n,getChangesList:o}=(0,e.useEvents)(),p=!m?.revisionId,q=(0,d.useMemo)(()=>o(),[o]),{diff:r,loading:s,error:t}=(0,av.useObservable)(q,h9),{t:u}=(0,e.useTranslation)("studio"),v=(0,d.useMemo)(()=>({documentId:b,schemaType:f,FieldWrapper:a=>a.path.length>0?(0,c.jsx)(e.ChangeFieldWrapper,{...a}):a.children,rootDiff:r,isComparingCurrent:p&&!i?.readOnly,value:h,showFromValue:!0}),[r,b,p,i?.readOnly,f,h]),[w,x]=(0,d.useMemo)(()=>l?[l.find(a=>a.id===n?.revisionId)||null,l.find(a=>a.id===m?.revisionId)||l[0]]:[null,null],[l,m?.revisionId,n?.revisionId]),y=(0,d.useMemo)(()=>x?l.slice(l.indexOf(x)+1).map(a=>"parentId"in x&&"parentId"in a&&a.parentId===x.parentId||"parentId"in a&&x.id===a.parentId?{...a,parentId:void 0}:a):l.slice(1),[l,x]);return l.length?(0,c.jsxs)(an.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[(0,c.jsxs)(an.Box,{padding:3,style:{position:"relative"},children:[(0,c.jsxs)(h7,{paddingX:2,paddingBottom:2,children:[(0,c.jsx)(an.Text,{size:1,muted:!0,children:u("changes.inspector.from-label")}),(0,c.jsx)(h5,{event:w||null,events:y,mode:"since",placement:"bottom-start"}),(0,c.jsx)(an.Text,{size:1,muted:!0,children:u("changes.inspector.to-label")}),(0,c.jsx)(h5,{event:x||null,events:l,mode:"rev",placement:"bottom-end"})]}),s&&(0,c.jsx)(at.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,c.jsxs)(h8,{justify:"center",align:"center",gap:2,children:[(0,c.jsx)(an.Text,{muted:!0,size:0,children:u("changes.loading-changes")}),(0,c.jsx)(an.Spinner,{size:0})]})})]}),(0,c.jsx)(an.Card,{flex:1,paddingX:2,paddingY:2,children:(0,c.jsx)(an.BoundaryElementProvider,{element:j,children:(0,c.jsx)(h6,{"data-ui":"Scroller",ref:k,children:(0,c.jsx)(an.Box,{flex:1,paddingX:3,height:"fill",children:a&&(0,c.jsx)(ic,{documentContext:v,error:g||t,loading:m?.loading||n?.loading||!1,schemaType:f,sameRevisionSelected:w?.id===x?.id,sinceEvent:w})})})})})]}):(0,c.jsx)(an.Box,{paddingX:2,children:(0,c.jsxs)(an.Stack,{padding:3,space:3,children:[(0,c.jsx)(an.Text,{size:1,weight:"medium",children:u("timeline.error.no-document-history-title")}),(0,c.jsx)(an.Text,{muted:!0,size:1,children:u("timeline.error.no-document-history-description")})]})})}function ic(a){let b,d,f=(0,am.c)(15),{error:h,documentContext:i,loading:j,schemaType:k,sameRevisionSelected:l,sinceEvent:m}=a;if(h){let a,b,d;return f[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(ia,{}),f[0]=a):a=f[0],f[1]!==h||f[2]!==m?.type?(b=m?.type!=="historyCleared"&&(0,c.jsx)(e.ChangesError,{error:h}),f[1]=h,f[2]=m?.type,f[3]=b):b=f[3],f[4]!==b?(d=(0,c.jsxs)(c.Fragment,{children:[a,b]}),f[4]=b,f[5]=d):d=f[5],d}if(j){let a;return f[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(e.LoadingBlock,{showText:!0}),f[6]=a):a=f[6],a}if(l){let a;return f[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(id,{}),f[7]=a):a=f[7],a}if(!i.rootDiff){let a;return f[8]===Symbol.for("react.memo_cache_sentinel")?(a=(0,c.jsx)(at.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,c.jsx)(e.NoChanges,{})}),f[8]=a):a=f[8],a}return f[9]!==i.rootDiff||f[10]!==k?(b=(0,c.jsx)(an.Box,{paddingY:1,children:(0,c.jsx)(e.ChangeList,{diff:i.rootDiff,schemaType:k})}),f[9]=i.rootDiff,f[10]=k,f[11]=b):b=f[11],f[12]!==i||f[13]!==b?(d=(0,c.jsx)(g.DocumentChangeContext.Provider,{value:i,children:b}),f[12]=i,f[13]=b,f[14]=d):d=f[14],d}function id(){let a,b,d,f,g,h,i,j=(0,am.c)(12),{t:k}=(0,e.useTranslation)("");return j[0]===Symbol.for("react.memo_cache_sentinel")?(a={opacity:1},b={opacity:0},d={delay:.2,duration:.2},j[0]=a,j[1]=b,j[2]=d):(a=j[0],b=j[1],d=j[2]),j[3]!==k?(f=k("changes.same-revision-selected-title"),j[3]=k,j[4]=f):f=j[4],j[5]!==f?(g=(0,c.jsx)(an.Text,{size:1,weight:"medium",as:"h3",children:f}),j[5]=f,j[6]=g):g=j[6],j[7]!==k?(h=(0,c.jsx)(an.Text,{as:"p",size:1,muted:!0,children:(0,c.jsx)(e.Translate,{i18nKey:"changes.same-revision-selected-description",t:k})}),j[7]=k,j[8]=h):h=j[8],j[9]!==g||j[10]!==h?(i=(0,c.jsx)(at.motion.div,{animate:a,initial:b,transition:d,children:(0,c.jsxs)(an.Stack,{space:3,paddingTop:2,children:[g,h]})}),j[9]=g,j[10]=h,j[11]=i):i=j[11],i}function ie(a){return a.children}let ig=(0,ar.styled)(e.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function ih({showList:a}){let[b,f]=(0,d.useState)(null),[g,h]=(0,d.useState)(0),{setTimelineRange:i}=cL(),j=(0,d.useCallback)(a=>{!g&&a&&(h(a.clientHeight?a.clientHeight-1:0),f(a))},[g]),{events:k,nextCursor:l,loading:m,error:n,revision:o,loadMoreEvents:p,findRangeForRevision:q,expandEvent:r}=(0,e.useEvents)(),{t:s}=(0,e.useTranslation)("studio"),t=(0,ao.useToast)(),u=(0,d.useCallback)(a=>{try{if((0,e.isDeleteDocumentVersionEvent)(a)||(0,e.isDeleteDocumentGroupEvent)(a)||(0,e.isUnpublishDocumentEvent)(a)||(0,e.isScheduleDocumentVersionEvent)(a)||(0,e.isUnscheduleDocumentVersionEvent)(a))return void console.error("Event is not selectable");let[b,c]=q(a.id);i(b,c)}catch(a){t.push({closable:!0,description:a.message,status:"error",title:s("timeline.error.unable-to-load-revision")})}},[s,t,i,q]),v=m&&!k.length;return(0,c.jsx)(an.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,c.jsx)(an.Card,{flex:1,padding:2,paddingTop:0,children:n?(0,c.jsx)(fa,{}):(0,c.jsx)(an.BoundaryElementProvider,{element:b,children:(0,c.jsxs)(ig,{"data-ui":"Scroller",ref:j,children:[g&&a&&!v?(0,c.jsx)(h2,{events:k,fetchEventChildren:r,hasMoreEvents:!!l,selectedEventId:o?.revisionId||k[0]?.id,onLoadMore:p,onSelect:u,listMaxHeight:`${g}px`}):null,m&&(0,c.jsx)(e.LoadingBlock,{})]})})})})}let ii=(0,ar.styled)(e.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function ij({showList:a}){let{timelineError:b,setTimelineRange:f,timelineStore:g}=cL(),{selectedReleaseId:h}=(0,e.usePerspective)(),[i,j]=(0,d.useState)(null),[k,l]=(0,d.useState)(0),m=(0,d.useCallback)(a=>{a?.clientHeight&&(l(a.clientHeight-1),j(a))},[]),n=(0,e.useTimelineSelector)(g,a=>a.chunks),o=(0,e.useTimelineSelector)(g,a=>a.realRevChunk),p=(0,e.useTimelineSelector)(g,a=>a.hasMoreChunks),q=(0,e.useTimelineSelector)(g,a=>a.isLoading),{t:r}=(0,e.useTranslation)("studio"),s=(0,ao.useToast)(),t=(0,d.useCallback)(a=>{try{let[b,c]=g?.findRangeForRev(a)||[null,null];f(b,c)}catch(a){s.push({closable:!0,description:a.message,status:"error",title:r("timeline.error.unable-to-load-revision")})}},[f,r,g,s]),u=(0,d.useCallback)(()=>{q||g?.loadMore()},[q,g]);return(0,c.jsx)(an.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,c.jsx)(an.Card,{flex:1,padding:2,paddingTop:0,children:b||h?(0,c.jsx)(fa,{versionError:!!h}):(0,c.jsx)(an.BoundaryElementProvider,{element:i,children:(0,c.jsx)(ii,{"data-ui":"Scroller",ref:m,children:k&&a?(0,c.jsx)(e9,{chunks:n,hasMoreChunks:p,lastChunk:o,onLoadMore:u,onSelect:t,listMaxHeight:`${k}px`}):null})})})})}let ik=(0,ar.styled)(an.Flex)`
  opacity: 0;
  transition: opacity 200ms;
  &[data-ready] {
    opacity: 1;
  }
`,il=["history","review"],im={error:i.ErrorOutlineIcon,warning:i.WarningOutlineIcon,info:i.InfoOutlineIcon},io={error:"critical",warning:"caution",info:"primary"};function ip(a){let b,e,f,g,h=(0,am.c)(17),{marker:i,onOpen:j,schemaType:k,value:l}=a;h[0]!==i.path||h[1]!==j?(b=()=>j(i.path),h[0]=i.path,h[1]=j,h[2]=b):b=h[2];let m=b,[n,p]=(0,d.useState)(null),q=im[i.level];return h[3]!==n?(e=n&&(0,c.jsx)(an.Card,{padding:3,radius:2,tone:"critical",children:(0,c.jsx)(an.Text,{size:1,children:n.error.message})}),h[3]=n,h[4]=e):e=h[4],h[5]!==q||h[6]!==n||h[7]!==m||h[8]!==i.level||h[9]!==i.message||h[10]!==i.path||h[11]!==k||h[12]!==l?(f=!n&&(0,c.jsx)(an.Card,{__unstable_focusRing:!0,as:"button",onClick:m,padding:3,radius:2,tone:io[i.level],children:(0,c.jsxs)(an.Flex,{align:"flex-start",gap:3,children:[(0,c.jsx)(an.Box,{flex:"none",children:(0,c.jsx)(an.Text,{size:1,children:(0,c.jsx)(q,{})})}),(0,c.jsxs)(an.Stack,{flex:1,space:2,children:[(0,c.jsx)(iq,{path:i.path,schemaType:k,value:l}),(0,c.jsx)(an.Text,{muted:!0,size:1,children:i.message})]})]})}),h[5]=q,h[6]=n,h[7]=m,h[8]=i.level,h[9]=i.message,h[10]=i.path,h[11]=k,h[12]=l,h[13]=f):f=h[13],h[14]!==e||h[15]!==f?(g=(0,c.jsxs)(o.ErrorBoundary,{onCatch:p,children:[e,f]}),h[14]=e,h[15]=f,h[16]=g):g=h[16],g}function iq(a){let{path:b,schemaType:f,value:g}=a,h=(0,d.useMemo)(()=>{try{return function(a){let{path:b,schemaType:c,value:d}=a,f=[],g=c,h=d;for(let a of b){if("string"==typeof a){if(!(0,e.isRecord)(h)&&void 0!==h)throw Error(`Parent value is not an object, cannot get path segment: .${a}`);if("object"!==g.jsonType)throw Error(`Parent type is not an object schema type, cannot get path segment: .${a}`);h=h?.[a];let b=g.fields.find(b=>b.name===a);if(!b)return f.push({name:a}),f;g=b.type,f.push(g);continue}if("number"==typeof a){if(!(0,e.isArray)(h)&&void 0!==h)throw Error(`Parent value is not an array, cannot get path segment: [${a}]`);if("array"!==g.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: [${a}]`);h=h?.[a];let b=g.of.find(a=>"string"==typeof h?"string"===a.jsonType:"number"==typeof h?"number"===a.jsonType:"boolean"==typeof h?"boolean"===a.jsonType:!!(0,e.isRecord)(h)&&a.name===h?._type);if(!b)throw Error(`Item type not found: [${a}]`);g=b,f.push(g);continue}if((0,e.isRecord)(a)&&a._key){if(typeof h>"u")return f;if(!(0,e.isArray)(h))throw Error(`Parent value is not an array, cannot get path segment: [_key == ${a}]`);if("array"!==g.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: .${a}`);if(typeof(h=(h??[]).find(b=>(0,e.isRecord)(b)&&b._key===a._key))>"u")return f;if(!(0,e.isRecord)(h))throw Error(`Array item not found: [_key == ${a._key}]`);let b=g.of.find(a=>(0,e.isRecord)(h)&&a.name===h?._type);if(!b)throw Error(`Array item type not found: .${h?._type}`);g=b,f.push(g);continue}throw Error(`Invalid path segment: ${JSON.stringify(a)}`)}return f}({path:b,schemaType:f,value:g})}catch(a){console.error(a)}return null},[b,f,g]);return h?.length?(0,c.jsx)(an.Text,{size:1,children:h.map((a,b)=>(0,c.jsxs)(d.Fragment,{children:[b>0&&(0,c.jsx)("span",{style:{color:"var(--card-muted-fg-color)",opacity:.5},children:" / "}),(0,c.jsx)("span",{style:{fontWeight:500},children:a.title||a.name})]},b))}):null}let ir={},is=aw.route.create("/",[aw.route.intents("/intent"),aw.route.create("/edit/:type/:editDocumentId",[aw.route.create({path:"/:params",transform:{params:{toState:function(a){try{return JSON.parse(decodeURIComponent(a))}catch{return console.warn("Failed to parse JSON parameters"),{}}},toPath:function(a){return JSON.stringify(a)}}}})]),aw.route.create({path:"/:panes",children:[aw.route.create("/:action",aw.route.create("/:legacyEditDocumentId"))],transform:{panes:{toState:function(a){var b;return -1!==(b=decodeURIComponent(a)).indexOf(",{")?function(a){let b=[],c=a;for(;c.length;){let[a,d,e]=c.match(it)||[];if(!a){c=c.slice(1);continue}let f=e&&function(a){try{return JSON.parse(a)}catch(a){console.warn(`Failed to parse parameters: ${a.message}`);return}}(e);b.push({id:d,payload:f}),c=c.slice(a.length)}return[b]}(b):b.split(";").map(a=>{let[b,...c]=a.split("|").map(a=>{let[b,...c]=a.split(","),d={id:b,params:ir,payload:void 0};return c.reduce((a,b)=>{if(/^[a-z0-9]+=[^=]+/i.test(b)){let c=b.slice(0,b.indexOf("=")),d=b.slice(c.length+1);a.params={...a.params,[decodeURIComponent(c)]:decodeURIComponent(d)}}else/^[A-Za-z0-9\-_]+(?:={0,2})$/.test(b)?a.payload=function(a){try{return a?(0,aw.decodeJsonParams)(a):void 0}catch(a){console.warn(`Failed to parse parameters: ${a.message}`);return}}(b):console.warn("Unknown pane segment: %s - skipping",b);return a},d)});return[b,...c.map(a=>({...b,...a,id:a.id||b.id,params:{...(0,ax.default)(b.params,iu),...a.params},payload:a.payload||b.payload}))]}).filter(a=>a.length>0)},toPath:function(a){return(a||[]).map(a=>a.map(iw).join("|")).map(encodeURIComponent).join(";")}}}})]),it=/^([.a-z0-9_-]+),?({.*?})?(?:(;|$))/i,iu=["view","since","rev","inspect","comment"],iv=Boolean;function iw(a,b,c){let{payload:d,params:e={},id:f}=a,[g]=c,h=a===g,i=0!==b&&f===g.id,j=typeof d>"u"?void 0:(0,aw.encodeJsonParams)(d),k=Object.entries(e).filter(a=>{let[b,c]=a;return!!c&&(!!h||!(c===g.params?.[b]&&!iu.includes(b)))}).map(([a,b])=>`${encodeURIComponent(a)}=${encodeURIComponent(b)}`);return[i?"":f].concat([k.length>0&&k,j].filter(iv).flat()).join(",")||","}let ix=[ev,ex,em,eo,ek,ep],iy=[hL],iz=[{name:"sanity/structure/validation",component:function(a){let b,d,f,g,h,i,j,k=(0,am.c)(23),{onClose:l}=a,{onFocus:m,onPathOpen:n,schemaType:o,validation:p,value:q,editState:r}=cL(),{t:s}=(0,e.useTranslation)("validation");k[0]!==m||k[1]!==n?(b=a=>{n(a),m(a)},k[0]=m,k[1]=n,k[2]=b):b=k[2];let t=b;k[3]!==r?(d=r&&r.version&&(0,e.isGoingToUnpublish)(r.version),k[3]=r,k[4]=d):d=k[4];let u=d;return k[5]!==s?(f=s("panel.close-button-aria-label"),k[5]=s,k[6]=f):f=k[6],k[7]!==s?(g=s("panel.title"),k[7]=s,k[8]=g):g=k[8],k[9]!==l||k[10]!==f||k[11]!==g?(h=(0,c.jsx)(c_,{as:"header",closeButtonLabel:f,flex:"none",onClose:l,title:g}),k[9]=l,k[10]=f,k[11]=g,k[12]=h):h=k[12],k[13]!==t||k[14]!==u||k[15]!==o||k[16]!==s||k[17]!==p||k[18]!==q?(i=(0,c.jsx)(an.Card,{flex:1,overflow:"auto",padding:3,children:u?(0,c.jsx)(an.Box,{padding:2,children:(0,c.jsx)(an.Text,{muted:!0,size:1,children:s("panel.unpublish-message")})}):(0,c.jsxs)(c.Fragment,{children:[0===p.length&&(0,c.jsx)(an.Box,{padding:2,children:(0,c.jsx)(an.Text,{muted:!0,size:1,children:s("panel.no-errors-message")})}),p.length>0&&(0,c.jsx)(an.Stack,{space:2,children:p.map((a,b)=>(0,c.jsx)(ip,{marker:a,onOpen:t,schemaType:o,value:q},b))})]})}),k[13]=t,k[14]=u,k[15]=o,k[16]=s,k[17]=p,k[18]=q,k[19]=i):i=k[19],k[20]!==h||k[21]!==i?(j=(0,c.jsxs)(an.Flex,{direction:"column",height:"fill",overflow:"hidden",children:[h,i]}),k[20]=h,k[21]=i,k[22]=j):j=k[22],j},useMenuItem:function(a){let{documentId:b,documentType:c}=a,{t:f}=(0,e.useTranslation)("validation"),{selectedReleaseId:g}=(0,e.usePerspective)(),{validation:h}=(0,e.useValidationStatus)(b,c,g),{value:j}=cL(),k=(0,d.useMemo)(()=>h.map(a=>({level:a.level,message:a.message,path:a.path})),[h]),l=k.some(ap.isValidationError),m=k.some(ap.isValidationWarning),n=(0,e.isGoingToUnpublish)(j),o=(0,d.useMemo)(()=>l?i.ErrorOutlineIcon:m?i.WarningOutlineIcon:i.CheckmarkCircleIcon,[l,m]),p=(0,d.useMemo)(()=>l?"critical":m?"caution":"positive",[l,m]);return{hidden:0===k.length||n,icon:o,title:f("panel.title"),tone:p,showAsAction:!0}}},{name:cV,useMenuItem:()=>{let{features:a}=cR(),{t:b}=(0,e.useTranslation)();return{hidden:!a.reviewChanges,icon:i.RestoreIcon,title:b("changes.title")}},component:function(a){let b,f,g,h,j,k,l,m,n,p,q,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I=(0,am.c)(72),{params:J,setParams:K}=cO(),L=(0,e.useSource)(),[M,N]=(0,d.useState)(null),{t:O}=(0,e.useTranslation)(r),P=J?.inspect===cV,{selectedPerspective:Q}=(0,e.usePerspective)();I[0]!==J?(b=(H=J?.changesInspectorTab)&&il.includes(H)?J.changesInspectorTab:il[0],I[0]=J,I[1]=b):b=I[1];let R=b;I[2]!==J||I[3]!==K?(f=a=>K({...J,changesInspectorTab:a,since:"history"===a?void 0:J?.since}),I[2]=J,I[3]=K,I[4]=f):f=I[4];let S=f;I[5]!==Q||I[6]!==O?(g=(0,e.isReleaseDocument)(Q)?Q.metadata.title:O("drafts"===Q?"compare-versions.status.draft":"compare-versions.status.published"),I[5]=Q,I[6]=O,I[7]=g):g=I[7];let T=g,U=P?"":void 0;I[8]!==O?(h=O("changes.tab.history"),I[8]=O,I[9]=h):h=I[9],I[10]!==S?(j=()=>S("history"),I[10]=S,I[11]=j):j=I[11];let V="history"===R;I[12]!==h||I[13]!==j||I[14]!==V?(k=(0,c.jsx)(o.Tab,{"aria-controls":"history-panel",id:"history-tab",label:h,onClick:j,selected:V}),I[12]=h,I[13]=j,I[14]=V,I[15]=k):k=I[15],I[16]!==O?(l=O("changes.tab.review-changes"),I[16]=O,I[17]=l):l=I[17],I[18]!==S?(m=()=>S("review"),I[18]=S,I[19]=m):m=I[19];let W="review"===R;I[20]!==W||I[21]!==l||I[22]!==m?(n=(0,c.jsx)(o.Tab,{"aria-controls":"review-changes-panel",id:"changes-tab",label:l,onClick:m,selected:W}),I[20]=W,I[21]=l,I[22]=m,I[23]=n):n=I[23],I[24]!==n||I[25]!==k?(p=(0,c.jsxs)(an.TabList,{space:1,flex:1,children:[k,n]}),I[24]=n,I[25]=k,I[26]=p):p=I[26],I[27]!==O?(q=O("changes.action.close-label"),I[27]=O,I[28]=q):q=I[28];let X=a.onClose;I[29]!==O?(s=O("document-inspector.close-button.tooltip"),I[29]=O,I[30]=s):s=I[30],I[31]!==s?(t={content:s},I[31]=s,I[32]=t):t=I[32],I[33]!==a.onClose||I[34]!==q||I[35]!==t?(u=(0,c.jsx)(o.Button,{"aria-label":q,icon:i.CloseIcon,mode:"bleed",onClick:X,tooltipProps:t}),I[33]=a.onClose,I[34]=q,I[35]=t,I[36]=u):u=I[36],I[37]!==p||I[38]!==u?(v=(0,c.jsx)(an.Card,{paddingBottom:1,children:(0,c.jsxs)(an.Flex,{align:"center",padding:3,gap:2,children:[p,u]})}),I[37]=p,I[38]=u,I[39]=v):v=I[39],I[40]!==O?(w=(0,c.jsx)(an.Box,{flex:1,padding:1,children:(0,c.jsx)(an.Text,{size:1,children:(0,c.jsx)(e.Translate,{t:O,i18nKey:"changes.banner.tooltip"})})}),I[40]=O,I[41]=w):w=I[41],I[42]===Symbol.for("react.memo_cache_sentinel")?(x=(0,c.jsx)(an.Text,{size:0,muted:!0,children:(0,c.jsx)(i.InfoOutlineIcon,{fontSize:1})}),I[42]=x):x=I[42],I[43]!==M||I[44]!==w?(y=(0,c.jsx)(o.Tooltip,{portal:!0,placement:"bottom-end",boundaryElement:M,content:w,children:x}),I[43]=M,I[44]=w,I[45]=y):y=I[45],I[46]!==T?(z={perspective:T},I[46]=T,I[47]=z):z=I[47],I[48]!==O||I[49]!==z?(A=(0,c.jsx)(an.Text,{size:0,muted:!0,children:(0,c.jsx)(e.Translate,{t:O,values:z,i18nKey:"changes.banner.description"})}),I[48]=O,I[49]=z,I[50]=A):A=I[50],I[51]!==y||I[52]!==A?(B=(0,c.jsx)(an.Card,{padding:2,marginBottom:3,marginX:3,tone:"neutral",border:!0,radius:3,children:(0,c.jsxs)(an.Flex,{gap:2,align:"flex-start",children:[y,A]})}),I[51]=y,I[52]=A,I[53]=B):B=I[53];let Y="history"!==R;I[54]!==R||I[55]!==L.beta?.eventsAPI?.documents?(C=L.beta?.eventsAPI?.documents?(0,c.jsx)(ih,{showList:"history"===R}):(0,c.jsx)(ij,{showList:"history"===R}),I[54]=R,I[55]=L.beta?.eventsAPI?.documents,I[56]=C):C=I[56],I[57]!==Y||I[58]!==C?(D=(0,c.jsx)(ao.TabPanel,{"aria-labelledby":"history-tab",height:"fill",hidden:Y,id:"history-panel",children:C}),I[57]=Y,I[58]=C,I[59]=D):D=I[59];let Z="review"!==R;return I[60]!==R||I[61]!==L.beta?.eventsAPI?.documents?(E=L.beta?.eventsAPI?.documents?(0,c.jsx)(c.Fragment,{children:"review"===R?(0,c.jsx)(ib,{showChanges:"review"===R}):null}):(0,c.jsx)(hR,{showChanges:"review"===R}),I[60]=R,I[61]=L.beta?.eventsAPI?.documents,I[62]=E):E=I[62],I[63]!==Z||I[64]!==E?(F=(0,c.jsx)(ao.TabPanel,{"aria-labelledby":"review-tab",hidden:Z,id:"review-panel",height:"fill",children:E}),I[63]=Z,I[64]=E,I[65]=F):F=I[65],I[66]!==v||I[67]!==B||I[68]!==D||I[69]!==U||I[70]!==F?(G=(0,c.jsxs)(ik,{direction:"column",padding:0,height:"fill","data-ready":U,ref:N,children:[v,B,D,F]}),I[66]=v,I[67]=B,I[68]=D,I[69]=U,I[70]=F,I[71]=G):G=I[71],G},onClose:({params:a})=>({params:{...a,since:void 0,rev:void 0,changesInspectorTab:void 0,historyVersion:void 0}}),onOpen:({params:a})=>({params:{...a,since:"@lastPublished"}})}],iA=(0,e.definePlugin)(b=>{let c=b?.icon||i.MasterDetailIcon;return{name:"sanity/structure",document:{actions:a=>Array.from(new Set([...a,...ix])),badges:a=>Array.from(new Set([...a,...iy])),inspectors:a=>Array.from(new Set([...a,...iz]))},tools:[{name:b?.name||"structure",title:b?.title||"Structure",icon:c,component:(0,d.lazy)(()=>a.A(542661)),canHandleIntent:(a,b)=>"create"===a?function(a){return"type"in a&&(!("template"in a)||{template:!0})}(b):"edit"===a&&function(a){return"id"in a&&(!("mode"in a)||{mode:"structure"===a.mode})}(b),getIntentState:hO,controlsDocumentTitle:!0,options:b,router:is,__internalApplicationType:"sanity/structure"}],i18n:{bundles:[s]}}});var iB=Object.freeze({__proto__:null,default:f8}),iC=Object.freeze({__proto__:null,default:hK})}];

//# sourceMappingURL=node_modules_e8979ee9._.js.map