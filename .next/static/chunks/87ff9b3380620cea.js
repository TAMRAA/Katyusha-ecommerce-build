(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,459823,(e,t,n)=>{var i=e.r(220250);t.exports=e.r(876168)(function(e,t,n){return t=t.toLowerCase(),e+(n?i(t):t)})},936209,(e,t,n)=>{t.exports=e.r(876168)(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})},923064,738465,e=>{"use strict";let t;e.s(["BackLink",()=>sq,"DocumentPane",()=>sN,"LOADING_PANE",()=>oO,"LoadingPane",()=>lv,"Pane",()=>iq,"PaneContainer",()=>uf,"PaneContent",()=>iX,"PaneHeader",()=>li,"PaneHeaderActions",()=>aS,"PaneItem",()=>aT,"PaneLayout",()=>lc,"StructureToolPane",()=>s1,"_DEBUG",()=>oV,"setActivePanes",()=>ub,"structureTool",()=>dl,"useDocumentLastRev",()=>sw,"usePane",()=>iY,"usePaneLayout",()=>iN,"useStructureTool",()=>lC],923064);var n=e.i(892510);e.s(["SerializeError",()=>S,"StructureToolProvider",()=>em,"getExtendedProjection",()=>w,"structureLocaleNamespace",()=>b,"structureUsEnglishLocaleBundle",()=>y],738465);var i=e.i(299749),l=e.i(843476),o=e.i(271645),r=e.i(537152),s=e.i(216024),a=e.i(527108),u=e.i(179684),d=e.i(447912),c=e.i(459823),p=e.i(809054),m=e.i(385658),h=e.i(909817),g=e.i(936209),f=e.i(312669),v=e.i(160191),x=e.i(797341);let b="structure",y=(0,r.defineLocaleResourceBundle)({locale:"en-US",namespace:b,resources:()=>e.A(360348)}),j=["_id","_type","_createdAt","_updatedAt","_rev"];function w(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t.map(t=>(function e(t,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],[l,...o]=n;if(!("fields"in t))return"";let r=t.fields.find(e=>e.name===l);if(!r){if(!j.includes(l)){let e='The current ordering config targeted the nonexistent field "'.concat(l,'" on schema type "').concat(t.name,'". It should be one of ').concat(t.fields.map(e=>e.name).join(", "));if(i)throw Error(e);console.warn(e)}return""}if("to"in r.type&&"reference"===r.type.name){let t=r.type.to;return"".concat(l,"->{").concat(t.map(t=>e(t,o)).join(","),"}")}let s=o.length>0&&e(r.type,o);return o.length>0?"".concat(l).concat(s?"{".concat(s,"}"):""):l})(e,t.field.split("."),n)).join(", ")}class S extends Error{withHelpUrl(e){return this.helpId=e,this}constructor(e,t,n,i){super(e),this.name="SerializeError";let l=typeof n>"u"?"<unknown>":"".concat(n);this.path=(t||[]).concat(i?"".concat(l," (").concat(i,")"):l)}}let C={ID_REQUIRED:"structure-node-id-required",TITLE_REQUIRED:"structure-title-required",FILTER_REQUIRED:"structure-filter-required",INVALID_LIST_ITEM:"structure-invalid-list-item",COMPONENT_REQUIRED:"structure-view-component-required",DOCUMENT_ID_REQUIRED:"structure-document-id-required",SCHEMA_TYPE_REQUIRED:"structure-schema-type-required",SCHEMA_TYPE_NOT_FOUND:"structure-schema-type-not-found",LIST_ITEMS_MUST_BE_ARRAY:"structure-list-items-must-be-array",QUERY_PROVIDED_FOR_FILTER:"structure-query-provided-for-filter",ACTION_OR_INTENT_REQUIRED:"structure-action-or-intent-required",LIST_ITEM_IDS_MUST_BE_UNIQUE:"structure-list-item-ids-must-be-unique",ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE:"structure-action-and-intent-mutually-exclusive",API_VERSION_REQUIRED_FOR_CUSTOM_FILTER:"structure-api-version-required-for-custom-filter"},_={title:"Last edited",i18n:{title:{key:"menu-items.sort-by.last-edited",ns:b}},name:"lastEditedDesc",by:[{field:"_updatedAt",direction:"desc"}]},I=[_,{title:"Created",i18n:{title:{key:"menu-items.sort-by.created",ns:b}},name:"lastCreatedDesc",by:[{field:"_createdAt",direction:"desc"}]}];function T(e,t,n){return e instanceof R?e.serialize({path:n,index:t}):e}class R{action(e){return this.clone({action:e})}getAction(){return this.spec.action}intent(e){return this.clone({intent:e})}getIntent(){return this.spec.intent}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}group(e){return this.clone({group:e})}getGroup(){return this.spec.group}icon(e){return this.clone({icon:e})}getIcon(){return this.spec.icon}params(e){return this.clone({params:e})}getParams(){return this.spec.params}showAsAction(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return this.clone({showAsAction:!!e})}getShowAsAction(){return this.spec.showAsAction}serialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{path:[]},{title:t,action:n,intent:i}=this.spec;if(!t)throw new S("`title` is required for menu item",e.path,e.index,"string"==typeof n?'action: "'.concat(n,'"'):void 0).withHelpUrl(C.TITLE_REQUIRED);if(!n&&!i)throw new S("`action` or `intent` required for menu item with title ".concat(this.spec.title),e.path,e.index,'"'.concat(t,'"')).withHelpUrl(C.ACTION_OR_INTENT_REQUIRED);if(i&&n)throw new S("cannot set both `action` AND `intent`",e.path,e.index,'"'.concat(t,'"')).withHelpUrl(C.ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE);return{...this.spec,title:t}}clone(e){let t=new R(this._context);return t.spec={...this.spec,...e},t}constructor(e,t){this._context=e,this.spec=t||{}}}function P(e,t,n){let{by:i,title:l,i18n:o}=t,r=new R(e).group("sorting").title(e.i18n.t("default-menu-item.fallback-title",{ns:"studio",replace:{title:l}})).icon(d.SortIcon).action("setSortOrder").params({by:i,extendedProjection:n});return o&&(r=r.i18n(o)),r}function E(e,t){let{schema:n}=e,i="string"==typeof t?n.get(t):t;return i&&"orderings"in i?(i.orderings?i.orderings.concat(I):I).map(t=>P(e,t,w(i,t.by))):[]}function k(e,t,n){return e instanceof D?e.serialize({path:n,index:t}):e}class D{id(e){return new D(this._context,{id:e,title:this._title,i18n:this._i18n})}getId(){return this._id}title(e){return new D(this._context,{title:e,id:this._id,i18n:this._i18n})}getTitle(){return this._title}i18n(e){return new D(this._context,{i18n:e,id:this._id,title:this._title})}getI18n(){return this._i18n}serialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{path:[]};if(!this._id)throw new S("`id` is required for a menu item group",e.path,e.index,this._title).withHelpUrl(C.ID_REQUIRED);if(!this._title)throw new S("`title` is required for a menu item group",e.path,this._id).withHelpUrl(C.TITLE_REQUIRED);return{id:this._id,title:this._title,i18n:this._i18n}}constructor(e,t){this._context=e,this._id=t?t.id:"",this._title=t?t.title:"",this._i18n=t?t.i18n:void 0}}let M=/([^A-Za-z0-9-_.])/;function F(e,t,n){if("string"!=typeof e)throw new S("Structure node id must be of type string, got ".concat(typeof e),t,n);let[i]=e.match(M)||[];if(i)throw new S('Structure node id cannot contain character "'.concat(i,'"'),t,n);if(e.startsWith("__edit__"))throw new S("Structure node id cannot start with __edit__",t,n);return e}function A(e,t){if(t)return t;let n=(0,c.default)(e);return M.test(n)?(0,c.default)((0,p.default)(e)):n}class L{id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:A(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}child(e){return this.clone({child:e})}getChild(){return this.spec.child}component(e){return this.clone({component:e})}getComponent(){return this.spec.component}options(e){return this.clone({options:e})}getOptions(){return this.spec.options||{}}menuItems(e){return this.clone({menuItems:e})}getMenuItems(){return this.spec.menuItems}menuItemGroups(e){return this.clone({menuItemGroups:e})}getMenuItemGroups(){return this.spec.menuItemGroups}canHandleIntent(e){return this.clone({canHandleIntent:e})}serialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{path:[]},{id:t,title:n,child:i,options:l,component:o}=this.spec;if(!t)throw new S("`id` is required for `component` structure item",e.path,e.index).withHelpUrl(C.ID_REQUIRED);if(!o)throw new S("`component` is required for `component` structure item",e.path,e.index).withHelpUrl(C.ID_REQUIRED);return{id:F(t,e.path,e.index),title:n,type:"component",child:i,component:o,canHandleIntent:this.spec.canHandleIntent,options:l||{},menuItems:(this.spec.menuItems||[]).map((t,n)=>T(t,n,e.path)),menuItemGroups:(this.spec.menuItemGroups||[]).map((t,n)=>k(t,n,e.path))}}clone(e){let t=new L;return t.spec={...this.spec,...e},t}constructor(e){this.spec={options:{},...e||{}}}}class V{title(e){return this.clone({title:e})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}serialize(){return{...this.spec}}clone(e){let t=new V;return t.spec={...this.spec,...e},t}constructor(e){this.spec={id:(0,m.default)("__divider__"),type:"divider",...e}}}async function z(e,t){return await e(r.DEFAULT_STUDIO_CLIENT_OPTIONS).fetch("*[sanity::versionOf($publishedId)][0]._type",{publishedId:(0,s.getPublishedId)(t)},{tag:"structure.resolve-type"})}class O{id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:this.spec.id||(0,g.default)(e)})}getTitle(){return this.spec.title}icon(e){return this.clone({icon:e})}getIcon(){return this.spec.icon}serialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{path:[]},{id:t,title:n,icon:i}=this.spec;if(!t)throw new S("`id` is required for view item",e.path,e.index).withHelpUrl(C.ID_REQUIRED);if(!n)throw new S("`title` is required for view item",e.path,e.index).withHelpUrl(C.TITLE_REQUIRED);return{id:F(t,e.path,e.index),title:n,icon:i}}constructor(){(0,i._)(this,"spec",{})}}function B(e,t,n){return"function"==typeof e.serialize?e.serialize({path:n,index:t}):e}class H extends O{component(e){return this.clone({component:e})}getComponent(){return this.spec.component}options(e){return this.clone({options:e})}getOptions(){return this.spec.options||{}}serialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{path:[]},t=super.serialize(e),n=this.spec.component;if("function"!=typeof n)throw new S("`component` is required and must be a function for `component()` view item",e.path,e.index).withHelpUrl(C.COMPONENT_REQUIRED);return{...t,component:n,options:this.spec.options||{},type:"component"}}clone(e){let t=new H;return t.spec={...this.spec,...e},t}constructor(e){let t=(e=>(0,r.isRecord)(e)&&"component"===e.type)(e)?{...e}:{options:{}};super(),this.spec=t;let n="function"==typeof e?e:this.spec.component;n&&(this.spec=this.component(n).spec)}}class N extends O{serialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{path:[]};return{...super.serialize(e),type:"form"}}clone(e){let t=new N;return t.spec={...this.spec,...e},t}constructor(e){super(),this.spec={id:"editor",title:"Editor",...e||{}}}}let U=e=>new N(e);var G=Object.freeze({__proto__:null,ComponentViewBuilder:H,FormViewBuilder:N,GenericViewBuilder:O,component:e=>new H(e),form:U,maybeSerializeView:B});class W{id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:A(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}child(e){return this.clone({child:e})}getChild(){return this.spec.child}documentId(e){let t=this.spec.id||e;return this.clone({id:t,options:{...this.spec.options,id:e}})}getDocumentId(){var e;return null==(e=this.spec.options)?void 0:e.id}schemaType(e){return this.clone({options:{...this.spec.options,type:"string"==typeof e?e:e.name}})}getSchemaType(){var e;return null==(e=this.spec.options)?void 0:e.type}initialValueTemplate(e,t){return this.clone({options:{...this.spec.options,template:e,templateParameters:t}})}getInitialValueTemplate(){var e;return null==(e=this.spec.options)?void 0:e.template}getInitialValueTemplateParameters(){var e;return null==(e=this.spec.options)?void 0:e.templateParameters}views(e){return this.clone({views:e})}getViews(){return this.spec.views||[]}serialize(){let{path:e=[],index:t,hint:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{path:[]},i=e[t||e.length-1],l=this.spec.id||i&&"".concat(i)||"",o={id:l,type:void 0,template:void 0,templateParameters:void 0,...this.spec.options};if("string"!=typeof l||!l)throw new S("`id` is required for document nodes",e,t,n).withHelpUrl(C.ID_REQUIRED);if(!o||!o.id)throw new S("document id (`id`) is required for document nodes",e,l,n).withHelpUrl(C.DOCUMENT_ID_REQUIRED);if(!o||!o.type)throw new S("document type (`schemaType`) is required for document nodes",e,l,n);let r=(this.spec.views&&this.spec.views.length>0?this.spec.views:[U()]).map((t,n)=>B(t,n,e)),s=r.map(e=>e.id),a=(0,h.default)(s.filter((e,t)=>s.includes(e,t+1)));if(a.length>0)throw new S("document node has views with duplicate IDs: ".concat(a.join(",  ")),e,l,n);return{...this.spec,child:this.spec.child||(e=>{let{resolveDocumentNode:t,getClient:n}=e;return async(e,i)=>{let{params:l,path:o}=i,r=l.type,s=o.slice(0,o.length-1),a=o[o.length-1];if(r||(r=await z(n,e)),!r)throw new S("Failed to resolve document, and no type provided in parameters.",s,a);return t({documentId:e,schemaType:r})}})(this._context),id:F(l,e,t),type:"document",options:function(e){let t={id:e.id||"",type:e.type||"*"};return e.template&&(t.template=e.template),e.templateParameters&&(t.templateParameters=e.templateParameters),t}(o),views:r}}clone(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new W(this._context),n={...this.spec.options,...e.options};return t.spec={...this.spec,...e,options:n},t}constructor(e,t){this._context=e,this.spec=t||{}}}class q{id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}description(e){return this.clone({description:e})}getDescription(){return this.spec.description}templateId(e){let t=this.spec.id||e;return this.clone({id:t,templateId:e})}getTemplateId(){return this.spec.templateId}parameters(e){return this.clone({parameters:e})}getParameters(){return this.spec.parameters}serialize(){let{path:e=[],index:t,hint:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{path:[]};if("string"!=typeof this.spec.id||!this.spec.id)throw new S("`id` is required for initial value template item nodes",e,t,n).withHelpUrl(C.ID_REQUIRED);if(!this.spec.templateId)throw new S("template id (`templateId`) is required for initial value template item nodes",e,this.spec.id,n).withHelpUrl(C.ID_REQUIRED);let i=this._context.templates.find(e=>e.id===this.spec.templateId);if(!i)throw new S("template id (`templateId`) is required for initial value template item nodes",e,this.spec.id,n).withHelpUrl(C.ID_REQUIRED);return{id:this.spec.id,templateId:this.spec.id,schemaType:i.schemaType,type:"initialValueTemplateItem",description:this.spec.description||i.description,title:this.spec.title||i.title,subtitle:this.spec.subtitle,icon:this.spec.icon||i.icon,initialDocumentId:this.spec.initialDocumentId,parameters:this.spec.parameters}}clone(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new q(this._context);return t.spec={...this.spec,...e},t}constructor(e,t){this._context=e,this.spec=t||{}}}let K=Symbol("Document type list canHandleIntent"),Y=(e,t,n)=>{var i,l;let{pane:o}=n,r="create"===e,s=(null==(i=o.options)?void 0:i.filter)||"",a=(null==(l=o.options)?void 0:l.params)||{},u=o.schemaTypeName?[o.schemaTypeName]:ee(s,a),d=o.initialValueTemplates||[];return r&&t.template?d.some(e=>e.templateId===t.template):"edit"===e&&t.id&&u.includes(t.type)||r&&u.includes(t.type)};Y.identity=K;let X=["default","card","media","detail","block"];function Q(){}let $=(e,t,n)=>{let{pane:i,index:l}=n;return l<=1&&Y(e,t,{pane:i})};class J{id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:A(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}defaultLayout(e){return this.clone({defaultLayout:e})}getDefaultLayout(){return this.spec.defaultLayout}menuItems(e){return this.clone({menuItems:e})}getMenuItems(){return this.spec.menuItems}menuItemGroups(e){return this.clone({menuItemGroups:e})}getMenuItemGroups(){return this.spec.menuItemGroups}child(e){return this.clone({child:e})}getChild(){return this.spec.child}canHandleIntent(e){return this.clone({canHandleIntent:e})}getCanHandleIntent(){return this.spec.canHandleIntent}showIcons(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return this.clone({displayOptions:{...this.spec.displayOptions,showIcons:e}})}getShowIcons(){return this.spec.displayOptions?this.spec.displayOptions.showIcons:void 0}initialValueTemplates(e){return this.initialValueTemplatesSpecified=!0,this.clone({initialValueTemplates:Array.isArray(e)?e:[e]})}getInitialValueTemplates(){return this.spec.initialValueTemplates}serialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{path:[]},t=this.spec.id||"",n=e.path,i=this.spec.defaultLayout;if(i&&!X.includes(i))throw new S("`layout` must be one of ".concat(X.map(e=>'"'.concat(e,'"')).join(", ")),n,t||e.index,this.spec.title);let l=(this.spec.initialValueTemplates||[]).map((e,t)=>e instanceof q?e.serialize({path:n,index:t}):e);return{id:F(t,e.path,t||e.index),title:this.spec.title,i18n:this.spec.i18n,type:"genericList",defaultLayout:i,child:this.spec.child||Q,canHandleIntent:this.spec.canHandleIntent||$,displayOptions:this.spec.displayOptions,initialValueTemplates:l,menuItems:(this.spec.menuItems||[]).map((e,t)=>T(e,t,n)),menuItemGroups:(this.spec.menuItemGroups||[]).map((e,t)=>k(e,t,n))}}constructor(){(0,i._)(this,"initialValueTemplatesSpecified",!1),(0,i._)(this,"spec",{})}}class Z extends J{apiVersion(e){return this.clone({options:{...this.spec.options||{filter:""},apiVersion:e}})}getApiVersion(){var e;return null==(e=this.spec.options)?void 0:e.apiVersion}filter(e){return this.clone({options:{...this.spec.options,filter:e}})}getFilter(){var e;return null==(e=this.spec.options)?void 0:e.filter}schemaType(e){let t="string"==typeof e?e:e.name;return this.clone({schemaTypeName:t})}getSchemaType(){return this.spec.schemaTypeName}params(e){return this.clone({options:{...this.spec.options||{filter:""},params:e}})}getParams(){var e;return null==(e=this.spec.options)?void 0:e.params}defaultOrdering(e){if(!Array.isArray(e))throw Error("`defaultOrdering` must be an array of order clauses");return this.clone({options:{...this.spec.options||{filter:""},defaultOrdering:e}})}getDefaultOrdering(){var e;return null==(e=this.spec.options)?void 0:e.defaultOrdering}serialize(){var e;let t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{path:[]};if("string"!=typeof this.spec.id||!this.spec.id)throw new S("`id` is required for document lists",n.path,n.index,this.spec.title).withHelpUrl(C.ID_REQUIRED);if(!this.spec.options||!this.spec.options.filter)throw new S("`filter` is required for document lists",n.path,this.spec.id,this.spec.title).withHelpUrl(C.FILTER_REQUIRED);return(null==(e=this.spec.options)?void 0:e.filter)!=="_type == $type"&&this.spec.options.filter&&!this.spec.options.apiVersion&&console.warn("No apiVersion specified for document type list with custom filter: `".concat(this.spec.options.filter,"`. This will be required in the future. See %s for more info."),(0,f.generateHelpUrl)(C.API_VERSION_REQUIRED_FOR_CUSTOM_FILTER)),{...super.serialize(n),type:"documentList",schemaTypeName:this.spec.schemaTypeName,child:this.spec.child||(t=this._context,(e,n)=>{var i;let l=n.parent,o=(null==(i=n.params)?void 0:i.template)?t.templates.find(e=>e.id===n.params.template):void 0;return Promise.resolve(o?o.schemaType:l.schemaTypeName||z(t.getClient,e)).then(n=>n?t.resolveDocumentNode({schemaType:n,documentId:e}):new W(t).id("editor").documentId(e).schemaType(""))}),options:{...this.spec.options,apiVersion:this.spec.options.apiVersion||r.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion,filter:((e,t)=>{var n;let i=(null==(n=e.options)?void 0:n.filter.trim())||"";if(["*","{"].includes(i[0]))throw new S("`filter` cannot start with `".concat(i[0],"` - looks like you are providing a query, not a filter"),t.path,e.id,e.title).withHelpUrl(C.QUERY_PROVIDED_FOR_FILTER);return i})(this.spec,n)}}}clone(e){let t=new Z(this._context);return t.spec={...this.spec,...e},this.initialValueTemplatesSpecified||(t.spec.initialValueTemplates=function(e,t){let{document:n}=e,{schemaTypeName:i,options:l}=t,{filter:o,params:r}=l||{filter:"",params:{}},s=i?[i]:Array.from(new Set(ee(o,r)));if(0!==s.length)return s.flatMap(e=>n.resolveNewDocumentOptions({type:"structure",schemaType:e})).map(e=>({...e,icon:d.AddIcon}))}(this._context,t.spec)),t.spec.schemaTypeName||(t.spec.schemaTypeName=function(e){let{options:t}=e,{filter:n,params:i}=t||{filter:"",params:{}},l=ee(n,i);return 1===l.length?l[0]:void 0}(t.spec)),t}getSpec(){return this.spec}constructor(e,t){super(),this._context=e,this.spec=t||{},this.initialValueTemplatesSpecified=!!(null==t?void 0:t.initialValueTemplates)}}function ee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=/\b_type\s*==\s*(['"].*?['"]|\$.*?(?:\s|$))|\B(['"].*?['"]|\$.*?(?:\s|$))\s*==\s*_type/g,l=[];for(;null!==(t=i.exec(e));)l.push(t[1]||t[2]);return l.map(e=>(("$"===e[0]?n[e.slice(1)]:e)||"").trim().replace(/^["']|["']$/g,"")).filter(Boolean)}(e,t);return 0===n.length&&(n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(/\b_type\s+in\s+\[(.*?)\]/);return n?n[1].split(/,\s*/).map(e=>e.trim().replace(/^["']+|["']+$/g,"")).map(e=>"$"===e[0]?t[e.slice(1)]:e).filter(Boolean):[]}(e,t)),n}let et=e=>"listItem"===e.type,en=(e,t,n)=>(n.pane.items||[]).filter(es).some(e=>e.schemaType.name===t.type&&e._id===t.id)||$(e,t,n),ei=(e,t)=>{let n=(t.parent.items.filter(et).find(t=>t.id===e)||{child:void 0}).child;return n&&"function"==typeof n&&"function"==typeof n?n(e,t):n};class el extends J{items(e){return this.clone({items:e})}getItems(){return this.spec.items}serialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{path:[]},t=this.spec.id;if("string"!=typeof t||!t)throw new S("`id` is required for lists",e.path,e.index).withHelpUrl(C.ID_REQUIRED);let n=typeof this.spec.items>"u"?[]:this.spec.items;if(!Array.isArray(n))throw new S("`items` must be an array of items",e.path,e.index).withHelpUrl(C.LIST_ITEMS_MUST_BE_ARRAY);let i=(e.path||[]).concat(t),l=n.map((e,t)=>(function(e,t,n){if(e instanceof eo)return e.serialize({path:n,index:t});if(e instanceof V)return e.serialize();if(e&&"divider"===e.type)return e;if(!e||"listItem"!==e.type){var i;let l=e&&e.type||(e instanceof el?"ListBuilder":(i=e,(0,r.isRecord)(i)&&"function"==typeof i.then)?"Promise":Array.isArray(e)?"array":typeof e);throw new S('List items must be of type "listItem", got "'.concat(l,'"').concat("array"===l?" - did you forget to spread (...moreItems)?":""),n,t).withHelpUrl(C.INVALID_LIST_ITEM)}return e})(e,t,i)),o=l.filter((e,t)=>(0,v.default)(l,{id:e.id},t+1));if(o.length>0){let t=o.map(e=>e.id).slice(0,5),n=o.length>5?"".concat(t.join(", "),"..."):t.join(", ");throw new S("List items with same ID found (".concat(n,")"),e.path,e.index).withHelpUrl(C.LIST_ITEM_IDS_MUST_BE_UNIQUE)}return{...super.serialize(e),type:"list",canHandleIntent:this.spec.canHandleIntent||en,child:this.spec.child||ei,items:l}}clone(e){let t=new el(this._context);return t.spec={...this.spec,...e},t}constructor(e,t){super(),this._context=e,this.spec=t||{},this.initialValueTemplatesSpecified=!!(t&&t.initialValueTemplates)}}class eo{id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:A(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}icon(e){return this.clone({icon:e})}showIcon(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return this.clone({displayOptions:{...this.spec.displayOptions,showIcon:e}})}getShowIcon(){return this.spec.displayOptions?this.spec.displayOptions.showIcon:void 0}getIcon(){return this.spec.icon}child(e){return this.clone({child:e})}getChild(){return this.spec.child}schemaType(e){return this.clone({schemaType:e})}getSchemaType(){let e=this.spec.schemaType;return"string"==typeof e?this._context.schema.get(e):this.spec.schemaType}serialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{path:[]},{id:t,title:n,child:i}=this.spec;if("string"!=typeof t||!t)throw new S("`id` is required for list items",e.path,e.index).withHelpUrl(C.ID_REQUIRED);if(!e.titleIsOptional&&("string"!=typeof n||!n))throw new S("`title` is required for list items",e.path,t).withHelpUrl(C.TITLE_REQUIRED);let l=this.spec.schemaType;if("string"==typeof l){let n=this._context.schema.get(l);if(!n)throw new S('Could not find type "'.concat(l,'" in schema'),e.path,t).withHelpUrl(C.SCHEMA_TYPE_NOT_FOUND);l=n}let o={path:e.path.concat(t),hint:"child"},r=i instanceof L||i instanceof Z||i instanceof W||i instanceof el?i.serialize(o):i;if("function"==typeof r){let e=r;r=(t,n)=>e(t,{...n,serializeOptions:o})}return{...this.spec,id:F(t,e.path,e.index),schemaType:l,child:r,title:n,type:"listItem"}}clone(e){let t=new eo(this._context);return t.spec={...this.spec,...e},t}constructor(e,t){this._context=e,this.spec=t||{}}}class er extends eo{serialize(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{path:[]},n=super.serialize({...t,titleIsOptional:!0});if(!n.schemaType)throw new S("`schemaType` is required for document list items",t.path,t.index).withHelpUrl(C.SCHEMA_TYPE_REQUIRED);let i=n.child||(e=this._context,t=>{let i=n.schemaType&&("string"==typeof n.schemaType?n.schemaType:n.schemaType.name);return i?e.resolveDocumentNode({schemaType:i,documentId:t}):new W(e).id("documentEditor").documentId(t)});return{...n,child:i,schemaType:n.schemaType,_id:n.id}}clone(e){let t=new er(this._context);return t.spec={...this.spec,...e},t}constructor(e,t){super(e,t),this._context=e,this.spec=t||{}}}function es(e){return(0,r.isRecord)(e)&&"u">typeof e.schemaType&&"string"==typeof e._id}class ea extends Z{child(e){return this.cloneWithoutDefaultIntentHandler({child:e})}clone(e){let t=super.clone(e),n=new ea(this._context);return n.spec={...this.spec,...t.getSpec(),...e},n}cloneWithoutDefaultIntentHandler(e){let t=super.clone(e),n=new ea(this._context),i=this.spec.canHandleIntent,l=i&&i.identity===K?{canHandleIntent:void 0}:{};return n.spec={...t.getSpec(),...this.spec,...e,...l},n}constructor(e,t){super(e),this._context=e,this.spec=t||{}}}let eu=["sanity.imageAsset","sanity.fileAsset"];function ed(e){return(function(e){let{schema:t}=e;return t.getTypeNames().filter(e=>{var n;let i=t.get(e);return i&&(null==(n=i.type)?void 0:n.name)==="document"}).filter(e=>!eu.includes(e))})(e).map(t=>ec(e,t))}function ec(e,t){let{schema:n}=e,i=n.get(t);if(!i)throw Error('Schema type with name "'.concat(t,'" not found'));let l=i.title||(0,x.default)(t);return new eo(e).id(t).title(l).schemaType(i).child((n,i)=>{let l=i.parent,o="list"===l.type?l.items.find(e=>e.id===n):null,r=ep(e,t);return o&&o.title&&(r=r.title(o.title)),r})}function ep(e,t){let{schema:n,resolveDocumentNode:i}=e,l="string"==typeof t?t:t.schemaType,o="string"==typeof l?l:l.name,r="string"==typeof t?{}:t,s=n.get(o);if(!s)throw Error('Schema type with name "'.concat(o,'" not found'));let a=s.title||(0,x.default)(o);return new ea(e).id(r.id||o).title(r.title||a).filter("_type == $type").params({type:o}).schemaType(s).defaultOrdering(_.by).menuItemGroups(r.menuItemGroups||[{id:"sorting",title:"Sort",i18n:{title:{key:"menu-item-groups.actions-group",ns:b}}},{id:"layout",title:"Layout",i18n:{title:{key:"menu-item-groups.layout-group",ns:b}}},{id:"actions",title:"Actions",i18n:{title:{key:"menu-item-groups.sorting-group",ns:b}}}]).child(r.child||(e=>i({schemaType:o,documentId:e}))).canHandleIntent(r.canHandleIntent||Y).menuItems(r.menuItems||[...E(e,s),new R(e).group("layout").i18n({title:{key:"menu-items.layout.compact-view",ns:b}}).title("Compact view").icon(d.StackCompactIcon).action("setLayout").params({layout:"default"}),new R(e).group("layout").i18n({title:{key:"menu-items.layout.detailed-view",ns:b}}).title("Detailed view").icon(d.StackIcon).action("setLayout").params({layout:"detail"})])}function em(e){let{defaultDocumentNode:t,structure:n,children:i}=e,[c,p]=(0,o.useState)(!1),m=(0,r.useSource)(),h=(0,r.useConfigContextFromSource)(m),g=(0,r.useDocumentStore)(),{perspectiveStack:f}=(0,r.usePerspective)(),v=(0,o.useMemo)(()=>(function(e){let{defaultDocumentNode:t,source:n,perspectiveStack:i}=e,l=(0,r.getConfigContextFromSource)(n),o={...n,getStructureBuilder:()=>a,resolveDocumentNode:e=>{let n=(null==t?void 0:t(a,{...e,...l}))||new W(o);return n.getId()||(n=n.id("documentEditor")),e.documentId&&(n=n.documentId((0,s.getPublishedId)(e.documentId))),n.schemaType(e.schemaType)},perspectiveStack:i},a={defaults:()=>(function(e){let t=ed(e);return new el(e).id("__root__").title("Content").i18n({title:{key:"default-definition.content-title",ns:b}}).items(t).showIcons(t.some(e=>{var t;return!!(t=e.getSchemaType())&&"string"!=typeof t&&!!t.icon}))})(o),documentTypeList:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return ep(o,...t)},documentTypeListItem:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return ec(o,...t)},documentTypeListItems:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return ed(o,...t)},document:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new W(o,...t)},documentWithInitialValueTemplate:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,t,n){let{resolveDocumentNode:i,templates:l}=e,o=l.find(e=>e.id===t);if(!o)throw Error('Template with ID "'.concat(t,'" not defined'));return i({schemaType:o.schemaType}).initialValueTemplate(t,n)}(o,...t)},defaultDocument:o.resolveDocumentNode,list:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new el(o,...t)},listItem:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new eo(o,...t)},menuItem:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new R(o,...t)},menuItemGroup:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new D(o,...t)},menuItemsFromInitialValueTemplateItems:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,t){let{schema:n,templates:i}=e;return t.map(t=>{let l=i.find(e=>e.id===t.templateId),o=t.title||(null==l?void 0:l.title)||"Create",r={};l&&l.schemaType&&(r.type=l.schemaType),t.templateId&&(r.template=t.templateId);let s=t.parameters?[r,t.parameters]:r,a=l&&n.get(l.schemaType),u=t.i18n||(null==l?void 0:l.i18n),c=new R(e).title(o).icon(l&&l.icon||(null==a?void 0:a.icon)||d.AddIcon).intent({type:"create",params:s});return u&&(c=c.i18n(u)),c.serialize()})}(o,...t)},documentList:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Z(o,...t)},documentListItem:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new er(o,...t)},orderingMenuItem:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return P(o,...t)},orderingMenuItemsForType:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return E(o,...t)},editor:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,t){let n=(null==t?void 0:t.type)?e.resolveDocumentNode({schemaType:t.type}):new W(e);if(!t)return n;let{id:i,type:l,template:o,templateParameters:r}=t.options;return n=n.id(t.id).documentId(i),l&&(n=n.schemaType(l)),o&&(n=n.initialValueTemplate(o,r)),t.child&&(n=n.child(t.child)),n}(o,...t)},defaultInitialValueTemplateItems:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){let{schema:t,getStructureBuilder:n,templates:i}=e,l=t.getTypeNames();return i.filter(e=>{var t;return!(null==(t=e.parameters)?void 0:t.length)}).sort((e,t)=>l.indexOf(e.schemaType)-l.indexOf(t.schemaType)).map(e=>n().initialValueTemplateItem(e.id))}(o,...t)},initialValueTemplateItem:(e,t)=>new q(o,{id:e,parameters:t,templateId:e}),component:e=>(0,u.isValidElementType)(e)?new L().component(e):new L(e),divider:e=>new V(e),view:G,context:o};return a})({defaultDocumentNode:t,source:m,perspectiveStack:f}),[t,m,f]),x=(0,o.useMemo)(()=>n?n(v,{...h,documentStore:g,perspectiveStack:f}):v.defaults(),[n,v,h,g,f]),y=(0,o.useMemo)(()=>({backButton:c,resizablePanes:!c,reviewChanges:!c,splitPanes:!c,splitViews:!c}),[c]),j=(0,o.useMemo)(()=>({features:y,layoutCollapsed:c,setLayoutCollapsed:p,rootPaneNode:x,structureContext:v.context}),[y,c,x,v.context]);return(0,l.jsx)(a.StructureToolContext.Provider,{value:j,children:i})}var eh=e.i(881933),eg=e.i(725917),ef=e.i(678491),ev=e.i(652468),ex=e.i(815321),eb=e.i(997053),ey=e.i(872774),ej=e.i(846932),ew=e.i(88653),eS=e.i(597083),eC=e.i(201226),e_=e.i(835870),eI=e.i(898892),eT=e.i(368233),eR=e.i(100374),eP=e.i(449242),eE=e.i(94059),ek=e.i(992481),eD=e.i(58832),eM=e.i(827492),eF=e.i(218692),eA=e.i(374e3),eL=e.i(134352),eV=e.i(827341),ez=e.i(711308),eO=e.i(960739),eB=e.i(722249),eH=e.i(10839),eN=e.i(484973),eU=e.i(277497),eG=e.i(800879),eW=e.i(408659),eq=e.i(245281),eK=e.i(993817),eY=e.i(602400),eX=e.i(839338),eQ=e.i(878856),e$=e.i(330823),eJ=e.i(807136),eZ=e.i(817312),e0=e.i(96623),e1=e.i(172441),e2=e.i(254201),e3=e.i(873904),e4=e.i(55083),e5=e.i(629437),e6=e.i(789196),e8=e.i(424981),e7=e.i(970725),e9=e.i(774010),te=e.i(972745),tt=e.i(273638),tn=e.i(482065),ti=e.i(348433),tl=e.i(147956),to=e.i(645456);let tr=e=>{let{clientWidth:t,clientHeight:n,scrollWidth:i,scrollHeight:l}=e;return l>n||i>t},ts=e=>{let t=window.getComputedStyle(e).overflow;return t.includes("auto")||t.includes("scroll")},ta=e=>{if(null==e)return{x:0,y:0};let{scrollTop:t,scrollHeight:n,clientHeight:i,scrollLeft:l,scrollWidth:o,clientWidth:r}=e;return{x:l?l/Math.max(1e-5,o-r):0,y:t?t/Math.max(1e-5,n-i):0}};function tu(){return(tu=Object.assign.bind()).apply(null,arguments)}function td(e){return e.matches("body *")?e:window}class tc{pause(){this.paused=!0}resume(){this.paused=!1}destroy(){this.elements.forEach(e=>this.removeScrollHandler(e))}addScrollHandler(e){this.removeScrollHandler(e),td(e).addEventListener("scroll",this.handleScroll,{passive:!0})}removeScrollHandler(e){td(e).removeEventListener("scroll",this.handleScroll)}getScrollContainer(e){return e instanceof HTMLElement&&e.matches("body *")?e:document.documentElement}mirrorScrollPositions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.elements.forEach(n=>{t!==n&&(this.removeScrollHandler(n),this.setScrollPosition(e,n),window.requestAnimationFrame(()=>{this.addScrollHandler(n)}))})}setScrollPosition(e,t){let{vertical:n,horizontal:i}=this.options,l=t.scrollWidth-t.clientWidth,o=t.scrollHeight-t.clientHeight;n&&o&&t.scrollTo({top:o*e.y,behavior:"instant"}),i&&l&&t.scrollTo({left:l*e.x,behavior:"instant"})}get progress(){return ta(this.elements.find(e=>tr(e)))}set progress(e){"number"==typeof e&&(e={x:e,y:e});let t=tu({},this.progress,e);(function(e,t){let n=!0;for(let[i,l]of Object.entries(e))("number"!=typeof l||l<0||l>1)&&(null==t||t.error("progress.".concat(i," must be a number between 0-1")),n=!1);return n})(t,this.logger)&&this.mirrorScrollPositions(t)}constructor(e,t={}){var n,i=this;this.elements=void 0,this.defaults={vertical:!0,horizontal:!0,debug:!0},this.options=void 0,this.paused=!1,this.logger=void 0,this.handleScroll=async function(e){if(i.paused||!e.currentTarget)return;let t=i.getScrollContainer(e.currentTarget);await new Promise(e=>{requestAnimationFrame(()=>e())}),i.mirrorScrollPositions(ta(t),t)},this.elements=[...e].filter(Boolean).map(e=>this.getScrollContainer(e)),this.elements=[...new Set(this.elements)],this.options=tu({},this.defaults,t),this.options.debug&&(this.logger=(n="[scroll-mirror]",{log:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return console.log(n,...t)},warn:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return console.warn(n,...t)},error:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return console.error(n,...t)}}),function(e,t){if(e.length<1)null==t||t.warn("No elements provided.");else for(let n of(e.length<2&&(null==t||t.warn("Only one element provided.",e)),e.some(e=>!e)&&(null==t||t.error("Some elements are not defined.",e)),e))n instanceof HTMLElement&&!tr(n)&&(null==t||t.warn("Element doesn't have overflow:",n)),n instanceof HTMLElement&&n.matches("body *")&&!ts(n)&&(null==t||t.warn('No "overflow: auto;" or "overflow: scroll;" set on element:',n))}(this.elements,this.logger)),this.elements.forEach(e=>this.addScrollHandler(e)),this.elements.includes(document.documentElement)&&this.mirrorScrollPositions(ta(document.documentElement),document.documentElement)}}var tp=e.i(591692),tm=e.i(432892),th=e.i(224019),tg=e.i(653810),tf=e.i(760719),tv=e.i(302535),tx=e.i(420939),tb=e.i(406800),ty=e.i(542027),tj=e.i(462576),tw=e.i(640289),tS=e.i(83107),tC=e.i(945736),t_=e.i(991426),tI=e.i(408551);function tT(e,t){return"function"==typeof e?e(t):e}function tR(e,t){return n=>{t.setState(t=>({...t,[e]:tT(n,t[e])}))}}function tP(e){return e instanceof Function}function tE(e,t,n){let i,l=[];return o=>{let r,s;n.key&&n.debug&&(r=Date.now());let a=e(o);if(!(a.length!==l.length||a.some((e,t)=>l[t]!==e)))return i;if(l=a,n.key&&n.debug&&(s=Date.now()),i=t(...a),null==n||null==n.onChange||n.onChange(i),n.key&&n.debug&&null!=n&&n.debug()){let e=Math.round((Date.now()-r)*100)/100,t=Math.round((Date.now()-s)*100)/100,i=t/16,l=(e,t)=>{for(e=String(e);e.length<t;)e=" "+e;return e};console.info("%câ± ".concat(l(t,5)," /").concat(l(e,5)," ms"),"\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl(".concat(Math.max(0,Math.min(120-120*i,120)),"deg 100% 31%);"),null==n?void 0:n.key)}return i}}function tk(e,t,n,i){return{debug:()=>{var n;return null!=(n=null==e?void 0:e.debugAll)?n:e[t]},key:!1,onChange:i}}e.i(247167);let tD="debugHeaders";function tM(e,t,n){var i;let l={id:null!=(i=n.id)?i:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{let e=[],t=n=>{n.subHeaders&&n.subHeaders.length&&n.subHeaders.map(t),e.push(n)};return t(l),e},getContext:()=>({table:e,header:l,column:t})};return e._features.forEach(t=>{null==t.createHeader||t.createHeader(l,e)}),l}function tF(e,t,n,i){var l,o;let r=0,s=function(e,t){void 0===t&&(t=1),r=Math.max(r,t),e.filter(e=>e.getIsVisible()).forEach(e=>{var n;null!=(n=e.columns)&&n.length&&s(e.columns,t+1)},0)};s(e);let a=[],u=(e,t)=>{let l={depth:t,id:[i,"".concat(t)].filter(Boolean).join("_"),headers:[]},o=[];e.forEach(e=>{let r,s=[...o].reverse()[0],a=e.column.depth===l.depth,u=!1;if(a&&e.column.parent?r=e.column.parent:(r=e.column,u=!0),s&&(null==s?void 0:s.column)===r)s.subHeaders.push(e);else{let l=tM(n,r,{id:[i,t,r.id,null==e?void 0:e.id].filter(Boolean).join("_"),isPlaceholder:u,placeholderId:u?"".concat(o.filter(e=>e.column===r).length):void 0,depth:t,index:o.length});l.subHeaders.push(e),o.push(l)}l.headers.push(e),e.headerGroup=l}),a.push(l),t>0&&u(o,t-1)};u(t.map((e,t)=>tM(n,e,{depth:r,index:t})),r-1),a.reverse();let d=e=>e.filter(e=>e.column.getIsVisible()).map(e=>{let t=0,n=0,i=[0];return e.subHeaders&&e.subHeaders.length?(i=[],d(e.subHeaders).forEach(e=>{let{colSpan:n,rowSpan:l}=e;t+=n,i.push(l)})):t=1,n+=Math.min(...i),e.colSpan=t,e.rowSpan=n,{colSpan:t,rowSpan:n}});return d(null!=(l=null==(o=a[0])?void 0:o.headers)?l:[]),a}let tA=(e,t,n,i,l,o,r)=>{let s={id:t,index:i,original:n,depth:l,parentId:r,_valuesCache:{},_uniqueValuesCache:{},getValue:t=>{if(s._valuesCache.hasOwnProperty(t))return s._valuesCache[t];let n=e.getColumn(t);if(null!=n&&n.accessorFn)return s._valuesCache[t]=n.accessorFn(s.original,i),s._valuesCache[t]},getUniqueValues:t=>{if(s._uniqueValuesCache.hasOwnProperty(t))return s._uniqueValuesCache[t];let n=e.getColumn(t);if(null!=n&&n.accessorFn)return n.columnDef.getUniqueValues?s._uniqueValuesCache[t]=n.columnDef.getUniqueValues(s.original,i):s._uniqueValuesCache[t]=[s.getValue(t)],s._uniqueValuesCache[t]},renderValue:t=>{var n;return null!=(n=s.getValue(t))?n:e.options.renderFallbackValue},subRows:null!=o?o:[],getLeafRows:()=>(function(e,t){let n=[],i=e=>{e.forEach(e=>{n.push(e);let l=t(e);null!=l&&l.length&&i(l)})};return i(e),n})(s.subRows,e=>e.subRows),getParentRow:()=>s.parentId?e.getRow(s.parentId,!0):void 0,getParentRows:()=>{let e=[],t=s;for(;;){let n=t.getParentRow();if(!n)break;e.push(n),t=n}return e.reverse()},getAllCells:tE(()=>[e.getAllLeafColumns()],t=>t.map(t=>(function(e,t,n,i){let l={id:"".concat(t.id,"_").concat(n.id),row:t,column:n,getValue:()=>t.getValue(i),renderValue:()=>{var t;return null!=(t=l.getValue())?t:e.options.renderFallbackValue},getContext:tE(()=>[e,n,t,l],(e,t,n,i)=>({table:e,column:t,row:n,cell:i,getValue:i.getValue,renderValue:i.renderValue}),tk(e.options,"debugCells","cell.getContext"))};return e._features.forEach(i=>{null==i.createCell||i.createCell(l,n,t,e)},{}),l})(e,s,t,t.id)),tk(e.options,"debugRows","getAllCells")),_getAllCellsByColumnId:tE(()=>[s.getAllCells()],e=>e.reduce((e,t)=>(e[t.column.id]=t,e),{}),tk(e.options,"debugRows","getAllCellsByColumnId"))};for(let t=0;t<e._features.length;t++){let n=e._features[t];null==n||null==n.createRow||n.createRow(s,e)}return s},tL=(e,t,n)=>{var i,l;let o=null==n||null==(i=n.toString())?void 0:i.toLowerCase();return!!(null==(l=e.getValue(t))||null==(l=l.toString())||null==(l=l.toLowerCase())?void 0:l.includes(o))};tL.autoRemove=e=>tq(e);let tV=(e,t,n)=>{var i;return!!(null==(i=e.getValue(t))||null==(i=i.toString())?void 0:i.includes(n))};tV.autoRemove=e=>tq(e);let tz=(e,t,n)=>{var i;return(null==(i=e.getValue(t))||null==(i=i.toString())?void 0:i.toLowerCase())===(null==n?void 0:n.toLowerCase())};tz.autoRemove=e=>tq(e);let tO=(e,t,n)=>{var i;return null==(i=e.getValue(t))?void 0:i.includes(n)};tO.autoRemove=e=>tq(e);let tB=(e,t,n)=>!n.some(n=>{var i;return!(null!=(i=e.getValue(t))&&i.includes(n))});tB.autoRemove=e=>tq(e)||!(null!=e&&e.length);let tH=(e,t,n)=>n.some(n=>{var i;return null==(i=e.getValue(t))?void 0:i.includes(n)});tH.autoRemove=e=>tq(e)||!(null!=e&&e.length);let tN=(e,t,n)=>e.getValue(t)===n;tN.autoRemove=e=>tq(e);let tU=(e,t,n)=>e.getValue(t)==n;tU.autoRemove=e=>tq(e);let tG=(e,t,n)=>{let[i,l]=n,o=e.getValue(t);return o>=i&&o<=l};tG.resolveFilterValue=e=>{let[t,n]=e,i="number"!=typeof t?parseFloat(t):t,l="number"!=typeof n?parseFloat(n):n,o=null===t||Number.isNaN(i)?-1/0:i,r=null===n||Number.isNaN(l)?1/0:l;if(o>r){let e=o;o=r,r=e}return[o,r]},tG.autoRemove=e=>tq(e)||tq(e[0])&&tq(e[1]);let tW={includesString:tL,includesStringSensitive:tV,equalsString:tz,arrIncludes:tO,arrIncludesAll:tB,arrIncludesSome:tH,equals:tN,weakEquals:tU,inNumberRange:tG};function tq(e){return null==e||""===e}function tK(e,t,n){return!!e&&!!e.autoRemove&&e.autoRemove(t,n)||void 0===t||"string"==typeof t&&!t}let tY={sum:(e,t,n)=>n.reduce((t,n)=>{let i=n.getValue(e);return t+("number"==typeof i?i:0)},0),min:(e,t,n)=>{let i;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(i>n||void 0===i&&n>=n)&&(i=n)}),i},max:(e,t,n)=>{let i;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(i<n||void 0===i&&n>=n)&&(i=n)}),i},extent:(e,t,n)=>{let i,l;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(void 0===i?n>=n&&(i=l=n):(i>n&&(i=n),l<n&&(l=n)))}),[i,l]},mean:(e,t)=>{let n=0,i=0;if(t.forEach(t=>{let l=t.getValue(e);null!=l&&(l*=1)>=l&&(++n,i+=l)}),n)return i/n},median:(e,t)=>{if(!t.length)return;let n=t.map(t=>t.getValue(e));if(!function(e){return Array.isArray(e)&&e.every(e=>"number"==typeof e)}(n))return;if(1===n.length)return n[0];let i=Math.floor(n.length/2),l=n.sort((e,t)=>e-t);return n.length%2!=0?l[i]:(l[i-1]+l[i])/2},unique:(e,t)=>Array.from(new Set(t.map(t=>t.getValue(e))).values()),uniqueCount:(e,t)=>new Set(t.map(t=>t.getValue(e))).size,count:(e,t)=>t.length},tX=()=>({left:[],right:[]}),tQ={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},t$=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),tJ=null;function tZ(e){return"touchstart"===e.type}function t0(e,t){return t?"center"===t?e.getCenterVisibleLeafColumns():"left"===t?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}let t1=()=>({pageIndex:0,pageSize:10}),t2=()=>({top:[],bottom:[]}),t3=(e,t,n,i,l)=>{var o;let r=l.getRow(t,!0);n?(r.getCanMultiSelect()||Object.keys(e).forEach(t=>delete e[t]),r.getCanSelect()&&(e[t]=!0)):delete e[t],i&&null!=(o=r.subRows)&&o.length&&r.getCanSelectSubRows()&&r.subRows.forEach(t=>t3(e,t.id,n,i,l))};function t4(e,t){let n=e.getState().rowSelection,i=[],l={},o=function(e,t){return e.map(e=>{var t;let r=t5(e,n);if(r&&(i.push(e),l[e.id]=e),null!=(t=e.subRows)&&t.length&&(e={...e,subRows:o(e.subRows)}),r)return e}).filter(Boolean)};return{rows:o(t.rows),flatRows:i,rowsById:l}}function t5(e,t){var n;return null!=(n=t[e.id])&&n}function t6(e,t,n){var i;if(!(null!=(i=e.subRows)&&i.length))return!1;let l=!0,o=!1;return e.subRows.forEach(e=>{if((!o||l)&&(e.getCanSelect()&&(t5(e,t)?o=!0:l=!1),e.subRows&&e.subRows.length)){let n=t6(e,t);"all"===n?o=!0:("some"===n&&(o=!0),l=!1)}}),l?"all":!!o&&"some"}let t8=/([0-9]+)/gm;function t7(e,t){return e===t?0:e>t?1:-1}function t9(e){return"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?"":String(e):"string"==typeof e?e:""}function ne(e,t){let n=e.split(t8).filter(Boolean),i=t.split(t8).filter(Boolean);for(;n.length&&i.length;){let e=n.shift(),t=i.shift(),l=parseInt(e,10),o=parseInt(t,10),r=[l,o].sort();if(isNaN(r[0])){if(e>t)return 1;if(t>e)return -1;continue}if(isNaN(r[1]))return isNaN(l)?-1:1;if(l>o)return 1;if(o>l)return -1}return n.length-i.length}let nt={alphanumeric:(e,t,n)=>ne(t9(e.getValue(n)).toLowerCase(),t9(t.getValue(n)).toLowerCase()),alphanumericCaseSensitive:(e,t,n)=>ne(t9(e.getValue(n)),t9(t.getValue(n))),text:(e,t,n)=>t7(t9(e.getValue(n)).toLowerCase(),t9(t.getValue(n)).toLowerCase()),textCaseSensitive:(e,t,n)=>t7(t9(e.getValue(n)),t9(t.getValue(n))),datetime:(e,t,n)=>{let i=e.getValue(n),l=t.getValue(n);return i>l?1:i<l?-1:0},basic:(e,t,n)=>t7(e.getValue(n),t.getValue(n))},nn=[{createTable:e=>{e.getHeaderGroups=tE(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,i,l)=>{var o,r;let s=null!=(o=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?o:[],a=null!=(r=null==l?void 0:l.map(e=>n.find(t=>t.id===e)).filter(Boolean))?r:[];return tF(t,[...s,...n.filter(e=>!(null!=i&&i.includes(e.id))&&!(null!=l&&l.includes(e.id))),...a],e)},tk(e.options,tD,"getHeaderGroups")),e.getCenterHeaderGroups=tE(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,i,l)=>tF(t,n=n.filter(e=>!(null!=i&&i.includes(e.id))&&!(null!=l&&l.includes(e.id))),e,"center"),tk(e.options,tD,"getCenterHeaderGroups")),e.getLeftHeaderGroups=tE(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,i)=>{var l;return tF(t,null!=(l=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?l:[],e,"left")},tk(e.options,tD,"getLeftHeaderGroups")),e.getRightHeaderGroups=tE(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,i)=>{var l;return tF(t,null!=(l=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?l:[],e,"right")},tk(e.options,tD,"getRightHeaderGroups")),e.getFooterGroups=tE(()=>[e.getHeaderGroups()],e=>[...e].reverse(),tk(e.options,tD,"getFooterGroups")),e.getLeftFooterGroups=tE(()=>[e.getLeftHeaderGroups()],e=>[...e].reverse(),tk(e.options,tD,"getLeftFooterGroups")),e.getCenterFooterGroups=tE(()=>[e.getCenterHeaderGroups()],e=>[...e].reverse(),tk(e.options,tD,"getCenterFooterGroups")),e.getRightFooterGroups=tE(()=>[e.getRightHeaderGroups()],e=>[...e].reverse(),tk(e.options,tD,"getRightFooterGroups")),e.getFlatHeaders=tE(()=>[e.getHeaderGroups()],e=>e.map(e=>e.headers).flat(),tk(e.options,tD,"getFlatHeaders")),e.getLeftFlatHeaders=tE(()=>[e.getLeftHeaderGroups()],e=>e.map(e=>e.headers).flat(),tk(e.options,tD,"getLeftFlatHeaders")),e.getCenterFlatHeaders=tE(()=>[e.getCenterHeaderGroups()],e=>e.map(e=>e.headers).flat(),tk(e.options,tD,"getCenterFlatHeaders")),e.getRightFlatHeaders=tE(()=>[e.getRightHeaderGroups()],e=>e.map(e=>e.headers).flat(),tk(e.options,tD,"getRightFlatHeaders")),e.getCenterLeafHeaders=tE(()=>[e.getCenterFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),tk(e.options,tD,"getCenterLeafHeaders")),e.getLeftLeafHeaders=tE(()=>[e.getLeftFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),tk(e.options,tD,"getLeftLeafHeaders")),e.getRightLeafHeaders=tE(()=>[e.getRightFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),tk(e.options,tD,"getRightLeafHeaders")),e.getLeafHeaders=tE(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(e,t,n)=>{var i,l,o,r,s,a;return[...null!=(i=null==(l=e[0])?void 0:l.headers)?i:[],...null!=(o=null==(r=t[0])?void 0:r.headers)?o:[],...null!=(s=null==(a=n[0])?void 0:a.headers)?s:[]].map(e=>e.getLeafHeaders()).flat()},tk(e.options,tD,"getLeafHeaders"))}},{getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:tR("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(t=>({...t,[e.id]:null!=n?n:!e.getIsVisible()}))},e.getIsVisible=()=>{var n,i;let l=e.columns;return null==(n=l.length?l.some(e=>e.getIsVisible()):null==(i=t.getState().columnVisibility)?void 0:i[e.id])||n},e.getCanHide=()=>{var n,i;return(null==(n=e.columnDef.enableHiding)||n)&&(null==(i=t.options.enableHiding)||i)},e.getToggleVisibilityHandler=()=>t=>{null==e.toggleVisibility||e.toggleVisibility(t.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=tE(()=>[e.getAllCells(),t.getState().columnVisibility],e=>e.filter(e=>e.column.getIsVisible()),tk(t.options,"debugRows","_getAllVisibleCells")),e.getVisibleCells=tE(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(e,t,n)=>[...e,...t,...n],tk(t.options,"debugRows","getVisibleCells"))},createTable:e=>{let t=(t,n)=>tE(()=>[n(),n().filter(e=>e.getIsVisible()).map(e=>e.id).join("_")],e=>e.filter(e=>null==e.getIsVisible?void 0:e.getIsVisible()),tk(e.options,"debugColumns",t));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>null==e.options.onColumnVisibilityChange?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var n;e.setColumnVisibility(t?{}:null!=(n=e.initialState.columnVisibility)?n:{})},e.toggleAllColumnsVisible=t=>{var n;t=null!=(n=t)?n:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((e,n)=>({...e,[n.id]:t||!(null!=n.getCanHide&&n.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(e=>!(null!=e.getIsVisible&&e.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(e=>null==e.getIsVisible?void 0:e.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var n;e.toggleAllColumnsVisible(null==(n=t.target)?void 0:n.checked)}}},{getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:tR("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=tE(e=>[t0(t,e)],t=>t.findIndex(t=>t.id===e.id),tk(t.options,"debugColumns","getIndex")),e.getIsFirstColumn=n=>{var i;return(null==(i=t0(t,n)[0])?void 0:i.id)===e.id},e.getIsLastColumn=n=>{var i;let l=t0(t,n);return(null==(i=l[l.length-1])?void 0:i.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>null==e.options.onColumnOrderChange?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:null!=(n=e.initialState.columnOrder)?n:[])},e._getOrderColumnsFn=tE(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(e,t,n)=>i=>{let l=[];if(null!=e&&e.length){let t=[...e],n=[...i];for(;n.length&&t.length;){let e=t.shift(),i=n.findIndex(t=>t.id===e);i>-1&&l.push(n.splice(i,1)[0])}l=[...l,...n]}else l=i;return function(e,t,n){if(!(null!=t&&t.length)||!n)return e;let i=e.filter(e=>!t.includes(e.id));return"remove"===n?i:[...t.map(t=>e.find(e=>e.id===t)).filter(Boolean),...i]}(l,t,n)},tk(e.options,"debugTable","_getOrderColumnsFn"))}},{getInitialState:e=>({columnPinning:tX(),...e}),getDefaultOptions:e=>({onColumnPinningChange:tR("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{let i=e.getLeafColumns().map(e=>e.id).filter(Boolean);t.setColumnPinning(e=>{var t,l,o,r,s,a;return"right"===n?{left:(null!=(o=null==e?void 0:e.left)?o:[]).filter(e=>!(null!=i&&i.includes(e))),right:[...(null!=(r=null==e?void 0:e.right)?r:[]).filter(e=>!(null!=i&&i.includes(e))),...i]}:"left"===n?{left:[...(null!=(s=null==e?void 0:e.left)?s:[]).filter(e=>!(null!=i&&i.includes(e))),...i],right:(null!=(a=null==e?void 0:e.right)?a:[]).filter(e=>!(null!=i&&i.includes(e)))}:{left:(null!=(t=null==e?void 0:e.left)?t:[]).filter(e=>!(null!=i&&i.includes(e))),right:(null!=(l=null==e?void 0:e.right)?l:[]).filter(e=>!(null!=i&&i.includes(e)))}})},e.getCanPin=()=>e.getLeafColumns().some(e=>{var n,i,l;return(null==(n=e.columnDef.enablePinning)||n)&&(null==(i=null!=(l=t.options.enableColumnPinning)?l:t.options.enablePinning)||i)}),e.getIsPinned=()=>{let n=e.getLeafColumns().map(e=>e.id),{left:i,right:l}=t.getState().columnPinning,o=n.some(e=>null==i?void 0:i.includes(e)),r=n.some(e=>null==l?void 0:l.includes(e));return o?"left":!!r&&"right"},e.getPinnedIndex=()=>{var n,i;let l=e.getIsPinned();return l?null!=(n=null==(i=t.getState().columnPinning)||null==(i=i[l])?void 0:i.indexOf(e.id))?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=tE(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,t,n)=>{let i=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!i.includes(e.column.id))},tk(t.options,"debugRows","getCenterVisibleCells")),e.getLeftVisibleCells=tE(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"left"})),tk(t.options,"debugRows","getLeftVisibleCells")),e.getRightVisibleCells=tE(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"right"})),tk(t.options,"debugRows","getRightVisibleCells"))},createTable:e=>{e.setColumnPinning=t=>null==e.options.onColumnPinningChange?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,i;return e.setColumnPinning(t?tX():null!=(n=null==(i=e.initialState)?void 0:i.columnPinning)?n:tX())},e.getIsSomeColumnsPinned=t=>{var n,i,l;let o=e.getState().columnPinning;return t?!!(null==(n=o[t])?void 0:n.length):!!((null==(i=o.left)?void 0:i.length)||(null==(l=o.right)?void 0:l.length))},e.getLeftLeafColumns=tE(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),tk(e.options,"debugColumns","getLeftLeafColumns")),e.getRightLeafColumns=tE(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),tk(e.options,"debugColumns","getRightLeafColumns")),e.getCenterLeafColumns=tE(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(e,t,n)=>{let i=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!i.includes(e.id))},tk(e.options,"debugColumns","getCenterLeafColumns"))}},{createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},{getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:tR("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{let n=t.getCoreRowModel().flatRows[0],i=null==n?void 0:n.getValue(e.id);return"string"==typeof i?tW.includesString:"number"==typeof i?tW.inNumberRange:"boolean"==typeof i||null!==i&&"object"==typeof i?tW.equals:Array.isArray(i)?tW.arrIncludes:tW.weakEquals},e.getFilterFn=()=>{var n,i;return tP(e.columnDef.filterFn)?e.columnDef.filterFn:"auto"===e.columnDef.filterFn?e.getAutoFilterFn():null!=(n=null==(i=t.options.filterFns)?void 0:i[e.columnDef.filterFn])?n:tW[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,i,l;return(null==(n=e.columnDef.enableColumnFilter)||n)&&(null==(i=t.options.enableColumnFilters)||i)&&(null==(l=t.options.enableFilters)||l)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return null==(n=t.getState().columnFilters)||null==(n=n.find(t=>t.id===e.id))?void 0:n.value},e.getFilterIndex=()=>{var n,i;return null!=(n=null==(i=t.getState().columnFilters)?void 0:i.findIndex(t=>t.id===e.id))?n:-1},e.setFilterValue=n=>{t.setColumnFilters(t=>{var i,l;let o=e.getFilterFn(),r=null==t?void 0:t.find(t=>t.id===e.id),s=tT(n,r?r.value:void 0);if(tK(o,s,e))return null!=(i=null==t?void 0:t.filter(t=>t.id!==e.id))?i:[];let a={id:e.id,value:s};return r?null!=(l=null==t?void 0:t.map(t=>t.id===e.id?a:t))?l:[]:null!=t&&t.length?[...t,a]:[a]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{let n=e.getAllLeafColumns();null==e.options.onColumnFiltersChange||e.options.onColumnFiltersChange(e=>{var i;return null==(i=tT(t,e))?void 0:i.filter(e=>{let t=n.find(t=>t.id===e.id);return!(t&&tK(t.getFilterFn(),e.value,t))&&!0})})},e.resetColumnFilters=t=>{var n,i;e.setColumnFilters(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.columnFilters)?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel)?e.getPreFilteredRowModel():e._getFilteredRowModel()}},{createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},{getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:tR("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;let i=null==(n=e.getCoreRowModel().flatRows[0])||null==(n=n._getAllCellsByColumnId()[t.id])?void 0:n.getValue();return"string"==typeof i||"number"==typeof i}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,i,l,o;return(null==(n=e.columnDef.enableGlobalFilter)||n)&&(null==(i=t.options.enableGlobalFilter)||i)&&(null==(l=t.options.enableFilters)||l)&&(null==(o=null==t.options.getColumnCanGlobalFilter?void 0:t.options.getColumnCanGlobalFilter(e))||o)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>tW.includesString,e.getGlobalFilterFn=()=>{var t,n;let{globalFilterFn:i}=e.options;return tP(i)?i:"auto"===i?e.getGlobalAutoFilterFn():null!=(t=null==(n=e.options.filterFns)?void 0:n[i])?t:tW[i]},e.setGlobalFilter=t=>{null==e.options.onGlobalFilterChange||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},{getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:tR("sorting",e),isMultiSortEvent:e=>e.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{let n=t.getFilteredRowModel().flatRows.slice(10),i=!1;for(let t of n){let n=null==t?void 0:t.getValue(e.id);if("[object Date]"===Object.prototype.toString.call(n))return nt.datetime;if("string"==typeof n&&(i=!0,n.split(t8).length>1))return nt.alphanumeric}return i?nt.text:nt.basic},e.getAutoSortDir=()=>{let n=t.getFilteredRowModel().flatRows[0];return"string"==typeof(null==n?void 0:n.getValue(e.id))?"asc":"desc"},e.getSortingFn=()=>{var n,i;if(!e)throw Error();return tP(e.columnDef.sortingFn)?e.columnDef.sortingFn:"auto"===e.columnDef.sortingFn?e.getAutoSortingFn():null!=(n=null==(i=t.options.sortingFns)?void 0:i[e.columnDef.sortingFn])?n:nt[e.columnDef.sortingFn]},e.toggleSorting=(n,i)=>{let l=e.getNextSortingOrder(),o=null!=n;t.setSorting(r=>{let s,a=null==r?void 0:r.find(t=>t.id===e.id),u=null==r?void 0:r.findIndex(t=>t.id===e.id),d=[],c=o?n:"desc"===l;if("toggle"!=(s=null!=r&&r.length&&e.getCanMultiSort()&&i?a?"toggle":"add":null!=r&&r.length&&u!==r.length-1?"replace":a?"toggle":"replace")||o||l||(s="remove"),"add"===s){var p;(d=[...r,{id:e.id,desc:c}]).splice(0,d.length-(null!=(p=t.options.maxMultiSortColCount)?p:Number.MAX_SAFE_INTEGER))}else d="toggle"===s?r.map(t=>t.id===e.id?{...t,desc:c}:t):"remove"===s?r.filter(t=>t.id!==e.id):[{id:e.id,desc:c}];return d})},e.getFirstSortDir=()=>{var n,i;return(null!=(n=null!=(i=e.columnDef.sortDescFirst)?i:t.options.sortDescFirst)?n:"desc"===e.getAutoSortDir())?"desc":"asc"},e.getNextSortingOrder=n=>{var i,l;let o=e.getFirstSortDir(),r=e.getIsSorted();return r?(r===o||null!=(i=t.options.enableSortingRemoval)&&!i||!!n&&null!=(l=t.options.enableMultiRemove)&&!l)&&("desc"===r?"asc":"desc"):o},e.getCanSort=()=>{var n,i;return(null==(n=e.columnDef.enableSorting)||n)&&(null==(i=t.options.enableSorting)||i)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,i;return null!=(n=null!=(i=e.columnDef.enableMultiSort)?i:t.options.enableMultiSort)?n:!!e.accessorFn},e.getIsSorted=()=>{var n;let i=null==(n=t.getState().sorting)?void 0:n.find(t=>t.id===e.id);return!!i&&(i.desc?"desc":"asc")},e.getSortIndex=()=>{var n,i;return null!=(n=null==(i=t.getState().sorting)?void 0:i.findIndex(t=>t.id===e.id))?n:-1},e.clearSorting=()=>{t.setSorting(t=>null!=t&&t.length?t.filter(t=>t.id!==e.id):[])},e.getToggleSortingHandler=()=>{let n=e.getCanSort();return i=>{n&&(null==i.persist||i.persist(),null==e.toggleSorting||e.toggleSorting(void 0,!!e.getCanMultiSort()&&(null==t.options.isMultiSortEvent?void 0:t.options.isMultiSortEvent(i))))}}},createTable:e=>{e.setSorting=t=>null==e.options.onSortingChange?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,i;e.setSorting(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.sorting)?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel)?e.getPreSortedRowModel():e._getSortedRowModel()}},{getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return null!=(t=null==(n=e.getValue())||null==n.toString?void 0:n.toString())?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:tR("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(t=>null!=t&&t.includes(e.id)?t.filter(t=>t!==e.id):[...null!=t?t:[],e.id])},e.getCanGroup=()=>{var n,i;return(null==(n=e.columnDef.enableGrouping)||n)&&(null==(i=t.options.enableGrouping)||i)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{let t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{let n=t.getCoreRowModel().flatRows[0],i=null==n?void 0:n.getValue(e.id);return"number"==typeof i?tY.sum:"[object Date]"===Object.prototype.toString.call(i)?tY.extent:void 0},e.getAggregationFn=()=>{var n,i;if(!e)throw Error();return tP(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:"auto"===e.columnDef.aggregationFn?e.getAutoAggregationFn():null!=(n=null==(i=t.options.aggregationFns)?void 0:i[e.columnDef.aggregationFn])?n:tY[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>null==e.options.onGroupingChange?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,i;e.setGrouping(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.grouping)?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel)?e.getPreGroupedRowModel():e._getGroupedRowModel()},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];let i=t.getColumn(n);return null!=i&&i.columnDef.getGroupingValue?(e._groupingValuesCache[n]=i.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,i)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var t;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!(null!=(t=n.subRows)&&t.length)}}},{getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:tR("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var i,l;if(!t)return void e._queue(()=>{t=!0});if(null!=(i=null!=(l=e.options.autoResetAll)?l:e.options.autoResetExpanded)?i:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=t=>null==e.options.onExpandedChange?void 0:e.options.onExpandedChange(t),e.toggleAllRowsExpanded=t=>{(null!=t?t:!e.getIsAllRowsExpanded())?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=t=>{var n,i;e.setExpanded(t?{}:null!=(n=null==(i=e.initialState)?void 0:i.expanded)?n:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(e=>e.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>t=>{null==t.persist||t.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{let t=e.getState().expanded;return!0===t||Object.values(t).some(Boolean)},e.getIsAllRowsExpanded=()=>{let t=e.getState().expanded;return"boolean"==typeof t?!0===t:!(!Object.keys(t).length||e.getRowModel().flatRows.some(e=>!e.getIsExpanded()))},e.getExpandedDepth=()=>{let t=0;return(!0===e.getState().expanded?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(e=>{let n=e.split(".");t=Math.max(t,n.length)}),t},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel)?e.getPreExpandedRowModel():e._getExpandedRowModel()},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(i=>{var l;let o=!0===i||!!(null!=i&&i[e.id]),r={};if(!0===i?Object.keys(t.getRowModel().rowsById).forEach(e=>{r[e]=!0}):r=i,n=null!=(l=n)?l:!o,!o&&n)return{...r,[e.id]:!0};if(o&&!n){let{[e.id]:t,...n}=r;return n}return i})},e.getIsExpanded=()=>{var n;let i=t.getState().expanded;return!!(null!=(n=null==t.options.getIsRowExpanded?void 0:t.options.getIsRowExpanded(e))?n:!0===i||(null==i?void 0:i[e.id]))},e.getCanExpand=()=>{var n,i,l;return null!=(n=null==t.options.getRowCanExpand?void 0:t.options.getRowCanExpand(e))?n:(null==(i=t.options.enableExpanding)||i)&&!!(null!=(l=e.subRows)&&l.length)},e.getIsAllParentsExpanded=()=>{let n=!0,i=e;for(;n&&i.parentId;)n=(i=t.getRow(i.parentId,!0)).getIsExpanded();return n},e.getToggleExpandedHandler=()=>{let t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},{getInitialState:e=>({...e,pagination:{...t1(),...null==e?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:tR("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var i,l;if(!t)return void e._queue(()=>{t=!0});if(null!=(i=null!=(l=e.options.autoResetAll)?l:e.options.autoResetPageIndex)?i:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=t=>null==e.options.onPaginationChange?void 0:e.options.onPaginationChange(e=>tT(t,e)),e.resetPagination=t=>{var n;e.setPagination(t?t1():null!=(n=e.initialState.pagination)?n:t1())},e.setPageIndex=t=>{e.setPagination(n=>{let i=tT(t,n.pageIndex);return i=Math.max(0,Math.min(i,void 0===e.options.pageCount||-1===e.options.pageCount?Number.MAX_SAFE_INTEGER:e.options.pageCount-1)),{...n,pageIndex:i}})},e.resetPageIndex=t=>{var n,i;e.setPageIndex(t?0:null!=(n=null==(i=e.initialState)||null==(i=i.pagination)?void 0:i.pageIndex)?n:0)},e.resetPageSize=t=>{var n,i;e.setPageSize(t?10:null!=(n=null==(i=e.initialState)||null==(i=i.pagination)?void 0:i.pageSize)?n:10)},e.setPageSize=t=>{e.setPagination(e=>{let n=Math.max(1,tT(t,e.pageSize)),i=Math.floor(e.pageSize*e.pageIndex/n);return{...e,pageIndex:i,pageSize:n}})},e.setPageCount=t=>e.setPagination(n=>{var i;let l=tT(t,null!=(i=e.options.pageCount)?i:-1);return"number"==typeof l&&(l=Math.max(-1,l)),{...n,pageCount:l}}),e.getPageOptions=tE(()=>[e.getPageCount()],e=>{let t=[];return e&&e>0&&(t=[...Array(e)].fill(null).map((e,t)=>t)),t},tk(e.options,"debugTable","getPageOptions")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{let{pageIndex:t}=e.getState().pagination,n=e.getPageCount();return -1===n||0!==n&&t<n-1},e.previousPage=()=>e.setPageIndex(e=>e-1),e.nextPage=()=>e.setPageIndex(e=>e+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel)?e.getPrePaginationRowModel():e._getPaginationRowModel(),e.getPageCount=()=>{var t;return null!=(t=e.options.pageCount)?t:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var t;return null!=(t=e.options.rowCount)?t:e.getPrePaginationRowModel().rows.length}}},{getInitialState:e=>({rowPinning:t2(),...e}),getDefaultOptions:e=>({onRowPinningChange:tR("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,i,l)=>{let o=i?e.getLeafRows().map(e=>{let{id:t}=e;return t}):[],r=new Set([...l?e.getParentRows().map(e=>{let{id:t}=e;return t}):[],e.id,...o]);t.setRowPinning(e=>{var t,i,l,o,s,a;return"bottom"===n?{top:(null!=(l=null==e?void 0:e.top)?l:[]).filter(e=>!(null!=r&&r.has(e))),bottom:[...(null!=(o=null==e?void 0:e.bottom)?o:[]).filter(e=>!(null!=r&&r.has(e))),...Array.from(r)]}:"top"===n?{top:[...(null!=(s=null==e?void 0:e.top)?s:[]).filter(e=>!(null!=r&&r.has(e))),...Array.from(r)],bottom:(null!=(a=null==e?void 0:e.bottom)?a:[]).filter(e=>!(null!=r&&r.has(e)))}:{top:(null!=(t=null==e?void 0:e.top)?t:[]).filter(e=>!(null!=r&&r.has(e))),bottom:(null!=(i=null==e?void 0:e.bottom)?i:[]).filter(e=>!(null!=r&&r.has(e)))}})},e.getCanPin=()=>{var n;let{enableRowPinning:i,enablePinning:l}=t.options;return"function"==typeof i?i(e):null==(n=null!=i?i:l)||n},e.getIsPinned=()=>{let n=[e.id],{top:i,bottom:l}=t.getState().rowPinning,o=n.some(e=>null==i?void 0:i.includes(e)),r=n.some(e=>null==l?void 0:l.includes(e));return o?"top":!!r&&"bottom"},e.getPinnedIndex=()=>{var n,i;let l=e.getIsPinned();if(!l)return -1;let o=null==(n="top"===l?t.getTopRows():t.getBottomRows())?void 0:n.map(e=>{let{id:t}=e;return t});return null!=(i=null==o?void 0:o.indexOf(e.id))?i:-1}},createTable:e=>{e.setRowPinning=t=>null==e.options.onRowPinningChange?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,i;return e.setRowPinning(t?t2():null!=(n=null==(i=e.initialState)?void 0:i.rowPinning)?n:t2())},e.getIsSomeRowsPinned=t=>{var n,i,l;let o=e.getState().rowPinning;return t?!!(null==(n=o[t])?void 0:n.length):!!((null==(i=o.top)?void 0:i.length)||(null==(l=o.bottom)?void 0:l.length))},e._getPinnedRows=(t,n,i)=>{var l;return(null==(l=e.options.keepPinnedRows)||l?(null!=n?n:[]).map(t=>{let n=e.getRow(t,!0);return n.getIsAllParentsExpanded()?n:null}):(null!=n?n:[]).map(e=>t.find(t=>t.id===e))).filter(Boolean).map(e=>({...e,position:i}))},e.getTopRows=tE(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),tk(e.options,"debugRows","getTopRows")),e.getBottomRows=tE(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),tk(e.options,"debugRows","getBottomRows")),e.getCenterRows=tE(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(e,t,n)=>{let i=new Set([...null!=t?t:[],...null!=n?n:[]]);return e.filter(e=>!i.has(e.id))},tk(e.options,"debugRows","getCenterRows"))}},{getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:tR("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>null==e.options.onRowSelectionChange?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:null!=(n=e.initialState.rowSelection)?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=void 0!==t?t:!e.getIsAllRowsSelected();let i={...n},l=e.getPreGroupedRowModel().flatRows;return t?l.forEach(e=>{e.getCanSelect()&&(i[e.id]=!0)}):l.forEach(e=>{delete i[e.id]}),i})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{let i=void 0!==t?t:!e.getIsAllPageRowsSelected(),l={...n};return e.getRowModel().rows.forEach(t=>{t3(l,t.id,i,!0,e)}),l}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=tE(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?t4(e,n):{rows:[],flatRows:[],rowsById:{}},tk(e.options,"debugTable","getSelectedRowModel")),e.getFilteredSelectedRowModel=tE(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?t4(e,n):{rows:[],flatRows:[],rowsById:{}},tk(e.options,"debugTable","getFilteredSelectedRowModel")),e.getGroupedSelectedRowModel=tE(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?t4(e,n):{rows:[],flatRows:[],rowsById:{}},tk(e.options,"debugTable","getGroupedSelectedRowModel")),e.getIsAllRowsSelected=()=>{let t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState(),i=!!(t.length&&Object.keys(n).length);return i&&t.some(e=>e.getCanSelect()&&!n[e.id])&&(i=!1),i},e.getIsAllPageRowsSelected=()=>{let t=e.getPaginationRowModel().flatRows.filter(e=>e.getCanSelect()),{rowSelection:n}=e.getState(),i=!!t.length;return i&&t.some(e=>!n[e.id])&&(i=!1),i},e.getIsSomeRowsSelected=()=>{var t;let n=Object.keys(null!=(t=e.getState().rowSelection)?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{let t=e.getPaginationRowModel().flatRows;return!e.getIsAllPageRowsSelected()&&t.filter(e=>e.getCanSelect()).some(e=>e.getIsSelected()||e.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,i)=>{let l=e.getIsSelected();t.setRowSelection(o=>{var r;if(n=void 0!==n?n:!l,e.getCanSelect()&&l===n)return o;let s={...o};return t3(s,e.id,n,null==(r=null==i?void 0:i.selectChildren)||r,t),s})},e.getIsSelected=()=>{let{rowSelection:n}=t.getState();return t5(e,n)},e.getIsSomeSelected=()=>{let{rowSelection:n}=t.getState();return"some"===t6(e,n)},e.getIsAllSubRowsSelected=()=>{let{rowSelection:n}=t.getState();return"all"===t6(e,n)},e.getCanSelect=()=>{var n;return"function"==typeof t.options.enableRowSelection?t.options.enableRowSelection(e):null==(n=t.options.enableRowSelection)||n},e.getCanSelectSubRows=()=>{var n;return"function"==typeof t.options.enableSubRowSelection?t.options.enableSubRowSelection(e):null==(n=t.options.enableSubRowSelection)||n},e.getCanMultiSelect=()=>{var n;return"function"==typeof t.options.enableMultiRowSelection?t.options.enableMultiRowSelection(e):null==(n=t.options.enableMultiRowSelection)||n},e.getToggleSelectedHandler=()=>{let t=e.getCanSelect();return n=>{var i;t&&e.toggleSelected(null==(i=n.target)?void 0:i.checked)}}}},{getDefaultColumnDef:()=>tQ,getInitialState:e=>({columnSizing:{},columnSizingInfo:t$(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:tR("columnSizing",e),onColumnSizingInfoChange:tR("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,i,l;let o=t.getState().columnSizing[e.id];return Math.min(Math.max(null!=(n=e.columnDef.minSize)?n:tQ.minSize,null!=(i=null!=o?o:e.columnDef.size)?i:tQ.size),null!=(l=e.columnDef.maxSize)?l:tQ.maxSize)},e.getStart=tE(e=>[e,t0(t,e),t.getState().columnSizing],(t,n)=>n.slice(0,e.getIndex(t)).reduce((e,t)=>e+t.getSize(),0),tk(t.options,"debugColumns","getStart")),e.getAfter=tE(e=>[e,t0(t,e),t.getState().columnSizing],(t,n)=>n.slice(e.getIndex(t)+1).reduce((e,t)=>e+t.getSize(),0),tk(t.options,"debugColumns","getAfter")),e.resetSize=()=>{t.setColumnSizing(t=>{let{[e.id]:n,...i}=t;return i})},e.getCanResize=()=>{var n,i;return(null==(n=e.columnDef.enableResizing)||n)&&(null==(i=t.options.enableColumnResizing)||i)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let t=0,n=e=>{if(e.subHeaders.length)e.subHeaders.forEach(n);else{var i;t+=null!=(i=e.column.getSize())?i:0}};return n(e),t},e.getStart=()=>{if(e.index>0){let t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=n=>{let i=t.getColumn(e.column.id),l=null==i?void 0:i.getCanResize();return o=>{if(!i||!l||(null==o.persist||o.persist(),tZ(o)&&o.touches&&o.touches.length>1))return;let r=e.getSize(),s=e?e.getLeafHeaders().map(e=>[e.column.id,e.column.getSize()]):[[i.id,i.getSize()]],a=tZ(o)?Math.round(o.touches[0].clientX):o.clientX,u={},d=(e,n)=>{"number"==typeof n&&(t.setColumnSizingInfo(e=>{var i,l;let o="rtl"===t.options.columnResizeDirection?-1:1,r=(n-(null!=(i=null==e?void 0:e.startOffset)?i:0))*o,s=Math.max(r/(null!=(l=null==e?void 0:e.startSize)?l:0),-.999999);return e.columnSizingStart.forEach(e=>{let[t,n]=e;u[t]=Math.round(100*Math.max(n+n*s,0))/100}),{...e,deltaOffset:r,deltaPercentage:s}}),("onChange"===t.options.columnResizeMode||"end"===e)&&t.setColumnSizing(e=>({...e,...u})))},c=e=>d("move",e),p=e=>{d("end",e),t.setColumnSizingInfo(e=>({...e,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},m=n||("undefined"!=typeof document?document:null),h={moveHandler:e=>c(e.clientX),upHandler:e=>{null==m||m.removeEventListener("mousemove",h.moveHandler),null==m||m.removeEventListener("mouseup",h.upHandler),p(e.clientX)}},g={moveHandler:e=>(e.cancelable&&(e.preventDefault(),e.stopPropagation()),c(e.touches[0].clientX),!1),upHandler:e=>{var t;null==m||m.removeEventListener("touchmove",g.moveHandler),null==m||m.removeEventListener("touchend",g.upHandler),e.cancelable&&(e.preventDefault(),e.stopPropagation()),p(null==(t=e.touches[0])?void 0:t.clientX)}},f=!!function(){if("boolean"==typeof tJ)return tJ;let e=!1;try{let t=()=>{};window.addEventListener("test",t,{get passive(){return e=!0,!1}}),window.removeEventListener("test",t)}catch(t){e=!1}return tJ=e}()&&{passive:!1};tZ(o)?(null==m||m.addEventListener("touchmove",g.moveHandler,f),null==m||m.addEventListener("touchend",g.upHandler,f)):(null==m||m.addEventListener("mousemove",h.moveHandler,f),null==m||m.addEventListener("mouseup",h.upHandler,f)),t.setColumnSizingInfo(e=>({...e,startOffset:a,startSize:r,deltaOffset:0,deltaPercentage:0,columnSizingStart:s,isResizingColumn:i.id}))}}},createTable:e=>{e.setColumnSizing=t=>null==e.options.onColumnSizingChange?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>null==e.options.onColumnSizingInfoChange?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:null!=(n=e.initialState.columnSizing)?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?t$():null!=(n=e.initialState.columnSizingInfo)?n:t$())},e.getTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getLeftTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getLeftHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getCenterTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getCenterHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getRightTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getRightHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0}}}];function ni(e,t){var n,i,l;return e?"function"==typeof(i=n=e)&&(()=>{let e=Object.getPrototypeOf(i);return e.prototype&&e.prototype.isReactComponent})()||"function"==typeof n||"object"==typeof(l=n)&&"symbol"==typeof l.$$typeof&&["react.memo","react.forward_ref"].includes(l.$$typeof.description)?o.createElement(e,t):e:null}function nl(){let e=(0,n._)(["\n  display: grid;\n  grid-area: header;\n  grid-template-columns: 1fr min-content 1fr;\n  border-block-end: 1px solid var(--card-border-color);\n"]);return nl=function(){return e},e}function no(){let e=(0,n._)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return no=function(){return e},e}function nr(){let e=(0,n._)(["\n  --offset-block: 40px;\n  display: grid;\n  height: calc(100vh - var(--offset-block));\n  min-height: 0;\n  overflow: hidden;\n  grid-template-areas:\n    'header header'\n    'previous-document next-document';\n  grid-template-columns: 1fr 1fr;\n  grid-template-rows: min-content minmax(0, 1fr);\n"]);return nr=function(){return e},e}function ns(){let e=(0,n._)(["\n  position: relative;\n  height: 100%;\n  overflow: auto;\n  scroll-behavior: smooth;\n  scrollbar-width: var(--scrollbar-width);\n  overscroll-behavior: contain;\n  will-change: scroll-position;\n"]);return ns=function(){return e},e}function na(){let e=(0,n._)(["\n  position: relative;\n  grid-area: var(--grid-area);\n"]);return na=function(){return e},e}function nu(){let e=(0,n._)(["\n  width: auto;\n"]);return nu=function(){return e},e}function nd(){let e=(0,n._)(["\n  flex: 1;\n  text-decoration: none;\n  color: inherit;\n"]);return nd=function(){return e},e}function nc(){let e=(0,n._)(["\n  position: relative;\n  width: 1px;\n  min-width: 1px;\n\n  &:before {\n    content: '';\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    width: 1px;\n    background-color: var(--card-border-color);\n  }\n\n  &:not([data-disabled]) {\n    cursor: ew-resize;\n    width: 9px;\n    min-width: 9px;\n    margin: 0 -4px;\n\n    &:before {\n      left: 4px;\n    }\n\n    &:after {\n      content: '';\n      display: block;\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 9px;\n      bottom: 0;\n      background-color: var(--card-border-color);\n      opacity: 0;\n      transition: opacity 150ms;\n    }\n\n    &[data-dragging]:after,\n    &:hover:after {\n      opacity: 0.2;\n    }\n  }\n"]);return nc=function(){return e},e}function np(){let e=(0,n._)(["\n  outline: none;\n\n  // NOTE: This will render a border to the right side of each pane\n  // without taking up physical space.\n  box-shadow: 1px 0 0 var(--card-border-color);\n"]);return np=function(){return e},e}function nm(){let e=(0,n._)(["\n  position: relative;\n  outline: none;\n"]);return nm=function(){return e},e}function nh(){let e=(0,n._)(["\n  position: sticky;\n  bottom: 0;\n"]);return nh=function(){return e},e}function ng(){let e=(0,n._)(["\n  padding-bottom: env(safe-area-inset-bottom);\n"]);return ng=function(){return e},e}function nf(){let e=(0,n._)(["\n    line-height: 0;\n    position: sticky;\n    top: 0;\n\n    &:not([data-collapsed]):after {\n      content: '';\n      display: block;\n      position: absolute;\n      left: 0;\n      right: 0;\n      bottom: -1px;\n      border-bottom: 1px solid ",";\n      opacity: 1;\n    }\n  "]);return nf=function(){return e},e}function nv(){let e=(0,n._)(["\n  transform-origin: calc(51px / 2);\n\n  [data-collapsed] > div > & {\n    transform: rotate(90deg);\n  }\n"]);return nv=function(){return e},e}function nx(){let e=(0,n._)(["\n    background-color: ",";\n\n    [data-ui='Text'] {\n      color: ",";\n    }\n  "]);return nx=function(){return e},e}function nb(){let e=(0,n._)(["\n  width: 66%;\n  max-width: 175px;\n"]);return nb=function(){return e},e}function ny(){let e=(0,n._)(["\n  cursor: default;\n  outline: none;\n"]);return ny=function(){return e},e}function nj(){let e=(0,n._)(["\n  transition: opacity 200ms;\n  position: relative;\n  z-index: 1;\n  padding-left: env(safe-area-inset-left);\n  padding-right: env(safe-area-inset-right);\n  opacity: 0;\n\n  &:not([hidden]) {\n    display: flex;\n  }\n\n  &:not([data-collapsed]) {\n    overflow: auto;\n  }\n\n  &[data-mounted] {\n    opacity: 1;\n  }\n\n  &[data-resizing] {\n    pointer-events: none;\n  }\n"]);return nj=function(){return e},e}function nw(){let e=(0,n._)(["\n  opacity: 0;\n  transition: opacity 200ms;\n\n  &[data-mounted] {\n    opacity: 1;\n  }\n"]);return nw=function(){return e},e}function nS(){let e=(0,n._)(["\n    & .json-inspector,\n    & .json-inspector .json-inspector__selection {\n      font-family: ",";\n      font-size: ","px;\n      line-height: ","px;\n      color: var(--card-code-fg-color);\n    }\n\n    & .json-inspector .json-inspector__leaf {\n      padding-left: ",";\n    }\n\n    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {\n      padding-top: ",";\n      padding-left: 0;\n    }\n\n    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {\n      display: none;\n    }\n\n    & .json-inspector .json-inspector__line {\n      display: block;\n      position: relative;\n      cursor: default;\n    }\n\n    & .json-inspector .json-inspector__line::after {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: -200px;\n      right: -50px;\n      bottom: 0;\n      z-index: -1;\n      pointer-events: none;\n    }\n\n    & .json-inspector .json-inspector__line:hover::after {\n      background: var(--card-code-bg-color);\n    }\n\n    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {\n      cursor: pointer;\n    }\n\n    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {\n      content: 'â–¸ ';\n      margin-left: calc(0 - "," + 3px);\n      font-size: ","px;\n      line-height: ","px;\n    }\n\n    &\n      .json-inspector\n      .json-inspector__leaf_expanded.json-inspector__leaf_composite\n      > .json-inspector__line::before {\n      content: 'â–¾ ';\n      font-size: ","px;\n      line-height: ","px;\n    }\n\n    & .json-inspector .json-inspector__radio,\n    & .json-inspector .json-inspector__flatpath {\n      display: none;\n    }\n\n    & .json-inspector .json-inspector__value {\n      margin-left: ",";\n    }\n\n    &\n      .json-inspector\n      > .json-inspector__leaf_root\n      > .json-inspector__line\n      > .json-inspector__key\n      + .json-inspector__value {\n      margin: 0;\n    }\n\n    & .json-inspector .json-inspector__key {\n      color: ",";\n    }\n\n    & .json-inspector .json-inspector__value_helper,\n    & .json-inspector .json-inspector__value_null {\n      color: ",";\n    }\n\n    & .json-inspector .json-inspector__not-found {\n      padding-top: ",";\n    }\n\n    & .json-inspector .json-inspector__value_string {\n      color: ",";\n    }\n\n    & .json-inspector .json-inspector__value_boolean {\n      color: ",";\n    }\n\n    & .json-inspector .json-inspector__value_number {\n      color: ",";\n    }\n\n    & .json-inspector .json-inspector__show-original {\n      display: inline-block;\n      padding: 0 6px;\n      cursor: pointer;\n    }\n\n    & .json-inspector .json-inspector__show-original:hover {\n      color: inherit;\n    }\n\n    & .json-inspector .json-inspector__show-original::before {\n      content: 'â†”';\n    }\n\n    & .json-inspector .json-inspector__show-original:hover::after {\n      content: ' expand';\n    }\n  "]);return nS=function(){return e},e}function nC(){let e=(0,n._)(["\n  box-sizing: border-box;\n"]);return nC=function(){return e},e}function n_(){let e=(0,n._)(["\n  height: 110px;\n"]);return n_=function(){return e},e}function nI(){let e=(0,n._)(["\n  object-fit: cover;\n  width: 100%;\n  height: 100%;\n  height: 180px;\n  display: flex;\n"]);return nI=function(){return e},e}function nT(){let e=(0,n._)(["\n      @supports not (container-type: inline-size) {\n        display: none !important;\n      }\n\n      container-type: inline-size;\n\n      [data-heading] {\n        font-size: ","px;\n        line-height: ","px;\n        overflow-wrap: break-word;\n        text-wrap: pretty;\n      }\n\n      @container (max-width: 560px) {\n        [data-heading] {\n          font-size: ","px;\n          line-height: ","px;\n        }\n      }\n\n      @container (max-width: 420px) {\n        [data-heading] {\n          font-size: ","px;\n          line-height: ","px;\n        }\n      }\n    "]);return nT=function(){return e},e}function nR(){let e=(0,n._)(["\n  ","\n"]);return nR=function(){return e},e}function nP(){let e=(0,n._)(["\n    height: 100%;\n    overflow: auto;\n    position: relative;\n    scroll-behavior: smooth;\n    outline: none;\n  "]);return nP=function(){return e},e}function nE(){let e=(0,n._)(["\n      &::after {\n        content: '';\n        display: block;\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        width: 150px;\n        background: linear-gradient(to right, ",", var(--card-bg-color));\n        transition: 'opacity 300ms ease-out';\n        pointer-events: none;\n      }\n    "]);return nE=function(){return e},e}function nk(){let e=(0,n._)(["\n    scrollbar-width: none;\n    z-index: 1;\n    flex: 1;\n    position: relative;\n    > div {\n      &::-webkit-scrollbar {\n        width: 0;\n        height: 0;\n      }\n    }\n\n    ","\n  "]);return nk=function(){return e},e}function nD(){let e=(0,n._)(["\n  transition: transform 200ms;\n  &[data-expanded='true'] {\n    transform: rotate(-90deg);\n  }\n"]);return nD=function(){return e},e}function nM(){let e=(0,n._)(["\n  max-width: 200px;\n"]);return nM=function(){return e},e}function nF(){let e=(0,n._)(["\n  max-height: ",";\n  min-width: 244px;\n"]);return nF=function(){return e},e}function nA(){let e=(0,n._)(["\n      opacity: 1;\n      pointer-events: auto;\n    "]);return nA=function(){return e},e}function nL(){let e=(0,n._)(["\n    opacity: 0;\n    pointer-events: none;\n    transition: opacity 0.2s;\n\n    ","\n  "]);return nL=function(){return e},e}function nV(){let e=(0,n._)(["\n    --card-icon-color: ",";\n    background-color: ",";\n    box-shadow: 0 0 0 1px var(--card-bg-color);\n\n    position: absolute;\n    width: ","px;\n    height: ","px;\n    right: -3px;\n    bottom: -3px;\n    border-radius: 50%;\n  "]);return nV=function(){return e},e}function nz(){let e=(0,n._)(["\n    width: 6ch;\n    height: ","px;\n  "]);return nz=function(){return e},e}function nO(){let e=(0,n._)(["\n  overflow: hidden;\n  overflow: clip;\n"]);return nO=function(){return e},e}function nB(){let e=(0,n._)(["\n  transform-origin: center;\n"]);return nB=function(){return e},e}function nH(){let e=(0,n._)(["\n  0% {\n    transform: rotate(0);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]);return nH=function(){return e},e}function nN(){let e=(0,n._)(["\n  transform-origin: center;\n\n  &[data-rotate] {\n    animation: "," 1s ease-in-out infinite;\n  }\n"]);return nN=function(){return e},e}function nU(){let e=(0,n._)(["\n  color: var(--card-muted-fg-color);\n\n  em {\n    color: var(--card-fg-color);\n    font-weight: 500;\n    font-style: normal;\n  }\n"]);return nU=function(){return e},e}function nG(){let e=(0,n._)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-height: 0;\n  min-width: 0;\n"]);return nG=function(){return e},e}function nW(){let e=(0,n._)(["\n  margin-left: auto;\n"]);return nW=function(){return e},e}function nq(){let e=(0,n._)(["\n  flex: none;\n\n  &[open] "," {\n    transform: rotate(180deg);\n  }\n"]);return nq=function(){return e},e}function nK(){let e=(0,n._)(["\n  list-style: none;\n\n  &::-webkit-details-marker {\n    display: none;\n  }\n"]);return nK=function(){return e},e}function nY(){let e=(0,n._)(["\n  width: 100%;\n  text-align: left;\n  padding: 0 ",";\n  border-collapse: collapse;\n\n  th {\n    padding: ",";\n  }\n\n  td {\n    padding: 0 ",";\n  }\n\n  tr > *:last-child {\n    text-align: right;\n  }\n"]);return nY=function(){return e},e}function nX(){let e=(0,n._)(["\n  min-height: 33px;\n"]);return nX=function(){return e},e}function nQ(){let e=(0,n._)(["\n  box-sizing: border-box;\n"]);return nQ=function(){return e},e}function n$(){let e=(0,n._)(["\n  height: 110px;\n"]);return n$=function(){return e},e}function nJ(){let e=(0,n._)(["\n  position: relative;\n  opacity: ",";\n  transition: opacity 0.4s;\n"]);return nJ=function(){return e},e}function nZ(){let e=(0,n._)(["\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n"]);return nZ=function(){return e},e}function n0(){let e=(0,n._)(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]);return n0=function(){return e},e}function n1(){let e=(0,n._)(["\n  0% {\n    opacity: 0;\n  }\n  50% {\n    opacity: 0.1;\n  }\n  100% {\n    opacity: 0.4;\n  }\n"]);return n1=function(){return e},e}function n2(){let e=(0,n._)(["\n  animation: "," 500ms linear infinite;\n"]);return n2=function(){return e},e}function n3(){let e=(0,n._)(["\n  animation: "," 1500ms linear infinite;\n  opacity: 0.4;\n"]);return n3=function(){return e},e}function n4(){let e=(0,n._)(["\n  animation:\n    "," 1500ms linear infinite,\n    "," 1000ms linear;\n  opacity: 0.4;\n"]);return n4=function(){return e},e}function n5(){let e=(0,n._)(["\n  display: flex;\n  overflow: hidden;\n  box-sizing: border-box;\n  width: ","px;\n  border-top: 1px solid var(--card-border-color);\n  background-color: var(--card-bg-color);\n"]);return n5=function(){return e},e}function n6(){let e=(0,n._)(["\n  position: sticky;\n  z-index: 2;\n"]);return n6=function(){return e},e}function n8(){let e=(0,n._)(["\n  flex-shrink: 0;\n"]);return n8=function(){return e},e}function n7(){let e=(0,n._)(["\n  margin: 16px;\n  z-index: 1;\n  padding: 22px 0px;\n  border-top: 1px solid var(--card-border-color);\n  background-color: var(--card-badge-default-bg-color);\n  box-sizing: border-box;\n  text-align: left;\n  width: ","px;\n  max-width: ","px;\n"]);return n7=function(){return e},e}function n9(){let e=(0,n._)(["\n  position: sticky;\n  z-index: 2;\n"]);return n9=function(){return e},e}function ie(){let e=(0,n._)(["\n  visibility: hidden;\n\n  ",":hover & {\n    visibility: visible;\n  }\n"]);return ie=function(){return e},e}function it(){let e=(0,n._)(["\n  height: 100%;\n"]);return it=function(){return e},e}function ii(){let e=(0,n._)(["\n  overflow: auto; //our scrollable table container\n  position: relative; //needed for sticky header\n"]);return ii=function(){return e},e}function il(){let e=(0,n._)(["\n  border-collapse: separate;\n  border-spacing: 0;\n  font-family: arial, sans-serif;\n  white-space: nowrap;\n  width: 100%;\n  border: 1px solid lightgray;\n\n  thead {\n    display: grid;\n    position: sticky;\n    top: 0;\n    z-index: 10;\n  }\n  tr {\n    padding: 0;\n  }\n  tr:last-child {\n    border-bottom: none;\n  }\n"]);return il=function(){return e},e}function io(){let e=(0,n._)(["\n  height: 100%;\n  overflow: auto;\n  position: relative;\n  scroll-behavior: smooth;\n"]);return io=function(){return e},e}function ir(){let e=(0,n._)(["\n  &:not([hidden]) {\n    display: grid;\n  }\n  grid-template-columns: 48px 1fr;\n  align-items: center;\n  gap: 0.25em;\n"]);return ir=function(){return e},e}function is(){let e=(0,n._)(["\n  overflow: hidden;\n  overflow: clip;\n"]);return is=function(){return e},e}function ia(){let e=(0,n._)(["\n  height: 100%;\n  overflow: auto;\n  position: relative;\n  scroll-behavior: smooth;\n"]);return ia=function(){return e},e}function iu(){let e=(0,n._)(["\n  &:not([hidden]) {\n    display: grid;\n  }\n  grid-template-columns: 48px 1fr;\n  align-items: center;\n  gap: 0.25em;\n"]);return iu=function(){return e},e}function id(){let e=(0,n._)(["\n  width: 100%;\n  position: absolute;\n  bottom: -4px;\n"]);return id=function(){return e},e}function ic(){let e=(0,n._)(["\n  height: 100%;\n  overflow: auto;\n  position: relative;\n  scroll-behavior: smooth;\n"]);return ic=function(){return e},e}function ip(){let e=(0,n._)(["\n  height: 100%;\n  overflow: auto;\n  position: relative;\n  scroll-behavior: smooth;\n"]);return ip=function(){return e},e}function im(){let e=(0,n._)(["\n  opacity: 0;\n  transition: opacity 200ms;\n  &[data-ready] {\n    opacity: 1;\n  }\n"]);return im=function(){return e},e}let ih="diffView",ig="previousDocument",iv="nextDocument";function ix(){let e,t,n,i=(0,eh.c)(9),{navigate:l,state:o}=(0,eC.useRouter)();i[0]!==l||i[1]!==o?(e=e=>{let{mode:t,previousDocument:n,nextDocument:i}=e,r={...(0,ti.default)(o._searchParams),...t?{[ih]:t}:{},...n?{[ig]:[n.type,n.id].join(",")}:{},...i?{[iv]:[i.type,i.id].join(",")}:{}};l({...o,_searchParams:(0,tl.default)(r)})},i[0]=l,i[1]=o,i[2]=e):e=i[2];let r=e;i[3]!==l||i[4]!==o?(t=()=>{var e;l({...o,_searchParams:(null!=(e=o._searchParams)?e:[]).filter(ib)})},i[3]=l,i[4]=o,i[5]=t):t=i[5];let s=t;return i[6]!==s||i[7]!==r?(n={navigateDiffView:r,exitDiffView:s},i[6]=s,i[7]=r,i[8]=n):n=i[8],n}function ib(e){let[t]=e;return![ih,ig,iv].includes(t)}let iy=["version"];function ij(){let{onParamsError:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:t}=(0,eC.useRouter)(),n=new URLSearchParams(t._searchParams),i=n.get(ig),l=n.get(iv),r=n.get(ih),s=[i,l,r].some(e=>null!==e),a=(0,o.useMemo)(()=>(function(e){let{previousDocument:t,nextDocument:n,mode:i}=e,l=[],[o,r]=t.split(",").filter(Boolean),[s,a]=n.split(",").filter(Boolean);return iy.includes(i)||l.push(["invalidModeParam",i]),(typeof o>"u"||typeof r>"u")&&l.push(["invalidPreviousDocumentParam",t]),(typeof s>"u"||typeof a>"u")&&l.push(["invalidNextDocumentParam",n]),0!==l.length?{result:"error",errors:l}:{result:"success",params:{mode:i,documents:{previous:{type:o,id:r},next:{type:s,id:a}}}}})({previousDocument:null!=i?i:"",nextDocument:null!=l?l:"",mode:null!=r?r:""}),[r,l,i]);return(0,o.useEffect)(()=>{"error"===a.result&&s&&(null==e||e(a.errors))},[s,e,a]),"error"===a.result?{isActive:!1}:{state:"ready",isActive:!0,...a.params}}function iw(e){return null!==e}function iS(e,t){return(0,s.isPublishedId)(e)?"published":(0,s.isDraftId)(e)?"draft":t.find(t=>{let{_id:n}=t;return(0,r.getReleaseIdFromReleaseDocumentId)(n)===(0,s.getVersionFromId)(e)})}let iC=eb.styled.header(nl()),i_=eb.styled.div(no()),iI=e=>{let{documentId:t,state:n}=e,{t:i}=(0,r.useTranslation)(b),{data:a}=(0,r.useDocumentVersions)({documentId:t}),{exitDiffView:u,navigateDiffView:c}=ix(),{documents:p}=ij(),m=(0,r.useActiveReleases)(),h=a.flatMap(e=>{var t;return null!=(t=(0,s.getVersionFromId)(e))?t:[]}),g=(0,o.useMemo)(()=>m.data.filter(e=>{let t=(0,r.getReleaseIdFromReleaseDocumentId)(e._id);return"u">typeof t&&h.includes(t)}),[m.data,h]),f=(0,o.useCallback)(e=>{"u">typeof(null==p?void 0:p.previous)&&c({previousDocument:{...p.previous,id:e}})},[null==p?void 0:p.previous,c]),v=(0,o.useCallback)(e=>{"u">typeof(null==p?void 0:p.next)&&c({nextDocument:{...p.next,id:e}})},[null==p?void 0:p.next,c]);return(0,l.jsxs)(iC,{children:[(0,l.jsxs)(i_,{children:[(0,l.jsx)(eg.Box,{padding:4,children:(0,l.jsx)(eg.Text,{as:"h1",size:1,muted:!0,children:i("compare-versions.title")})}),"u">typeof(null==p?void 0:p.previous)&&(0,l.jsx)(iT,{releases:g,onSelectRelease:f,role:"previous",documentId:t,state:n,document:p.previous})]}),(0,l.jsx)(eg.Flex,{align:"center",paddingX:3,children:(0,l.jsx)(eg.Text,{size:1,children:(0,l.jsx)(d.TransferIcon,{})})}),(0,l.jsxs)(i_,{children:["u">typeof(null==p?void 0:p.next)&&(0,l.jsx)(iT,{releases:g,onSelectRelease:v,role:"next",documentId:t,state:n,document:p.next}),(0,l.jsx)(eg.Box,{padding:3,style:{justifySelf:"end"},children:(0,l.jsx)(eg.Button,{icon:d.CloseIcon,mode:"bleed",onClick:u,padding:2})})]})]})},iT=e=>{let{releases:t=[],onSelectRelease:n,role:i,documentId:a,document:u}=e,{published:c,draft:p}=(0,r.useEditState)((0,s.getPublishedId)(u.id),u.type),m=(0,o.useMemo)(()=>iS(u.id,t),[u.id,t]),{t:h}=(0,r.useTranslation)(b),{t:g}=(0,r.useTranslation)(),{document:{drafts:{enabled:v}}}=(0,r.useWorkspace)();return(0,l.jsx)(f.MenuButton,{id:i,button:(0,l.jsx)(eg.Button,{type:"button",mode:"bleed",padding:2,paddingRight:3,radius:"full",selected:!0,...function(e){let{selected:t,tCore:n,tStructure:i}=e;if(typeof t>"u")return{text:n("common.loading"),tone:"neutral",disabled:!0};if((0,r.isReleaseDocument)(t)){let e=t?(0,r.getReleaseTone)(t):"neutral";return{text:(null==t?void 0:t.metadata.title)||n("release.placeholder-untitled-release"),icon:(0,l.jsx)(r.ReleaseAvatar,{padding:1,tone:e}),iconRight:t&&(0,r.isReleaseScheduledOrScheduling)(t)?(0,l.jsx)(d.LockIcon,{}):void 0,tone:e}}let o="published"===t?"positive":"caution";return{text:i(["compare-versions.status",t].join(".")),icon:(0,l.jsx)(r.ReleaseAvatar,{padding:1,tone:o}),tone:o}}({selected:m,tCore:g,tStructure:h})}),menu:(0,l.jsxs)(eg.Menu,{children:[c&&(0,l.jsx)(iR,{type:"published",onSelect:n,isSelected:"published"===m,documentId:a}),v&&p&&(0,l.jsx)(iR,{type:"draft",onSelect:n,isSelected:"draft"===m,documentId:a}),t.map(e=>(0,l.jsx)(iR,{release:e,onSelect:n,isSelected:"string"!=typeof m&&(null==m?void 0:m._id)===e._id,documentId:a},e._id))]})})},iR=e=>{let{type:t,release:n,onSelect:i,isSelected:a,documentId:u}=e,{t:c}=(0,r.useTranslation)(),{t:p}=(0,r.useTranslation)(b),m=(0,o.useCallback)(()=>"draft"===t?void i((0,s.getDraftId)(u)):"published"===t?void i((0,s.getPublishedId)(u)):void("u">typeof(null==n?void 0:n._id)&&i((0,s.getVersionId)(u,(0,r.getReleaseIdFromReleaseDocumentId)(n._id)))),[t,i,u,null==n?void 0:n._id]);if(t)return(0,l.jsx)(eg.MenuItem,{padding:1,paddingRight:3,onClick:m,pressed:a,children:(0,l.jsxs)(eg.Flex,{gap:1,children:[(0,l.jsx)(r.ReleaseAvatar,{padding:2,tone:"published"===t?"positive":"caution"}),(0,l.jsx)(eg.Box,{paddingY:2,children:(0,l.jsx)(eg.Text,{size:1,weight:"medium",children:p(["compare-versions.status",t].join("."))})})]})});let h=n?(0,r.getReleaseTone)(n):"neutral";return(0,l.jsx)(eg.MenuItem,{padding:1,paddingRight:3,onClick:m,pressed:a,children:(0,l.jsxs)(eg.Flex,{gap:1,children:[(0,l.jsx)(r.ReleaseAvatar,{padding:2,tone:h}),(0,l.jsxs)(eg.Stack,{flex:1,paddingY:2,paddingRight:2,space:2,children:[(0,l.jsx)(eg.Text,{size:1,weight:"medium",children:n.metadata.title||c("release.placeholder-untitled-release")}),["asap","undecided"].includes(n.metadata.releaseType)&&(0,l.jsx)(eg.Text,{muted:!0,size:1,children:c("release.type.".concat(n.metadata.releaseType))}),"scheduled"===n.metadata.releaseType&&(0,l.jsx)(eg.Text,{muted:!0,size:1,children:(0,r.formatRelativeLocalePublishDate)(n)})]}),(0,l.jsx)(eg.Flex,{flex:"none",children:(0,r.isReleaseScheduledOrScheduling)(n)&&(0,l.jsx)(eg.Box,{padding:2,children:(0,l.jsx)(eg.Text,{size:1,children:(0,l.jsx)(d.LockIcon,{})})})})]})})},iP=eb.styled.div(nr());function iE(e){var t,n;return null==(n=e.document)||null==(t=n.components)?void 0:t.unstable_layout}function ik(e){return e.path}function iD(e,t){return(0,tm.default)(e.path,t.path)}let iM=eb.styled.div(ns()),iF=(0,eb.styled)(eg.Card)(na()),iA=(0,eb.styled)(eg.Container)(nu()),iL=(0,o.forwardRef)(function(e,t){let n,i,s,u,d,c,p,m,h,g,f,v,x=(0,eh.c)(36),{role:b,documentType:y,documentId:j,scrollElement:w,syncChannel:S,compareDocument:C}=e,_=(0,o.useRef)(null),[I,T]=(0,o.useState)(null),[R,P]=(0,o.useState)(null);x[0]!==C||x[1]!==j||x[2]!==y||x[3]!==b||x[4]!==w||x[5]!==S?(n=()=>(0,l.jsx)(iV,{compareDocument:C,documentId:j,documentType:y,role:b,scrollElement:w,syncChannel:S}),x[0]=C,x[1]=j,x[2]=y,x[3]=b,x[4]=w,x[5]=S,x[6]=n):n=x[6];let E=n;x[7]!==E?(i={pick:iE,defaultComponent:E},x[7]=E,x[8]=i):i=x[8];let k=(0,r.useMiddlewareComponents)(i);x[9]===Symbol.for("react.memo_cache_sentinel")?(s={isInteractive:!1,onOpenReviewChanges:tp.default,onSetFocus:tp.default,isReviewChangesOpen:!1},x[9]=s):s=x[9];let D="".concat(b,"-document");x[10]!==D?(u={"--grid-area":D},x[10]=D,x[11]=u):u=x[11];let M=u,F="next"===b,A="next"!==b&&"none";x[12]!==A?(d={"--scrollbar-width":A},x[12]=A,x[13]=d):d=x[13];let L=d;return x[14]!==k||x[15]!==j||x[16]!==y?(c=(0,l.jsx)(ef.DialogProvider,{position:"absolute",children:(0,l.jsx)(iA,{ref:_,padding:4,width:1,children:(0,l.jsx)(k,{documentId:j,documentType:y})})}),x[14]=k,x[15]=j,x[16]=y,x[17]=c):c=x[17],x[18]!==I||x[19]!==c?(p=(0,l.jsx)(eg.PortalProvider,{element:I,children:c}),x[18]=I,x[19]=c,x[20]=p):p=x[20],x[21]!==t||x[22]!==L||x[23]!==p?(m=(0,l.jsx)(iM,{ref:t,style:L,children:p}),x[21]=t,x[22]=L,x[23]=p,x[24]=m):m=x[24],x[25]===Symbol.for("react.memo_cache_sentinel")?(h=(0,l.jsx)("div",{"data-testid":"diffView-document-panel-portal",ref:T}),x[25]=h):h=x[25],x[26]!==m||x[27]!==M||x[28]!==F?(g=(0,l.jsxs)(iF,{ref:P,style:M,borderLeft:F,children:[m,h]}),x[26]=m,x[27]=M,x[28]=F,x[29]=g):g=x[29],x[30]!==R||x[31]!==g?(f=(0,l.jsx)(eg.BoundaryElementProvider,{element:R,children:g}),x[30]=R,x[31]=g,x[32]=f):f=x[32],x[33]!==w||x[34]!==f?(v=(0,l.jsx)(a.ReviewChangesContext.Provider,{value:s,children:(0,l.jsx)(r.ChangeIndicatorsTracker,{children:(0,l.jsx)(r.VirtualizerScrollInstanceProvider,{scrollElement:w,containerElement:_,children:f})})}),x[33]=w,x[34]=f,x[35]=v):v=x[35],v}),iV=e=>{var t;let{role:n,documentType:i,documentId:u,syncChannel:d,compareDocument:c}=e,p=function(e){let t,n,i,l=(0,eh.c)(4),{compareDocument:o}=e;l[0]!==o.id?(t=(0,s.getPublishedId)(o.id),l[0]=o.id,l[1]=t):t=l[1];let a=o.type;l[2]!==o.id?(n=(0,s.getVersionFromId)(o.id),l[2]=o.id,l[3]=n):n=l[3];let u=(0,r.useEditState)(t,a,"low",n);e:{var d,c,p;if((0,s.isVersionId)(o.id)){i=null!=(d=u.version)?d:void 0;break e}if((0,s.isDraftId)(o.id)){i=null!=(c=u.draft)?c:void 0;break e}if((0,s.isPublishedId)(o.id)){i=null!=(p=u.published)?p:void 0;break e}i=void 0}return i}({compareDocument:c}),{data:m}=(0,r.useActiveReleases)(),[h]=(0,o.useState)(()=>(0,r.createPatchChannel)()),g=(0,o.useMemo)(()=>iS(u,m),[u,m]),{formState:f,onChange:v,onFocus:x,onBlur:b,onSetActiveFieldGroup:y,onSetCollapsedFieldSet:j,onSetCollapsedPath:w,collapsedFieldSets:S,ready:C,collapsedPaths:_,schemaType:I,value:T,onProgrammaticFocus:R,...P}=(0,r.useDocumentForm)({documentId:(0,s.getPublishedId)(u),documentType:i,selectedPerspectiveName:function(e){return(0,s.isVersionId)(e)?(0,s.getVersionFromId)(e):(0,s.isPublishedId)(e)?"published":void 0}(u),releaseId:(0,s.getVersionFromId)(u),comparisonValue:p}),E=null===f||!C,k=function(e){let t,n,i,l=(0,eh.c)(11),{syncChannel:o,id:r}=e;l[0]!==r||l[1]!==o?(t=e=>o.next({...e,source:r}),l[0]=r,l[1]=o,l[2]=t):t=l[2];let s=t;if(l[3]!==r||l[4]!==o){let e;l[6]!==r?(e=e=>{let{source:t}=e;return t!==r},l[6]=r,l[7]=e):e=l[7],n=o.pipe((0,eA.distinctUntilChanged)(iD),(0,eB.filter)(e),(0,eE.map)(ik)),l[3]=r,l[4]=o,l[5]=n}else n=l[5];let a=n;return l[8]!==a||l[9]!==s?(i={path:a,push:s},l[8]=a,l[9]=s,l[10]=i):i=l[10],i}({id:n,syncChannel:d}),D=(0,o.useCallback)(e=>{P.onPathOpen(e),k.push({source:n,path:e})},[P,k,n]);return(0,o.useEffect)(()=>{let e=k.path.subscribe(R);return()=>e.unsubscribe()},[R,k.path]),E?(0,l.jsx)(r.LoadingBlock,{showText:!0}):(0,l.jsx)(a.CommentsEnabledContext.Provider,{value:{enabled:!1,mode:null},children:(0,l.jsx)(r.FormBuilder,{__internal_patchChannel:h,id:"diffView-pane-".concat(n),onChange:v,onPathFocus:x,onPathOpen:D,onPathBlur:b,onFieldGroupSelect:y,onSetFieldSetCollapsed:j,onSetPathCollapsed:w,collapsedPaths:_,collapsedFieldSets:S,focusPath:f.focusPath,changed:f.changed,focused:f.focused,groups:f.groups,validation:f.validation,members:f.members,perspective:"draft"===(t=g)?"drafts":t,presence:f.presence,schemaType:I,value:T,compareValue:p})})},iz=eb.styled.a(nd()),iO=e=>{let t,n,i=(0,eh.c)(6),{children:o,documentId:r,documentType:s}=e;i[0]!==r||i[1]!==s?(t={intent:"edit",params:{id:r,type:s}},i[0]=r,i[1]=s,i[2]=t):t=i[2];let{href:a}=(0,eC.useIntentLink)(t);return i[3]!==o||i[4]!==a?(n=(0,l.jsx)(iz,{href:a,target:"_blank",rel:"noopener noreferrer",children:o}),i[3]=o,i[4]=a,i[5]=n):n=i[5],n},iB=e=>{let t,n,i,r,s,u,d,c=(0,eh.c)(24),{documentId:p}=e,{documents:m,state:h,mode:g}=ij(),{exitDiffView:v}=ix(),x=function(){let e,t=(0,eh.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=new eW.Subject,t[0]=e):e=t[0],e}(),[b,y]=(0,o.useState)(null),[j,w]=(0,o.useState)(null),S=(0,o.useContext)(a.ReferenceInputOptionsContext);c[0]!==S?(t={...S,disableNew:!0,EditReferenceLinkComponent:iO},c[0]=S,c[1]=t):t=c[1];let C=t;return c[2]!==j||c[3]!==b?(n=[b,j],c[2]=j,c[3]=b,c[4]=n):n=c[4],function(e){let t,n,i=(0,eh.c)(3);i[0]!==e?(t=()=>{let t=e.filter(iw);if(0===t.length)return;let n=new tc(t);return()=>n.destroy()},n=[e],i[0]=e,i[1]=t,i[2]=n):(t=i[1],n=i[2]),(0,o.useEffect)(t,n)}(n),c[5]!==p||c[6]!==g||c[7]!==h?(i="version"===g&&(0,l.jsx)(iI,{documentId:p,state:h}),c[5]=p,c[6]=g,c[7]=h,c[8]=i):i=c[8],c[9]!==m||c[10]!==j||c[11]!==b||c[12]!==h||c[13]!==x?(r="ready"===h&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(iL,{documentType:m.previous.type,documentId:m.previous.id,role:"previous",ref:y,scrollElement:b,syncChannel:x,compareDocument:m.previous}),(0,l.jsx)(iL,{documentType:m.next.type,documentId:m.next.id,role:"next",ref:w,scrollElement:j,syncChannel:x,compareDocument:m.previous})]}),c[9]=m,c[10]=j,c[11]=b,c[12]=h,c[13]=x,c[14]=r):r=c[14],c[15]!==i||c[16]!==r?(s=(0,l.jsxs)(iP,{children:[i,r]}),c[15]=i,c[16]=r,c[17]=s):s=c[17],c[18]!==v||c[19]!==s?(u=(0,l.jsx)(f.Dialog,{id:"diffView",width:"auto",onClose:v,padding:!1,__unstable_hideCloseButton:!0,children:s}),c[18]=v,c[19]=s,c[20]=u):u=c[20],c[21]!==C||c[22]!==u?(d=(0,l.jsx)(a.ReferenceInputOptionsContext.Provider,{value:C,children:u}),c[21]=C,c[22]=u,c[23]=d):d=c[23],d},iH=e=>{let t,n,i,o=(0,eh.c)(9),{children:s,documentId:a}=e,u=(0,ef.useToast)(),{t:d}=(0,r.useTranslation)(b);o[0]!==d||o[1]!==u?(t={onParamsError:e=>{u.push({id:"diffViewParamsParsingError",status:"error",title:d("compare-version.error.invalidParams.title"),description:(0,l.jsx)("ul",{children:e.map(e=>{let[t,n]=e;return(0,l.jsx)("li",{children:d("compare-version.error.".concat(t),{input:n})},t)})})})}},o[0]=d,o[1]=u,o[2]=t):t=o[2];let{isActive:c}=ij(t);return o[3]!==a||o[4]!==c?(n=c&&(0,l.jsx)(iB,{documentId:a}),o[3]=a,o[4]=c,o[5]=n):n=o[5],o[6]!==s||o[7]!==n?(i=(0,l.jsxs)(l.Fragment,{children:[s,n]}),o[6]=s,o[7]=n,o[8]=i):i=o[8],i};function iN(){let e=(0,o.useContext)(a.PaneLayoutContext);if(!e)throw Error("PaneLayout: missing context value");return e}let iU=(0,eb.styled)(eg.Layer)(nc());function iG(e){let t,n,i=(0,eh.c)(7),{disabled:r,element:s}=e,{resize:a}=iN(),[u,d]=(0,o.useState)(!1);i[0]!==s||i[1]!==a?(t=e=>{if(!s)return;d(!0),e.preventDefault();let t=e.pageX;a("start",s,0);let n=e=>{e.preventDefault(),a("move",s,e.pageX-t)},i=e=>{e.preventDefault(),d(!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),a("end",s,0)};window.addEventListener("mousemove",n),window.addEventListener("mouseup",i)},i[0]=s,i[1]=a,i[2]=t):t=i[2];let c=t,p=r?"":void 0,m=u?"":void 0;return i[3]!==c||i[4]!==p||i[5]!==m?(n=(0,l.jsx)(iU,{"data-disabled":p,"data-dragging":m,onMouseDown:c}),i[3]=c,i[4]=p,i[5]=m,i[6]=n):n=i[6],n}let iW=(0,eb.styled)(eg.Card)(np()),iq=(0,o.forwardRef)(function(e,t){var n,i,s;let u,d,c,p,m,h,g,f,v,x,b,y,j,w,S,C,_,I,T,R,P,E,k,D,M,F,A,L,V,z=(0,eh.c)(86);z[0]!==e?({children:u,currentMinWidth:c,currentMaxWidth:d,flex:f,id:p,minWidth:h,maxWidth:m,selected:v,...g}=e,z[0]=e,z[1]=u,z[2]=d,z[3]=c,z[4]=p,z[5]=m,z[6]=h,z[7]=g,z[8]=f,z[9]=v):(u=z[1],d=z[2],c=z[3],p=z[4],m=z[5],h=z[6],g=z[7],f=z[8],v=z[9]);let O=void 0===f?1:f,B=void 0!==v&&v,[H,N]=(0,o.useState)(null),{collapse:U,collapsed:G,expand:W,expandedElement:q,mount:K,panes:Y}=iN();if(z[10]!==Y||z[11]!==H){let e;z[14]!==H?(e=e=>e.element===H,z[14]=H,z[15]=e):e=z[15],b=(x=Y.find(e))&&Y.indexOf(x),z[10]=Y,z[11]=H,z[12]=x,z[13]=b}else x=z[12],b=z[13];let X=b,Q="number"==typeof X?Y[X+1]:void 0,$=X===Y.length-1,J=q===H,Z=!G&&((null==x?void 0:x.collapsed)||!1),ee=(null==Q?void 0:Q.collapsed)||!1,et=(0,o.useRef)(null),en=null!=(n=null==x?void 0:x.flex)?n:O,ei=null!=(i=null==x?void 0:x.currentMinWidth)?i:c,el=null!=(s=null==x?void 0:x.currentMaxWidth)?s:d;z[16]===Symbol.for("react.memo_cache_sentinel")?(y=()=>et.current,z[16]=y):y=z[16],(0,o.useImperativeHandle)(t,y),z[17]===Symbol.for("react.memo_cache_sentinel")?(j=e=>{N(e),et.current=e},z[17]=j):j=z[17];let eo=j;z[18]!==d||z[19]!==c||z[20]!==O||z[21]!==p||z[22]!==m||z[23]!==h||z[24]!==K||z[25]!==H?(w=()=>{if(H)return K(H,{currentMinWidth:c,currentMaxWidth:d,flex:O,id:p,minWidth:h,maxWidth:m})},S=[c,d,O,p,h,m,K,H],z[18]=d,z[19]=c,z[20]=O,z[21]=p,z[22]=m,z[23]=h,z[24]=K,z[25]=H,z[26]=w,z[27]=S):(w=z[26],S=z[27]),(0,o.useLayoutEffect)(w,S),z[28]!==U||z[29]!==H?(C=()=>{H&&U(H)},z[28]=U,z[29]=H,z[30]=C):C=z[30];let er=C;z[31]!==W||z[32]!==H?(_=()=>{H&&W(H)},z[31]=W,z[32]=H,z[33]=_):_=z[33];let es=_,ea=!G&&Z;z[34]!==er||z[35]!==es||z[36]!==$||z[37]!==X||z[38]!==H||z[39]!==ea?(I={collapse:er,collapsed:ea,expand:es,index:X,isLast:$,rootElement:H},z[34]=er,z[35]=es,z[36]=$,z[37]=X,z[38]=H,z[39]=ea,z[40]=I):I=z[40];let eu=I;e:{if(G){T=void 0;break e}if(Z){T=51;break e}if(0===ei||$){T=h||204;break e}T=ei||h||204}let ed=T;t:{if(Z){R=51;break t}if(G&&$){R=void 0;break t}if($){if(m){R=null!=el?el:m;break t}R=void 0;break t}R=null!=el?el:m}let ec=R,ep=G&&!$;z[41]!==Z||z[42]!==$||z[43]!==G||z[44]!==ee||z[45]!==H?(P=!$&&!G&&(0,l.jsx)(r.LegacyLayerProvider,{zOffset:"paneResizer",children:(0,l.jsx)(iG,{disabled:Z||ee,element:H})}),z[41]=Z,z[42]=$,z[43]=G,z[44]=ee,z[45]=H,z[46]=P):P=z[46];let em=P,ef=ec===1/0?void 0:ec;z[47]!==en||z[48]!==ed||z[49]!==ef?(E={flex:en,minWidth:ed,maxWidth:ef},z[47]=en,z[48]=ed,z[49]=ef,z[50]=E):E=z[50];let ev=E,ex=G?void 0:"hidden",eb=Z?"":void 0,ey=B?"":void 0;return z[51]!==Z||z[52]!==el||z[53]!==ei||z[54]!==J||z[55]!==en||z[56]!==ec||z[57]!==ed||z[58]!==X?(k=!1,z[51]=Z,z[52]=el,z[53]=ei,z[54]=J,z[55]=en,z[56]=ec,z[57]=ed,z[58]=X,z[59]=k):k=z[59],z[60]!==u||z[61]!==ep?(D=!ep&&(0,l.jsx)(eg.Flex,{direction:"column",height:"fill",children:u}),z[60]=u,z[61]=ep,z[62]=D):D=z[62],z[63]!==H||z[64]!==D?(M=(0,l.jsx)(eg.BoundaryElementProvider,{element:H,children:D}),z[63]=H,z[64]=D,z[65]=M):M=z[65],z[66]!==ep||z[67]!==p||z[68]!==X||z[69]!==g||z[70]!==ev||z[71]!==ex||z[72]!==eb||z[73]!==ey||z[74]!==k||z[75]!==M?(F=(0,l.jsxs)(iW,{"data-testid":"pane","data-ui":"Pane",tone:"inherit",hidden:ep,id:p,overflow:ex,...g,"data-pane-collapsed":eb,"data-pane-index":X,"data-pane-selected":ey,ref:eo,style:ev,children:[k,M]}),z[66]=ep,z[67]=p,z[68]=X,z[69]=g,z[70]=ev,z[71]=ex,z[72]=eb,z[73]=ey,z[74]=k,z[75]=M,z[76]=F):F=z[76],z[77]!==$||z[78]!==F?(A=(0,l.jsx)(r.IsLastPaneProvider,{isLastPane:$,children:F}),z[77]=$,z[78]=F,z[79]=A):A=z[79],z[80]!==eu||z[81]!==A?(L=(0,l.jsx)(r.LegacyLayerProvider,{zOffset:"pane",children:(0,l.jsx)(a.PaneContext.Provider,{value:eu,children:A})}),z[80]=eu,z[81]=A,z[82]=L):L=z[82],z[83]!==em||z[84]!==L?(V=(0,l.jsxs)(l.Fragment,{children:[L,em]}),z[83]=em,z[84]=L,z[85]=V):V=z[85],V}),iK=(0,eb.styled)(eg.Card)(nm());function iY(){let e=(0,o.useContext)(a.PaneContext);if(!e)throw Error("Pane: missing context value");return e}iK.displayName="PaneContent__root";let iX=(0,o.forwardRef)(function(e,t){let n,i,o,r,s,a,u=(0,eh.c)(14);u[0]!==e?({as:n,children:i,overflow:o,padding:r,...s}=e,u[0]=e,u[1]=n,u[2]=i,u[3]=o,u[4]=r,u[5]=s):(n=u[1],i=u[2],o=u[3],r=u[4],s=u[5]);let{collapsed:d}=iY(),{collapsed:c}=iN(),p=c?void 0:o;return u[6]!==n||u[7]!==i||u[8]!==d||u[9]!==r||u[10]!==t||u[11]!==s||u[12]!==p?(a=(0,l.jsx)(iK,{"data-testid":"pane-content",forwardedAs:n,...s,flex:1,hidden:d,overflow:p,padding:r,ref:t,tone:"inherit",children:i}),u[6]=n,u[7]=i,u[8]=d,u[9]=r,u[10]=t,u[11]=s,u[12]=p,u[13]=a):a=u[13],a});function iQ(e){return e?e.toLocaleLowerCase().replaceAll(" ",""):""}let i$={constrainSize:!0,placement:"left-start",portal:!0};function iJ(e){let t,n,i,o,s=(0,eh.c)(35),{disabled:a,isAfterGroup:u,node:d}=e,c=(0,r.useGetI18nText)("i18n"in d?d:void 0);if("divider"===d.type){let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(eg.MenuDivider,{}),s[0]=e):e=s[0],e}s[1]!==c||s[2]!==d?(t=c(d),s[1]=c,s[2]=d,s[3]=t):t=s[3];let{title:p}=t;if("group"===d.type){let e,t,n,i;if(0===d.children.length)return null;if(d.expanded){let e,t,n;return s[4]!==u?(e=u&&(0,l.jsx)(eg.MenuDivider,{}),s[4]=u,s[5]=e):e=s[5],s[6]!==a||s[7]!==d.children||s[8]!==d.disabled?(t=d.children.map((e,t)=>{var n;return(0,l.jsx)(iJ,{disabled:a||!!d.disabled,isAfterGroup:(null==(n=d.children[t-1])?void 0:n.type)==="group",node:e},e.key)}),s[6]=a,s[7]=d.children,s[8]=d.disabled,s[9]=t):t=s[9],s[10]!==e||s[11]!==t?(n=(0,l.jsxs)(l.Fragment,{children:[e,t]}),s[10]=e,s[11]=t,s[12]=n):n=s[12],n}s[13]!==u?(e=u&&(0,l.jsx)(eg.MenuDivider,{}),s[13]=u,s[14]=e):e=s[14];let o=d.icon;return s[15]!==a||s[16]!==d.children||s[17]!==d.disabled?(t=d.children.map((e,t)=>{var n;return(0,l.jsx)(iJ,{disabled:a||!!d.disabled,isAfterGroup:(null==(n=d.children[t-1])?void 0:n.type)==="group",node:e},e.key)}),s[15]=a,s[16]=d.children,s[17]=d.disabled,s[18]=t):t=s[18],s[19]!==a||s[20]!==d.icon||s[21]!==t||s[22]!==p?(n=(0,l.jsx)(tt.MenuGroup,{disabled:a,icon:o,popover:i$,text:p,children:t}),s[19]=a,s[20]=d.icon,s[21]=t,s[22]=p,s[23]=n):n=s[23],s[24]!==e||s[25]!==n?(i=(0,l.jsxs)(l.Fragment,{children:[e,n]}),s[24]=e,s[25]=n,s[26]=i):i=s[26],i}return s[27]!==u?(n=u&&(0,l.jsx)(eg.MenuDivider,{}),s[27]=u,s[28]=n):n=s[28],s[29]!==a||s[30]!==d?(i=(0,l.jsx)(iZ,{disabled:a,node:d}),s[29]=a,s[30]=d,s[31]=i):i=s[31],s[32]!==n||s[33]!==i?(o=(0,l.jsxs)(l.Fragment,{children:[n,i]}),s[32]=n,s[33]=i,s[34]=o):o=s[34],o}function iZ(e){let t,n=(0,eh.c)(5),{node:i}=e;if(i.intent){let t;return n[0]!==i.intent||n[1]!==e?(t=(0,l.jsx)(i1,{...e,intent:i.intent}),n[0]=i.intent,n[1]=e,n[2]=t):t=n[2],t}return n[3]!==e?(t=(0,l.jsx)(i0,{...e}),n[3]=e,n[4]=t):t=n[4],t}function i0(e){var t;let n,i,o,s,a=(0,eh.c)(17),{disabled:u,node:c}=e;a[0]!==c.disabled?(n="object"==typeof c.disabled&&(0,l.jsx)(eg.Text,{size:1,children:c.disabled.reason}),a[0]=c.disabled,a[1]=n):n=a[1];let p=n,{title:m}=(0,r.useI18nText)(c),h=u||!!c.disabled;a[2]!==c.hotkey?(i=null==(t=c.hotkey)?void 0:t.split("+"),a[2]=c.hotkey,a[3]=i):i=a[3];let g=c.iconRight||c.selected&&d.CheckmarkIcon,v="action-".concat(iQ(c.title));return a[4]!==c.icon||a[5]!==c.onAction||a[6]!==c.selected||a[7]!==c.tone||a[8]!==h||a[9]!==i||a[10]!==g||a[11]!==v||a[12]!==m?(o=(0,l.jsx)(f.MenuItem,{disabled:h,hotkeys:i,icon:c.icon,iconRight:g,onClick:c.onAction,pressed:c.selected,text:m,tone:c.tone,"data-testid":v}),a[4]=c.icon,a[5]=c.onAction,a[6]=c.selected,a[7]=c.tone,a[8]=h,a[9]=i,a[10]=g,a[11]=v,a[12]=m,a[13]=o):o=a[13],a[14]!==o||a[15]!==p?(s=(0,l.jsx)(r.TooltipOfDisabled,{content:p,placement:"left",children:o}),a[14]=o,a[15]=p,a[16]=s):s=a[16],s}function i1(e){var t;let n,i,o,s,a,u,c=(0,eh.c)(23),{disabled:p,intent:m,node:h}=e;c[0]!==h.disabled?(n="object"==typeof h.disabled&&(0,l.jsx)(eg.Text,{size:1,children:h.disabled.reason}),c[0]=h.disabled,c[1]=n):n=c[1];let g=n;c[2]!==m.params||c[3]!==m.type?(i={intent:m.type,params:m.params},c[2]=m.params,c[3]=m.type,c[4]=i):i=c[4];let v=(0,eC.useIntentLink)(i);c[5]!==v||c[6]!==h?(o=e=>{v.onClick(e),h.onAction()},c[5]=v,c[6]=h,c[7]=o):o=c[7];let x=o,{title:b}=(0,r.useI18nText)(h),y=p||!!h.disabled;c[8]!==h.hotkey?(s=null==(t=h.hotkey)?void 0:t.split("+"),c[8]=h.hotkey,c[9]=s):s=c[9];let j=h.selected?d.CheckmarkIcon:void 0;return c[10]!==x||c[11]!==v.href||c[12]!==h.icon||c[13]!==h.selected||c[14]!==h.tone||c[15]!==y||c[16]!==s||c[17]!==j||c[18]!==b?(a=(0,l.jsx)(f.MenuItem,{as:"a",disabled:y,hotkeys:s,href:v.href,icon:h.icon,iconRight:j,onClick:x,pressed:h.selected,text:b,tone:h.tone}),c[10]=x,c[11]=v.href,c[12]=h.icon,c[13]=h.selected,c[14]=h.tone,c[15]=y,c[16]=s,c[17]=j,c[18]=b,c[19]=a):a=c[19],c[20]!==a||c[21]!==g?(u=(0,l.jsx)(r.TooltipOfDisabled,{content:g,placement:"left",children:a}),c[20]=a,c[21]=g,c[22]=u):u=c[22],u}let i2={constrainSize:!0,placement:"bottom",portal:!0};function i3(e,t){return e.some(e=>"item"===e.type&&e.tone===t||"group"===e.type&&i3(e.children,t))}function i4(e){let t,n,i,s,a,u=(0,eh.c)(13),{nodes:d,actionsNodes:c}=e,p=(0,o.useId)(),m=i3(d,"critical"),h=i3(d,"caution"),g=m?"critical":h?"caution":void 0;return u[0]!==g?(t=(0,l.jsx)(r.ContextMenuButton,{tone:g,"data-testid":"pane-context-menu-button"}),u[0]=g,u[1]=t):t=u[1],u[2]!==c?(n=c&&(0,l.jsxs)(l.Fragment,{children:[c,(0,l.jsx)(eg.MenuDivider,{})]}),u[2]=c,u[3]=n):n=u[3],u[4]!==d?(i=d.map((e,t)=>{var n;let i=(null==(n=d[t-1])?void 0:n.type)==="group";return(0,l.jsx)(iJ,{isAfterGroup:i,node:e},e.key)}),u[4]=d,u[5]=i):i=u[5],u[6]!==n||u[7]!==i?(s=(0,l.jsxs)(eg.Menu,{children:[n,i]}),u[6]=n,u[7]=i,u[8]=s):s=u[8],u[9]!==p||u[10]!==t||u[11]!==s?(a=(0,l.jsx)(f.MenuButton,{button:t,id:p,menu:s,popover:i2}),u[9]=p,u[10]=t,u[11]=s,u[12]=a):a=u[12],a}let i5=(0,eb.styled)(eg.Layer)(nh()),i6=(0,eb.styled)(eg.Card)(ng()),i8=(0,o.forwardRef)(function(e,t){let n,i,o=(0,eh.c)(7),{children:s,padding:a}=e,{collapsed:u}=iY();return o[0]!==s||o[1]!==a?(n=(0,l.jsx)(i6,{tone:"inherit",children:(0,l.jsx)(eg.Box,{padding:a,children:s})}),o[0]=s,o[1]=a,o[2]=n):n=o[2],o[3]!==u||o[4]!==t||o[5]!==n?(i=(0,l.jsx)(r.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,l.jsx)(i5,{"data-testid":"pane-footer",hidden:u,ref:t,children:n})}),o[3]=u,o[4]=t,o[5]=n,o[6]=i):i=o[6],i}),i7=(0,eb.styled)(eg.Layer)(e=>{let{$border:t}=e;return(0,eb.css)(nf(),t?"var(--card-border-color)":"transparent")}),i9=(0,eb.styled)(eg.Flex)(nv()),le=(0,eb.styled)(eg.Card)(e=>{let{theme:t}=e,{fg:n,bg:i}=t.sanity.color.card.enabled;return(0,eb.css)(nx(),i,n)}),lt=(0,eb.styled)(ef.TextSkeleton)(nb()),ln=(0,eb.styled)(eg.Text)(ny()),li=(0,o.forwardRef)(function(e,t){let n,i,o,s,a,u,d,c,p,m,h,g,f,v=(0,eh.c)(48),{actions:x,backButton:b,border:y,contentAfter:j,loading:w,subActions:S,tabs:C,tabIndex:_,title:I,appendTitle:T}=e,{collapse:R,collapsed:P,expand:E,rootElement:k}=iY(),D=(0,ef.useElementRect)(k||null),M=P?(null==D?void 0:D.height)||window.innerHeight:void 0;v[0]!==M?(n={width:M},v[0]=M,v[1]=n):n=v[1];let F=n;v[2]!==R||v[3]!==P?(i=()=>{P||R()},v[2]=R,v[3]=P,v[4]=i):i=v[4];let A=i;v[5]!==P||v[6]!==E?(o=()=>{P&&E()},v[5]=P,v[6]=E,v[7]=o):o=v[7];let L=o,V=!!(!P&&(C||S)),z=P?"":void 0,O=P?"":void 0;v[8]!==b?(s=b&&(0,l.jsx)(eg.Box,{flex:"none",children:b}),v[8]=b,v[9]=s):s=v[9];let B=b?1:2;v[10]!==w?(a=w&&(0,l.jsx)(eg.Box,{children:(0,l.jsx)(lt,{animated:!0,radius:1,size:1})}),v[10]=w,v[11]=a):a=v[11],v[12]!==T||v[13]!==w||v[14]!==I?(u=!w&&(0,l.jsxs)(eg.Flex,{align:"center",gap:1,children:[(0,l.jsx)(ln,{size:1,textOverflow:"ellipsis",weight:"semibold",children:I}),T]}),v[12]=T,v[13]=w,v[14]=I,v[15]=u):u=v[15],v[16]!==A||v[17]!==B||v[18]!==a||v[19]!==u||v[20]!==_?(d=(0,l.jsxs)(le,{__unstable_focusRing:!0,flex:1,onClick:A,paddingLeft:B,padding:2,tabIndex:_,children:[a,u]}),v[16]=A,v[17]=B,v[18]=a,v[19]=u,v[20]=_,v[21]=d):d=v[21],v[22]!==x||v[23]!==P?(c=x&&(0,l.jsx)(eg.Box,{hidden:P,children:(0,l.jsx)(r.LegacyLayerProvider,{zOffset:"paneHeader",children:x})}),v[22]=x,v[23]=P,v[24]=c):c=v[24],v[25]!==d||v[26]!==c||v[27]!==s?(p=(0,l.jsxs)(eg.Flex,{align:"flex-start",gap:3,children:[s,d,c]}),v[25]=d,v[26]=c,v[27]=s,v[28]=p):p=v[28],v[29]!==P||v[30]!==V||v[31]!==S||v[32]!==C?(m=V&&(0,l.jsxs)(eg.Flex,{align:"center",hidden:P,overflow:"auto",children:[(0,l.jsx)(eg.Box,{flex:1,marginRight:3*!!S,children:C}),S]}),v[29]=P,v[30]=V,v[31]=S,v[32]=C,v[33]=m):m=v[33],v[34]!==L||v[35]!==F||v[36]!==p||v[37]!==m?(h=(0,l.jsxs)(i9,{direction:"column",gap:3,onClick:L,padding:3,sizing:"border",style:F,children:[p,m]}),v[34]=L,v[35]=F,v[36]=p,v[37]=m,v[38]=h):h=v[38];let H=!P&&j;return v[39]!==h||v[40]!==H||v[41]!==O?(g=(0,l.jsx)(r.LegacyLayerProvider,{zOffset:"paneHeader",children:(0,l.jsxs)(eg.Card,{"data-collapsed":O,tone:"inherit",children:[h,H]})}),v[39]=h,v[40]=H,v[41]=O,v[42]=g):g=v[42],v[43]!==y||v[44]!==t||v[45]!==g||v[46]!==z?(f=(0,l.jsx)(eg.LayerProvider,{zOffset:100,children:(0,l.jsx)(i7,{$border:y,"data-collapsed":z,"data-testid":"pane-header",ref:t,children:g})}),v[43]=y,v[44]=t,v[45]=g,v[46]=z,v[47]=f):f=v[47],f});function ll(e){var t;return e.disabled?{disabledReason:"object"==typeof e.disabled?e.disabled.reason:void 0,ariaLabel:"object"==typeof e.disabled&&"string"==typeof(null==(t=e.disabled)?void 0:t.reason)?e.disabled.reason:"This is disabled",isDisabled:!!e.disabled}:{disabledReason:void 0,ariaLabel:void 0,isDisabled:!1}}function lo(e){let t=(0,eh.c)(4),{node:n}=e;if("item"===n.type){let e;return t[0]!==n?(e=(0,l.jsx)(lr,{node:n}),t[0]=n,t[1]=e):e=t[1],e}if("group"===n.type){let e;return t[2]!==n?(e=(0,l.jsx)(la,{node:n}),t[2]=n,t[3]=e):e=t[3],e}return console.warn('unknown menu node (expected `type: "item" | "group"`):',n),null}function lr(e){let t,n,i,o,s,a=(0,eh.c)(23),{node:u}=e,{title:d}=(0,r.useI18nText)(u),{t:c}=(0,r.useTranslation)();if(u.intent){let t;return a[0]!==u.intent||a[1]!==e?(t=(0,l.jsx)(ls,{...e,intent:u.intent}),a[0]=u.intent,a[1]=e,a[2]=t):t=a[2],t}a[3]!==u?(t=ll(u),a[3]=u,a[4]=t):t=a[4];let{disabledReason:p,ariaLabel:m,isDisabled:h}=t;a[5]!==m||a[6]!==c||a[7]!==d?(n=m||d||c("status-button.aria-label"),a[5]=m,a[6]=c,a[7]=d,a[8]=n):n=a[8],a[9]!==h||a[10]!==u.hotkey?(i=!h&&u.hotkey?u.hotkey.split("+"):void 0,a[9]=h,a[10]=u.hotkey,a[11]=i):i=a[11];let g=h?p:d;return a[12]!==i||a[13]!==g?(o={hotkeys:i,content:g},a[12]=i,a[13]=g,a[14]=o):o=a[14],a[15]!==h||a[16]!==u.icon||a[17]!==u.onAction||a[18]!==u.selected||a[19]!==u.tone||a[20]!==n||a[21]!==o?(s=(0,l.jsx)(r.StatusButton,{disabled:h,icon:u.icon,onClick:u.onAction,selected:u.selected,tone:u.tone,"aria-label":n,tooltipProps:o}),a[15]=h,a[16]=u.icon,a[17]=u.onAction,a[18]=u.selected,a[19]=u.tone,a[20]=n,a[21]=o,a[22]=s):s=a[22],s}function ls(e){let t,n,i,o,s,a,u,d=(0,eh.c)(27),{intent:c,node:p}=e;d[0]!==c.params||d[1]!==c.type?(t={intent:c.type,params:c.params},d[0]=c.params,d[1]=c.type,d[2]=t):t=d[2];let m=(0,eC.useIntentLink)(t),{t:h}=(0,r.useTranslation)();d[3]!==m||d[4]!==p?(n=e=>{m.onClick(e),p.onAction()},d[3]=m,d[4]=p,d[5]=n):n=d[5];let g=n;d[6]!==p?(i=ll(p),d[6]=p,d[7]=i):i=d[7];let{disabledReason:f,ariaLabel:v,isDisabled:x}=i;d[8]!==v||d[9]!==p.title||d[10]!==h?(o=v||p.title||h("status-button.aria-label"),d[8]=v,d[9]=p.title,d[10]=h,d[11]=o):o=d[11],d[12]!==x||d[13]!==p.hotkey?(s=!x&&p.hotkey?p.hotkey.split("+"):void 0,d[12]=x,d[13]=p.hotkey,d[14]=s):s=d[14];let b=x?f:p.title;return d[15]!==s||d[16]!==b?(a={hotkeys:s,content:b,placement:"bottom",portal:!0},d[15]=s,d[16]=b,d[17]=a):a=d[17],d[18]!==g||d[19]!==m.href||d[20]!==x||d[21]!==p.icon||d[22]!==p.selected||d[23]!==p.tone||d[24]!==o||d[25]!==a?(u=(0,l.jsx)(r.StatusButton,{forwardedAs:"a",disabled:x,href:m.href,icon:p.icon,onClick:g,selected:p.selected,tone:p.tone,"aria-label":o,tooltipProps:a}),d[18]=g,d[19]=m.href,d[20]=x,d[21]=p.icon,d[22]=p.selected,d[23]=p.tone,d[24]=o,d[25]=a,d[26]=u):u=d[26],u}function la(e){var t;let n,i,s,a,u,c=(0,eh.c)(16),{node:p}=e,{title:m}=(0,r.useI18nText)(p),h=!!p.disabled,g=null!=(t=p.icon)?t:d.UnknownIcon;c[0]!==p.title?(n={content:p.title,portal:!0},c[0]=p.title,c[1]=n):n=c[1],c[2]!==h||c[3]!==g||c[4]!==n||c[5]!==m?(i=(0,l.jsx)(f.Button,{disabled:h,icon:g,label:m,mode:"bleed",tooltipProps:n}),c[2]=h,c[3]=g,c[4]=n,c[5]=m,c[6]=i):i=c[6];let v=(0,o.useId)();return c[7]!==p.children||c[8]!==p.disabled?(s=p.children.map((e,t)=>{var n;return(0,l.jsx)(iJ,{disabled:!!p.disabled,isAfterGroup:(null==(n=p.children[t-1])?void 0:n.type)==="group",node:e},e.key)}),c[7]=p.children,c[8]=p.disabled,c[9]=s):s=c[9],c[10]!==s?(a=(0,l.jsx)(eg.Menu,{children:s}),c[10]=s,c[11]=a):a=c[11],c[12]!==i||c[13]!==v||c[14]!==a?(u=(0,l.jsx)(f.MenuButton,{button:i,id:v,menu:a}),c[12]=i,c[13]=v,c[14]=a,c[15]=u):u=c[15],u}let lu=(0,eb.styled)(eg.Card)(nj()),ld=[];function lc(e){var t;let n,i,r,s,u,d,c,p,m,h,g,f,v,x,b,y,j,w=(0,eh.c)(41);w[0]!==e?({children:n,minWidth:i,onCollapse:r,onExpand:s,...u}=e,w[0]=e,w[1]=n,w[2]=i,w[3]=r,w[4]=s,w[5]=u):(n=w[1],i=w[2],r=w[3],s=w[4],u=w[5]);let[S]=(0,o.useState)(lp),[C,_]=(0,o.useState)(null),I=(null==(t=(0,ef.useElementRect)(C))?void 0:t.width)||0,T=void 0!==I&&i?I<i:void 0;w[6]===Symbol.for("react.memo_cache_sentinel")?(d={expandedElement:null,panes:[],resizing:!1},w[6]=d):d=w[6];let[R,P]=(0,o.useState)(d);w[7]!==S||w[8]!==C?(c=()=>S.setRootElement(C),p=[S,C],w[7]=S,w[8]=C,w[9]=c,w[10]=p):(c=w[9],p=w[10]),(0,o.useEffect)(c,p),w[11]!==S||w[12]!==I?(m=()=>S.setRootWidth(I),h=[S,I],w[11]=S,w[12]=I,w[13]=m,w[14]=h):(m=w[13],h=w[14]),(0,o.useEffect)(m,h),w[15]!==S?(g=()=>S.subscribe(P),f=[S],w[15]=S,w[16]=g,w[17]=f):(g=w[16],f=w[17]),(0,o.useEffect)(g,f),w[18]!==T||w[19]!==r||w[20]!==s?(v=()=>{void 0!==T&&(T&&r&&r(),!T&&s&&s())},x=[T,r,s],w[18]=T,w[19]=r,w[20]=s,w[21]=v,w[22]=x):(v=w[21],x=w[22]),(0,o.useEffect)(v,x),w[23]!==T||w[24]!==S.collapse||w[25]!==S.expand||w[26]!==S.mount||w[27]!==S.resize||w[28]!==R.expandedElement||w[29]!==R.panes||w[30]!==R.resizing?(b={collapse:S.collapse,collapsed:T,expand:S.expand,expandedElement:R.expandedElement,mount:S.mount,panes:R.panes,resize:S.resize,resizing:R.resizing},w[23]=T,w[24]=S.collapse,w[25]=S.expand,w[26]=S.mount,w[27]=S.resize,w[28]=R.expandedElement,w[29]=R.panes,w[30]=R.resizing,w[31]=b):b=w[31];let E=b,k=T?"":void 0,D=R.resizing?"":void 0,M=I?"":void 0;return w[32]!==n||w[33]!==u||w[34]!==k||w[35]!==D||w[36]!==M?(y=(0,l.jsx)(lu,{"data-ui":"PaneLayout",...u,"data-collapsed":k,"data-resizing":D,"data-mounted":M,ref:_,children:n}),w[32]=n,w[33]=u,w[34]=k,w[35]=D,w[36]=M,w[37]=y):y=w[37],w[38]!==E||w[39]!==y?(j=(0,l.jsx)(a.PaneLayoutContext.Provider,{value:E,children:y}),w[38]=E,w[39]=y,w[40]=j):j=w[40],j}function lp(){return function(){let e=[],t=[],n=new WeakMap,i=new Set,l={},o=null,r=0,s=null,a=new Map,u=!1;function d(e){i.delete(e),s=e,c()}return{collapse:function(e){i.add(e),s===e&&(s=null),c()},expand:d,mount:function(e,i){return n.set(e,{...i,original:i}),t.push(e),o&&function(e,t){let n=new WeakMap;for(let i of t)n.set(i,function(e,t){let n=[],i=t;for(;i!==e;){let t=i.parentElement;if(!t)break;let l=Array.from(t.childNodes).indexOf(i);if(n.unshift(l),t===e)break;i=t}return n}(e,i));t.sort((e,t)=>{let i=n.get(e)||ld,l=n.get(t)||ld,o=Math.max(i.length,l.length);for(let e=0;e<o;e+=1){let t=i[e]||-1,n=l[e]||-1;if(t!==n)return t-n}return 0})}(o,t),d(e),()=>{let i=t.indexOf(e);i>-1&&t.splice(i,1),n.delete(e),c()}},resize:function(e,i,o){let r=t.indexOf(i),s=n.get(i);if(!s)return;let d=t[r+1],p=n.get(d);if(p){if("start"===e&&(u=!0,l.left={element:i,flex:s.flex||1,width:i.offsetWidth},l.right={element:d,flex:p.flex||1,width:d.offsetWidth},c()),"move"===e&&l.left&&l.right){a=new Map;let{leftW:e,rightW:t,leftFlex:n,rightFlex:r}=function(e,t,n,i){var l,o;let r={flex:e.left.flex+e.right.flex,width:e.left.width+e.right.width},s=null!=(l=t.minWidth)?l:204,a=null!=(o=n.minWidth)?o:204,u=Math.min(t.maxWidth||1/0,r.width-a),d=Math.min(n.maxWidth||1/0,r.width-s),c=s-e.left.width,p=e.right.width-d;c<p&&(c=p);let m=e.right.width-a,h=u-e.left.width;m>h&&(m=h);let g=Math.min(Math.max(i,c),m),f=e.left.width+g,v=e.right.width-g;return{leftFlex:f/r.width*r.flex,leftW:f,rightFlex:v/r.width*r.flex,rightW:v}}(l,s,p,o);a.set(i,{flex:n,width:e}),a.set(d,{flex:r,width:t}),c()}if("end"===e){var m,h,g,f;u=!1;let e=a.get(i),t=a.get(d);n.set(i,{...s,currentMinWidth:0,currentMaxWidth:null!=(m=s.maxWidth)?m:1/0,flex:null!=(h=null==e?void 0:e.flex)?h:s.flex}),n.set(d,{...p,currentMinWidth:0,currentMaxWidth:null!=(g=s.maxWidth)?g:1/0,flex:null!=(f=null==t?void 0:t.flex)?f:p.flex}),a=new Map,delete l.left,delete l.right,c()}}},setRootElement:function(e){o=e},setRootWidth:function(e){r=e,c()},subscribe:function(t){return e.push(t),()=>{let n=e.push(t);n>-1&&e.splice(n,1)}}};function c(){if(!r)return;let l=[];for(let e of t)e!==s&&l.unshift(e);s&&l.unshift(s);let o=new WeakMap,d=l.length,c=l[0],p=r-(d-1)*51;for(let e of l){var m,h,g,f;let t=n.get(e);if(!t)continue;let l=t.currentMinWidth||t.minWidth||204,r=e===c,s=i.has(e),u=l>p,d=!r&&(s||u),v=a.get(e);o.set(e,{element:e,collapsed:d,currentMinWidth:null!=(m=null==v?void 0:v.width)?m:t.currentMinWidth,currentMaxWidth:null!=(h=null==v?void 0:v.width)?h:t.currentMaxWidth,flex:null!=(f=null!=(g=null==v?void 0:v.flex)?g:t.flex)?f:1}),d?p-=51:p-=l-51}let v=[];for(let e of t){let t=o.get(e);t&&v.push(t)}for(let n of e)n({expandedElement:s||t[t.length-1]||null,panes:v,resizing:u})}}()}function lm(e){let t,n,i,o=(0,eh.c)(12),{children:r,currentMinWidth:s,flex:a,minWidth:u,paneKey:d,title:c,tone:p}=e,m=void 0===c?"Error":c,h=void 0===p?"critical":p;return o[0]!==m?(t=(0,l.jsx)(li,{title:m}),o[0]=m,o[1]=t):t=o[1],o[2]!==r?(n=(0,l.jsx)(iX,{overflow:"auto",children:(0,l.jsx)(eg.Box,{paddingX:4,paddingY:5,children:r})}),o[2]=r,o[3]=n):n=o[3],o[4]!==s||o[5]!==a||o[6]!==u||o[7]!==d||o[8]!==t||o[9]!==n||o[10]!==h?(i=(0,l.jsxs)(iq,{currentMinWidth:s,flex:a,id:d,minWidth:u,tone:h,children:[t,n]}),o[4]=s,o[5]=a,o[6]=u,o[7]=d,o[8]=t,o[9]=n,o[10]=h,o[11]=i):i=o[11],i}function lh(e){let t,n,i,r=(0,eh.c)(6),{children:s,ms:a}=e,u=void 0===a?0:a,[d,c]=(0,o.useState)(u<=0);if(r[0]!==u?(t=()=>{if(u<=0)return;let e=setTimeout(()=>c(!0),u);return()=>{clearTimeout(e)}},n=[u],r[0]=u,r[1]=t,r[2]=n):(t=r[1],n=r[2]),(0,o.useEffect)(t,n),!d||!s){let e;return r[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(l.Fragment,{}),r[3]=e):e=r[3],e}return r[4]!==s?(i="function"==typeof s?s():s,r[4]=s,r[5]=i):i=r[5],i}function lg(e){let t=[{ms:300,messageKey:"panes.resolving.default-message"},{ms:5e3,messageKey:"panes.resolving.slow-resolve-message"}];if(r.isDev){let n=["Check console for errors?","Is your observable/promise resolving?",e.length>0?"Structure path: ".concat(e.join(" âž ")):""];t.push({ms:1e4,message:n.join("\n")})}let n=(0,eq.of)(null);return(0,eK.merge)(...t.map(e=>n.pipe((0,eR.mapTo)("messageKey"in e?{messageKey:e.messageKey}:{message:e.message}),(0,eP.delay)(e.ms))))}let lf=(0,eb.styled)(eg.Flex)(nw()),lv=(0,o.memo)(e=>{let t,n,i,s,a,u,d,c,p,m,h=(0,eh.c)(28),{delay:g,flex:f,message:v,minWidth:x,paneKey:y,path:j,selected:w,title:S,tone:C}=e,_=void 0===g?300:g,I=void 0===v?lg:v,{t:T}=(0,r.useTranslation)(b);e:{if("function"==typeof I){let e;h[0]!==I||h[1]!==j?(e=I(j?j.split(";"):[]),h[0]=I,h[1]=j,h[2]=e):e=h[2],t=e;break e}t=I}let R=t;h[3]!==R||h[4]!==T?(n=()=>"string"==typeof R?R:T("panes.resolving.default-message"),h[3]=R,h[4]=T,h[5]=n):n=h[5];let[P,E]=(0,o.useState)(n);h[6]!==R||h[7]!==T?(i=()=>{if("object"!=typeof R||"function"!=typeof R.subscribe)return;let e=R.subscribe(e=>{E("messageKey"in e?T(e.messageKey):e.message)});return()=>e.unsubscribe()},s=[R,T],h[6]=R,h[7]=T,h[8]=i,h[9]=s):(i=h[8],s=h[9]),(0,o.useEffect)(i,s);let[k,D]=(0,o.useState)(null),[M,F]=(0,o.useState)(!1);h[10]!==k?(a=()=>{if(k)return(0,ef._raf2)(()=>F(!0))},u=[k],h[10]=k,h[11]=a,h[12]=u):(a=h[11],u=h[12]),(0,o.useEffect)(a,u);let A=M?"":void 0,L=S||P;h[13]!==L?(d=(0,l.jsx)(r.LoadingBlock,{showText:!0,title:L}),h[13]=L,h[14]=d):d=h[14],h[15]!==d||h[16]!==A?(c=(0,l.jsx)(lf,{align:"center","data-mounted":A,direction:"column",height:"fill",justify:"center",ref:D,children:d}),h[15]=d,h[16]=A,h[17]=c):c=h[17];let V=c;return h[18]!==V||h[19]!==_?(p=(0,l.jsx)(iX,{children:V}),h[18]=V,h[19]=_,h[20]=p):p=h[20],h[21]!==f||h[22]!==x||h[23]!==y||h[24]!==w||h[25]!==p||h[26]!==C?(m=(0,l.jsx)(iq,{flex:f,id:y,minWidth:x,selected:w,tone:C,children:p}),h[21]=f,h[22]=x,h[23]=y,h[24]=w,h[25]=p,h[26]=C,h[27]=m):m=h[27],m});function lx(){let e=(0,o.useContext)(a.DocumentPaneContext);if(!e)throw Error("DocumentPane: missing context value");return e}function lb(e){let t,n,i=(0,eh.c)(8),{children:o,documentId:s,documentType:a}=e;return i[0]!==o||i[1]!==s||i[2]!==a?(t=(0,l.jsx)(ly,{documentId:s,documentType:a,children:o}),i[0]=o,i[1]=s,i[2]=a,i[3]=t):t=i[3],i[4]!==s||i[5]!==a||i[6]!==t?(n=(0,l.jsx)(r.CommentsEnabledProvider,{documentId:s,documentType:a,children:t}),i[4]=s,i[5]=a,i[6]=t,i[7]=n):n=i[7],n}function ly(e){let t,n,i,s,a,u,d=(0,eh.c)(27),{children:c,documentId:p,documentType:m}=e,{enabled:h}=(0,r.useCommentsEnabled)(),{connectionState:g,onPathOpen:f,inspector:v,openInspector:x}=lx(),{selectedReleaseId:b}=(0,r.usePerspective)(),{params:y,setParams:j}=lj(),{studioUrl:w}=(0,r.useStudioUrl)(window.location.origin),{resolveIntentLink:S}=(0,eC.useRouter)(),C=null==y?void 0:y.comment,_=(0,o.useRef)(y);d[0]!==y?(t=()=>{_.current=y},n=[y],d[0]=y,d[1]=t,d[2]=n):(t=d[1],n=d[2]),(0,o.useLayoutEffect)(t,n),d[3]!==p||d[4]!==m||d[5]!==S||d[6]!==w?(i=e=>{let t=S("edit",{id:p,type:m,inspect:r.COMMENTS_INSPECTOR_NAME,comment:e});return"".concat(w).concat(t)},d[3]=p,d[4]=m,d[5]=S,d[6]=w,d[7]=i):i=d[7];let I=i;d[8]!==j?(s=()=>{j({..._.current,comment:void 0})},d[8]=j,d[9]=s):s=d[9];let T=s;d[10]!==(null==v?void 0:v.name)||d[11]!==x?(a=()=>{(null==v?void 0:v.name)!==r.COMMENTS_INSPECTOR_NAME&&x(r.COMMENTS_INSPECTOR_NAME)},d[10]=null==v?void 0:v.name,d[11]=x,d[12]=a):a=d[12];let R=a;if(!h){let e;return d[13]!==c?(e=(0,l.jsx)(l.Fragment,{children:c}),d[13]=c,d[14]=e):e=d[14],e}let P=(null==v?void 0:v.name)===r.COMMENTS_INSPECTOR_NAME,E="connecting"===g;return d[15]!==c||d[16]!==p||d[17]!==m||d[18]!==I||d[19]!==T||d[20]!==R||d[21]!==f||d[22]!==C||d[23]!==b||d[24]!==P||d[25]!==E?(u=(0,l.jsx)(r.CommentsProvider,{documentId:p,documentType:m,getCommentLink:I,isCommentsOpen:P,isConnecting:E,onClearSelectedComment:T,onCommentsOpen:R,onPathOpen:f,selectedCommentId:C,sortOrder:"desc",type:"field",releaseId:b,children:c}),d[15]=c,d[16]=p,d[17]=m,d[18]=I,d[19]=T,d[20]=R,d[21]=f,d[22]=C,d[23]=b,d[24]=P,d[25]=E,d[26]=u):u=d[26],u}function lj(){return(0,o.useContext)(a.PaneRouterContext)}function lw(e){let{displayed:t,documentId:n}=e,{selectedReleaseId:i}=(0,r.usePerspective)(),{data:l}=(0,r.useActiveReleases)(),{data:a}=(0,r.useArchivedReleases)(),{data:u}=(0,r.useDocumentVersions)({documentId:n}),d=t&&!t._createdAt,{params:c}=lj();return(0,o.useMemo)(()=>{if(!u)return{notCurrentReleases:[],currentReleases:[],inCreation:null};let e=u.map(e=>(0,s.getVersionFromId)(e)),n=l.reduce((n,l)=>{let o=e.includes((0,r.getReleaseIdFromReleaseDocumentId)(l._id)),a=(0,r.getReleaseIdFromReleaseDocumentId)(l._id);return d&&a===(0,s.getVersionFromId)(t._id||"")&&a===i?n.inCreation=l:o?n.currentReleases.push(l):n.notCurrentReleases.push(l),n},{notCurrentReleases:[],currentReleases:[],inCreation:null});if(!(null==c?void 0:c.historyVersion))return n;let o=a.find(e=>(0,r.getReleaseIdFromReleaseDocumentId)(e._id)===(null==c?void 0:c.historyVersion));return(null==o?void 0:o.state)==="archived"&&n.currentReleases.push(o),n},[a,d,null==t?void 0:t._id,u,null==c?void 0:c.historyVersion,l,i])}function lS(e){var t,n;let{displayed:i,documentId:l,editState:a}=e,{document:{drafts:{enabled:u}}}=(0,r.useWorkspace)(),d=lw({displayed:i,documentId:l}),c=[null==a||null==(t=a.published)?void 0:t._id,u?null==a||null==(n=a.draft)?void 0:n._id:[]].flat(),p=d.currentReleases.map(e=>(null==a?void 0:a.id)&&(0,s.getVersionId)(a.id,(0,r.getReleaseIdFromReleaseDocumentId)(e._id))),m=c.concat(p).filter(e=>"string"==typeof e),h=(0,o.useMemo)(()=>m.findIndex(e=>e===(null==i?void 0:i._id)),[null==i?void 0:i._id,m]),g=(0,o.useMemo)(()=>{var e;return null!=(e=m[h-1])?e:void 0},[h,m]),f=(0,o.useMemo)(()=>{var e;return null!=(e=m[h+1])?e:void 0},[h,m]);return{position:h,previousId:g,nextId:f,stack:m}}function lC(){let e=(0,o.useContext)(a.StructureToolContext);if(!e)throw Error("StructureTool: missing context value");return e}lv.displayName="Memo(LoadingPane)";let l_={},lI="inspect:",lT=[{id:"inspectors"},{id:"links"}],lR="sanity/structure/history";function lP(e){let{documentId:t,documentType:n,inspectors:i,onMenuItems:s}=e,a=i.length,[u,d]=(0,o.useState)(()=>Array.from(Array(a)));(0,o.useEffect)(()=>{if(u.length!==a){let e=Array.from(Array(a));for(let t=0;t<a;t++)e[t]=u[t];d(e)}},[a,u]);let c=(0,o.useCallback)((e,t)=>{d(n=>{let i=[...n];return i[e]=t,i})},[]);(0,o.useEffect)(()=>{s(u.filter(Boolean))},[u,s]);let p=(0,o.useMemo)(()=>i.map((e,i)=>e.useMenuItem?[function(e){let{documentId:t,documentType:n,index:i,setMenuItem:l,useMenuItem:s}=e;return(0,o.memo)(function(){let e,a,u,d=(0,eh.c)(4);d[0]===Symbol.for("react.memo_cache_sentinel")?(e={documentId:t,documentType:n},d[0]=e):e=d[0];let c=s(e),p=(0,r.useUnique)(c);return d[1]!==p?(a=()=>{l(i,p)},u=[p],d[1]=p,d[2]=a,d[3]=u):(a=d[2],u=d[3]),(0,o.useEffect)(a,u),null})}({documentId:t,documentType:n,index:i,setMenuItem:c,useMenuItem:e.useMenuItem}),e.name]:[()=>null,""]),[t,n,i,c]);return(0,l.jsx)(l.Fragment,{children:p.map(e=>{let[t,n]=e;return n&&(0,l.jsx)(t,{},n)})})}function lE(){let e,t,n,i=(0,eh.c)(22),{connectionState:l,schemaType:o,editState:s,isDeleted:a,lastRevisionDocument:u}=lx(),{t:d}=(0,r.useTranslation)(b),c=a?u:(null==s?void 0:s.version)||(null==s?void 0:s.draft)||(null==s?void 0:s.published),p=!!c;e:{if(a&&u&&o)try{let t;i[0]!==u||i[1]!==o?(t=(0,r.prepareForPreview)(u,o),i[0]=u,i[1]=o,i[2]=t):t=i[2],e=t;break e}catch(t){console.warn("Failed to prepare preview for deleted document:",t),e=null;break e}e=null}let m=e,h=p&&!a;i[3]!==c||i[4]!==o||i[5]!==h?(t={enabled:h,schemaType:o,value:c},i[3]=c,i[4]=o,i[5]=h,i[6]=t):t=i[6];let{error:g,value:f}=(0,r.unstable_useValuePreview)(t);if("connecting"===l&&!p){let e;return i[7]===Symbol.for("react.memo_cache_sentinel")?(e={error:void 0,title:void 0},i[7]=e):e=i[7],e}if(a&&m){let e;return i[8]!==m.title?(e={error:void 0,title:m.title},i[8]=m.title,i[9]=e):e=i[9],e}if(!f&&!a){let e,t,n=(null==o?void 0:o.title)||(null==o?void 0:o.name);return i[10]!==d||i[11]!==n?(e=d("panes.document-header-title.new.text",{schemaType:n}),i[10]=d,i[11]=n,i[12]=e):e=i[12],i[13]!==e?(t={error:void 0,title:e},i[13]=e,i[14]=t):t=i[14],t}if(g){let e,t;return i[15]!==g.message||i[16]!==d?(e=d("panes.document-list-pane.error.text",{error:g.message}),i[15]=g.message,i[16]=d,i[17]=e):e=i[17],i[18]!==e?(t={error:e,title:void 0},i[18]=e,i[19]=t):t=i[19],t}let v=null==f?void 0:f.title;return i[20]!==v?(n={error:void 0,title:v},i[20]=v,i[21]=n):n=i[21],n}lP.displayName="DocumentInspectorMenuItemsResolver";let lk=["patch","commit"],lD=(0,o.memo)(function(){let e,t,n,i,s,a=(0,eh.c)(13),{push:u}=(0,ef.useToast)(),{documentId:d,documentType:c,value:p}=lx(),m=lE(),h=m.error,g=(0,r.useDocumentOperationEvent)(d,c),f=(0,o.useRef)(g),v=lj(),{t:x}=(0,r.useTranslation)(b),{handleOpenDialog:y}=(0,r.useDocumentLimitsUpsellContext)();e:{if(!m.title&&!h&&!lk.includes(null==g?void 0:g.op)&&"string"==typeof p.title&&(null==g?void 0:g.type)==="success"){e=p.title;break e}e=m.title}let j=e;a[0]!==x||a[1]!==j?(t=j||x("panes.document-operation-results.operation-undefined-title"),a[0]=x,a[1]=j,a[2]=t):t=a[2];let w=t;a[3]!==w?(n=w.length>25?"".concat(w.slice(0,25),"..."):w,a[3]=w,a[4]=n):n=a[4];let S=n;return a[5]!==S||a[6]!==g||a[7]!==y||a[8]!==v||a[9]!==u||a[10]!==x?(i=()=>{let e;if(g&&g!==f.current){if("error"===g.type){if((0,r.isDocumentLimitError)(g.error))return void y("document_action");u({closable:!0,duration:3e4,status:"error",title:x("panes.document-operation-results.operation-error",{context:g.op}),description:(0,l.jsxs)("details",{children:[(0,l.jsx)("summary",{children:x("panes.document-operation-results.error.summary.title")}),g.error.message]})})}return"success"!==g.type||lk.includes(g.op)||u({closable:!0,status:"success",title:(0,l.jsx)(r.Translate,{context:g.op,i18nKey:"panes.document-operation-results.operation-success",t:x,values:{op:g.op,title:S},components:{Strong:"strong"}})}),"success"===g.type&&"delete"===g.op&&(e=setTimeout(()=>v.closeCurrentAndAfter(),0)),f.current=g,()=>clearTimeout(e)}},s=[g,v,u,x,S,y],a[5]=S,a[6]=g,a[7]=y,a[8]=v,a[9]=u,a[10]=x,a[11]=i,a[12]=s):(i=a[11],s=a[12]),(0,o.useEffect)(i,s),null}),lM=(0,eb.styled)(eg.Card)({position:"relative",zIndex:"1",lineHeight:"0"});function lF(e){let t,n,i,o,s,a,u,c,p,m,h,g,v=(0,eh.c)(25);v[0]!==e?({as:i,children:t,closeButtonLabel:n,onClose:o,title:a,...s}=e,v[0]=e,v[1]=t,v[2]=n,v[3]=i,v[4]=o,v[5]=s,v[6]=a):(t=v[1],n=v[2],i=v[3],o=v[4],s=v[5],a=v[6]);let{t:x}=(0,r.useTranslation)(b);return v[7]!==a?(u=(0,l.jsx)(eg.Box,{flex:1,padding:3,children:(0,l.jsx)(eg.Text,{as:"h1",size:1,weight:"medium",children:a})}),v[7]=a,v[8]=u):u=v[8],v[9]!==x?(c=x("document-inspector.close-button.tooltip"),v[9]=x,v[10]=c):c=v[10],v[11]!==c?(p={content:c},v[11]=c,v[12]=p):p=v[12],v[13]!==n||v[14]!==o||v[15]!==p?(m=(0,l.jsx)(eg.Box,{flex:"none",padding:1,children:(0,l.jsx)(f.Button,{"aria-label":n,icon:d.CloseIcon,mode:"bleed",onClick:o,tooltipProps:p})}),v[13]=n,v[14]=o,v[15]=p,v[16]=m):m=v[16],v[17]!==u||v[18]!==m?(h=(0,l.jsxs)(eg.Flex,{padding:2,children:[u,m]}),v[17]=u,v[18]=m,v[19]=h):h=v[19],v[20]!==t||v[21]!==i||v[22]!==s||v[23]!==h?(g=(0,l.jsxs)(lM,{...s,as:i,children:[h,t]}),v[20]=t,v[21]=i,v[22]=s,v[23]=h,v[24]=g):g=v[24],g}function lA(e){let t,n,i,o=(0,eh.c)(14),{documentId:s,documentType:a,flex:u}=e,{collapsed:d}=iY(),{closeInspector:c,inspector:p}=lx(),{features:m}=lC();o[0]!==c||o[1]!==p?(t=()=>{p&&c(p.name)},o[0]=c,o[1]=p,o[2]=t):t=o[2];let h=t;if(d||!p)return null;let g=p.component;o[3]!==g||o[4]!==s||o[5]!==a||o[6]!==h?(n=(0,l.jsx)(g,{onClose:h,documentId:s,documentType:a}),o[3]=g,o[4]=s,o[5]=a,o[6]=h,o[7]=n):n=o[7];let f=n;if(m.resizablePanes){let e;return o[8]!==f||o[9]!==u?(e=(0,l.jsx)(r.Resizable,{as:"aside","data-ui":"DocumentInspectorPanel",flex:u,resizerPosition:"left",maxWidth:540,minWidth:320,children:f}),o[8]=f,o[9]=u,o[10]=e):e=o[10],e}return o[11]!==f||o[12]!==u?(i=(0,l.jsx)(eg.Box,{as:"aside","data-ui":"DocumentInspectorPanel",flex:u,children:f}),o[11]=f,o[12]=u,o[13]=i):i=o[13],i}function lL(e,t,n){let i,l,o,s,a=(0,eh.c)(16),u=(0,r.useKeyValueStore)();a[0]!==t||a[1]!==e?(i=["studio.structure-tool",e,t].filter(Boolean),a[0]=t,a[1]=e,a[2]=i):i=a[2];let d=i.join(".");if(a[3]!==n||a[4]!==u||a[5]!==d){let e;a[7]!==n?(e=e=>null===e?n:e,a[7]=n,a[8]=e):e=a[8],l=u.getKey(d).pipe((0,eE.map)(e)),a[3]=n,a[4]=u,a[5]=d,a[6]=l}else l=a[6];let c=(0,eS.useObservable)(l,n);a[9]!==u||a[10]!==d||a[11]!==c?(o=e=>{e!==c&&u.setKey(d,e)},a[9]=u,a[10]=d,a[11]=c,a[12]=o):o=a[12];let p=o;return a[13]!==p||a[14]!==c?(s=[c,p],a[13]=p,a[14]=c,a[15]=s):s=a[15],s}let lV={id:"parsed",title:"document-inspector.view-mode.parsed"},lz={id:"raw",title:"document-inspector.view-mode.raw-json"},lO=[lV,lz],lB=new tf.default({maxSize:1e3});function lH(e){let{path:t}=e,n=lB.get(t);void 0!==n&&lB.set(t,!n)}function lN(e){let t=window.getSelection();if(t){let n=document.createRange();t.removeAllRanges(),n.selectNodeContents(e),t.addRange(n)}}function lU(e){lN(e.currentTarget)}function lG(e){65===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),lN(e.currentTarget))}let lW=eb.styled.div(e=>{let{theme:t}=e,{color:n,fonts:i,space:l}=t.sanity;return(0,eb.css)(nS(),i.code.family,i.code.sizes[1].fontSize,i.code.sizes[1].lineHeight,(0,eg.rem)(l[4]),(0,eg.rem)(l[3]),(0,eg.rem)(l[4]),i.code.sizes[1].fontSize,i.code.sizes[1].lineHeight,i.code.sizes[1].fontSize,i.code.sizes[1].lineHeight,(0,eg.rem)(l[4]/2),n.syntax.property,n.syntax.constant,(0,eg.rem)(l[3]),n.syntax.string,n.syntax.boolean,n.syntax.number)});function lq(e){let t,n,i,o=(0,eh.c)(8),{onChange:s,query:a}=e;o[0]!==s?(t=e=>s(e.target.value),o[0]=s,o[1]=t):t=o[1];let u=t,{t:c}=(0,r.useTranslation)(b);o[2]!==c?(n=c("document-inspector.search.placeholder"),o[2]=c,o[3]=n):n=o[3];let p=a||"";return o[4]!==u||o[5]!==n||o[6]!==p?(i=(0,l.jsx)(eg.TextInput,{icon:d.SearchIcon,onChange:u,placeholder:n,radius:2,value:p}),o[4]=u,o[5]=n,o[6]=p,o[7]=i):i=o[7],i}function lK(e){let t,n,i,o,s,a,u,d,c,p,m,h,g,v,x,y,j=(0,eh.c)(49),{value:w}=e,{onInspectClose:S,paneKey:C}=lx(),_="".concat(C,"_inspect_"),[I,T]=lL("inspect-view-mode",null,"parsed");j[0]!==I?(t=lO.find(e=>e.id===I),j[0]=I,j[1]=t):t=j[1];let R=t;j[2]!==T?(n=()=>{T(lV.id)},j[2]=T,j[3]=n):n=j[3];let P=n;j[4]!==T?(i=()=>{T(lz.id)},j[4]=T,j[5]=i):i=j[5];let E=i,{t:k}=(0,r.useTranslation)(b),D="".concat(_,"dialog");j[6]!==k||j[7]!==w?(o=(0,r.isRecord)(w)&&(0,r.isString)(w._id)&&(0,r.isString)(w._type)?(0,l.jsx)(r.Translate,{t:k,i18nKey:"document-inspector.dialog.title",components:{DocumentTitle:()=>(0,l.jsx)("em",{children:(0,l.jsx)(s2,{document:w})})}}):(0,l.jsx)("em",{children:k("document-inspector.dialog.title-no-value")}),j[6]=k,j[7]=w,j[8]=o):o=j[8],j[9]===Symbol.for("react.memo_cache_sentinel")?(s={position:"sticky",bottom:0,zIndex:3},j[9]=s):s=j[9];let M="".concat(_,"tabpanel"),F="".concat(_,"tab-").concat(lV.id);j[10]!==k?(a=k(lV.title),j[10]=k,j[11]=a):a=j[11];let A=R===lV;j[12]!==P||j[13]!==M||j[14]!==F||j[15]!==a||j[16]!==A?(u=(0,l.jsx)(f.Tab,{"aria-controls":M,id:F,label:a,onClick:P,selected:A}),j[12]=P,j[13]=M,j[14]=F,j[15]=a,j[16]=A,j[17]=u):u=j[17];let L="".concat(_,"tabpanel"),V="".concat(_,"tab-").concat(lz.id);j[18]!==k?(d=k(lz.title),j[18]=k,j[19]=d):d=j[19];let z=R===lz;j[20]!==E||j[21]!==L||j[22]!==V||j[23]!==d||j[24]!==z?(c=(0,l.jsx)(f.Tab,{"aria-controls":L,id:V,label:d,onClick:E,selected:z}),j[20]=E,j[21]=L,j[22]=V,j[23]=d,j[24]=z,j[25]=c):c=j[25],j[26]!==u||j[27]!==c?(p=(0,l.jsx)(eg.Card,{padding:3,paddingTop:0,shadow:1,style:s,children:(0,l.jsxs)(eg.TabList,{space:1,children:[u,c]})}),j[26]=u,j[27]=c,j[28]=p):p=j[28];let O="".concat(_,"tab-").concat(I),B="".concat(_,"tabpanel");return j[29]===Symbol.for("react.memo_cache_sentinel")?(m={outline:"none"},j[29]=m):m=j[29],j[30]!==w||j[31]!==R?(h=R===lV&&(0,l.jsx)(lW,{children:(0,l.jsx)(tg.JsonInspector,{data:w,isExpanded:function e(t,n){let i=lB.get(t);return void 0===i?(lB.set(t,Array.isArray(n)||(0,r.isRecord)(n)),e(t,n)):i},onClick:lH,search:lq,filterOptions:{ignoreCase:!0}})}),j[30]=w,j[31]=R,j[32]=h):h=j[32],j[33]!==w||j[34]!==R?(g=R===lz&&(0,l.jsx)(eg.Code,{language:"json",tabIndex:0,onKeyDown:lG,onDoubleClick:lU,onFocus:lU,size:1,children:JSON.stringify(w,null,2)}),j[33]=w,j[34]=R,j[35]=g):g=j[35],j[36]!==O||j[37]!==B||j[38]!==h||j[39]!==g?(v=(0,l.jsxs)(ef.TabPanel,{"aria-labelledby":O,flex:1,id:B,overflow:"auto",padding:4,style:m,children:[h,g]}),j[36]=O,j[37]=B,j[38]=h,j[39]=g,j[40]=v):v=j[40],j[41]!==p||j[42]!==v?(x=(0,l.jsxs)(eg.Flex,{direction:"column",height:"fill",children:[p,v]}),j[41]=p,j[42]=v,j[43]=x):x=j[43],j[44]!==S||j[45]!==x||j[46]!==D||j[47]!==o?(y=(0,l.jsx)(f.Dialog,{bodyHeight:"fill",id:D,header:o,onClose:S,onClickOutside:S,padding:!1,width:2,children:x}),j[44]=S,j[45]=x,j[46]=D,j[47]=o,j[48]=y):y=j[48],y}function lY(e){let t,n,i,o,r,s,a,u,d,c,p,m=(0,eh.c)(22);m[0]!==e?({action:n,content:i,icon:t,tone:r,paddingY:s,...o}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=i,m[4]=o,m[5]=r,m[6]=s):(t=m[1],n=m[2],i=m[3],o=m[4],r=m[5],s=m[6]);let h=void 0===r?"transparent":r,g=void 0===s?2:s;return m[7]!==t?(a=t&&(0,l.jsx)(eg.Text,{size:0,children:(0,l.jsx)(t,{})}),m[7]=t,m[8]=a):a=m[8],m[9]!==i?(u=(0,l.jsx)(eg.Flex,{align:"center",flex:1,gap:2,paddingY:2,children:i}),m[9]=i,m[10]=u):u=m[10],m[11]!==n?(d=n&&(0,l.jsx)(f.Button,{...n,mode:n.mode||"ghost",tone:n.tone||"default"}),m[11]=n,m[12]=d):d=m[12],m[13]!==a||m[14]!==u||m[15]!==d?(c=(0,l.jsxs)(eg.Flex,{align:"center",gap:3,paddingX:2,children:[a,u,d]}),m[13]=a,m[14]=u,m[15]=d,m[16]=c):c=m[16],m[17]!==g||m[18]!==o||m[19]!==c||m[20]!==h?(p=(0,l.jsx)(eg.Box,{padding:1,children:(0,l.jsx)(eg.Card,{radius:3,paddingX:2,paddingY:g,tone:h,...o,children:c})}),m[17]=g,m[18]=o,m[19]=c,m[20]=h,m[21]=p):p=m[21],p}function lX(){let e=(0,eh.c)(3),{isDeleted:t,isDeleting:n,ready:i}=lx(),{selectedPerspective:o}=(0,r.usePerspective)();if(!i)return null;if(!(0,r.isPublishedPerspective)(o)&&!(0,r.isDraftPerspective)(o)&&"archived"===o.state){let t;return e[0]!==o?(t=(0,l.jsx)(l$,{release:o}),e[0]=o,e[1]=t):t=e[1],t}if(t&&!n){let t;return e[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)(lQ,{}),e[2]=t):t=e[2],t}}function lQ(){let e,t,n,i,o,s,a=(0,eh.c)(17),{documentId:u,documentType:c}=lx(),{restore:p}=(0,r.useDocumentOperation)(u,c),{navigateIntent:m}=(0,eC.useRouter)();a[0]!==u||a[1]!==c||a[2]!==m||a[3]!==p?(e=()=>{p.execute("lastRevision"),m("edit",{id:u,type:c})},a[0]=u,a[1]=c,a[2]=m,a[3]=p,a[4]=e):e=a[4];let h=e,{t:g}=(0,r.useTranslation)(b);return a[5]!==g?(t=g("banners.deleted-document-banner.restore-button.text"),a[5]=g,a[6]=t):t=a[6],a[7]!==h||a[8]!==t?(n={onClick:h,text:t},a[7]=h,a[8]=t,a[9]=n):n=a[9],a[10]!==g?(i=g("banners.deleted-document-banner.text"),a[10]=g,a[11]=i):i=a[11],a[12]!==i?(o=(0,l.jsx)(eg.Text,{size:1,weight:"medium",children:i}),a[12]=i,a[13]=o):o=a[13],a[14]!==n||a[15]!==o?(s=(0,l.jsx)(lY,{action:n,content:o,"data-testid":"deleted-document-banner",icon:d.ReadOnlyIcon}),a[14]=n,a[15]=o,a[16]=s):s=a[16],s}let l$=e=>{var t,n,i;let o,s,a,u=(0,eh.c)(8),{release:c}=e,{t:p}=(0,r.useTranslation)();return u[0]!==(null==(t=c.metadata)?void 0:t.title)||u[1]!==p?(o=(null==(n=c.metadata)?void 0:n.title)||p("release.placeholder-untitled-release"),u[0]=null==(i=c.metadata)?void 0:i.title,u[1]=p,u[2]=o):o=u[2],u[3]!==o?(s={title:o},u[3]=o,u[4]=s):s=u[4],u[5]!==p||u[6]!==s?(a=(0,l.jsx)(lY,{tone:"caution",content:(0,l.jsx)(eg.Text,{size:1,weight:"medium",children:(0,l.jsx)(r.Translate,{t:p,i18nKey:"banners.deleted-release-banner.text",values:s})}),"data-testid":"deleted-release-banner",icon:d.DocumentRemoveIcon}),u[5]=p,u[6]=s,u[7]=a):a=u[7],a};function lJ(){let e,t,n=(0,eh.c)(5),{schemaType:i}=lx(),{t:o}=(0,r.useTranslation)(b);return(0,ev.isDeprecatedSchemaType)(i)?(n[0]!==o?(e=(0,l.jsx)(r.Translate,{t:o,i18nKey:"banners.deprecated-document-type-banner.text"}),n[0]=o,n[1]=e):e=n[1],n[2]!==i.deprecated.reason||n[3]!==e?(t=(0,l.jsx)(lY,{content:(0,l.jsxs)(eg.Text,{size:1,weight:"medium",children:[e," ",i.deprecated.reason]}),"data-testid":"deprecated-document-type-banner",icon:d.ErrorOutlineIcon}),n[2]=i.deprecated.reason,n[3]=e,n[4]=t):t=n[4],t):null}let lZ=(0,to.defineEvent)({name:"Ask To Edit Dialog Opened",version:1,description:'User clicked the "Ask to edit" button in the document permissions banner'}),l0=(0,to.defineEvent)({name:"Ask To Edit Request Sent",version:1,description:"User sent a role change request from the dialog"}),l1=(0,eb.styled)(eg.Box)(nC());function l2(e){let t,n,i,s,a,u,d,c,p,m,h,g,v,x,y,j=(0,eh.c)(56),{onClose:w,onRequestSubmitted:S}=e,{t:C}=(0,r.useTranslation)(b),_=(0,tn.useTelemetry)(),I="request-permissions-".concat((0,o.useId)()),T=(0,r.useProjectId)();j[0]===Symbol.for("react.memo_cache_sentinel")?(t={apiVersion:"2024-09-26"},j[0]=t):t=j[0];let R=(0,r.useClient)(t),P=(0,ef.useToast)(),E=(0,r.useZIndex)(),[k,D]=(0,o.useState)(!1),[M,F]=(0,o.useState)(""),[A,L]=(0,o.useState)(),[V,z]=(0,o.useState)(!1),[O,B]=(0,o.useState)(!1);e:{let e,t="administrator";if(!T||!R){let e;j[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,eq.of)(t),j[1]=e):e=j[1],n=e;break e}if(j[2]!==R.observable||j[3]!==T){let n,i;j[5]===Symbol.for("react.memo_cache_sentinel")?(n=e=>e.filter(l4).find(l3)?"editor":t,j[5]=n):n=j[5],j[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(0,eq.of)(t),j[6]=i):i=j[6],e=R.observable.request({url:"/projects/".concat(T,"/roles")}).pipe((0,eE.map)(n),(0,eD.startWith)(t),(0,ek.catchError)(i)),j[2]=R.observable,j[3]=T,j[4]=e}else e=j[4];n=e}let H=(0,eS.useObservable)(n);j[7]!==R||j[8]!==M||j[9]!==S||j[10]!==T||j[11]!==H||j[12]!==_||j[13]!==P?(i=()=>{var e;D(!0),R.request({url:"/access/project/".concat(T,"/requests"),method:"post",body:{note:M,requestUrl:null==(e=window)?void 0:e.location.href,requestedRole:H,type:"role"}}).then(e=>{e&&(S&&S(),_.log(l0),P.push({title:"Edit access requested"}))}).catch(e=>{var t,n,i;let l=null==e||null==(t=e.response)?void 0:t.statusCode,o=null==e||null==(i=e.response)||null==(n=i.body)?void 0:n.message;429===l&&(z(!0),L(o)),409===l?(B(!0),L(o)):P.push({title:"There was a problem submitting your request.",status:"error"})}).finally(()=>{D(!1)})},j[7]=R,j[8]=M,j[9]=S,j[10]=T,j[11]=H,j[12]=_,j[13]=P,j[14]=i):i=j[14];let N=i,U=E.fullscreen;j[15]!==C?(s=C("request-permission-dialog.header.text"),j[15]=C,j[16]=s):s=j[16],j[17]!==C?(a=C("confirm-dialog.cancel-button.fallback-text"),j[17]=C,j[18]=a):a=j[18],j[19]!==w||j[20]!==a?(u={onClick:w,text:a},j[19]=w,j[20]=a,j[21]=u):u=j[21];let G=V||O;return j[22]!==C?(d=C("request-permission-dialog.confirm-button.text"),j[22]=C,j[23]=d):d=j[23],j[24]!==k||j[25]!==N||j[26]!==G||j[27]!==d?(c={onClick:N,loading:k,disabled:G,text:d,tone:"primary",type:"submit"},j[24]=k,j[25]=N,j[26]=G,j[27]=d,j[28]=c):c=j[28],j[29]!==c||j[30]!==u?(p={cancelButton:u,confirmButton:c},j[29]=c,j[30]=u,j[31]=p):p=j[31],j[32]!==C?(m=C("request-permission-dialog.description.text"),j[32]=C,j[33]=m):m=j[33],j[34]!==m?(h=(0,l.jsx)(eg.Text,{children:m}),j[34]=m,j[35]=h):h=j[35],j[36]!==O||j[37]!==V||j[38]!==k||j[39]!==A||j[40]!==M||j[41]!==N||j[42]!==C?(g=V||O?(0,l.jsx)(eg.Card,{tone:"caution",padding:3,radius:2,shadow:1,children:(0,l.jsxs)(eg.Text,{size:1,children:[V&&(0,l.jsx)(l.Fragment,{children:null!=A?A:C("request-permission-dialog.warning.limit-reached.text")}),O&&(0,l.jsx)(l.Fragment,{children:null!=A?A:C("request-permission-dialog.warning.denied.text")})]})}):(0,l.jsxs)(eg.Stack,{space:3,paddingBottom:0,children:[(0,l.jsx)(eg.TextInput,{placeholder:C("request-permission-dialog.note-input.placeholder.text"),disabled:k,onKeyDown:e=>{"Enter"===e.key&&N()},maxLength:150,value:M,onChange:e=>{F(e.currentTarget.value)}}),(0,l.jsx)(eg.Text,{align:"right",muted:!0,size:1,children:"".concat(M.length,"/").concat(150)})]}),j[36]=O,j[37]=V,j[38]=k,j[39]=A,j[40]=M,j[41]=N,j[42]=C,j[43]=g):g=j[43],j[44]!==h||j[45]!==g?(v=(0,l.jsx)(l1,{children:(0,l.jsxs)(eg.Stack,{space:4,children:[h,g]})}),j[44]=h,j[45]=g,j[46]=v):v=j[46],j[47]!==I||j[48]!==w||j[49]!==p||j[50]!==v||j[51]!==s?(x=(0,l.jsx)(f.Dialog,{width:1,id:I,header:s,footer:p,onClose:w,onClickOutside:w,children:v}),j[47]=I,j[48]=w,j[49]=p,j[50]=v,j[51]=s,j[52]=x):x=j[52],j[53]!==x||j[54]!==E.fullscreen?(y=(0,l.jsx)(ef.DialogProvider,{position:"fixed",zOffset:U,children:x}),j[53]=x,j[54]=E.fullscreen,j[55]=y):y=j[55],y}function l3(e){return"editor"===e.name}function l4(e){return null==e?void 0:e.appliesToUsers}(0,eb.styled)(eg.Flex).attrs({align:"center",direction:"column",justify:"center"})(n_());let l5={loading:!0,error:!1,status:void 0},l6={loading:!1,error:!1,status:"none"},l8={loading:!1,error:!1,status:"declined"},l7={loading:!1,error:!1,status:"pending"},l9={loading:!1,error:!1,status:"expired"};function oe(e){let t,n,i,s,a,u,c,p,m=(0,eh.c)(29),{requiredPermission:h}=e,g=(0,r.useCurrentUser)(),{data:f,loading:v,error:x}=(()=>{let e,t,n,i=(0,eh.c)(9);i[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:"2024-07-01"},i[0]=e):e=i[0];let l=(0,r.useClient)(e),o=(0,r.useProjectId)();e:{var s,a;let e;if(!l||!o){let e;i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,eq.of)(l6),i[1]=e):e=i[1],t=e;break e}i[2]!==l||i[3]!==o?(s=l,a=o,e=s.observable.request({url:"/access/requests/me",tag:"use-role-requests-status"}).pipe((0,eE.map)(e=>{if(!e||0===e.length)return l6;let t=e.filter(e=>e.resourceId===a&&"role"===e.type),n=t.find(e=>"declined"===e.status);return n&&(0,tv.isAfter)((0,tx.addWeeks)(new Date(n.createdAt),2),new Date)?l8:t.find(e=>"pending"===e.status&&(0,tv.isAfter)((0,tx.addWeeks)(new Date(e.createdAt),2),new Date))?l7:t.find(e=>"pending"===e.status&&(0,tb.isBefore)((0,tx.addWeeks)(new Date(e.createdAt),2),new Date))?l9:l6}),(0,ek.catchError)(e=>(console.error("Failed to fetch access requests",e),(0,eq.of)({loading:!1,error:!0,status:void 0}))),(0,eD.startWith)(l5)),i[2]=l,i[3]=o,i[4]=e):e=i[4],t=e}let u=t,{loading:d,error:c,status:p}=(0,eS.useObservable)(u,l5);return i[5]!==c||i[6]!==d||i[7]!==p?(n={data:p,loading:d,error:c},i[5]=c,i[6]=d,i[7]=p,i[8]=n):n=i[8],n})(),[y,j]=(0,o.useState)(!1),w="pending"===f||"declined"===f||y,S=(null==g?void 0:g.roles)||[],C=1===S.length&&"viewer"===S[0].name,[_,I]=(0,o.useState)(!1);m[0]===Symbol.for("react.memo_cache_sentinel")?(t={style:"short"},m[0]=t):t=m[0];let T=(0,r.useListFormat)(t),{t:R}=(0,r.useTranslation)(b),P=(0,tn.useTelemetry)(),E=S.map(on),k=T.formatToParts(E).map(ot);return m[1]!==k?(n={Roles:()=>(0,l.jsx)(l.Fragment,{children:k})},m[1]=k,m[2]=n):n=m[2],m[3]!==E||m[4]!==k.length?(i={count:k.length,roles:E},m[3]=E,m[4]=k.length,m[5]=i):i=m[5],m[6]!==h||m[7]!==R||m[8]!==n||m[9]!==i?(s=(0,l.jsx)(eg.Text,{size:1,weight:"medium",children:(0,l.jsx)(r.Translate,{t:R,i18nKey:"banners.permission-check-banner.missing-permission",components:n,values:i,context:h})}),m[6]=h,m[7]=R,m[8]=n,m[9]=i,m[10]=s):s=m[10],m[11]!==C||m[12]!==w||m[13]!==x||m[14]!==v||m[15]!==f||m[16]!==I||m[17]!==R||m[18]!==P?(a=C&&f&&!x&&!v?{onClick:w?void 0:()=>{I(!0),P.log(lZ)},text:R(w?"banners.permission-check-banner.request-permission-button.sent":"banners.permission-check-banner.request-permission-button.text"),tone:w?"default":"primary",disabled:w,mode:w?"bleed":void 0}:void 0,m[11]=C,m[12]=w,m[13]=x,m[14]=v,m[15]=f,m[16]=I,m[17]=R,m[18]=P,m[19]=a):a=m[19],m[20]!==s||m[21]!==a?(u=(0,l.jsx)(lY,{content:s,action:a,"data-testid":"permission-check-banner",icon:d.ReadOnlyIcon}),m[20]=s,m[21]=a,m[22]=u):u=m[22],m[23]!==I||m[24]!==_?(c=_&&(0,l.jsx)(l2,{onClose:()=>I(!1),onRequestSubmitted:()=>{j(!0),I(!1)}}),m[23]=I,m[24]=_,m[25]=c):c=m[25],m[26]!==u||m[27]!==c?(p=(0,l.jsxs)(l.Fragment,{children:[u,c]}),m[26]=u,m[27]=c,m[28]=p):p=m[28],p}function ot(e){return"element"===e.type?(0,l.jsx)("code",{children:e.value},e.value):e.value}function on(e){return e.title}let oi=(0,o.memo)(()=>{var e,t,n,i,a,u,c,p;let m=(0,r.useDocumentPreviewStore)(),{selectedReleaseId:h}=(0,r.usePerspective)(),{params:g,groupIndex:f,routerPanesState:v,replaceCurrent:x,BackLink:y}=lj(),j=null==(e=v[f])?void 0:e[0].id,w=null==(t=v[f-1])?void 0:t[0],S=null==w?void 0:w.id,C=!!(null==w||null==(n=w.params)?void 0:n.rev),_=(0,o.useMemo)(()=>(null==g?void 0:g.parentRefPath)&&(0,e7.fromString)(g.parentRefPath)||null,[null==g?void 0:g.parentRefPath]),{t:I}=(0,r.useTranslation)(b),T=(0,o.useMemo)(()=>{let e=null==_?void 0:_[0];if(!S||!e||!_)return(0,eq.of)({loading:!1});let t=(0,s.getPublishedId)(S),n=(0,e7.fromString)(e),i=n.findIndex(e=>"object"==typeof e&&"_key"in e);return(0,eY.concat)((0,eq.of)({loading:!0}),m.unstable_observePathsDocumentPair(t,-1===i?n:n.slice(0,i),{version:h}).pipe((0,eM.debounceTime)(750),(0,eE.map)(e=>{var t;let{draft:n,published:i,version:l}=e;return{loading:!1,result:{availability:{draft:n.availability,published:i.availability,...(null==l?void 0:l.availability)?{version:l.availability}:{}},refValue:null==(t=(0,e7.get)((null==l?void 0:l.snapshot)||n.snapshot||i.snapshot,_))?void 0:t._ref}}})))},[h,m,S,_]),R=(0,eS.useObservable)(T,{loading:!0}),P=(0,o.useCallback)(()=>{var e;R.loading||(null==(e=R.result)?void 0:e.refValue)&&x({id:R.result.refValue,params:g})},[R.loading,R.result,x,g]);return S&&_&&!C&&!R.loading&&((null==(i=R.result)?void 0:i.availability.draft.available)||(null==(a=R.result)?void 0:a.availability.published.available))&&(null==(u=R.result)?void 0:u.refValue)!==j?(0,l.jsx)(lY,{action:(null==(c=R.result)?void 0:c.refValue)?{onClick:P,icon:d.SyncIcon,text:I("banners.reference-changed-banner.reason-changed.reload-button.text")}:{as:y,icon:d.CloseIcon,text:I("banners.reference-changed-banner.reason-removed.close-button.text")},"data-testid":"reference-changed-banner",content:(0,l.jsx)(eg.Text,{size:1,weight:"medium",children:I((null==(p=R.result)?void 0:p.refValue)?"banners.reference-changed-banner.reason-changed.text":"banners.reference-changed-banner.reason-removed.text")}),icon:d.WarningOutlineIcon,tone:"caution"}):null});function ol(){let e,t=(0,eh.c)(2),{t:n}=(0,r.useTranslation)(b);return t[0]!==n?(e=(0,l.jsx)(lY,{tone:"caution",icon:d.WarningOutlineIcon,content:(0,l.jsx)(eg.Text,{size:1,children:(0,l.jsx)(r.Translate,{t:n,i18nKey:"banners.scheduled-draft-override-banner.text"})})}),t[0]=n,t[1]=e):e=t[1],e}function oo(){let{t:e}=(0,r.useTranslation)(b),{t:t}=(0,r.useTranslation)(),{data:n}=(0,r.useArchivedReleases)(),{params:i,setParams:s}=lj(),a=(0,o.useMemo)(()=>n.find(e=>(0,r.getReleaseIdFromReleaseDocumentId)(e._id)===(null==i?void 0:i.historyVersion)),[n,null==i?void 0:i.historyVersion]),u=(0,o.useMemo)(()=>(null==a?void 0:a.state)==="published"?"banners.published-release.description":a&&(0,r.isCardinalityOneRelease)(a)?"banners.archived-scheduled-draft.description":"banners.archived-release.description",[a]),d=(null==a?void 0:a.metadata.title)||t("release.placeholder-untitled-release");return(0,l.jsx)(lY,{tone:"caution",content:(0,l.jsx)(eg.Text,{size:1,children:(0,l.jsx)(r.Translate,{t:e,i18nKey:u,values:{title:d},components:{VersionBadge:(0,r.getVersionInlineBadge)(a)}})}),action:(null==i?void 0:i.archivedRelease)?void 0:{text:"Go back to published version",onClick:()=>{s({...i,rev:(null==i?void 0:i.historyEvent)||void 0,since:void 0,historyVersion:void 0})}}})}oi.displayName="Memo(ReferenceChangedBanner)";let or=eb.styled.img(nI()),os=e=>{let t,n,i,s,a,u,c,p,m,h,g,v,x=(0,eh.c)(22),{onClose:y}=e,{t:j}=(0,r.useTranslation)(b),w=(0,o.useRef)(null);return x[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>[w.current],x[0]=t):t=x[0],(0,eg.useClickOutsideEvent)(y,t),x[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsx)(or,{src:"https://cdn.sanity.io/images/pyrmmpch/production/b47224e2f3a7d1747e43b9da1ac31739250e628b-632x376.png",alt:"Canvas"}),x[1]=n):n=x[1],x[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,l.jsx)(eg.Text,{size:1,weight:"semibold",children:"Canvas"}),x[2]=i):i=x[2],x[3]===Symbol.for("react.memo_cache_sentinel")?(s=(0,l.jsxs)(eg.Flex,{paddingY:1,gap:2,children:[i,(0,l.jsx)(eg.Text,{size:1,muted:!0,children:(0,l.jsx)(d.ComposeSparklesIcon,{})})]}),x[3]=s):s=x[3],x[4]!==j?(a=j("canvas.banner.popover-heading"),x[4]=j,x[5]=a):a=x[5],x[6]!==a?(u=(0,l.jsx)(eg.Box,{paddingTop:3,children:(0,l.jsx)(eg.Heading,{size:1,children:a})}),x[6]=a,x[7]=u):u=x[7],x[8]!==j?(c=j("canvas.banner.popover-description"),x[8]=j,x[9]=c):c=x[9],x[10]!==c?(p=(0,l.jsx)(eg.Box,{paddingTop:4,children:(0,l.jsx)(eg.Text,{size:1,children:c})}),x[10]=c,x[11]=p):p=x[11],x[12]!==u||x[13]!==p?(m=(0,l.jsxs)(eg.Flex,{paddingX:4,paddingBottom:4,paddingTop:3,direction:"column",children:[s,u,p]}),x[12]=u,x[13]=p,x[14]=m):m=x[14],x[15]!==j?(h=j("canvas.banner.popover-button-text"),x[15]=j,x[16]=h):h=x[16],x[17]!==h?(g=(0,l.jsx)(eg.Flex,{width:"full",gap:3,justify:"flex-end",paddingX:4,paddingBottom:4,children:(0,l.jsx)(f.Button,{mode:"bleed",text:h,autoFocus:!0,tone:"primary",href:"https://snty.link/canvas-docs",target:"_blank",rel:"noopener noreferrer",as:"a",iconRight:d.LaunchIcon})}),x[17]=h,x[18]=g):g=x[18],x[19]!==g||x[20]!==m?(v=(0,l.jsx)(eg.Card,{radius:3,overflow:"hidden",width:0,ref:w,children:(0,l.jsxs)(eg.Container,{width:0,children:[n,m,g]})}),x[19]=g,x[20]=m,x[21]=v):v=x[21],v},oa=e=>{let t,n,i,s,a,u,c,p,m=(0,eh.c)(17),{documentId:h}=e,{t:g}=(0,r.useTranslation)(b),[v,x]=(0,o.useState)(!1),y=(0,r.getDocumentVariantType)(h);e:{let e;if("published"===y){let e;m[0]!==g?(e=g("canvas.banner.linked-text.published"),m[0]=g,m[1]=e):e=m[1],t=e;break e}if("draft"===y){let e;m[2]!==g?(e=g("canvas.banner.linked-text.draft"),m[2]=g,m[3]=e):e=m[3],t=e;break e}m[4]!==g?(e=g("canvas.banner.linked-text.version"),m[4]=g,m[5]=e):e=m[5],t=e}let j=t;m[6]===Symbol.for("react.memo_cache_sentinel")?(n=()=>x(od),m[6]=n):n=m[6];let w=n;m[7]===Symbol.for("react.memo_cache_sentinel")?(i=()=>x(!1),m[7]=i):i=m[7];let S=i;return m[8]!==j?(s=(0,l.jsx)(eg.Text,{size:1,weight:"medium",children:j}),m[8]=j,m[9]=s):s=m[9],m[10]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsx)(os,{onClose:S}),u=(0,l.jsx)(f.Button,{tooltipProps:null,mode:"bleed",tone:"default",icon:d.InfoOutlineIcon,onClick:w}),m[10]=a,m[11]=u):(a=m[10],u=m[11]),m[12]!==v?(c=(0,l.jsx)(f.Popover,{open:v,size:0,tone:"default",portal:!0,placement:"bottom-start",content:a,children:u}),m[12]=v,m[13]=c):c=m[13],m[14]!==s||m[15]!==c?(p=(0,l.jsxs)(eg.Flex,{align:"center",gap:2,children:[s,c]}),m[14]=s,m[15]=c,m[16]=p):p=m[16],p};function ou(){let e,t,n,i,o=(0,eh.c)(10),{documentId:s,displayed:a}=lx(),{t:u}=(0,r.useTranslation)(b),d=(null==a?void 0:a._id)||s,{companionDoc:c}=(0,r.useCanvasCompanionDoc)(d),p=(0,r.useNavigateToCanvasDoc)(null==c?void 0:c.canvasDocumentId,"banner");return c?(o[0]!==d?(e=(0,l.jsx)(oa,{documentId:d}),o[0]=d,o[1]=e):e=o[1],o[2]!==u?(t=u("canvas.banner.edit-in-canvas-action"),o[2]=u,o[3]=t):t=o[3],o[4]!==p||o[5]!==t?(n={mode:"ghost",text:t,onClick:p},o[4]=p,o[5]=t,o[6]=n):n=o[6],o[7]!==e||o[8]!==n?(i=(0,l.jsx)(lY,{tone:"neutral","data-test-id":"canvas-linked-banner",paddingY:0,content:e,action:n}),o[7]=e,o[8]=n,o[9]=i):i=o[9],i):null}function od(e){return!e}let oc=e=>{let t,n,i,o,s,a,u,c,p,m=(0,eh.c)(27),{schemaType:h,selectedPerspective:g,reason:f}=e,{t:v}=(0,r.useTranslation)(b),{document:x}=(0,r.useWorkspace)(),{drafts:y}=x,{enabled:j}=y;m[0]!==j||m[1]!==h?(t=e=>{let{perspective:t}=e;return{disabled:!(0,r.isPerspectiveWriteable)({selectedPerspective:t,isDraftModelEnabled:j,schemaType:h}).result}},m[0]=j,m[1]=h,m[2]=t):t=m[2];let w=t;return m[3]!==f||m[4]!==v?(n="PUBLISHED_NOT_WRITEABLE"===f&&v("banners.choose-new-document-destination.cannot-create-published-document"),m[3]=f,m[4]=v,m[5]=n):n=m[5],m[6]!==f||m[7]!==v?(i="DRAFTS_NOT_WRITEABLE"===f&&v("banners.choose-new-document-destination.cannot-create-draft-document"),m[6]=f,m[7]=v,m[8]=i):i=m[8],m[9]!==f||m[10]!==g||m[11]!==v?(o="RELEASE_NOT_ACTIVE"===f&&(0,r.isReleaseDocument)(g)&&(0,l.jsx)(r.Translate,{t:v,i18nKey:"banners.choose-new-document-destination.release-inactive",values:{title:g.metadata.title},components:{VersionBadge:(0,r.getVersionInlineBadge)(g)}}),m[9]=f,m[10]=g,m[11]=v,m[12]=o):o=m[12],m[13]!==v?(s=v("banners.choose-new-document-destination.choose-destination"),m[13]=v,m[14]=s):s=m[14],m[15]!==s?(a=(0,l.jsxs)(l.Fragment,{children:[" ",s]}),m[15]=s,m[16]=a):a=m[16],m[17]!==n||m[18]!==i||m[19]!==o||m[20]!==a?(u=(0,l.jsxs)(eg.Text,{size:1,children:[n,i,o,a]}),m[17]=n,m[18]=i,m[19]=o,m[20]=a,m[21]=u):u=m[21],m[22]!==w?(c=(0,l.jsx)(r.ReleasesNav,{menuItemProps:w}),m[22]=w,m[23]=c):c=m[23],m[24]!==c||m[25]!==u?(p=(0,l.jsx)(lY,{tone:"caution",icon:d.WarningOutlineIcon,content:(0,l.jsxs)(eg.Flex,{align:"center",gap:2,children:[u,c]})}),m[24]=c,m[25]=u,m[26]=p):p=m[26],p};function op(){var e;let t,n,i=(0,eh.c)(5),{value:o}=lx(),{documentLinkedBannerContent:s}=null!=(e=(0,r.useSanityCreateConfig)().components)?e:{};i[0]!==o?(t=(0,r.getSanityCreateLinkMetadata)(o),i[0]=o,i[1]=t):t=i[1];let a=t;return s&&a?(i[2]!==s||i[3]!==a?(n=(0,l.jsx)(lY,{tone:"transparent","data-test-id":"sanity-create-read-only-banner",content:(0,l.jsx)(s,{metadata:a})}),i[2]=s,i[3]=a,i[4]=n):n=i[4],n):null}function om(e){var t;let{documentId:n,currentRelease:i,isScheduledRelease:s}=e,a=(0,r.getReleaseTone)(null!=i?i:r.LATEST),{t:u}=(0,r.useTranslation)(b),{t:d}=(0,r.useTranslation)(),{createVersion:c}=(0,r.useVersionOperations)(),[p,m]=(0,o.useState)(),h=(0,ef.useToast)(),g=(0,o.useCallback)(async()=>{if(i._id){m({status:"creating",lastUpdate:new Date});try{await c((0,r.getReleaseIdFromReleaseDocumentId)(i._id),n),m({status:"created",lastUpdate:new Date})}catch(e){h.push({status:"error",closable:!0,title:u("banners.release.error.title"),description:u("banners.release.error.description",{message:e.message})}),m(void 0)}}},[c,i._id,n,u,h]),f=function(e){let t,n,i,l=(0,eh.c)(4);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=new Date,l[0]=t):t=l[0];let[r,s]=(0,o.useState)(t);return 200!==l[1]?(n=()=>{let t=setInterval(()=>{s(new Date)},e);return()=>clearInterval(t)},i=[e],l[1]=e,l[2]=n,l[3]=i):(n=l[2],i=l[3]),(0,o.useEffect)(n,i),r}(200);return(0,r.useConditionalToast)({status:"info",id:"add-document-to-release",enabled:(null==p?void 0:p.status)==="created"&&f.getTime()-p.lastUpdate.getTime()>1e3,closable:!0,title:u("banners.release.waiting.title"),description:u("banners.release.waiting.description")}),(0,l.jsx)(lY,{tone:a,content:(0,l.jsx)(eg.Text,{size:1,children:(0,l.jsx)(r.Translate,{i18nKey:"banners.release.not-in-release",t:u,values:{title:(null==i||null==(t=i.metadata)?void 0:t.title)||d("release.placeholder-untitled-release")},components:{VersionBadge:(0,r.getVersionInlineBadge)(i)}})}),action:s?void 0:{text:u("banners.release.action.add-to-release"),tone:a,disabled:!!p,onClick:g,mode:"default"}})}let oh=(0,to.defineEvent)({name:"LiveEdit Draft Resolved",version:1,description:"User resolved a draft of a live edit document to continue editing"}),og=e=>{let t,n,i,a,u,c,p,m,h,g,v,x,y,j,w,S=(0,eh.c)(47),{displayed:C,documentId:_,schemaType:I,i18nKey:T,isEditBlocking:R}=e,{t:P}=(0,r.useTranslation)(b),[E,k]=(0,o.useState)(!1),[D,M]=(0,o.useState)(!1),F=(0,tn.useTelemetry)(),{publish:A,discardChanges:L}=(0,r.useDocumentOperation)(_,(null==C?void 0:C._type)||"");S[0]!==A||S[1]!==F?(t=()=>{A.execute(),k(!0),F.log(oh,{liveEditResolveType:"publish"})},S[0]=A,S[1]=F,S[2]=t):t=S[2];let V=t;S[3]!==L||S[4]!==F?(n=()=>{L.execute(),M(!0),F.log(oh,{liveEditResolveType:"discard"})},S[3]=L,S[4]=F,S[5]=n):n=S[5];let z=n;S[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>()=>{k(!1),M(!1)},S[6]=i):i=S[6],(0,o.useEffect)(i);let O=ix();S[7]!==O||S[8]!==(null==C?void 0:C._id)||S[9]!==I.name?(a=()=>{typeof(null==C?void 0:C._id)>"u"||O.navigateDiffView({mode:"version",previousDocument:{type:I.name,id:(0,s.getPublishedId)(null==C?void 0:C._id)},nextDocument:{type:I.name,id:(0,s.getDraftId)(null==C?void 0:C._id)}})},S[7]=O,S[8]=null==C?void 0:C._id,S[9]=I.name,S[10]=a):a=S[10];let B=a;return S[11]!==I.title?(u={schemaType:I.title},S[11]=I.title,S[12]=u):u=S[12],S[13]!==T||S[14]!==P||S[15]!==u?(c=(0,l.jsx)(eg.Text,{size:1,weight:"medium",children:(0,l.jsx)(r.Translate,{t:P,i18nKey:T,values:u})}),S[13]=T,S[14]=P,S[15]=u,S[16]=c):c=S[16],S[17]!==P?(p=P("banners.obsolete-draft.actions.compare-draft.text"),S[17]=P,S[18]=p):p=S[18],S[19]!==B||S[20]!==p?(m=(0,l.jsx)(f.Button,{text:p,mode:"ghost",onClick:B}),S[19]=B,S[20]=p,S[21]=m):m=S[21],S[22]!==P?(h=P("banners.obsolete-draft.actions.publish-draft.text"),S[22]=P,S[23]=h):h=S[23],S[24]!==R||S[25]!==P?(g=R?{content:P("banners.live-edit-draft-banner.publish.tooltip")}:{},S[24]=R,S[25]=P,S[26]=g):g=S[26],S[27]!==V||S[28]!==E||S[29]!==g||S[30]!==h?(v=(0,l.jsx)(f.Button,{onClick:V,text:h,tooltipProps:g,loading:E,tone:"positive"}),S[27]=V,S[28]=E,S[29]=g,S[30]=h,S[31]=v):v=S[31],S[32]!==P?(x=P("banners.obsolete-draft.actions.discard-draft.text"),S[32]=P,S[33]=x):x=S[33],S[34]!==R||S[35]!==P?(y=R?{content:P("banners.live-edit-draft-banner.discard.tooltip")}:{},S[34]=R,S[35]=P,S[36]=y):y=S[36],S[37]!==z||S[38]!==D||S[39]!==x||S[40]!==y?(j=(0,l.jsx)(f.Button,{onClick:z,text:x,tooltipProps:y,loading:D,tone:"caution"}),S[37]=z,S[38]=D,S[39]=x,S[40]=y,S[41]=j):j=S[41],S[42]!==v||S[43]!==j||S[44]!==c||S[45]!==m?(w=(0,l.jsx)(lY,{content:(0,l.jsxs)(eg.Flex,{align:"center",justify:"space-between",gap:2,children:[c,m,v,j]}),"data-testid":"live-edit-type-banner",icon:d.ErrorOutlineIcon}),S[42]=v,S[43]=j,S[44]=c,S[45]=m,S[46]=w):w=S[46],w};function of(e){let t,n,i=(0,eh.c)(4),{documentId:o,isPinnedDraftOrPublished:a}=e;i[0]!==o?(t={documentId:o},i[0]=o,i[1]=t):t=i[1];let u=(0,r.useOnlyHasVersions)(t);return(0,s.isVersionId)(o)&&u&&a?(i[2]!==o?(n=(0,l.jsx)(ov,{documentId:o}),i[2]=o,i[3]=n):n=i[3],n):null}function ov(e){var t;let{documentId:n}=e,{data:i}=(0,r.useActiveReleases)(),a=(0,r.useSetPerspective)(),u=null!=(t=(0,s.getVersionFromId)(n))?t:"",d=(0,o.useMemo)(()=>i.find(e=>e._id.includes(u)),[i,u]),{t:c}=(0,r.useTranslation)(),{data:p}=(0,r.useDocumentVersions)({documentId:n}),m=(0,o.useMemo)(()=>i.filter(e=>p.find(t=>{var n;let i=null!=(n=(0,s.getVersionFromId)(t))?n:"";return(0,r.getReleaseIdFromReleaseDocumentId)(e._id)===i})).map(e=>e.metadata.title||c("release.placeholder-untitled-release")),[i,p,c]),h=d&&(0,r.getReleaseTone)(d),{t:g}=(0,r.useTranslation)(b),f=(0,o.useCallback)(async()=>{a(u)},[u,a]);return(0,l.jsx)(lY,{tone:h,"data-testid":"open-release-to-edit-banner",content:(0,l.jsx)(eg.Text,{size:1,children:(0,l.jsx)(eg.Flex,{direction:"row",gap:1,wrap:"wrap",children:m.length>1?(0,l.jsx)(r.Translate,{t:g,i18nKey:"banners.release.navigate-to-edit-description-multiple",components:{VersionBadge:()=>(0,l.jsxs)(r.VersionInlineBadge,{children:[" ",m[0]]})},values:{count:m.length-1}}):(0,l.jsx)(r.Translate,{t:g,i18nKey:"banners.release.navigate-to-edit-description-single",components:{VersionBadge:()=>(0,l.jsxs)(r.VersionInlineBadge,{children:[" ",m[0]]})}})})}),action:{text:g("banners.release.action.open-to-edit"),tone:h,onClick:f,mode:"default"}})}function ox(){let e,t,n=(0,eh.c)(4),{revisionNotFound:i}=lx(),{t:o}=(0,r.useTranslation)(b);return i?(n[0]!==o?(e=o("banners.revision-not-found.description"),n[0]=o,n[1]=e):e=n[1],n[2]!==e?(t=(0,l.jsx)(lY,{tone:"caution","data-test-id":"revision-not-found-banner",icon:d.WarningOutlineIcon,content:(0,l.jsx)(eg.Text,{size:1,children:e})}),n[2]=e,n[3]=t):t=n[3],t):null}function ob(e){let t,n,i,o,s,a=(0,eh.c)(12),{currentRelease:u}=e,c=null!=u?u:r.LATEST;a[0]!==c?(t=(0,r.getReleaseTone)(c),a[0]=c,a[1]=t):t=a[1];let p=t,{t:m}=(0,r.useTranslation)();return a[2]!==u?(n=(0,r.formatRelativeLocalePublishDate)(u),a[2]=u,a[3]=n):n=a[3],a[4]!==n?(i={date:n},a[4]=n,a[5]=i):i=a[5],a[6]!==i||a[7]!==m?(o=(0,l.jsx)(eg.Text,{size:1,children:(0,l.jsx)(r.Translate,{t:m,i18nKey:"release.banner.scheduled-for-publishing-on",values:i})}),a[6]=i,a[7]=m,a[8]=o):o=a[8],a[9]!==o||a[10]!==p?(s=(0,l.jsx)(lY,{tone:p,icon:d.LockIcon,content:o}),a[9]=o,a[10]=p,a[11]=s):s=a[11],s}function oy(){let e=(0,eh.c)(18),{value:t,editState:n}=lx(),{selectedPerspective:i}=(0,r.usePerspective)(),o=(0,r.isGoingToUnpublish)(t)||(null==n?void 0:n.version)&&(0,r.isGoingToUnpublish)(null==n?void 0:n.version),{t:s}=(0,r.useTranslation)(b),{t:a}=(0,r.useTranslation)();if((0,r.isReleaseDocument)(i)&&o){var u,c,p;let t,n,o,m,h,g,f;e[0]!==(null==(u=i.metadata)?void 0:u.title)||e[1]!==a?(t=(null==(c=i.metadata)?void 0:c.title)||a("release.placeholder-untitled-release"),e[0]=null==(p=i.metadata)?void 0:p.title,e[1]=a,e[2]=t):t=e[2];let v=t;return e[3]!==v?(n={title:v},e[3]=v,e[4]=n):n=e[4],e[5]!==i?(o=(0,r.getVersionInlineBadge)(i),e[5]=i,e[6]=o):o=e[6],e[7]!==o?(m={VersionBadge:o},e[7]=o,e[8]=m):m=e[8],e[9]!==s||e[10]!==n||e[11]!==m?(h=(0,l.jsx)(eg.Text,{size:1,children:(0,l.jsx)(r.Translate,{t:s,i18nKey:"banners.unpublished-release-banner.text",values:n,components:m})}),e[9]=s,e[10]=n,e[11]=m,e[12]=h):h=e[12],e[13]!==s?(g=(0,l.jsx)(eg.Text,{size:1,children:(0,l.jsx)(r.Translate,{t:s,i18nKey:"banners.unpublished-release-banner.text-with-published"})}),e[13]=s,e[14]=g):g=e[14],e[15]!==h||e[16]!==g?(f=(0,l.jsx)(lY,{tone:"critical",content:(0,l.jsxs)(eg.Stack,{space:2,children:[h,g]}),icon:d.UnpublishIcon}),e[15]=h,e[16]=g,e[17]=f):f=e[17],f}return null}let oj=(0,eb.styled)(eg.Stack)(nR(),e=>{let{theme:t}=e;return(0,eb.css)(nT(),t.sanity.fonts.heading.sizes[4].fontSize,t.sanity.fonts.heading.sizes[4].lineHeight,t.sanity.fonts.heading.sizes[3].fontSize,t.sanity.fonts.heading.sizes[3].lineHeight,t.sanity.fonts.heading.sizes[2].fontSize,t.sanity.fonts.heading.sizes[2].lineHeight)}),ow=e=>{var t;let n,i,o,s,a=(0,eh.c)(14),{documentId:u,schemaType:c,title:p}=e,m=u===c.name,h=c.description,{t:g}=(0,r.useTranslation)(b);if(!1===c.__experimental_formPreviewTitle)return null;a[0]!==h||a[1]!==m||a[2]!==c.name||a[3]!==c.title?(n=!m&&(0,l.jsxs)(eg.Inline,{space:1,children:[(0,l.jsx)(eg.Text,{muted:!0,size:1,children:null!=(t=c.title)?t:c.name}),h&&(0,l.jsx)(f.Tooltip,{content:h,placement:"right",children:(0,l.jsx)(d.InfoOutlineIcon,{"data-testid":"schema-description-icon"})})]}),a[0]=h,a[1]=m,a[2]=c.name,a[3]=c.title,a[4]=n):n=a[4];let v=!p;return a[5]!==g||a[6]!==p?(i=null!=p?p:g("document-view.form-view.form-title-fallback"),a[5]=g,a[6]=p,a[7]=i):i=a[7],a[8]!==v||a[9]!==i?(o=(0,l.jsx)(eg.Heading,{as:"h2","data-heading":!0,muted:v,"data-testid":"document-panel-document-title",children:i}),a[8]=v,a[9]=i,a[10]=o):o=a[10],a[11]!==n||a[12]!==o?(s=(0,l.jsxs)(oj,{marginBottom:6,space:4,children:[n,o]}),a[11]=n,a[12]=o,a[13]=s):s=a[13],s},oS=e=>e.preventDefault(),oC=(0,o.forwardRef)(function(e,t){var n;let i,s,a,u,d,c,p,m,h,g,f,v,x,y,j,w=(0,eh.c)(76),{hidden:S,margins:C}=e,{collapsedFieldSets:_,collapsedPaths:I,displayed:T,editState:R,documentId:P,documentType:E,fieldActions:k,onChange:D,validation:M,ready:F,formState:A,onFocus:L,connectionState:V,onBlur:z,onSetCollapsedPath:O,onPathOpen:B,onSetCollapsedFieldSet:H,onSetActiveFieldGroup:N,openPath:U,compareValue:G}=lx(),{selectedReleaseId:W,selectedPerspective:q}=(0,r.usePerspective)(),K=(0,r.useDocumentStore)(),Y=(0,r.useDocumentPresence)(P),{title:X}=lE(),[Q]=(0,o.useState)(o_),$=null==R||null==(n=R.transactionSyncLock)?void 0:n.enabled,{t:J}=(0,r.useTranslation)(b);w[0]!==J?(i=J("document-view.form-view.sync-lock-toast.title"),w[0]=J,w[1]=i):i=w[1],w[2]!==J?(s=J("document-view.form-view.sync-lock-toast.description"),w[2]=J,w[3]=s):s=w[3],w[4]!==$||w[5]!==i||w[6]!==s?(a={id:"sync-lock",status:"warning",enabled:$,title:i,description:s,closable:!0},w[4]=$,w[5]=i,w[6]=s,w[7]=a):a=w[7],(0,r.useConditionalToast)(a),w[8]!==P||w[9]!==K.pair||w[10]!==E||w[11]!==Q||w[12]!==W?(u=()=>{let e=K.pair.documentEvents(P,E,W).pipe((0,eF.tap)(e=>{"mutation"===e.type&&Q.publish(function(e){let t=e.mutations.map(e=>e.patch).filter(Boolean);return{type:"mutation",snapshot:e.document,patches:(0,r.fromMutationPatches)(e.origin,t)}}(e)),"rebase"===e.type&&Q.publish(function(e){let t=e.remoteMutations.map(e=>e.patch).filter(Boolean),n=e.localMutations.map(e=>e.patch).filter(Boolean);return{type:"rebase",snapshot:e.document,patches:(0,r.fromMutationPatches)("remote",t).concat((0,r.fromMutationPatches)("local",n))}}(e))})).subscribe();return()=>{e.unsubscribe()}},w[8]=P,w[9]=K.pair,w[10]=E,w[11]=Q,w[12]=W,w[13]=u):u=w[13],w[14]!==P||w[15]!==K||w[16]!==E||w[17]!==Q||w[18]!==W?(d=[P,K,E,Q,W],w[14]=P,w[15]=K,w[16]=E,w[17]=Q,w[18]=W,w[19]=d):d=w[19],(0,o.useEffect)(u,d);let Z=!!(null==T?void 0:T._rev);w[20]!==Q||w[21]!==T?(c=()=>{Q.publish({type:"mutation",patches:[],snapshot:T})},w[20]=Q,w[21]=T,w[22]=c):c=w[22];let ee=(0,tj.useEffectEvent)(c);w[23]!==ee||w[24]!==Z?(p=()=>{Z&&ee()},w[23]=ee,w[24]=Z,w[25]=p):p=w[25],w[26]!==Z?(m=[Z],w[26]=Z,w[27]=m):m=w[27],(0,o.useEffect)(p,m);let[et,en]=(0,o.useState)(null),[ei,el]=(0,o.useState)(!1);w[28]!==ei||w[29]!==et||w[30]!==(null==A?void 0:A.focusPath.length)||w[31]!==F?(h=()=>{ei||!F||(null==A?void 0:A.focusPath.length)||!et||(el(!0),(0,ef.focusFirstDescendant)(et))},w[28]=ei,w[29]=et,w[30]=null==A?void 0:A.focusPath.length,w[31]=F,w[32]=h):h=w[32];let eo=null==A?void 0:A.focusPath.length;w[33]!==ei||w[34]!==et||w[35]!==F||w[36]!==eo?(g=[ei,et,eo,F],w[33]=ei,w[34]=et,w[35]=F,w[36]=eo,w[37]=g):g=w[37],(0,o.useEffect)(h,g),w[38]!==t?(f=e=>{en(e),"function"==typeof t?t(e):t&&(t.current=e)},w[38]=t,w[39]=f):f=w[39];let er=f,es="reconnecting"===V||(null==A?void 0:A.readOnly)||!(null==R?void 0:R.ready),ea=es?"true":void 0;return w[40]!==_||w[41]!==I||w[42]!==G||w[43]!==V||w[44]!==P||w[45]!==(null==R?void 0:R.draft)||w[46]!==(null==R?void 0:R.published)||w[47]!==k||w[48]!==A||w[49]!==S||w[50]!==es||w[51]!==z||w[52]!==D||w[53]!==L||w[54]!==B||w[55]!==N||w[56]!==H||w[57]!==O||w[58]!==U||w[59]!==Q||w[60]!==Y||w[61]!==q||w[62]!==J||w[63]!==X||w[64]!==M?(v="connecting"!==V||(null==R?void 0:R.draft)||(null==R?void 0:R.published)?null===A||S?(0,l.jsx)(eg.Box,{padding:2,children:(0,l.jsx)(eg.Text,{children:J("document-view.form-view.form-hidden")})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ow,{documentId:P,schemaType:A.schemaType,title:X}),(0,l.jsx)(r.FormBuilder,{__internal_fieldActions:k,__internal_patchChannel:Q,changed:A.changed,collapsedFieldSets:_,collapsedPaths:I,compareValue:null!=G?G:void 0,focused:A.focused,focusPath:A.focusPath,groups:A.groups,id:"root",members:A.members,onChange:D,onFieldGroupSelect:N,onPathBlur:z,onPathFocus:L,onPathOpen:B,onSetFieldSetCollapsed:H,onSetPathCollapsed:O,openPath:U,perspective:q,presence:Y,readOnly:es,schemaType:A.schemaType,validation:M,value:A.value})]}):(0,l.jsx)(lh,{ms:300,children:(0,l.jsxs)(eg.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:[(0,l.jsx)(eg.Spinner,{muted:!0}),(0,l.jsx)(eg.Box,{marginTop:3,children:(0,l.jsx)(eg.Text,{align:"center",muted:!0,size:1,children:J("document-view.form-view.loading")})})]})}),w[40]=_,w[41]=I,w[42]=G,w[43]=V,w[44]=P,w[45]=null==R?void 0:R.draft,w[46]=null==R?void 0:R.published,w[47]=k,w[48]=A,w[49]=S,w[50]=es,w[51]=z,w[52]=D,w[53]=L,w[54]=B,w[55]=N,w[56]=H,w[57]=O,w[58]=U,w[59]=Q,w[60]=Y,w[61]=q,w[62]=J,w[63]=X,w[64]=M,w[65]=v):v=w[65],w[66]!==er||w[67]!==ea||w[68]!==v?(x=(0,l.jsx)(eg.Box,{as:"form",onSubmit:oS,ref:er,"data-testid":"form-view","data-read-only":ea,children:v}),w[66]=er,w[67]=ea,w[68]=v,w[69]=x):x=w[69],w[70]!==C||w[71]!==x?(y=(0,l.jsx)(r.PresenceOverlay,{margins:C,children:x}),w[70]=C,w[71]=x,w[72]=y):y=w[72],w[73]!==S||w[74]!==y?(j=(0,l.jsx)(eg.Container,{hidden:S,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:y}),w[73]=S,w[74]=y,w[75]=j):j=w[75],j});function o_(){return(0,r.createPatchChannel)()}function oI(){let e,t,n=(0,eh.c)(11),{activeViewId:i,paneKey:o,views:r}=lx(),s="".concat(o,"tabpanel");if(n[0]!==i||n[1]!==o||n[2]!==s||n[3]!==r){let t;n[5]!==i||n[6]!==o||n[7]!==s?(t=(e,t)=>{var n;return(0,l.jsx)(oT,{icon:e.icon,id:"".concat(o,"tab-").concat(e.id),isActive:i===e.id,label:e.title,tabPanelId:s,viewId:0===t?null:null!=(n=e.id)?n:null},e.id)},n[5]=i,n[6]=o,n[7]=s,n[8]=t):t=n[8],e=r.map(t),n[0]=i,n[1]=o,n[2]=s,n[3]=r,n[4]=e}else e=n[4];return n[9]!==e?(t=(0,l.jsx)(eg.TabList,{space:1,children:e}),n[9]=e,n[10]=t):t=n[10],t}function oT(e){let t,n,i,o,r,s,a,u,d,c=(0,eh.c)(20);c[0]!==e?({icon:t,id:n,isActive:i,label:o,tabPanelId:s,viewId:a,...r}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=i,c[4]=o,c[5]=r,c[6]=s,c[7]=a):(t=c[1],n=c[2],i=c[3],o=c[4],r=c[5],s=c[6],a=c[7]);let{ready:p,editState:m}=lx(),{setView:h}=lj();c[8]!==h||c[9]!==a?(u=()=>h(a),c[8]=h,c[9]=a,c[10]=u):u=c[10];let g=u,v=!p&&!(null==m?void 0:m.draft)&&!(null==m?void 0:m.published);return c[11]!==g||c[12]!==t||c[13]!==n||c[14]!==i||c[15]!==o||c[16]!==r||c[17]!==v||c[18]!==s?(d=(0,l.jsx)(f.Tab,{...r,"aria-controls":s,disabled:v,icon:t,id:n,label:o,onClick:g,selected:i}),c[11]=g,c[12]=t,c[13]=n,c[14]=i,c[15]=o,c[16]=r,c[17]=v,c[18]=s,c[19]=d):d=c[19],d}function oR(){let e,t,n=(0,eh.c)(18),{connectionState:i,schemaType:o,title:s,value:a}=lx(),{title:u,error:d}=lE(),{t:c}=(0,r.useTranslation)(b);if("connecting"===i&&!a){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(l.Fragment,{}),n[0]=e):e=n[0],e}if(s){let e;return n[1]!==s?(e=(0,l.jsx)(l.Fragment,{children:s}),n[1]=s,n[2]=e):e=n[2],e}if(!a){let e,t,i=(null==o?void 0:o.title)||(null==o?void 0:o.name);return n[3]!==c||n[4]!==i?(e=c("panes.document-header-title.new.text",{schemaType:i}),n[3]=c,n[4]=i,n[5]=e):e=n[5],n[6]!==e?(t=(0,l.jsx)(l.Fragment,{children:e}),n[6]=e,n[7]=t):t=n[7],t}if(d){let e,t;return n[8]!==d||n[9]!==c?(e=c("panes.document-header-title.error.text",{error:d}),n[8]=d,n[9]=c,n[10]=e):e=n[10],n[11]!==e?(t=(0,l.jsx)(l.Fragment,{children:e}),n[11]=e,n[12]=t):t=n[12],t}return n[13]!==u||n[14]!==c?(e=u||(0,l.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:c("panes.document-header-title.untitled.text")}),n[13]=u,n[14]=c,n[15]=e):e=n[15],n[16]!==e?(t=(0,l.jsx)(l.Fragment,{children:e}),n[16]=e,n[17]=t):t=n[17],t}let oP=e=>{let t,n,i,o,s,a,u=(0,eh.c)(16);u[0]!==e?({documentExists:t,...n}=e,u[0]=e,u[1]=t,u[2]=n):(t=u[1],n=u[2]);let{isFavorited:c,isReady:p,favorite:m,unfavorite:h}=(0,r.useManageFavorite)(n),{t:g}=(0,r.useTranslation)(b),v=c?"document.favorites.remove-from-favorites":"document.favorites.add-to-favorites";u[3]!==g||u[4]!==v?(i=g(v),u[3]=g,u[4]=v,u[5]=i):i=u[5];let x=i,y=c?h:m,j=!p||!t;return u[6]!==x?(o={content:(0,l.jsx)(eg.Text,{size:1,children:x}),placement:"right"},u[6]=x,u[7]=o):o=u[7],u[8]!==c?(s=(0,l.jsx)(eg.Text,{size:1,children:c?(0,l.jsx)(d.StarFilledIcon,{}):(0,l.jsx)(d.StarIcon,{})}),u[8]=c,u[9]=s):s=u[9],u[10]!==x||u[11]!==y||u[12]!==j||u[13]!==o||u[14]!==s?(a=(0,l.jsx)(f.Button,{mode:"bleed",onClick:y,disabled:j,"aria-label":x,"aria-live":"assertive",tooltipProps:o,children:s}),u[10]=x,u[11]=y,u[12]=j,u[13]=o,u[14]=s,u[15]=a):a=u[15],a},oE=(0,o.memo)(function(){var e,t,n,i;let o,a,u,c,p,m,h,g=(0,eh.c)(26),{editState:v,connectionState:x,views:y,documentId:j,displayed:w}=lx(),{features:S}=lC(),{index:C,BackLink:_}=lj(),{activeWorkspace:I}=(0,r.useActiveWorkspace)();g[0]!==j?(o=(0,s.getPublishedId)(j),g[0]=j,g[1]=o):o=g[1];let T=o,R=y.length>1,{collapsed:P,isLast:E}=iY(),k=E&&!P?-1:0,D=S.backButton&&C>0,{t:M}=(0,r.useTranslation)(b);g[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,l.jsx)(oR,{}),g[2]=a):a=g[2];let F=a;g[3]!==R?(u=R&&(0,l.jsx)(oI,{}),g[3]=R,g[4]=u):u=g[4];let A=u;g[5]!==_||g[6]!==D||g[7]!==M?(c=D&&(0,l.jsx)(f.Button,{as:_,"data-as":"a",icon:d.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:M("pane-header.back-button.text")}}),g[5]=_,g[6]=D,g[7]=M,g[8]=c):c=g[8];let L=c,V=null!=(e=null==w?void 0:w._type)?e:"";g[9]!==I.dataset||g[10]!==I.projectId?(p=[I.projectId,I.dataset],g[9]=I.dataset,g[10]=I.projectId,g[11]=p):p=g[11];let z=p.join("."),O=null!=(i=(null==v?void 0:v.ready)&&(null!=(n=null!=(t=v.version)?t:v.draft)?n:v.published)!==null)&&i;g[12]!==I.dataset||g[13]!==I.name||g[14]!==I.projectId||g[15]!==T||g[16]!==V||g[17]!==z||g[18]!==O?(m=(0,l.jsx)(r.CapabilityGate,{capability:"comlink",condition:"available",children:(0,l.jsx)(oP,{resourceType:"studio",documentId:T,documentType:V,resourceId:z,schemaName:I.name,projectId:I.projectId,dataset:I.dataset,documentExists:O})}),g[12]=I.dataset,g[13]=I.name,g[14]=I.projectId,g[15]=T,g[16]=V,g[17]=z,g[18]=O,g[19]=m):m=g[19];let B=m,H="connecting"===x&&!(null==v?void 0:v.draft)&&!(null==v?void 0:v.published);return g[20]!==L||g[21]!==B||g[22]!==H||g[23]!==k||g[24]!==A?(h=(0,l.jsx)(li,{loading:H,title:F,tabs:A,tabIndex:k,backButton:L,appendTitle:B}),g[20]=L,g[21]=B,g[22]=H,g[23]=k,g[24]=A,g[25]=h):h=g[25],h}),ok=(0,eb.styled)(eg.Box)({position:"relative"}),oD=(0,eb.styled)(r.ScrollContainer)(e=>{let{$disabled:t}=e;return t?{height:"100%"}:(0,eb.css)(nP())}),oM=function(e){let t,n,i,a,u,d,c,p,m,h,g,f,v,x,b,y,j=(0,eh.c)(108),{footerHeight:w,headerHeight:S,isInspectOpen:C,rootElement:_,setDocumentPanelPortalElement:I,footer:T}=e,{activeViewId:R,displayed:P,documentId:E,editState:k,inspector:D,value:M,views:F,ready:A,schemaType:L,permissions:V,isPermissionsLoading:z}=lx();if(j[0]!==M){let e=(0,r.getSanityCreateLinkMetadata)(M);t=(0,r.isSanityCreateLinked)(e),j[0]=M,j[1]=t}else t=j[1];let O=t,{params:B}=lj(),{collapsed:H}=iN(),{collapsed:N}=iY(),U=(0,eg.usePortal)(),{features:G}=lC(),[W,q]=(0,o.useState)(null),[K,Y]=(0,o.useState)(null),X=(0,o.useRef)(null),Q=(0,r.useWorkspace)(),$=M._createdAt?"update":"create";j[2]!==R||j[3]!==F?(n=F.find(e=>e.id===R)||F[0]||{type:"form"},j[2]=R,j[3]=F,j[4]=n):n=j[4];let J=n,Z=G.splitPanes&&W||U.element;e:{let e;if(H){let e,t=S||0,n=w?w+2:2;j[5]!==t||j[6]!==n?(e=[t,0,n,0],j[5]=t,j[6]=n,j[7]=e):e=j[7],i=e;break e}j[8]===Symbol.for("react.memo_cache_sentinel")?(e=[0,0,2,0],j[8]=e):e=j[8],i=e}let ee=i,et="form"!==J.type;j[9]!==J.component||j[10]!==J.options||j[11]!==J.type||j[12]!==P||j[13]!==E||j[14]!==(null==k?void 0:k.draft)||j[15]!==(null==k?void 0:k.published)||j[16]!==L||j[17]!==M?(a=()=>{if("component"===J.type&&J.component){let e=J.component;return(0,l.jsx)(e,{document:{draft:(null==k?void 0:k.draft)||null,displayed:P||M,historical:P,published:(null==k?void 0:k.published)||null},documentId:E,options:J.options,schemaType:L})}return!1},j[9]=J.component,j[10]=J.options,j[11]=J.type,j[12]=P,j[13]=E,j[14]=null==k?void 0:k.draft,j[15]=null==k?void 0:k.published,j[16]=L,j[17]=M,j[18]=a):a=j[18],j[19]!==a?(u=a(),j[19]=a,j[20]=u):u=j[20];let en=u;j[21]!==K?(d=()=>{(null==K?void 0:K.scrollTo)&&K.scrollTo(0,0)},j[21]=K,j[22]=d):d=j[22],j[23]!==E||j[24]!==K?(c=[E,K],j[23]=E,j[24]=K,j[25]=c):c=j[25],(0,o.useEffect)(d,c),j[26]!==Z||j[27]!==I?(p=()=>{Z&&I(Z)},m=[Z,I],j[26]=Z,j[27]=I,j[28]=p,j[29]=m):(p=j[28],m=j[29]),(0,o.useEffect)(p,m),j[30]!==P||j[31]!==C||j[32]!==M?(h=C?(0,l.jsx)(lK,{value:P||M}):null,j[30]=P,j[31]=C,j[32]=M,j[33]=h):h=j[33];let ei=h,el=!!(!N&&D),{selectedPerspective:eo,selectedReleaseId:er}=(0,r.usePerspective)();j[34]!==P||j[35]!==E?(g={displayed:P,documentId:E},j[34]=P,j[35]=E,j[36]=g):g=j[36];let es=lw(g);t:{var ea;let e,t,n,i,o,a,u,d,c,p,m,h,g,v;if(null==B?void 0:B.historyVersion){let e;j[37]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(oo,{}),j[37]=e):e=j[37],f=e;break t}j[38]!==eo?(e=(0,r.isReleaseDocument)(eo)&&(0,r.isReleaseScheduledOrScheduling)(eo),j[38]=eo,j[39]=e):e=j[39];let x=e,b=!!(x&&(null==P?void 0:P._id)&&(0,s.getVersionFromId)(null==P?void 0:P._id)===er);if(j[40]!==k||j[41]!==L||j[42]!==eo||j[43]!==Q.document.drafts.enabled?(n=function(e){let{isSelectedPerspectiveWriteable:t,editState:n}=e;return(0,r.isNewDocument)(n)&&!t.result}({isSelectedPerspectiveWriteable:t=(0,r.isPerspectiveWriteable)({selectedPerspective:eo,isDraftModelEnabled:Q.document.drafts.enabled,schemaType:L}),editState:k}),j[40]=k,j[41]=L,j[42]=eo,j[43]=Q.document.drafts.enabled,j[44]=t,j[45]=n):(t=j[44],n=j[45]),n){let e;j[46]!==t.reason||j[47]!==t.result||j[48]!==L||j[49]!==eo?(e=!t.result&&(0,l.jsx)(oc,{schemaType:L,selectedPerspective:eo,reason:t.reason}),j[46]=t.reason,j[47]=t.result,j[48]=L,j[49]=eo,j[50]=e):e=j[50],f=e;break t}if(b){let e;j[51]!==eo?(e=(0,l.jsx)(ob,{currentRelease:eo}),j[51]=eo,j[52]=e):e=j[52],f=e;break t}let y=es.currentReleases.some(r.isCardinalityOneRelease);if("drafts"===eo&&y){let e;j[53]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(ol,{}),j[53]=e):e=j[53],f=e;break t}j[54]!==eo?(i=(0,r.isSystemBundle)(eo),j[54]=eo,j[55]=i):i=j[55];let w=i,S=(null==k?void 0:k.version)&&(0,r.isGoingToUnpublish)(null==k?void 0:k.version);if((null==P?void 0:P._id)&&(0,s.getVersionFromId)(P._id)!==er&&A&&!w&&!1===(0,r.isNewDocument)(k)&&!S){let e;j[56]!==x||j[57]!==eo||j[58]!==M._id?(e=(0,l.jsx)(om,{documentId:M._id,currentRelease:eo,isScheduledRelease:x}),j[56]=x,j[57]=eo,j[58]=M._id,j[59]=e):e=j[59],f=e;break t}let C=function(e){let{editState:t,workspace:n,schemaType:i}=e;if(!(null==t?void 0:t.ready))return{result:void 0};let l=null!==t.draft,{document:{drafts:{enabled:o}}}=n;return!1===l?{result:!1}:o?!0===i.liveEdit?{result:!0,reason:"LIVE_EDIT_ACTIVE"}:{result:!1}:{result:!0,reason:"DRAFT_MODEL_INACTIVE"}}({editState:k,workspace:Q,schemaType:L});if("form"===J.type&&!er&&C.result){if("DRAFT_MODEL_INACTIVE"===C.reason){let e;j[60]!==P||j[61]!==E||j[62]!==L?(e=(0,l.jsx)(og,{displayed:P,documentId:E,schemaType:L,i18nKey:"banners.obsolete-draft.draft-model-inactive.text"}),j[60]=P,j[61]=E,j[62]=L,j[63]=e):e=j[63],f=e;break t}if("LIVE_EDIT_ACTIVE"===C.reason){let e;j[64]!==P||j[65]!==E||j[66]!==L?(e=(0,l.jsx)(og,{displayed:P,documentId:E,schemaType:L,i18nKey:"banners.live-edit-draft-banner.text",isEditBlocking:!0}),j[64]=P,j[65]=E,j[66]=L,j[67]=e):e=j[67],f=e;break t}}if("form"!==J.type||z){f=null;break t}j[68]!==O?(o=O&&(0,l.jsx)(op,{}),j[68]=O,j[69]=o):o=j[69],j[70]!==(null==V?void 0:V.granted)||j[71]!==$?(a=!(null==V?void 0:V.granted)&&(0,l.jsx)(oe,{requiredPermission:$}),j[70]=null==V?void 0:V.granted,j[71]=$,j[72]=a):a=j[72],j[73]===Symbol.for("react.memo_cache_sentinel")?(u=(0,l.jsx)(ox,{}),d=(0,l.jsx)(oi,{}),c=(0,l.jsx)(lJ,{}),p=(0,l.jsx)(ou,{}),m=(0,l.jsx)(lX,{}),h=(0,l.jsx)(oy,{}),j[73]=u,j[74]=d,j[75]=c,j[76]=p,j[77]=m,j[78]=h):(u=j[73],d=j[74],c=j[75],p=j[76],m=j[77],h=j[78]);let _=null!=(ea=null==P?void 0:P._id)?ea:E;j[79]!==w||j[80]!==_?(g=(0,l.jsx)(of,{documentId:_,isPinnedDraftOrPublished:w}),j[79]=w,j[80]=_,j[81]=g):g=j[81],j[82]!==o||j[83]!==a||j[84]!==g?(v=(0,l.jsxs)(l.Fragment,{children:[o,a,u,d,c,p,m,h,g]}),j[82]=o,j[83]=a,j[84]=g,j[85]=v):v=j[85],f=v}let eu=f;j[86]!==K?(v={documentScrollElement:K},j[86]=K,j[87]=v):v=j[87];let ed=v,ec=G.resizablePanes||!el;return j[88]!==en||j[89]!==eu||j[90]!==K||j[91]!==T||j[92]!==et||j[93]!==ei||j[94]!==H||j[95]!==ee||j[96]!==Z||j[97]!==ed||j[98]!==ec?(x=ec&&(0,l.jsxs)(eg.Flex,{height:"fill",direction:"column",width:"fill",flex:2,children:[(0,l.jsxs)(r.LegacyLayerProvider,{zOffset:"paneHeader",children:[eu,(0,l.jsx)(oE,{})]}),(0,l.jsx)(ok,{flex:2,overflow:"hidden",children:(0,l.jsx)(eg.PortalProvider,{element:Z,__unstable_elements:ed,children:(0,l.jsx)(eg.BoundaryElementProvider,{element:K,children:(0,l.jsxs)(r.VirtualizerScrollInstanceProvider,{scrollElement:K,containerElement:X,children:[(0,l.jsxs)(oD,{$disabled:H||!1,"data-testid":"document-panel-scroller",ref:Y,children:[(0,l.jsx)(oC,{hidden:et,margins:ee,ref:X}),en]}),ei,(0,l.jsx)("div",{"data-testid":"document-panel-portal",ref:q})]})})})}),T]}),j[88]=en,j[89]=eu,j[90]=K,j[91]=T,j[92]=et,j[93]=ei,j[94]=H,j[95]=ee,j[96]=Z,j[97]=ed,j[98]=ec,j[99]=x):x=j[99],j[100]!==E||j[101]!==_||j[102]!==L||j[103]!==el?(b=el&&(0,l.jsx)(eg.BoundaryElementProvider,{element:_,children:(0,l.jsx)(lA,{documentId:E,documentType:L.name,flex:1})}),j[100]=E,j[101]=_,j[102]=L,j[103]=el,j[104]=b):b=j[104],j[105]!==x||j[106]!==b?(y=(0,l.jsx)(iX,{children:(0,l.jsxs)(eg.Flex,{height:"fill",children:[x,b]})}),j[105]=x,j[106]=b,j[107]=y):y=j[107],y};function oF(e){return("item"===e.type||"group"===e.type)&&e.renderAsButton}oM.displayName="DocumentPanel";let oA=(0,te.default)(oF);function oL(e){let{fieldActions:t=[],menuItems:n,menuItemGroups:i}=e,l=[],o=0;for(let e=0;e<t.length;e+=1){let n=t[e];l.push(function e(t,n){var i,l,o;return"divider"===t.type?{type:"divider",key:n}:"group"===t.type?{type:"group",key:n,children:t.children.map((t,i)=>e(t,"".concat(n,"-").concat(i,"-").concat(t.type))),disabled:t.disabled,expanded:null==(i=t.expanded)||i,icon:t.icon,title:t.title,i18n:t.i18n,renderAsButton:null!=(l=t.renderAsButton)&&l}:{type:"item",key:n,intent:t.intent,disabled:t.disabled,icon:t.icon,iconRight:t.iconRight,onAction:t.onAction,renderAsButton:null!=(o=t.renderAsButton)&&o,selected:t.selected,title:t.title,i18n:t.i18n,tone:t.tone}}(n,"".concat(e,"-").concat(n.type)))}o+=l.length;let r=[];for(let e of i)r.find(t=>t.key===e.id)||r.push({type:"group",key:e.id,children:[],expanded:!0,renderAsButton:!1,title:e.title,i18n:e.i18n});let s=[];for(let t=0;t<n.length;t+=1){var a,u;let i=n[t],l=i.group&&r.find(e=>e.key===i.group),d="string"==typeof i.disabled?{reason:i.disabled}:i.disabled;i.group&&!l&&(l={type:"group",key:i.group,disabled:d,expanded:!0,icon:i.icon,title:i.group,children:[],renderAsButton:!1},r.push(l)),l?l.children.push({type:"item",key:"".concat(o+t,"-item"),hotkey:i.shortcut,icon:i.icon,intent:i.intent,disabled:d,onAction:()=>e.actionHandler(i),renderAsButton:null!=(a=i.showAsAction)&&a,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone}):s.push({type:"item",key:"".concat(o+t,"-item"),hotkey:i.shortcut,icon:i.icon,intent:i.intent,disabled:d,onAction:()=>e.actionHandler(i),renderAsButton:null!=(u=i.showAsAction)&&u,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone})}return[...s,...r,...l]}let oV=!1,oz=Object.freeze({}),oO=Symbol("LOADING_PANE"),oB="documentPanelPortalElement",oH=["left","bottom"],oN={small:0,medium:1,large:2,full:"auto"};function oU(e){let t,n,i,o=(0,eh.c)(16),{dialog:s,referenceElement:a}=e,{t:u}=(0,r.useTranslation)(b),{cancelButtonIcon:d,cancelButtonText:c,confirmButtonIcon:p,confirmButtonText:m,message:h,onCancel:g,onConfirm:f,tone:v}=s;return o[0]!==c||o[1]!==u?(t=c||u("confirm-dialog.cancel-button.fallback-text"),o[0]=c,o[1]=u,o[2]=t):t=o[2],o[3]!==m||o[4]!==u?(n=m||u("confirm-dialog.confirm-button.fallback-text"),o[3]=m,o[4]=u,o[5]=n):n=o[5],o[6]!==d||o[7]!==p||o[8]!==h||o[9]!==g||o[10]!==f||o[11]!==a||o[12]!==t||o[13]!==n||o[14]!==v?(i=(0,l.jsx)(tt.ConfirmPopover,{cancelButtonIcon:d,cancelButtonText:t,confirmButtonIcon:p,confirmButtonText:n,message:h,onCancel:g,onConfirm:f,open:!0,referenceElement:a,tone:v,placement:"top",fallbackPlacements:oH}),o[6]=d,o[7]=p,o[8]=h,o[9]=g,o[10]=f,o[11]=a,o[12]=t,o[13]=n,o[14]=v,o[15]=i):i=o[15],i}function oG(e){let t,n,i,s=(0,eh.c)(12),{dialog:a}=e,u=(0,o.useId)();s[0]!==a.footer?(t=a.footer&&(0,l.jsx)(eg.Box,{paddingX:4,paddingY:3,children:a.footer}),s[0]=a.footer,s[1]=t):t=s[1];let d=t,c=!1===a.showCloseButton,p=void 0===a.width?1:oN[a.width];return s[2]!==a.content?(n=(0,l.jsx)(eg.Box,{padding:4,children:a.content}),s[2]=a.content,s[3]=n):n=s[3],s[4]!==a.header||s[5]!==a.onClose||s[6]!==u||s[7]!==d||s[8]!==c||s[9]!==p||s[10]!==n?(i=(0,l.jsx)(r.LegacyLayerProvider,{zOffset:"fullscreen",children:(0,l.jsx)(ef.Dialog,{animate:!0,__unstable_hideCloseButton:c,footer:d,header:a.header,id:u,onClose:a.onClose,onClickOutside:a.onClose,width:p,children:n})}),s[4]=a.header,s[5]=a.onClose,s[6]=u,s[7]=d,s[8]=c,s[9]=p,s[10]=n,s[11]=i):i=s[11],i}function oW(e){let t,n,i=(0,eh.c)(5),{dialog:o,referenceElement:r}=e;return i[0]!==o?(t=(0,l.jsx)(oq,{dialog:o}),i[0]=o,i[1]=t):t=i[1],i[2]!==r||i[3]!==t?(n=(0,l.jsx)(eg.Popover,{content:t,fallbackPlacements:oH,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:r}),i[2]=r,i[3]=t,i[4]=n):n=i[4],n}function oq(e){let t,n,i,r=(0,eh.c)(6),{dialog:s}=e,{content:a,onClose:u}=s,{isTopLayer:d}=(0,eg.useLayer)(),c=(0,o.useRef)(null);return r[0]!==d||r[1]!==u?(t=e=>{"Escape"===e.key&&d&&u()},r[0]=d,r[1]=u,r[2]=t):t=r[2],(0,eg.useGlobalKeyDown)(t),r[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>[c.current],r[3]=n):n=r[3],(0,eg.useClickOutsideEvent)(d&&u,n),r[4]!==a?(i=(0,l.jsx)("div",{ref:c,children:a}),r[4]=a,r[5]=i):i=r[5],i}function oK(e){let t,n=(0,eh.c)(3),{children:i}=e,{element:o,elements:r}=(0,eg.usePortal)(),s=(null==r?void 0:r[oB])||o;return n[0]!==i||n[1]!==s?(t=(0,l.jsx)(eg.PortalProvider,{element:s,children:i}),n[0]=i,n[1]=s,n[2]=t):t=n[2],t}function oY(e){let t,n,i=(0,eh.c)(17),{dialog:r,referenceElement:s}=e,a=void 0===s?null:s,u=(0,o.useId)();if("confirm"===r.type){let e;return i[0]!==r||i[1]!==a?(e=(0,l.jsx)(oU,{dialog:r,referenceElement:a}),i[0]=r,i[1]=a,i[2]=e):e=i[2],e}if("popover"===r.type){let e;return i[3]!==r||i[4]!==a?(e=(0,l.jsx)(oW,{dialog:r,referenceElement:a}),i[3]=r,i[4]=a,i[5]=e):e=i[5],e}if("dialog"===r.type||!r.type){let e;return i[6]!==r?(e=(0,l.jsx)(oK,{children:(0,l.jsx)(oG,{dialog:r})}),i[6]=r,i[7]=e):e=i[7],e}if("custom"===r.type){let e,t=null==r?void 0:r.component;return i[8]!==t?(e=(0,l.jsx)(oK,{children:t}),i[8]=t,i[9]=e):e=i[9],e}return console.warn("Unsupported modal type ".concat(r.type)),i[10]!==r.content||i[11]!==r.type?(t=r.content||(0,l.jsxs)(eg.Text,{size:1,children:["Unexpected modal type (",(0,l.jsx)("code",{children:r.type}),")"]}),i[10]=r.content,i[11]=r.type,i[12]=t):t=i[12],i[13]!==u||i[14]!==t||i[15]!==r.onClose?(n=(0,l.jsx)(f.Dialog,{id:u,onClose:r.onClose,onClickOutside:r.onClose,width:1,children:t}),i[13]=u,i[14]=t,i[15]=r.onClose,i[16]=n):n=i[16],n}let oX=(0,o.memo)(function(e){let t,n,i,s,a=(0,eh.c)(9),{actionStates:u,children:d,referenceElement:c}=e,[p,m]=(0,o.useState)(-1),h=u[p];a[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{m(e)},a[0]=t):t=a[0];let g=t;a[1]!==d?(n=d({handleAction:g}),a[1]=d,a[2]=n):n=a[2];let f=n;return a[3]!==h||a[4]!==c?(i=h&&h.dialog&&(0,l.jsx)(r.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,l.jsx)(oY,{dialog:h.dialog,referenceElement:c})}),a[3]=h,a[4]=c,a[5]=i):i=a[5],a[6]!==f||a[7]!==i?(s=(0,l.jsxs)(l.Fragment,{children:[i,f]}),a[6]=f,a[7]=i,a[8]=s):s=a[8],s});function oQ(e){let t,n,i,s=(0,eh.c)(10),{actionStates:a,disabled:u}=e,d=(0,o.useId)(),[c,p]=(0,o.useState)(null);s[0]===Symbol.for("react.memo_cache_sentinel")?(t={placement:"top-end",portal:!0,preventOverflow:!0},s[0]=t):t=s[0];let m=t,{t:h}=(0,r.useTranslation)(b);s[1]!==a||s[2]!==u||s[3]!==d||s[4]!==h?(n=e=>{let{handleAction:t}=e;return(0,l.jsx)(f.MenuButton,{id:"".concat(d,"-action-menu"),button:(0,l.jsx)(r.ContextMenuButton,{"aria-label":h("buttons.action-menu-button.aria-label"),disabled:u,"data-testid":"action-menu-button",tooltipProps:{content:h("buttons.action-menu-button.tooltip")}}),menu:(0,l.jsx)(eg.Menu,{padding:1,children:a.map((e,n)=>(0,l.jsx)(o$,{actionState:e,disabled:u,index:n,onAction:t},n))}),popover:m,ref:p})},s[1]=a,s[2]=u,s[3]=d,s[4]=h,s[5]=n):n=s[5];let g=n;return s[6]!==a||s[7]!==c||s[8]!==g?(i=(0,l.jsx)(oX,{actionStates:a,referenceElement:c,children:g}),s[6]=a,s[7]=c,s[8]=g,s[9]=i):i=s[9],i}function o$(e){let t,n,i,o,r=(0,eh.c)(18),{actionState:s,disabled:a,index:u,onAction:d}=e,{onHandle:c}=s;r[0]!==u||r[1]!==d||r[2]!==c?(t=()=>{d(u),c&&c()},r[0]=u,r[1]=d,r[2]=c,r[3]=t):t=r[3];let p=t;r[4]!==s.shortcut?(n=s.shortcut?String(s.shortcut).split("+").map(oJ):void 0,r[4]=s.shortcut,r[5]=n):n=r[5];let m=n,h="action-".concat(s.label.replace(" ","")),g=a||!!s.disabled;return r[6]!==s.disabled||r[7]!==s.title?(i=s.disabled&&{tooltipProps:{content:s.title}},r[6]=s.disabled,r[7]=s.title,r[8]=i):i=r[8],r[9]!==s.icon||r[10]!==s.label||r[11]!==s.tone||r[12]!==p||r[13]!==m||r[14]!==h||r[15]!==g||r[16]!==i?(o=(0,l.jsx)(f.MenuItem,{"data-testid":h,disabled:g,hotkeys:m,icon:s.icon,onClick:p,text:s.label,tone:s.tone,...i}),r[9]=s.icon,r[10]=s.label,r[11]=s.tone,r[12]=p,r[13]=m,r[14]=h,r[15]=g,r[16]=i,r[17]=o):o=r[17],o}function oJ(e){return e.slice(0,1).toUpperCase()+e.slice(1)}let oZ={NOTHING_TO_DELETE:"action.delete.disabled.nothing-to-delete",NOT_READY:"action.delete.disabled.not-ready"},o0=e=>{let t,n,i,s,a,u=(0,eh.c)(36),{id:c,type:p,draft:m,onComplete:h,release:g}=e,{setIsDeleting:f}=lx(),{delete:v}=(0,r.useDocumentOperation)(c,p,g),[x,y]=(0,o.useState)(!1),[j,w]=(0,o.useState)(!1),{t:S}=(0,r.useTranslation)(b);u[0]!==h?(t=()=>{w(!1),h()},u[0]=h,u[1]=t):t=u[1];let C=t;u[2]!==v||u[3]!==h||u[4]!==f?(n=()=>{y(!0),w(!1),f(!0),v.execute(),h()},u[2]=v,u[3]=h,u[4]=f,u[5]=n):n=u[5];let _=n;u[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{w(!0)},u[6]=i):i=u[6];let I=i;u[7]!==c||u[8]!==g||u[9]!==p?(s={id:c,type:p,version:g,permission:"delete"},u[7]=c,u[8]=g,u[9]=p,u[10]=s):s=u[10];let[T,R]=(0,r.useDocumentPairPermissions)(s),P=(0,r.useCurrentUser)();e:{let e,t,n,i;if(!R&&!(null==T?void 0:T.granted)){let e,t,n;u[11]!==S?(e=S("action.delete.label"),u[11]=S,u[12]=e):e=u[12],u[13]!==P?(t=(0,l.jsx)(r.InsufficientPermissionsMessage,{context:"delete-document",currentUser:P}),u[13]=P,u[14]=t):t=u[14],u[15]!==e||u[16]!==t?(n={tone:"critical",icon:d.TrashIcon,disabled:!0,label:e,title:t},u[15]=e,u[16]=t,u[17]=n):n=u[17],a=n;break e}let o=x||!!v.disabled||R;u[18]!==v.disabled||u[19]!==S?(e=v.disabled&&S(oZ[v.disabled])||"",u[18]=v.disabled,u[19]=S,u[20]=e):e=u[20],u[21]!==x||u[22]!==S?(t=S(x?"action.delete.running.label":"action.delete.label"),u[21]=x,u[22]=S,u[23]=t):t=u[23],u[24]!==(null==m?void 0:m._id)||u[25]!==C||u[26]!==_||u[27]!==c||u[28]!==j||u[29]!==p?(n=j&&{type:"custom",component:(0,l.jsx)(ah,{action:"delete",id:(null==m?void 0:m._id)||c,type:p,onCancel:C,onConfirm:_})},u[24]=null==m?void 0:m._id,u[25]=C,u[26]=_,u[27]=c,u[28]=j,u[29]=p,u[30]=n):n=u[30],u[31]!==o||u[32]!==e||u[33]!==t||u[34]!==n?(i={tone:"critical",icon:d.TrashIcon,disabled:o,title:e,label:t,shortcut:"Ctrl+Alt+D",onHandle:I,dialog:n},u[31]=o,u[32]=e,u[33]=t,u[34]=n,u[35]=i):i=u[35],a=i}return a};o0.action="delete",o0.displayName="DeleteAction";let o1={NO_CHANGES:"action.discard-changes.disabled.no-change",NOT_PUBLISHED:"action.discard-changes.disabled.not-published",NOT_READY:"action.discard-changes.disabled.not-ready"},o2=e=>{let{id:t,type:n,published:i,liveEdit:a,onComplete:u,release:c}=e,{discardChanges:p}=(0,r.useDocumentOperation)(t,n,c),[m,h]=(0,o.useState)(!1),[g,f]=(0,r.useDocumentPairPermissions)({id:t,type:n,version:c,permission:"discardDraft"}),v=(0,r.useCurrentUser)(),{displayed:x}=lx(),{t:y}=(0,r.useTranslation)(b),j=(null==x?void 0:x._id)&&(0,s.isPublishedId)(null==x?void 0:x._id),w=(0,o.useCallback)(()=>{p.execute(),u()},[p,u]),S=(0,o.useCallback)(()=>{h(!0)},[]),C=(0,o.useMemo)(()=>m&&{type:"confirm",tone:"critical",onCancel:u,onConfirm:w,message:y("action.discard-changes.confirm-dialog.confirm-discard-changes")},[w,m,u,y]);return(0,o.useMemo)(()=>!i||a||j?null:f||(null==g?void 0:g.granted)?{tone:"critical",icon:d.ResetIcon,disabled:!!p.disabled||f,title:y(p.disabled&&o1[p.disabled]||""),label:y("action.discard-changes.label"),onHandle:S,dialog:C}:{tone:"critical",icon:d.ResetIcon,disabled:!0,label:y("action.discard-changes.label"),title:(0,l.jsx)(r.InsufficientPermissionsMessage,{context:"discard-changes",currentUser:v})},[v,C,p.disabled,S,f,j,a,null==g?void 0:g.granted,i,y])};o2.action="discardChanges",o2.displayName="DiscardChangesAction";let o3={NOTHING_TO_DUPLICATE:"action.duplicate.disabled.nothing-to-duplicate",NOT_READY:"action.duplicate.disabled.not-ready"},o4=e=>{let{id:t,type:n,onComplete:i,release:s,mapDocument:a}=e,u=(0,r.useDocumentStore)(),{duplicate:c}=(0,r.useDocumentOperation)(t,n,s),{navigateIntent:p}=(0,eC.useRouter)(),[m,h]=(0,o.useState)(!1),[g,f]=(0,r.useDocumentPairPermissions)({id:t,type:n,version:s,permission:"duplicate"}),{t:v}=(0,r.useTranslation)(b),x=(0,r.useCurrentUser)(),y=(0,o.useCallback)(async()=>{let e=(0,ex.uuid)();h(!0);let l=(0,eX.firstValueFrom)(u.pair.operationEvents(t,n).pipe((0,eB.filter)(e=>"duplicate"===e.op&&"success"===e.type)));c.execute(e,{mapDocument:a}),await l,p("edit",{id:e,type:n}),i()},[u.pair,c,t,a,p,i,n]);return(0,o.useMemo)(()=>f||(null==g?void 0:g.granted)?{icon:d.CopyIcon,disabled:m||!!c.disabled||f,label:v(m?"action.duplicate.running.label":"action.duplicate.label"),title:c.disabled?v(o3[c.disabled]):"",onHandle:y}:{icon:d.CopyIcon,disabled:!0,label:v("action.duplicate.label"),title:(0,l.jsx)(r.InsufficientPermissionsMessage,{context:"duplicate-document",currentUser:x})},[x,c.disabled,y,m,f,null==g?void 0:g.granted,v])};o4.action="duplicate",o4.displayName="DuplicateAction";let o5=e=>{let t,n,i,l,s,a,u=(0,eh.c)(27),{id:c,type:p,revision:m,onComplete:h,release:g}=e,{restore:f}=(0,r.useDocumentOperation)(c,p,g),{revisionNotFound:v}=lx(),x=(0,r.useDocumentOperationEvent)(c,p),{navigateIntent:y}=(0,eC.useRouter)(),j=(0,o.useRef)(x),[w,S]=(0,o.useState)(!1),{t:C}=(0,r.useTranslation)(b);u[0]!==h||u[1]!==f||u[2]!==m?(t=()=>{f.execute(m),h()},u[0]=h,u[1]=f,u[2]=m,u[3]=t):t=u[3];let _=t;u[4]!==x||u[5]!==c||u[6]!==y||u[7]!==p?(n=()=>{x&&x!==j.current&&("success"===x.type&&"restore"===x.op&&y("edit",{id:c,type:p}),j.current=x)},i=[x,c,y,p],u[4]=x,u[5]=c,u[6]=y,u[7]=p,u[8]=n,u[9]=i):(n=u[8],i=u[9]),(0,o.useEffect)(n,i),u[10]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{S(!0)},u[10]=l):l=u[10];let I=l;e:{if(w){let e,t;u[11]!==C?(e=C("action.restore.confirm.message"),u[11]=C,u[12]=e):e=u[12],u[13]!==_||u[14]!==h||u[15]!==e?(t={type:"confirm",tone:"critical",onCancel:h,onConfirm:_,message:e},u[13]=_,u[14]=h,u[15]=e,u[16]=t):t=u[16],s=t;break e}s=null}let T=s,R="@initial"===m,P=void 0===m;t:{let e,t,n;if(P||v){a=null;break t}u[17]!==C?(e=C("action.restore.label"),u[17]=C,u[18]=e):e=u[18];let i=R?"action.restore.disabled.cannot-restore-initial":"action.restore.tooltip";u[19]!==C||u[20]!==i?(t=C(i),u[19]=C,u[20]=i,u[21]=t):t=u[21],u[22]!==T||u[23]!==R||u[24]!==e||u[25]!==t?(n={label:e,tone:"caution",onHandle:I,title:t,icon:d.RevertIcon,dialog:T,disabled:R},u[22]=T,u[23]=R,u[24]=e,u[25]=t,u[26]=n):n=u[26],a=n}return a};o5.action="restore",o5.displayName="HistoryRestoreAction";let o6=(0,to.defineEvent)({name:"Document Published",version:1,description:'User clicked the "Publish" button in the document pane'}),o8={LIVE_EDIT_ENABLED:"action.publish.live-edit.publish-disabled",ALREADY_PUBLISHED:"action.publish.already-published.no-time-ago.tooltip",NO_CHANGES:"action.publish.no-changes.tooltip",NOT_READY:"action.publish.disabled.not-ready"},o7={status:"published"};function o9(e,t,n){return"ALREADY_PUBLISHED"===e&&t?(0,l.jsx)(re,{publishedAt:t}):n(o8[e])}function re(e){let t,n,i,o=(0,eh.c)(6),{publishedAt:s}=e,{t:a}=(0,r.useTranslation)(b);o[0]===Symbol.for("react.memo_cache_sentinel")?(t={useTemporalPhrase:!0},o[0]=t):t=o[0];let u=(0,r.useRelativeTime)(s,t);return o[1]!==a||o[2]!==u?(n=a("action.publish.already-published.tooltip",{timeSincePublished:u}),o[1]=a,o[2]=u,o[3]=n):n=o[3],o[4]!==n?(i=(0,l.jsx)("span",{children:n}),o[4]=n,o[5]=i):i=o[5],i}let rt=e=>{let t,n,i,a,u,c,p,m,h,g,f,v=(0,eh.c)(79),{id:x,type:y,liveEdit:j,draft:w,published:S,release:C}=e,[_,I]=(0,o.useState)(null),{publish:T}=(0,r.useDocumentOperation)(x,y),R=(0,r.useValidationStatus)(x,y),P=(0,r.useSyncState)(x,y),{changesOpen:E,documentId:k,documentType:D,value:M}=lx(),F=(0,r.useEditState)(k,D),{t:A}=(0,r.useTranslation)(b);v[0]!==(null==F?void 0:F.draft)||v[1]!==(null==F?void 0:F.published)?(t=(null==F?void 0:F.draft)||(null==F?void 0:F.published)||{},v[0]=null==F?void 0:F.draft,v[1]=null==F?void 0:F.published,v[2]=t):t=v[2];let L=t._rev;v[3]!==R.validation?(n=R.validation.some(ev.isValidationErrorMarker),v[3]=R.validation,v[4]=n):n=v[4];let V=n,[z,O]=(0,o.useState)(!1),B=P.isSyncing,H=R.isValidating;v[5]!==x||v[6]!==y?(i={id:x,type:y,permission:"publish"},v[5]=x,v[6]=y,v[7]=i):i=v[7];let[N,U]=(0,r.useDocumentPairPermissions)(i),G=(0,r.useCurrentUser)();v[8]!==V||v[9]!==T.disabled||v[10]!==S||v[11]!==A?(a=T.disabled?o9(T.disabled,(S||{})._updatedAt,A)||"":V?A("action.publish.validation-issues.tooltip"):"",v[8]=V,v[9]=T.disabled,v[10]=S,v[11]=A,v[12]=a):a=v[12];let W=a,q=null==S?void 0:S._rev;v[13]!==q||v[14]!==T?(u=()=>{T.execute(),I({status:"publishing",publishRevision:q})},v[13]=q,v[14]=T,v[15]=u):u=v[15];let K=u;v[16]!==K||v[17]!==V||v[18]!==B||v[19]!==z||v[20]!==L||v[21]!==R.isValidating||v[22]!==R.revision?(c=()=>{let e=!1===R.isValidating&&R.revision!==L;z&&!B&&e&&(V||K(),O(!1))},v[16]=K,v[17]=V,v[18]=B,v[19]=z,v[20]=L,v[21]=R.isValidating,v[22]=R.revision,v[23]=c):c=v[23],v[24]!==K||v[25]!==V||v[26]!==B||v[27]!==H||v[28]!==z||v[29]!==L||v[30]!==R.isValidating||v[31]!==R.revision?(p=[B,K,V,z,R.revision,L,H,R.isValidating],v[24]=K,v[25]=V,v[26]=B,v[27]=H,v[28]=z,v[29]=L,v[30]=R.isValidating,v[31]=R.revision,v[32]=p):p=v[32],(0,o.useEffect)(c,p),v[33]!==q||v[34]!==_?(m=()=>{let e=(null==_?void 0:_.status)==="publishing"&&q!==_.publishRevision,t=e?o7:null,n=setTimeout(()=>{I(t)},e?200:4e3);return()=>clearTimeout(n)},v[33]=q,v[34]=_,v[35]=m):m=v[35],v[36]!==E||v[37]!==q||v[38]!==_?(h=[E,_,q],v[36]=E,v[37]=q,v[38]=_,v[39]=h):h=v[39],(0,o.useEffect)(m,h);let Y=(0,tn.useTelemetry)();v[40]!==K||v[41]!==(null==w?void 0:w._createdAt)||v[42]!==S||v[43]!==L||v[44]!==P.isSyncing||v[45]!==Y||v[46]!==R.isValidating||v[47]!==R.revision?(g=()=>{Y.log(o6,{publishedImmediately:!(null==w?void 0:w._createdAt),previouslyPublished:!!S}),P.isSyncing||R.isValidating||R.revision!==L?O(!0):K()},v[40]=K,v[41]=null==w?void 0:w._createdAt,v[42]=S,v[43]=L,v[44]=P.isSyncing,v[45]=Y,v[46]=R.isValidating,v[47]=R.revision,v[48]=g):g=v[48];let X=g;e:{var Q;let e,t,n;if(C||j){f=null;break e}if((0,s.isPublishedId)(M._id)&&null!==w){let e,t,n;v[49]!==A?(e=A("action.publish.label"),v[49]=A,v[50]=e):e=v[50];let i=null==S?void 0:S._updatedAt;v[51]!==A||v[52]!==i?(t=o9("ALREADY_PUBLISHED",i,A),v[51]=A,v[52]=i,v[53]=t):t=v[53],v[54]!==e||v[55]!==t?(n={tone:"default",icon:d.PublishIcon,label:e,title:t,disabled:!0},v[54]=e,v[55]=t,v[56]=n):n=v[56],f=n;break e}if(!U&&!(null==N?void 0:N.granted)){let e,t,n;v[57]!==A?(e=A("action.publish.label"),v[57]=A,v[58]=e):e=v[58],v[59]!==G?(t=(0,l.jsx)(r.InsufficientPermissionsMessage,{context:"publish-document",currentUser:G}),v[59]=G,v[60]=t):t=v[60],v[61]!==e||v[62]!==t?(n={tone:"default",icon:d.PublishIcon,label:e,title:t,disabled:!0},v[61]=e,v[62]=t,v[63]=n):n=v[63],f=n;break e}let i=!!(z||(null==F||null==(Q=F.transactionSyncLock)?void 0:Q.enabled)||(null==_?void 0:_.status)==="publishing"||(null==_?void 0:_.status)==="published"||V||T.disabled),o=i||U;v[64]!==z||v[65]!==(null==_?void 0:_.status)||v[66]!==A?(e=A((null==_?void 0:_.status)==="published"?"action.publish.published.label":z||(null==_?void 0:_.status)==="publishing"?"action.publish.running.label":"action.publish.draft.label"),v[64]=z,v[65]=null==_?void 0:_.status,v[66]=A,v[67]=e):e=v[67],v[68]!==z||v[69]!==(null==_?void 0:_.status)||v[70]!==A||v[71]!==W?(t=z?A("action.publish.waiting"):(null==_?void 0:_.status)==="published"||(null==_?void 0:_.status)==="publishing"?null:W,v[68]=z,v[69]=null==_?void 0:_.status,v[70]=A,v[71]=W,v[72]=t):t=v[72];let a=i||z?null:"Ctrl+Alt+P";v[73]!==X||v[74]!==o||v[75]!==e||v[76]!==t||v[77]!==a?(n={disabled:o,tone:"default",label:e,icon:d.PublishIcon,title:t,shortcut:a,onHandle:X},v[73]=X,v[74]=o,v[75]=e,v[76]=t,v[77]=a,v[78]=n):n=v[78],f=n}return f};rt.action="publish",rt.displayName="PublishAction";let rn={NOT_PUBLISHED:"action.unpublish.disabled.not-published",NOT_READY:"action.unpublish.disabled.not-ready",LIVE_EDIT_ENABLED:"action.unpublish.disabled.live-edit-enabled"},ri=e=>{let{id:t,type:n,draft:i,onComplete:s,liveEdit:a,release:u}=e,{unpublish:c}=(0,r.useDocumentOperation)(t,n),[p,m]=(0,o.useState)(!1),[h,g]=(0,r.useDocumentPairPermissions)({id:t,type:n,permission:"unpublish"}),f=(0,r.useCurrentUser)(),{t:v}=(0,r.useTranslation)(b),{selectedPerspective:x}=(0,r.usePerspective)(),y="drafts"===x,j=(0,o.useCallback)(()=>{m(!1),s()},[s]),w=(0,o.useCallback)(()=>{m(!1),c.execute(),s()},[s,c]),S=(0,o.useMemo)(()=>p?{type:"dialog",onClose:s,content:(0,l.jsx)(ah,{id:(null==i?void 0:i._id)||t,type:n,action:"unpublish",onCancel:j,onConfirm:w})}:null,[i,t,j,w,p,s,n]);return(0,o.useMemo)(()=>u||y||a?null:g||(null==h?void 0:h.granted)?{tone:"critical",icon:d.UnpublishIcon,disabled:!!c.disabled||g,label:v("action.unpublish.label"),title:c.disabled?v(rn[c.disabled]):"",onHandle:()=>m(!0),dialog:S}:{tone:"critical",icon:d.UnpublishIcon,label:"Unpublish",title:(0,l.jsx)(r.InsufficientPermissionsMessage,{context:"unpublish-document",currentUser:f}),disabled:!0},[u,y,a,g,null==h?void 0:h.granted,c.disabled,v,S,f])};ri.action="unpublish",ri.displayName="UnpublishAction";let rl=(0,o.memo)(function(e){let t,n,i,s,a,u,d,c,p,m=(0,eh.c)(37),{disabled:h,states:g}=e,{__internal_tasks:v}=(0,r.useSource)(),{editState:x}=lx(),{params:b}=lj(),y=!!(null==b?void 0:b.rev),{selectedReleaseId:j}=(0,r.usePerspective)();m[0]!==g?([t,...n]=g,m[0]=g,m[1]=t,m[2]=n):(t=m[1],n=m[2]);let[w,S]=(0,o.useState)(null);e:{let e,n,o,r;if(!t||!t.title&&!t.shortcut){i=null;break e}m[3]===Symbol.for("react.memo_cache_sentinel")?(e={maxWidth:300},m[3]=e):e=m[3],m[4]!==t.title?(n=t.title&&(0,l.jsx)(eg.Text,{size:1,children:t.title}),m[4]=t.title,m[5]=n):n=m[5],m[6]!==t.shortcut?(o=t.shortcut&&(0,l.jsx)(f.Hotkeys,{"data-testid":"document-status-bar-hotkeys",fontSize:1,style:{marginTop:-4,marginBottom:-4},keys:String(t.shortcut).split("+").map(ra)}),m[6]=t.shortcut,m[7]=o):o=m[7],m[8]!==n||m[9]!==o?(r=(0,l.jsxs)(eg.Flex,{style:e,align:"center",gap:3,children:[n,o]}),m[8]=n,m[9]=o,m[10]=r):r=m[10],i=r}let C=i;m[11]!==(null==x?void 0:x.liveEdit)||m[12]!==t||m[13]!==j||m[14]!==y?(s=y?!!t:j?t&&!(0,r.isSanityDefinedAction)(t):t&&!(null==x?void 0:x.liveEdit),m[11]=null==x?void 0:x.liveEdit,m[12]=t,m[13]=j,m[14]=y,m[15]=s):s=m[15];let _=s;m[16]!==t||m[17]!==n||m[18]!==_?(a=_?n:[t,...n],m[16]=t,m[17]=n,m[18]=_,m[19]=a):a=m[19];let I=a,T=v&&v.footerAction;return m[20]!==h||m[21]!==t||m[22]!==_||m[23]!==C?(u=_&&(0,l.jsx)(eg.LayerProvider,{zOffset:200,children:(0,l.jsx)(f.Tooltip,{disabled:!C,content:C,placement:"top",children:(0,l.jsx)(eg.Stack,{children:(0,l.jsx)(f.Button,{"data-testid":"action-".concat(iQ(t.label)),disabled:h||!!t.disabled,icon:t.icon,onClick:t.onHandle,ref:S,text:t.label,tone:t.tone||"primary"})})})}),m[20]=h,m[21]=t,m[22]=_,m[23]=C,m[24]=u):u=m[24],m[25]!==h||m[26]!==I?(d=I.length>0&&(0,l.jsx)(oQ,{actionStates:I,disabled:h}),m[25]=h,m[26]=I,m[27]=d):d=m[27],m[28]!==w||m[29]!==t||m[30]!==_?(c=_&&t&&t.dialog&&(0,l.jsx)(oY,{dialog:t.dialog,referenceElement:w}),m[28]=w,m[29]=t,m[30]=_,m[31]=c):c=m[31],m[32]!==T||m[33]!==u||m[34]!==d||m[35]!==c?(p=(0,l.jsxs)(eg.Flex,{align:"center",gap:1,children:[T,u,d,c]}),m[32]=T,m[33]=u,m[34]=d,m[35]=c,m[36]=p):p=m[36],p}),ro=(0,o.memo)(function(){let e,t,n,i,o,r=(0,eh.c)(14),{actions:s,connectionState:a,documentId:u,editState:d,isInitialValueLoading:c}=lx();r[0]!==s?(e=null!=s?s:[],r[0]=s,r[1]=e):e=r[1],r[2]!==e?(t=e.filter(ru),r[2]=e,r[3]=t):t=r[3];let p=t;r[4]!==d||r[5]!==c?(n=d?{...d,initialValueResolved:!c}:null,r[4]=d,r[5]=c,r[6]=n):n=r[6];let m=n;r[7]!==a||r[8]!==u?(i=e=>{let{states:t}=e;return(0,l.jsx)(rl,{disabled:"connected"!==a,states:t},u)},r[7]=a,r[8]=u,r[9]=i):i=r[9];let h=i;return 0!==p.length&&m?(r[10]!==m||r[11]!==p||r[12]!==h?(o=(0,l.jsx)(aP,{actions:p,actionProps:m,group:"default",children:h}),r[10]=m,r[11]=p,r[12]=h,r[13]=o):o=r[13],o):null}),rr=(0,o.memo)(function(){let e,t,n,i,o=(0,eh.c)(13),{actions:r,connectionState:s,editState:a,revisionId:u,isInitialValueLoading:d}=lx(),c=((null==a?void 0:a.draft)||(null==a?void 0:a.published)||{})._rev===u;o[0]!==a||o[1]!==d||o[2]!==u?(e=a?{...a,revision:u||void 0,initialValueResolved:!d}:null,o[0]=a,o[1]=d,o[2]=u,o[3]=e):e=o[3];let p=e;o[4]!==r?(t=(null!=r?r:[]).filter(rs).slice(-1),o[4]=r,o[5]=t):t=o[5];let m=t;o[6]!==s||o[7]!==c?(n=e=>{let{states:t}=e;return(0,l.jsx)(rl,{disabled:"connected"!==s||!!c,states:t})},o[6]=s,o[7]=c,o[8]=n):n=o[8];let h=n;return p?(o[9]!==p||o[10]!==m||o[11]!==h?(i=(0,l.jsx)(aP,{actions:m,actionProps:p,group:"default",children:h}),o[9]=p,o[10]=m,o[11]=h,o[12]=i):i=o[12],i):null});function rs(e){return e.action===o5.action}function ra(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}function ru(e){return!rs(e)}let rd=e=>{let t=(0,eh.c)(16),{release:n}=e,{t:i}=(0,r.useTranslation)();if("archived"===n.state){let e,n;return t[0]!==i?(e=i("release.chip.tooltip.archived"),t[0]=i,t[1]=e):e=t[1],t[2]!==e?(n=(0,l.jsx)(eg.Text,{size:1,children:e}),t[2]=e,t[3]=n):n=t[3],n}if("asap"===n.metadata.releaseType){let e,n;return t[4]!==i?(e=i("release.type.asap"),t[4]=i,t[5]=e):e=t[5],t[6]!==e?(n=(0,l.jsx)(eg.Text,{size:1,children:e}),t[6]=e,t[7]=n):n=t[7],n}if("scheduled"===n.metadata.releaseType){let e,o="active"===n.state;return t[8]!==o||t[9]!==n||t[10]!==i?(e=n.metadata.intendedPublishAt&&(0,l.jsx)(eg.Text,{size:1,children:o?(0,l.jsx)(r.Translate,{t:i,i18nKey:"release.chip.tooltip.intended-for-date",values:{date:(0,r.formatRelativeLocalePublishDate)(n)}}):(0,l.jsx)(r.Translate,{t:i,i18nKey:"release.chip.tooltip.scheduled-for-date",values:{date:(0,r.formatRelativeLocalePublishDate)(n)}})}),t[8]=o,t[9]=n,t[10]=i,t[11]=e):e=t[11],e}if("undecided"===n.metadata.releaseType){let e,n;return t[12]!==i?(e=i("release.type.undecided"),t[12]=i,t[13]=e):e=t[13],t[14]!==e?(n=(0,l.jsx)(eg.Text,{size:1,children:e}),t[14]=e,t[15]=n):n=t[15],n}return null},rc={dateStyle:"medium",timeStyle:"short"},rp=(0,o.memo)(function(){var e,t,n,i,a,u,d,c,p,m;let{selectedReleaseId:h,selectedPerspectiveName:g}=(0,r.usePerspective)(),{t:f}=(0,r.useTranslation)(),v=(0,r.useSetPerspective)(),{params:x,setParams:b}=lj(),y=(0,r.useDateTimeFormat)(rc),{loading:j}=(0,r.useActiveReleases)(),w=(0,r.useSchema)(),{editState:S,displayed:C,documentType:_,documentId:I}=lx(),T=C&&!C._createdAt,R=lw({displayed:C,documentId:I}),P=(0,r.useOnlyHasVersions)({documentId:I}),E=(0,r.useWorkspace)(),k=(0,o.useCallback)(e=>()=>{"published"===e&&(null==x?void 0:x.historyVersion)&&b({...x,rev:(null==x?void 0:x.historyEvent)||void 0,since:void 0,historyVersion:void 0}),v(e)},[v,b,x]),D=w.get(_),M=!!D&&!0===D.liveEdit,F=(0,o.useMemo)(()=>(!M||!!h)&&!(null==S?void 0:S.published),[M,h,null==S?void 0:S.published]),A=(0,o.useCallback)(e=>{if(!(null==x?void 0:x.historyVersion)){var t;let n=(null==S?void 0:S.version)&&(0,r.isGoingToUnpublish)(null==S?void 0:S.version)&&(0,r.getReleaseIdFromReleaseDocumentId)(e._id)===(0,s.getVersionFromId)(null==S||null==(t=S.version)?void 0:t._id);return{selected:!!((0,r.getReleaseIdFromReleaseDocumentId)(e._id)===(0,s.getVersionFromId)((null==C?void 0:C._id)||"")||n)}}let n=(0,r.getReleaseIdFromReleaseDocumentId)(e._id)===x.historyVersion;return{selected:n,disabled:n}},[null==C?void 0:C._id,null==S?void 0:S.version,null==x?void 0:x.historyVersion]),L=(0,o.useMemo)(()=>{var e;return!!(M&&!(null==S||null==(e=S.draft)?void 0:e._id)&&!h||(0,s.isPublishedId)((null==C?void 0:C._id)||"")&&(0,r.isPublishedPerspective)(g||""))},[null==C?void 0:C._id,null==S||null==(e=S.draft)?void 0:e._id,M,g,h]),V=(0,o.useMemo)(()=>{let e=(null==C?void 0:C._id)||"";return!(L||(null==x?void 0:x.historyVersion)||g||(0,s.isVersionId)(e))&&(!!(0,s.isDraftId)(e)||!((0,s.isPublishedId)(e)&&(null==S?void 0:S.published)&&(0,r.isPublishedPerspective)(g||"")))},[null==C?void 0:C._id,null==S?void 0:S.published,L,null==x?void 0:x.historyVersion,g]),z=(0,o.useMemo)(()=>!!P||!!T&&!!h||(!!(null==S?void 0:S.draft)||!!M)&&!!(T&&h||M),[null==S?void 0:S.draft,T,M,P,h]),O=null==(t=E.document.drafts)?void 0:t.enabled;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.VersionChip,{tooltipContent:(0,l.jsx)(eg.Text,{size:1,children:(null==S?void 0:S.published)&&(null==S||null==(n=S.published)?void 0:n._updatedAt)?(0,l.jsx)(r.Translate,{t:f,i18nKey:"release.chip.tooltip.published-date",values:{date:y.format(new Date(null==S?void 0:S.published._updatedAt))}}):(0,l.jsx)(l.Fragment,{children:f("release.chip.tooltip.not-published")})}),disabled:F,onClick:k("published"),selected:L,text:f("release.chip.published"),tone:"positive",contextValues:{documentId:(null==S||null==(i=S.published)?void 0:i._id)||(null==S?void 0:S.id)||"",menuReleaseId:(null==S||null==(a=S.published)?void 0:a._id)||(null==S?void 0:S.id)||"",releases:R.notCurrentReleases,releasesLoading:j,documentType:_,fromRelease:"published",isVersion:!1,disabled:!(null==S?void 0:S.published)}}),O&&(0,l.jsx)(r.VersionChip,{tooltipContent:(0,l.jsx)(eg.Text,{size:1,children:(null==S?void 0:S.draft)?(0,l.jsx)(l.Fragment,{children:(null==S?void 0:S.draft._updatedAt)?(0,l.jsx)(r.Translate,{t:f,i18nKey:"release.chip.tooltip.edited-date",values:{date:y.format(new Date(null==S?void 0:S.draft._updatedAt))}}):(0,l.jsx)(r.Translate,{t:f,i18nKey:"release.chip.tooltip.created-date",values:{date:y.format(new Date(null==S?void 0:S.draft._createdAt))}})}):(0,l.jsx)(l.Fragment,{children:f(M?"release.chip.tooltip.draft-disabled.live-edit":"release.chip.tooltip.no-edits")})}),selected:V,disabled:z,text:f("release.chip.draft"),tone:(null==S?void 0:S.draft)?"caution":"neutral",onClick:k("drafts"),contextValues:{documentId:(null==S||null==(u=S.draft)?void 0:u._id)||(null==S||null==(d=S.published)?void 0:d._id)||(null==S?void 0:S.id)||"",menuReleaseId:(null==S||null==(c=S.draft)?void 0:c._id)||(null==S||null==(p=S.published)?void 0:p._id)||(null==S?void 0:S.id)||"",releases:R.notCurrentReleases,releasesLoading:j,documentType:_,fromRelease:"draft",isVersion:!1}}),R.inCreation&&(0,l.jsx)(r.VersionChip,{tooltipContent:(0,l.jsx)(rd,{release:R.inCreation}),selected:!0,onClick:()=>{},locked:!1,tone:(0,r.getReleaseTone)(R.inCreation),text:R.inCreation.metadata.title||f("release.placeholder-untitled-release"),contextValues:{disabled:!0,documentId:(null==C?void 0:C._id)||"",menuReleaseId:R.inCreation._id,releases:R.notCurrentReleases,releasesLoading:j,documentType:_,fromRelease:(0,r.getReleaseIdFromReleaseDocumentId)(R.inCreation._id),releaseState:R.inCreation.state,isVersion:!0,release:R.inCreation}}),C&&(null==(m=R.currentReleases)?void 0:m.map(e=>(0,l.jsx)(r.VersionChip,{tooltipContent:(0,l.jsx)(rd,{release:e}),...A(e),onClick:k((0,r.getReleaseIdFromReleaseDocumentId)(e._id)),text:e.metadata.title||f("release.placeholder-untitled-release"),tone:(0,r.getReleaseTone)(e),locked:(0,r.isReleaseScheduledOrScheduling)(e),contextValues:{documentId:(null==C?void 0:C._id)||"",menuReleaseId:e._id,releases:R.notCurrentReleases,releasesLoading:j,documentType:_,fromRelease:(0,r.getReleaseIdFromReleaseDocumentId)(e._id),releaseState:e.state,isVersion:!0,isGoingToUnpublish:null!=S&&!!S.version&&(0,r.isGoingToUnpublish)(null==S?void 0:S.version),release:e}},e._id)))]})}),rm=(0,eb.styled)(eg.Card)(e=>{let t=(0,tw.getTheme_v2)(e.theme);return(0,eb.css)(nk(),e.$showGradient&&(0,eb.css)(nE(),(0,tw.rgba)(t.color.bg,0)))}),rh=(0,o.memo)((0,o.forwardRef)(function(e,t){let{menuItems:n}=e,{actions:i,editState:s,onMenuAction:a,isInitialValueLoading:u,onPaneClose:c,onPaneSplit:p,menuItemGroups:m,schemaType:h,connectionState:g,views:v,unstable_languageFilter:x}=lx(),{features:y}=lC(),{index:j,BackLink:w,hasGroupSiblings:S}=lj(),{actions:C}=(0,r.useFieldActions)(),[_,I]=(0,o.useState)(null),T=(0,o.useRef)(null),R=function(e){let t,n,i=(0,eh.c)(3),[l,r]=(0,o.useState)(!1);return i[0]!==e?(t=()=>{let t=()=>{let t=e.current;if(!t)return;let{scrollWidth:n,clientWidth:i}=t;if(!(n>i))return void r(!1);let{scrollLeft:l}=t;r(!(l+i>=n))},{intersectionObserver:n,mutationObserver:i}=function(){t();let n=e.current;if(!n)return{intersectionObserver:null,mutationObserver:null};let i=new IntersectionObserver(e=>{let t=e[0];t&&r(!t.isIntersecting)}),l=()=>{i.disconnect();let e=n.children[n.children.length-1];i.observe(e)};l();let o=new MutationObserver(()=>{l(),t()});return o.observe(n,{childList:!0,subtree:!1}),{intersectionObserver:i,mutationObserver:o}}();return()=>{null==n||n.disconnect(),null==i||i.disconnect()}},n=[e],i[0]=e,i[1]=t,i[2]=n):(t=i[1],n=i[2]),(0,o.useEffect)(t,n),l}(T),P=(0,o.useMemo)(()=>(null!=i?i:[]).filter(e=>!rs(e)),[i]),E=(0,o.useMemo)(()=>oL({actionHandler:a,fieldActions:C,menuItems:n,menuItemGroups:m}),[a,C,m,n]),k=(0,o.useMemo)(()=>E.filter(oF),[E]),D=(0,o.useMemo)(()=>E.filter(oA),[E]),{collapsed:M,isLast:F}=iY(),A=y.splitViews&&p&&v.length>1,L=A&&S,V=y.backButton&&j>0,z=!L&&!V&&!!w,{t:O}=(0,r.useTranslation)(b),B=(0,o.useCallback)(e=>{let{states:t}=e;return(0,l.jsx)(rg,{contextMenuNodes:D,setReferenceElement:I,referenceElement:_,states:t})},[D,_]),H=(0,o.useMemo)(()=>(0,l.jsx)(oR,{}),[]),N=(0,o.useMemo)(()=>V&&(0,l.jsx)(f.Button,{as:w,"data-as":"a",icon:d.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:O("pane-header.back-button.text")}}),[w,V,O]),U=(0,o.useMemo)(()=>(0,l.jsxs)(eg.Flex,{align:"center",gap:1,children:[x.length>0&&(0,l.jsx)(l.Fragment,{children:x.map((e,t)=>(0,l.jsx)(e,{schemaType:h},"language-filter-".concat(t)))}),k.map(e=>(0,l.jsx)(lo,{node:e},e.key)),s&&(0,l.jsx)(aP,{actions:P,actionProps:{...s,initialValueResolved:!u},group:"paneActions",children:B}),A&&(0,l.jsx)(f.Button,{"aria-label":O("buttons.split-pane-button.aria-label"),icon:d.SplitVerticalIcon,mode:"bleed",onClick:p,tooltipProps:{content:O("buttons.split-pane-button.tooltip")}},"split-pane-button"),L&&(0,l.jsx)(f.Button,{icon:d.CloseIcon,mode:"bleed",onClick:c,tooltipProps:{content:O("buttons.split-pane-close-button.title")}},"close-view-button"),z&&(0,l.jsx)(f.Button,{icon:d.CloseIcon,mode:"bleed",tooltipProps:{content:O("buttons.split-pane-close-group-button.title")},as:w},"close-view-button")]}),[w,P,s,u,k,c,p,B,h,z,A,L,O,x]);return(0,l.jsx)(f.TooltipDelayGroupProvider,{children:M?(0,l.jsx)(li,{border:!0,ref:t,loading:"connecting"===g&&!(null==s?void 0:s.draft)&&!(null==s?void 0:s.published),title:H,tabIndex:F&&!M?-1:0,backButton:N}):(0,l.jsx)(eg.Card,{hidden:M,style:{lineHeight:0},borderBottom:!0,children:(0,l.jsxs)(eg.Flex,{gap:3,paddingY:3,children:[(0,l.jsx)(rm,{$showGradient:R,children:(0,l.jsx)(eg.Flex,{flex:1,gap:1,overflow:"auto",paddingX:3,"data-testid":"document-perspective-list",ref:T,children:(0,l.jsx)(rp,{})})}),(0,l.jsx)(eg.Box,{flex:"none",paddingRight:3,children:U})]})})})})),rg=(0,o.memo)(function(e){let t,n=(0,eh.c)(5),{setReferenceElement:i,referenceElement:r,contextMenuNodes:s}=e,a=(0,o.useDeferredValue)(e.states);return n[0]!==s||n[1]!==r||n[2]!==i||n[3]!==a?(t=(0,l.jsx)(rf,{setReferenceElement:i,referenceElement:r,contextMenuNodes:s,states:a}),n[0]=s,n[1]=r,n[2]=i,n[3]=a,n[4]=t):t=n[4],t}),rf=(0,o.memo)(function(e){let t,n,i=(0,eh.c)(8),{states:o,setReferenceElement:r,contextMenuNodes:s,referenceElement:a}=e;i[0]!==s||i[1]!==r||i[2]!==o?(t=e=>{let{handleAction:t}=e;return(0,l.jsx)("div",{ref:r,children:(0,l.jsx)(i4,{nodes:s,actionsNodes:o.length>0?o.map((e,n)=>(0,l.jsx)(o$,{actionState:e,disabled:!!e.disabled,index:n,onAction:t},e.label)):void 0},"context-menu")})},i[0]=s,i[1]=r,i[2]=o,i[3]=t):t=i[3];let u=t;return i[4]!==a||i[5]!==u||i[6]!==o?(n=(0,l.jsx)(oX,{actionStates:o,referenceElement:a,children:u}),i[4]=a,i[5]=u,i[6]=o,i[7]=n):n=i[7],n});function rv(e){let t,n,i=(0,eh.c)(3),{size:o}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={pointerEvents:"none",visibility:"hidden",width:0},i[0]=t):t=i[0],i[1]!==o?(n=(0,l.jsx)(f.Button,{"aria-hidden":!0,disabled:!0,size:o,style:t,text:"-"}),i[1]=o,i[2]=n):n=i[2],n}let rx={primary:"primary",success:"positive",warning:"caution",danger:"critical"},rb=(0,o.memo)(function(e){let t,n,i=(0,eh.c)(4),{states:o}=e;return 0===o.length?null:(i[0]!==o?(t=o.map(rS),i[0]=o,i[1]=t):t=i[1],i[2]!==t?(n=(0,l.jsx)(eg.Inline,{space:1,children:t}),i[2]=t,i[3]=n):n=i[3],n)}),ry=(0,o.memo)(function(e){let t,n=(0,eh.c)(2),i=(0,o.useDeferredValue)(e.states);return n[0]!==i?(t=(0,l.jsx)(rb,{states:i}),n[0]=i,n[1]=t):t=n[1],t});function rj(){let e,t=(0,eh.c)(3),{badges:n,editState:i}=lx();return i&&n?(t[0]!==n||t[1]!==i?(e=(0,l.jsx)(aD,{badges:n,badgeProps:i,children:rw}),t[0]=n,t[1]=i,t[2]=e):e=t[2],e):null}function rw(e){let{states:t}=e;return(0,l.jsx)(ry,{states:t})}function rS(e,t){return(0,l.jsx)(f.Tooltip,{content:e.title,disabled:!e.title,placement:"top",portal:!0,children:(0,l.jsx)(eg.Badge,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:e.color?rx[e.color]:void 0,style:{whiteSpace:"nowrap"},children:e.label})},"".concat(e.label,"-").concat(t))}let rC={create:d.AddIcon,delete:d.TrashIcon,discardDraft:d.CloseIcon,initial:d.AddIcon,editDraft:d.EditIcon,editLive:d.EditIcon,publish:d.PublishIcon,unpublish:d.UnpublishIcon},r_=(0,eb.styled)(d.ChevronLeftIcon)(nD());function rI(e){let t,n,i,o,s,a=(0,eh.c)(14),{isExpanded:u,onExpand:d}=e,{t:c}=(0,r.useTranslation)(b);a[0]!==u||a[1]!==d?(t=e=>{e.stopPropagation(),function(e){if(e)return;let t=document.getElementById(rN);if(t){let e=t.children[0];if(!(e.scrollHeight>e.clientHeight)){let t=getComputedStyle(e).overflowY;e.style.overflowY="hidden",setTimeout(()=>{e.style.overflowY=t},0)}}}(u),d()},a[0]=u,a[1]=d,a[2]=t):t=a[2];let p=t;return a[3]!==u?(n=(0,l.jsx)(r_,{"data-expanded":u}),a[3]=u,a[4]=n):n=a[4],a[5]!==u||a[6]!==c?(i=c(u?"timeline-item.menu.action-collapse":"timeline-item.menu.action-expand"),a[5]=u,a[6]=c,a[7]=i):i=a[7],a[8]!==i?(o={content:i},a[8]=i,a[9]=o):o=a[9],a[10]!==p||a[11]!==n||a[12]!==o?(s=(0,l.jsx)(f.Button,{mode:"bleed",icon:n,tooltipProps:o,onClick:p}),a[10]=p,a[11]=n,a[12]=o,a[13]=s):s=a[13],s}let rT=(0,eb.styled)(eg.Stack)(nM()),rR=(0,eb.styled)(eg.Flex)(nF(),e=>e.$maxHeight),rP=(0,eb.styled)(eg.Box)(e=>{let{$visible:t}=e;return(0,eb.css)(nL(),t&&(0,eb.css)(nA()))}),rE={initial:"timeline.operation.created-initial",create:"timeline.operation.created",publish:"timeline.operation.published",editLive:"timeline.operation.edited-live",editDraft:"timeline.operation.edited-draft",unpublish:"timeline.operation.unpublished",discardDraft:"timeline.operation.draft-discarded",delete:"timeline.operation.deleted"};function rk(e){let t,n,i=(0,eh.c)(9),{maxLength:o,userIds:s,size:a,withTooltip:u}=e,d=void 0===u||u;if(i[0]!==s||i[1]!==d){let e;i[3]!==d?(e=e=>(0,l.jsx)(r.UserAvatar,{user:e,withTooltip:d},e),i[3]=d,i[4]=e):e=i[4],t=s.map(e),i[0]=s,i[1]=d,i[2]=t}else t=i[2];return i[5]!==o||i[6]!==a||i[7]!==t?(n=(0,l.jsx)(eg.AvatarStack,{maxLength:o,size:a,children:t}),i[5]=o,i[6]=a,i[7]=t,i[8]=n):n=i[8],n}let rD=(0,eb.styled)(eg.Flex)(e=>{let t=(0,tw.getTheme_v2)(e.theme),n=e.$color;return(0,eb.css)(nV(),t.color.avatar[n].fg,t.color.avatar[n].bg,t.avatar.sizes[0].size,t.avatar.sizes[0].size)}),rM={initial:"blue",create:"blue",publish:"green",editLive:"green",editDraft:"yellow",unpublish:"orange",discardDraft:"orange",delete:"red",withinSelection:"magenta"},rF={minimal:!0,useTemporalPhrase:!0},rA=(0,eb.styled)(ef.Skeleton)(e=>{let t=(0,tw.getTheme_v2)(e.theme);return(0,eb.css)(nz(),t.font.text.sizes[0].lineHeight)}),rL=e=>{let t,n,i,o=(0,eh.c)(10),{userId:s}=e,[a,u]=(0,r.useUser)(s);return o[0]!==u||o[1]!==a?(t=(0,l.jsx)(eg.Box,{children:u||!a?(0,l.jsx)(r.AvatarSkeleton,{animated:!0}):(0,l.jsx)(r.UserAvatar,{user:a})}),o[0]=u,o[1]=a,o[2]=t):t=o[2],o[3]!==u||o[4]!==a?(n=(0,l.jsx)(eg.Box,{children:!u&&(null==a?void 0:a.displayName)?(0,l.jsx)(eg.Text,{muted:!0,size:1,children:a.displayName}):(0,l.jsx)(eg.Text,{size:1,children:(0,l.jsx)(rA,{animated:!0})})}),o[3]=u,o[4]=a,o[5]=n):n=o[5],o[6]!==t||o[7]!==n||o[8]!==s?(i=(0,l.jsxs)(eg.Flex,{align:"center",gap:2,padding:1,children:[t,n]},s),o[6]=t,o[7]=n,o[8]=s,o[9]=i):i=o[9],i},rV=e=>{let t,n,i,o,s=(0,eh.c)(9),{collaborators:a}=e,{t:u}=(0,r.useTranslation)("studio");return s[0]!==u?(t=u("timeline.changes.title"),s[0]=u,s[1]=t):t=s[1],s[2]!==t?(n=(0,l.jsx)(eg.Box,{padding:1,paddingBottom:2,children:(0,l.jsx)(eg.Text,{size:1,weight:"medium",children:t})}),s[2]=t,s[3]=n):n=s[3],s[4]!==a?(i=a.map(rO),s[4]=a,s[5]=i):i=s[5],s[6]!==n||s[7]!==i?(o=(0,l.jsxs)(eg.Stack,{paddingBottom:1,children:[n,i]}),s[6]=n,s[7]=i,s[8]=o):o=s[8],o};function rz(e){let t,n,i,o,s,a,u,d,c,p,m,h,g,v,x,b,y,j,w,S,C,_=(0,eh.c)(55),{chunk:I,isSelected:T,onSelect:R,collaborators:P,optionsMenu:E}=e,{t:k}=(0,r.useTranslation)("studio"),{type:D,endTimestamp:M}=I;_[0]!==D?(t=rC[D],_[0]=D,_[1]=t):t=_[1];let F=t;_[2]!==I.authors?(n=Array.from(I.authors),_[2]=I.authors,_[3]=n):n=_[3];let A=n;_[4]!==P?(i=P?Array.from(P):[],_[4]=P,_[5]=i):i=_[5];let L=i,V="delete"!==D;_[6]===Symbol.for("react.memo_cache_sentinel")?(o={dateStyle:"medium",timeStyle:"short"},_[6]=o):o=_[6];let z=(0,r.useDateTimeFormat)(o);_[7]!==M?(s=new Date(M),_[7]=M,_[8]=s):s=_[8];let O=(0,r.useRelativeTime)(s||"",rF);if(_[9]!==z||_[10]!==M){let e=new Date(M);a=z.format(e),_[9]=z,_[10]=M,_[11]=a}else a=_[11];let B=a;_[12]!==I||_[13]!==V||_[14]!==R?(u=e=>{e.preventDefault(),e.stopPropagation(),V&&R(I)},_[12]=I,_[13]=V,_[14]=R,_[15]=u):u=_[15];let H=u;_[16]===Symbol.for("react.memo_cache_sentinel")?(d={position:"relative"},_[16]=d):d=_[16],_[17]!==A?(c=(0,l.jsx)(rk,{maxLength:3,userIds:A,size:2}),_[17]=A,_[18]=c):c=_[18];let N=rM[D];return _[19]!==F?(p=F&&(0,l.jsx)(F,{}),_[19]=F,_[20]=p):p=_[20],_[21]!==p?(m=(0,l.jsx)(eg.Text,{size:0,children:p}),_[21]=p,_[22]=m):m=_[22],_[23]!==N||_[24]!==m?(h=(0,l.jsx)(rD,{align:"center",justify:"center",$color:N,children:m}),_[23]=N,_[24]=m,_[25]=h):h=_[25],_[26]!==h||_[27]!==c?(g=(0,l.jsxs)("div",{style:d,children:[c,h]}),_[26]=h,_[27]=c,_[28]=g):g=_[28],_[29]!==k||_[30]!==D?(v=k(rE[D])||(0,l.jsx)("code",{children:D}),_[29]=k,_[30]=D,_[31]=v):v=_[31],_[32]!==v?(x=(0,l.jsx)(eg.Text,{size:1,weight:"medium",children:v}),_[32]=v,_[33]=x):x=_[33],_[34]!==B||_[35]!==M||_[36]!==O?(b=(0,l.jsx)(eg.Text,{as:"time",size:1,muted:!0,dateTime:M,title:B,children:O}),_[34]=B,_[35]=M,_[36]=O,_[37]=b):b=_[37],_[38]!==x||_[39]!==b?(y=(0,l.jsxs)(eg.Stack,{space:2,children:[x,b]}),_[38]=x,_[39]=b,_[40]=y):y=_[40],_[41]!==L?(j=L.length>0&&(0,l.jsx)(eg.Flex,{flex:1,justify:"flex-end",align:"center",children:(0,l.jsx)(f.Tooltip,{placement:"top",content:(0,l.jsx)(rV,{collaborators:L}),portal:!0,children:(0,l.jsx)(eg.Box,{paddingLeft:2,paddingY:2,children:(0,l.jsx)(rk,{maxLength:3,userIds:L,size:0,withTooltip:!1})})})}),_[41]=L,_[42]=j):j=_[42],_[43]!==g||_[44]!==y||_[45]!==j?(w=(0,l.jsxs)(eg.Flex,{align:"center",gap:3,children:[g,y,j]}),_[43]=g,_[44]=y,_[45]=j,_[46]=w):w=_[46],_[47]!==I.id||_[48]!==H||_[49]!==T||_[50]!==w?(S=(0,l.jsx)(eg.Card,{as:"button",onClick:H,padding:2,pressed:T,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-id":I.id,children:w}),_[47]=I.id,_[48]=H,_[49]=T,_[50]=w,_[51]=S):S=_[51],_[52]!==E||_[53]!==S?(C=(0,l.jsxs)(eg.Flex,{align:"center",gap:1,children:[S,E]}),_[52]=E,_[53]=S,_[54]=C):C=_[54],C}function rO(e){return(0,l.jsx)(rL,{userId:e},e)}let rB=e=>"publish"!==e.type,rH=e=>"publish"===e.type,rN="timeline-list-wrapper",rU=e=>{let{chunks:t,hasMoreChunks:n,lastChunk:i,onLoadMore:s,onSelect:a,listMaxHeight:u="calc(100vh - 280px)"}=e,[d,c]=(0,o.useState)(!1),{t:p}=(0,r.useTranslation)("studio"),m=null==i?void 0:i.id,h=(0,o.useMemo)(()=>(function(e){let t=[];for(let n of e){if(rH(n)){t.push({...n,type:"publish",children:[],collaborators:new Set});continue}if(rB(n)){let e=function(e){let t=null;for(let n=e.length-1;n>=0;n--){let i=e[n];if(rH(i)){t=i;break}if("editDraft"!==i.type)break}return t}(t);if("editDraft"===n.type&&(null==e?void 0:e.type)==="publish"){Array.from(n.authors).forEach(t=>{e.collaborators.add(t)}),e.children.push(n.id),t.push({...n,parentId:e.id});continue}}rB(n)&&t.push(n)}return t})(t),[t]),[g,f]=(0,o.useState)(()=>{if(m){let e=h.find(e=>e.id===m);if(e&&rB(e)&&e.parentId)return new Set([e.parentId])}return new Set});(0,o.useEffect)(()=>{if(m){let e=h.find(e=>e.id===m);if(e&&rB(e)&&e.parentId){let t=e.parentId;f(e=>{if(e.has(t))return e;let n=new Set(e);return n.add(t),n})}}},[h,m]);let v=(0,o.useMemo)(()=>h.filter(e=>!!rH(e)||!e.parentId||g.has(e.parentId)),[h,g]);(0,o.useEffect)(()=>{v.length<16&&n&&s()},[v,n,s]);let x=(0,o.useCallback)(e=>()=>f(t=>{let n=new Set(t);return t.has(e)?n.delete(e):n.add(e),n}),[]),b=(0,o.useMemo)(()=>m?v.findIndex(e=>e.id===m):-1,[m,v]),y=(0,o.useCallback)(e=>{let n=t.find(t=>t.id===e.id);n?a(n):(console.error("TimelineItem: chunk not found"),a(e))},[t,a]),j=(0,o.useCallback)((e,t)=>{let{activeIndex:i}=t;return(0,l.jsxs)(eg.Box,{paddingBottom:1,paddingTop:+(0===i),paddingRight:1,paddingLeft:rB(e)&&e.parentId?4:1,children:[(0,l.jsx)(rz,{chunk:e,isSelected:m===e.id,onSelect:y,collaborators:rH(e)?e.collaborators:void 0,optionsMenu:rH(e)&&e.children.length>0?(0,l.jsx)(rI,{isExpanded:g.has(e.id),onExpand:x(e.id)}):null}),i===v.length-1&&n&&(0,l.jsx)(r.LoadingBlock,{})]})},[g,v.length,x,y,n,m]);return(0,o.useEffect)(()=>c(!0),[]),(0,l.jsxs)(rP,{$visible:!b||d,"data-ui":"timeline",children:[0===v.length&&(0,l.jsxs)(rT,{padding:3,space:3,children:[(0,l.jsx)(eg.Text,{size:1,weight:"medium",children:p("timeline.error.no-document-history-title")}),(0,l.jsx)(eg.Text,{muted:!0,size:1,children:p("timeline.error.no-document-history-description")})]}),v.length>0&&(0,l.jsx)(rR,{direction:"column",$maxHeight:u,id:rN,children:(0,l.jsx)(r.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:p("timeline.list.aria-label"),autoFocus:"list",initialIndex:b,initialScrollAlign:"center",itemHeight:57,items:v,onEndReached:s,onEndReachedIndexOffset:20,overscan:5,renderItem:j,wrapAround:!1})})]})};function rG(e){let t,n,i,o,s,a,u=(0,eh.c)(14),{versionError:c}=e,{t:p}=(0,r.useTranslation)("studio");return u[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsx)(r.TextWithTone,{tone:"critical",children:(0,l.jsx)(d.ErrorOutlineIcon,{})}),u[0]=t):t=u[0],u[1]!==p||u[2]!==c?(n=p(c?"timeline.error.load-document-changes-version-title":"timeline.error.load-document-changes-title"),u[1]=p,u[2]=c,u[3]=n):n=u[3],u[4]!==n?(i=(0,l.jsx)(r.TextWithTone,{size:1,tone:"critical",weight:"medium",children:n}),u[4]=n,u[5]=i):i=u[5],u[6]!==p||u[7]!==c?(o=p(c?"timeline.error.load-document-changes-version-description":"timeline.error.load-document-changes-description"),u[6]=p,u[7]=c,u[8]=o):o=u[8],u[9]!==o?(s=(0,l.jsx)(r.TextWithTone,{size:1,tone:"critical",children:o}),u[9]=o,u[10]=s):s=u[10],u[11]!==i||u[12]!==s?(a=(0,l.jsxs)(eg.Flex,{align:"flex-start",gap:3,padding:4,children:[t,(0,l.jsxs)(eg.Stack,{space:4,children:[i,s]})]}),u[11]=i,u[12]=s,u[13]=a):a=u[13],a}rU.displayName="Timeline";let rW=(0,eb.styled)(f.Popover)(nO()),rq="timeline-menu";function rK(e){let{chunk:t,mode:n,placement:i}=e,{setTimelineRange:s,timelineError:a,ready:u,timelineStore:c}=lx(),[p,m]=(0,o.useState)(!1),[h,g]=(0,o.useState)(null),[v,x]=(0,o.useState)(null),b=(0,ef.useToast)(),y=(0,r.useTimelineSelector)(c,e=>e.chunks),j=(0,r.useTimelineSelector)(c,e=>e.isLoading),w=(0,r.useTimelineSelector)(c,e=>e.hasMoreChunks),S=(0,r.useTimelineSelector)(c,e=>e.realRevChunk),C=(0,r.useTimelineSelector)(c,e=>e.sinceTime),{t:_}=(0,r.useTranslation)("studio"),I=(0,o.useCallback)(()=>{m(!0)},[]),T=(0,o.useCallback)(()=>{m(!1)},[]),R=(0,o.useCallback)(e=>{p&&("Escape"===e.key||"Tab"===e.key)&&(T(),null==h||h.focus())},[h,T,p]);(0,eg.useGlobalKeyDown)(R),(0,eg.useClickOutsideEvent)(p&&T,()=>[h,v]);let P=(0,o.useCallback)(e=>{try{let[t,n]=(null==c?void 0:c.findRangeForRev(e))||[null,null];s(t,n)}catch(e){b.push({closable:!0,description:e.message,status:"error",title:_("timeline.error.unable-to-load-revision")})}},[s,_,c,b]),E=(0,o.useCallback)(e=>{try{let[t,n]=(null==c?void 0:c.findRangeForSince(e))||[null,null];s(t,n)}catch(e){b.push({closable:!0,description:e.message,status:"error",title:_("timeline.error.unable-to-load-revision")})}},[s,_,c,b]),k=(0,o.useCallback)(()=>{j||null==c||c.loadMore()},[j,c]),D=(0,o.useMemo)(()=>{if(a)return(0,l.jsx)(rG,{});if("rev"===n)return(0,l.jsx)(rU,{chunks:y,hasMoreChunks:w,lastChunk:S,onLoadMore:k,onSelect:P});let e=S?y.filter(e=>e.index<S.index):y;return(0,l.jsx)(rU,{chunks:e,hasMoreChunks:w,lastChunk:C,onLoadMore:k,onSelect:E})},[y,k,w,n,S,P,E,C,a]),M={timestamp:{dateStyle:"medium",timeStyle:"short"}},F=t?_(rE[t.type],{context:"timestamp",timestamp:new Date(null==t?void 0:t.endTimestamp),formatParams:M}):_("timeline.latest-revision"),A=t?_("timeline.since",{timestamp:new Date(null==t?void 0:t.endTimestamp),formatParams:M}):_("timeline.since-version-missing"),L="rev"===n?F:A,V=(0,o.useMemo)(()=>({[rq]:v}),[v]);return(0,l.jsx)(eg.PortalProvider,{__unstable_elements:V,children:(0,l.jsx)(rW,{"data-testid":"timeline-menu",constrainSize:!0,content:p&&D,"data-ui":"versionMenu",open:p,placement:i,matchReferenceWidth:!0,portal:!0,ref:x,children:(0,l.jsx)(eg.Flex,{width:"fill",children:(0,l.jsx)(f.Button,{"data-testid":p?"timeline-menu-close-button":"timeline-menu-open-button",disabled:!u,mode:"ghost",onClick:p?T:I,ref:g,selected:p,width:"fill",tooltipProps:null,justify:"space-between",style:{maxWidth:"100%"},iconRight:d.ChevronDownIcon,text:u?L:_("timeline.loading-history")})})})})}let rY=(0,eb.styled)(ej.motion.path)(nB()),rX=e=>{let t,n=(0,eh.c)(2);return n[0]!==e?(t=(0,l.jsx)(ej.motion.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...e}),n[0]=e,n[1]=t):t=n[1],t},rQ=e=>{let t,n=(0,eh.c)(2);return n[0]!==e?(t=(0,l.jsx)(rY,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...e}),n[0]=e,n[1]=t):t=n[1],t},r$=e=>{let t,n=(0,eh.c)(2);return n[0]!==e?(t=(0,l.jsx)(ej.motion.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...e}),n[0]=e,n[1]=t):t=n[1],t},rJ=(0,eb.keyframes)(nH()),rZ=eb.styled.g(nN(),rJ),r0={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},r1={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},r2={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},r3={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}};function r4(e){let t,n,i,o,r,s=(0,eh.c)(13),{status:a}=e;if(!a)return null;let u="changes"===a?void 0:"";return s[0]!==a?(t=(0,l.jsx)(rQ,{variants:r2,initial:a,animate:a}),n=(0,l.jsx)(rX,{variants:r1,initial:a,animate:a}),s[0]=a,s[1]=t,s[2]=n):(t=s[1],n=s[2]),s[3]!==u||s[4]!==t||s[5]!==n?(i=(0,l.jsxs)(rZ,{"data-rotate":u,children:[t,n]}),s[3]=u,s[4]=t,s[5]=n,s[6]=i):i=s[6],s[7]!==a?(o=(0,l.jsx)(r$,{variants:r3,initial:a,animate:a}),s[7]=a,s[8]=o):o=s[8],s[9]!==a||s[10]!==i||s[11]!==o?(r=(0,l.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"animated-status-icon",children:(0,l.jsxs)(ej.motion.g,{variants:r0,initial:a,animate:a,children:[i,o]})}),s[9]=a,s[10]=i,s[11]=o,s[12]=r):r=s[12],r}let r5={saved:{i18nKey:"status-bar.document-status-pulse.status.saved.text",tone:"positive"},syncing:{i18nKey:"status-bar.document-status-pulse.status.syncing.text",tone:"default"}},r6=e=>{let t,n,i,o,s,a=(0,eh.c)(13),{status:u}=e,{t:d}=(0,r.useTranslation)(b);if("saved"!==u&&"syncing"!==u)return null;let c=r5[u];return a[0]!==u?(t=(0,l.jsx)(r4,{status:u}),a[0]=u,a[1]=t):t=a[1],a[2]!==c.tone||a[3]!==t?(n=(0,l.jsx)(r.TextWithTone,{size:1,tone:c.tone,children:t}),a[2]=c.tone,a[3]=t,a[4]=n):n=a[4],a[5]!==c.i18nKey||a[6]!==d?(i=d(c.i18nKey),a[5]=c.i18nKey,a[6]=d,a[7]=i):i=a[7],a[8]!==i?(o=(0,l.jsx)(eg.Text,{muted:!0,size:1,children:i}),a[8]=i,a[9]=o):o=a[9],a[10]!==n||a[11]!==o?(s=(0,l.jsxs)(eg.Flex,{align:"center",gap:2,"data-testid":"pane-footer-document-status-pulse",children:[n,o]}),a[10]=n,a[11]=o,a[12]=s):s=a[12],s},r8={minimal:!0,useTemporalPhrase:!0},r7=ej.motion.create(eg.Button),r9=ej.motion.create(eg.Box),se=()=>{let e,t,n=(0,eh.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)("div",{style:{margin:-5},children:(0,l.jsx)(r.AvatarSkeleton,{$size:0,animated:!0})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,l.jsxs)(eg.Flex,{align:"center",gap:3,paddingLeft:1,paddingRight:2,paddingY:2,children:[e,(0,l.jsx)(ef.Skeleton,{animated:!0,style:{width:"80px",height:"15px"},radius:2})]}),n[1]=t):t=n[1],t},st=e=>{let t,n,i,o,s,a,u,d,c=(0,eh.c)(17),{author:p,translationKey:m,timestamp:h}=e,{onHistoryOpen:g,inspector:f,onHistoryClose:v}=lx(),{t:x}=(0,r.useTranslation)(),b=(0,r.useRelativeTime)(void 0===h?"":h,r8);c[0]===Symbol.for("react.memo_cache_sentinel")?(t={opacity:1},n={opacity:0},i={opacity:0},c[0]=t,c[1]=n,c[2]=i):(t=c[0],n=c[1],i=c[2]);let y=(null==f?void 0:f.name)===lR?v:g;return c[3]!==p?(o=p&&(0,l.jsx)("div",{style:{margin:-5},children:(0,l.jsx)(r.UserAvatar,{user:p,size:0})}),c[3]=p,c[4]=o):o=c[4],c[5]!==x||c[6]!==m?(s=x(m),c[5]=x,c[6]=m,c[7]=s):s=c[7],c[8]!==b||c[9]!==s?(a=(0,l.jsxs)(eg.Text,{muted:!0,size:1,children:[s," ",b]}),c[8]=b,c[9]=s,c[10]=a):a=c[10],c[11]!==o||c[12]!==a?(u=(0,l.jsxs)(eg.Flex,{align:"center",flex:"none",gap:3,children:[o,a]}),c[11]=o,c[12]=a,c[13]=u):u=c[13],c[14]!==y||c[15]!==u?(d=(0,l.jsx)(r7,{"data-testid":"pane-footer-document-status",animate:t,initial:n,exit:i,mode:"bleed",onClick:y,padding:2,muted:!0,children:u}),c[14]=y,c[15]=u,c[16]=d):d=c[16],d},sn=()=>{var e,t,n,i,s;let{editState:a}=lx(),{selectedPerspective:u}=(0,r.usePerspective)(),d=(0,o.useMemo)(()=>{var e,t,n,i,l,o,s;return(0,r.isPublishedPerspective)(u)&&(null==a||null==(e=a.published)?void 0:e._updatedAt)?{translationKey:r.TIMELINE_ITEM_I18N_KEY_MAPPING.published.createDocumentVersion,timestamp:a.published._updatedAt}:(null==a||null==(t=a.version)?void 0:t._updatedAt)?{translationKey:(null==a||null==(n=a.version)?void 0:n._updatedAt)===(null==a||null==(i=a.version)?void 0:i._createdAt)?r.TIMELINE_ITEM_I18N_KEY_MAPPING.version.createDocumentVersion:r.TIMELINE_ITEM_I18N_KEY_MAPPING.version.editDocumentVersion,timestamp:a.version._updatedAt}:(null==a||null==(l=a.draft)?void 0:l._updatedAt)?{translationKey:(null==a||null==(o=a.draft)?void 0:o._updatedAt)===(null==a||null==(s=a.draft)?void 0:s._createdAt)?r.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.createDocumentVersion:r.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.editDocumentVersion,timestamp:a.draft._updatedAt}:null},[u,null==a||null==(e=a.published)?void 0:e._updatedAt,null==a||null==(t=a.version)?void 0:t._updatedAt,null==a||null==(n=a.version)?void 0:n._createdAt,null==a||null==(i=a.draft)?void 0:i._updatedAt,null==a||null==(s=a.draft)?void 0:s._createdAt]);return d?(0,l.jsx)(st,{author:"",translationKey:d.translationKey,timestamp:d.timestamp}):null},si=()=>{let e,t=(0,eh.c)(6),{events:n,loading:i}=(0,r.useEvents)(),o=null==n?void 0:n[0];if(!o&&i){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(se,{}),t[0]=e):e=t[0],e}if(!o){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(sn,{}),t[1]=e):e=t[1],e}let s=r.TIMELINE_ITEM_I18N_KEY_MAPPING[o.documentVariantType][o.type];return t[2]!==o.author||t[3]!==o.timestamp||t[4]!==s?(e=(0,l.jsx)(st,{author:o.author,translationKey:s,timestamp:o.timestamp}),t[2]=o.author,t[3]=o.timestamp,t[4]=s,t[5]=e):e=t[5],e},sl=()=>{let e,t,n=(0,eh.c)(8),{timelineStore:i}=lx(),o=(0,r.useTimelineSelector)(i,sr),s=(0,r.useTimelineSelector)(i,ss),a=null==o?void 0:o[0];if(!a&&s){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(se,{}),n[0]=e):e=n[0],e}if(!a){let e;return n[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(sn,{}),n[1]=e):e=n[1],e}n[2]!==a.authors?(e=Array.from(a.authors),n[2]=a.authors,n[3]=e):e=n[3];let u=e[0],d=rE[a.type];return n[4]!==u||n[5]!==a.endTimestamp||n[6]!==d?(t=(0,l.jsx)(st,{author:u,translationKey:d,timestamp:a.endTimestamp}),n[4]=u,n[5]=a.endTimestamp,n[6]=d,n[7]=t):t=n[7],t};function so(){var e,t;let n,i,s,a,u,d,c,p=(0,eh.c)(18),{documentId:m,documentType:h,editState:g,value:f}=lx(),[v,x]=(0,o.useState)(null),b=null==(t=(0,r.useSource)().beta)||null==(e=t.eventsAPI)?void 0:e.documents,y=(0,r.useSyncState)(m,h,null==g?void 0:g.release),j=null==f?void 0:f._updatedAt;return p[0]!==v||p[1]!==y.isSyncing?(n=()=>{if("syncing"===v&&!y.isSyncing){let e=setTimeout(()=>x("saved"),1e3);return()=>clearTimeout(e)}if("saved"===v){let e=setTimeout(()=>x(null),3e3);return()=>clearTimeout(e)}},p[0]=v,p[1]=y.isSyncing,p[2]=n):n=p[2],p[3]!==j||p[4]!==v||p[5]!==y.isSyncing?(i=[v,j,y.isSyncing],p[3]=j,p[4]=v,p[5]=y.isSyncing,p[6]=i):i=p[6],(0,o.useEffect)(n,i),p[7]===Symbol.for("react.memo_cache_sentinel")?(s=()=>{x(null)},p[7]=s):s=p[7],p[8]!==m?(a=[m],p[8]=m,p[9]=a):a=p[9],(0,o.useLayoutEffect)(s,a),p[10]!==y.isSyncing?(u=()=>{y.isSyncing&&x("syncing")},p[10]=y.isSyncing,p[11]=u):u=p[11],p[12]!==j||p[13]!==y.isSyncing?(d=[y.isSyncing,j],p[12]=j,p[13]=y.isSyncing,p[14]=d):d=p[14],(0,o.useLayoutEffect)(u,d),p[15]!==b||p[16]!==v?(c=(0,l.jsx)(ew.AnimatePresence,{children:v?(0,l.jsx)(r9,{paddingLeft:2,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},children:(0,l.jsx)(r6,{status:v||void 0})}):(0,l.jsx)(l.Fragment,{children:b?(0,l.jsx)(si,{}):(0,l.jsx)(sl,{})})}),p[15]=b,p[16]=v,p[17]=c):c=p[17],c}function sr(e){return e.chunks}function ss(e){return e.isLoading}let sa=(0,eb.styled)(eg.Text)(nU());function su(){let e,t,n,i,o,s=(0,eh.c)(12),{displayed:a,revisionNotFound:u}=lx(),{t:c}=(0,r.useTranslation)(),p=(null==a?void 0:a._updatedAt)||(null==a?void 0:a._createdAt);s[0]!==p||s[1]!==c?(e=p?(0,l.jsx)(r.Translate,{t:c,i18nKey:"document-status.revision-from",values:{date:(0,ty.format)(new Date(p),"MMM d, yyyy '@' pp")}}):null,s[0]=p,s[1]=c,s[2]=e):e=s[2],s[3]!==e?(t={name:"revision",text:e,tone:"caution"},s[3]=e,s[4]=t):t=s[4];let m=t;return s[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsx)(eg.Box,{flex:"none",children:(0,l.jsx)(eg.Text,{size:1,children:(0,l.jsx)(d.RestoreIcon,{})})}),s[5]=n):n=s[5],s[6]!==m||s[7]!==u||s[8]!==c?(i=u?(0,l.jsx)(r.Translate,{t:c,i18nKey:"document-status.revision-not-found"}):m.text,s[6]=m,s[7]=u,s[8]=c,s[9]=i):i=s[9],s[10]!==i?(o=(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(eg.Flex,{flex:1,gap:3,padding:2,children:[n,(0,l.jsx)(eg.Box,{flex:1,children:(0,l.jsx)(sa,{size:1,textOverflow:"ellipsis",children:i})})]})}),s[10]=i,s[11]=o):o=s[11],o}let sd=ej.motion.create(eg.Card);function sc(e){var t;let n,i,s,a,u,d,c,p,m=(0,eh.c)(22),{actionsBoxRef:h,createLinkMetadata:g}=e,{editState:f,onChange:v,revisionNotFound:x}=lx(),{params:b}=lj(),y=void 0===b?l_:b,{selectedPerspective:j}=(0,r.usePerspective)(),{title:w}=lE(),S=null==(t=(0,r.useSanityCreateConfig)().components)?void 0:t.documentLinkedActions,C=!!y.rev,[_,I]=(0,o.useState)(null),[T,R]=(0,o.useState)(null);m[0]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{I(e.contentRect.width<480)},m[0]=n):n=m[0];let P=n;m[1]!==T?(i={element:T,onResize:P},m[1]=T,m[2]=i):i=m[2],function(e){let t,n,i=(0,eh.c)(4),{element:l,onResize:s}=e;i[0]!==l||i[1]!==s?(t=()=>(l&&r.resizeObserver.observe(l,s),()=>{l&&r.resizeObserver.unobserve(l)}),n=[l,s],i[0]=l,i[1]=s,i[2]=t,i[3]=n):(t=i[2],n=i[3]),(0,o.useLayoutEffect)(t,n)}(i);e:{let e=!!((null==f?void 0:f.ready)&&"boolean"==typeof _);if(j){if((0,r.isPublishedPerspective)(j)){s=e&&!!(null==f?void 0:f.published);break e}if((0,r.isReleaseDocument)(j)){s=e&&!!(null==f?void 0:f.version);break e}}s=e}let E=s;if(g&&(0,r.isSanityCreateLinked)(g)&&S){let e;m[3]!==S||m[4]!==g||m[5]!==v||m[6]!==w?(e=(0,l.jsx)(S,{metadata:g,panelPortalElementId:oB,onDocumentChange:v,documentTitle:w}),m[3]=S,m[4]=g,m[5]=v,m[6]=w,m[7]=e):e=m[7],a=e}else if(C){let e;m[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(rr,{}),m[8]=e):e=m[8],a=e}else{let e;m[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(ro,{}),m[9]=e):e=m[9],a=e}if(C&&x)return null;let k=C?"revision":"published";m[10]===Symbol.for("react.memo_cache_sentinel")?(u={opacity:.2},m[10]=u):u=m[10],m[11]===Symbol.for("react.memo_cache_sentinel")?(d={opacity:1,transition:{duration:.3}},m[11]=d):d=m[11];let D=C?"caution":void 0;return m[12]!==a||m[13]!==h||m[14]!==_||m[15]!==E||m[16]!==C?(c=E&&(0,l.jsxs)(eg.Flex,{align:"stretch",gap:1,justify:"space-between",paddingLeft:+!C,paddingRight:+!C,children:[(0,l.jsxs)(eg.Flex,{align:"center",flex:1,gap:_?2:3,wrap:"wrap",paddingRight:3,children:[(0,l.jsxs)(eg.Flex,{align:"center",children:[C?(0,l.jsx)(su,{}):(0,l.jsx)(so,{}),(0,l.jsx)(rv,{})]}),(0,l.jsx)(rj,{})]}),(0,l.jsxs)(eg.Flex,{align:"flex-start",justify:"flex-end",ref:h,style:{flexShrink:0,marginLeft:"auto"},children:[(0,l.jsx)(rv,{}),a]})]}),m[12]=a,m[13]=h,m[14]=_,m[15]=E,m[16]=C,m[17]=c):c=m[17],m[18]!==k||m[19]!==D||m[20]!==c?(p=(0,l.jsx)(sd,{initial:u,animate:d,tone:D,radius:3,ref:R,sizing:"border",padding:2,children:c},k),m[18]=k,m[19]=D,m[20]=c,m[21]=p):p=m[21],p}let sp=(0,o.memo)(function(e){let t,n,i,o,s,a,u,d,c,p,m,h,g,f=(0,eh.c)(26);f[0]!==e?({actionsBoxElement:t,activeIndex:n,as:p,children:i,id:o,onActionStart:s,onKeyDown:a,rootRef:d,states:c,...u}=e,f[0]=e,f[1]=t,f[2]=n,f[3]=i,f[4]=o,f[5]=s,f[6]=a,f[7]=u,f[8]=d,f[9]=c,f[10]=p):(t=f[1],n=f[2],i=f[3],o=f[4],s=f[5],a=f[6],u=f[7],d=f[8],c=f[9],p=f[10]);let v=void 0===p?"div":p,x=c[n];f[11]!==s||f[12]!==a||f[13]!==c?(m=e=>{let t=c.filter(t=>t.shortcut&&(0,th.isHotkey)(t.shortcut,e)),n=t[0];if(t.length>1&&console.warn('Keyboard shortcut conflict: More than one document action matches the shortcut "'.concat(n.shortcut,'"')),n&&!n.disabled&&n.onHandle){e.preventDefault(),n.onHandle(),s(c.indexOf(n));return}a&&a(e)},f[11]=s,f[12]=a,f[13]=c,f[14]=m):m=f[14];let b=m;return f[15]!==t||f[16]!==x?(h=x&&x.dialog&&(0,l.jsx)(r.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,l.jsx)(oY,{dialog:x.dialog,referenceElement:t})}),f[15]=t,f[16]=x,f[17]=h):h=f[17],f[18]!==v||f[19]!==i||f[20]!==b||f[21]!==o||f[22]!==u||f[23]!==d||f[24]!==h?(g=(0,l.jsxs)(v,{id:o,onKeyDown:b,tabIndex:-1,...u,ref:d,children:[i,h]}),f[18]=v,f[19]=i,f[20]=b,f[21]=o,f[22]=u,f[23]=d,f[24]=h,f[25]=g):g=f[25],g}),sm=(0,o.memo)(e=>{let t,n,i,r,s,a,u,d,c=(0,eh.c)(20);c[0]!==e?({actionsBoxElement:t,as:r,children:n,...i}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=i,c[4]=r):(t=c[1],n=c[2],i=c[3],r=c[4]);let p=void 0===r?"div":r,{actions:m,editState:h,isInitialValueLoading:g,revisionId:f}=lx(),[v,x]=(0,o.useState)(-1);c[5]===Symbol.for("react.memo_cache_sentinel")?(s=e=>{x(e)},c[5]=s):s=c[5];let b=s;c[6]!==h||c[7]!==g||c[8]!==f?(a=h&&{...h,onComplete:sh,revision:f||void 0,initialValueResolved:!g},c[6]=h,c[7]=g,c[8]=f,c[9]=a):a=c[9];let y=a;c[10]!==t||c[11]!==v||c[12]!==p||c[13]!==n||c[14]!==i?(u=e=>{let{states:o}=e;return(0,l.jsx)(sp,{...i,activeIndex:v,actionsBoxElement:t,as:p,onActionStart:b,states:o,children:n})},c[10]=t,c[11]=v,c[12]=p,c[13]=n,c[14]=i,c[15]=u):u=c[15];let j=u;return y&&m?(c[16]!==y||c[17]!==m||c[18]!==j?(d=(0,l.jsx)(aP,{actionProps:y,actions:m,children:j}),c[16]=y,c[17]=m,c[18]=j,c[19]=d):d=c[19],d):null});function sh(){}function sg(e){let t,n,i,o,s,a,u,d=(0,eh.c)(23),{documentType:c,value:p,currentMinWidth:m,paneKey:h,minWidth:g}=e,{t:f}=(0,r.useTranslation)();return d[0]!==c?(t={documentType:c},d[0]=c,d[1]=t):t=d[1],d[2]!==f||d[3]!==t?(n=(0,l.jsx)(r.Translate,{t:f,i18nKey:"panes.document-pane.document-unknown-type.title",values:t}),d[2]=f,d[3]=t,d[4]=n):n=d[4],d[5]!==c||d[6]!==f?(i=c&&(0,l.jsx)(eg.Text,{as:"p",children:(0,l.jsx)(r.Translate,{t:f,i18nKey:"panes.document-pane.document-unknown-type.text",values:{documentType:c}})}),d[5]=c,d[6]=f,d[7]=i):i=d[7],d[8]!==c||d[9]!==f?(o=!c&&(0,l.jsx)(eg.Text,{as:"p",children:f("panes.document-pane.document-unknown-type.without-schema.text")}),d[8]=c,d[9]=f,d[10]=o):o=d[10],d[11]!==p?(s=r.isDev&&p&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eg.Text,{as:"p",children:"Here is the JSON representation of the document:"}),(0,l.jsx)(eg.Card,{padding:3,overflow:"auto",radius:2,shadow:1,tone:"inherit",children:(0,l.jsx)(eg.Code,{language:"json",size:[1,1,2],children:JSON.stringify(p,null,2)})})]}),d[11]=p,d[12]=s):s=d[12],d[13]!==i||d[14]!==o||d[15]!==s?(a=(0,l.jsxs)(eg.Stack,{space:4,children:[i,o,s]}),d[13]=i,d[14]=o,d[15]=s,d[16]=a):a=d[16],d[17]!==m||d[18]!==g||d[19]!==h||d[20]!==n||d[21]!==a?(u=(0,l.jsx)(lm,{currentMinWidth:m,flex:2.5,minWidth:g,paneKey:h,title:n,tone:"caution",children:a}),d[17]=m,d[18]=g,d[19]=h,d[20]=n,d[21]=a,d[22]=u):u=d[22],u}sm.displayName="Memo(DocumentActionShortcuts)";let sf=["fixed","fixed","absolute"];function sv(e){let t,n,i,o,s,a,u=(0,eh.c)(16),{documentPanelPortalElement:d,setFooterElement:c,setActionsBoxElement:p}=e,m=(0,r.useZIndex)(),{value:h}=lx();u[0]!==d?(t={[oB]:d},u[0]=d,u[1]=t):t=u[1];let g=t;u[2]!==h?(n=(0,r.getSanityCreateLinkMetadata)(h),u[2]=h,u[3]=n):n=u[3];let v=n;return u[4]!==v||u[5]!==p?(i=(0,l.jsx)(f.TooltipDelayGroupProvider,{children:(0,l.jsx)(sc,{actionsBoxRef:p,createLinkMetadata:v})}),u[4]=v,u[5]=p,u[6]=i):i=u[6],u[7]!==c||u[8]!==i?(o=(0,l.jsx)(i8,{ref:c,padding:1,children:i}),u[7]=c,u[8]=i,u[9]=o):o=u[9],u[10]!==o||u[11]!==m.portal?(s=(0,l.jsx)(ef.DialogProvider,{position:sf,zOffset:m.portal,children:o}),u[10]=o,u[11]=m.portal,u[12]=s):s=u[12],u[13]!==g||u[14]!==s?(a=(0,l.jsx)(eg.PortalProvider,{__unstable_elements:g,children:s}),u[13]=g,u[14]=s,u[15]=a):a=u[15],a}let sx=[],sb=["fixed","fixed","absolute"],sy=(0,eb.styled)(r.ChangeConnectorRoot)(nG());function sj(){let{changesOpen:e,displayed:t,documentId:n,documentType:i,editState:s,fieldActions:a,focusPath:u,inspectOpen:c,inspector:p,inspectors:m,onFocus:h,onHistoryOpen:g,onMenuAction:f,onPathOpen:v,paneKey:x,schemaType:y,value:j,previewUrl:w}=lx(),{params:S}=lj(),{features:C}=lC(),{t:_}=(0,r.useTranslation)(b),{collapsed:I}=iN(),T=(0,r.useZIndex)(),[R,P]=(0,o.useState)(null),[E,k]=(0,o.useState)(null),[D,M]=(0,o.useState)(null),[F,A]=(0,o.useState)(null),[L,V]=(0,o.useState)(null);(0,r.useGlobalCopyPasteElementHandler)({element:R,focusPath:u,value:j});let[z,O]=(0,o.useState)([]),[B,H]=(0,o.useState)([]),N=(0,ef.useElementRect)(E),U=(0,ef.useElementRect)(D),G=null==N?void 0:N.height,W=null==U?void 0:U.height,q=600+320*!!p,K=320+320*!!p,Y=(0,o.useMemo)(()=>null==m?void 0:m.find(e=>e.name===(null==p?void 0:p.name)),[m,null==p?void 0:p.name]),X=lS({displayed:t,documentId:n,editState:s}),Q=!!j,$=(0,o.useMemo)(()=>(function(e){let t=function(e){let{currentInspector:t,hasValue:n,inspectors:i,inspectorMenuItems:l}=e;return i.map((e,i)=>{var o;let r=l[i];return!r||r.hidden?null:{action:"".concat(lI).concat(e.name),group:r.showAsAction?void 0:"inspectors",icon:r.icon,disabled:!n,selected:(null==t?void 0:t.name)===e.name,shortcut:null==(o=r.hotkeys)?void 0:o.join("+"),showAsAction:r.showAsAction,title:r.title,tone:r.tone}}).filter(Boolean)}(e),n=[function(e){let{previewUrl:t,t:n}=e;return t?{action:"production-preview",group:"links",title:n("production-preview.menu-item.title"),icon:d.EarthAmericasIcon,shortcut:"Ctrl+Alt+O"}:null}(e),function(e){let{documentIdStack:t,t:n}=e,i=typeof(null==t?void 0:t.previousId)>"u"&&{reason:n("compare-versions.menu-item.disabled-reason")};return{action:"compareVersions",group:"inspectors",title:n("compare-versions.menu-item.title"),icon:d.TransferIcon,disabled:i}}(e)].filter(Boolean);return[{action:"copy-document-url",showAsAction:!0,title:e.t("action.copy-document-url.label"),icon:d.LinkIcon},...t,function(e){let{hasValue:t,t:n}=e;return{action:"inspect",group:"inspectors",title:n("document-inspector.menu-item.title"),icon:d.JsonIcon,disabled:!t,shortcut:"Ctrl+Alt+I"}}(e),...n]})({currentInspector:Y,features:C,hasValue:Q,inspectorMenuItems:z,inspectors:m,previewUrl:w,documentIdStack:X,t:_}),[Y,X,C,Q,z,m,w,_]),J=(0,o.useCallback)(e=>{for(let t of $)if(t.shortcut&&(0,th.isHotkey)(t.shortcut,e)){e.preventDefault(),e.stopPropagation(),f(t);return}},[f,$]),Z=(0,o.useCallback)(e=>{v(e),h(e)},[v,h]);return y?(0,l.jsxs)(r.GetFormValueProvider,{value:j,children:[m.length>0&&(0,l.jsx)(lP,{documentId:n,documentType:i,inspectors:m,onMenuItems:O}),a.length>0&&y&&(0,l.jsx)(r.FieldActionsResolver,{actions:a,documentId:n,documentType:i,onActions:H,path:sx,schemaType:y}),(0,l.jsx)(r.FieldActionsProvider,{actions:B,path:sx,children:(0,l.jsxs)(sm,{actionsBoxElement:F,as:iq,currentMinWidth:q,"data-testid":"document-pane",flex:2.5,id:x,minWidth:K,onKeyUp:J,rootRef:P,children:[(0,l.jsx)(rh,{ref:M,menuItems:$}),(0,l.jsx)(ef.DialogProvider,{position:sb,zOffset:T.paneDialog,children:(0,l.jsx)(eg.Flex,{direction:"column",flex:1,height:I?void 0:"fill",children:(0,l.jsx)(sy,{"data-testid":"change-connector-root",isReviewChangesOpen:e&&(null==S?void 0:S.changesInspectorTab)==="review",onOpenReviewChanges:g,onSetFocus:Z,children:(0,l.jsx)(oM,{footerHeight:G||null,headerHeight:W||null,isInspectOpen:c,rootElement:R,setDocumentPanelPortalElement:V,footer:(0,l.jsx)(sv,{documentPanelPortalElement:L,setFooterElement:k,setActionsBoxElement:A})})})})}),(0,l.jsx)(lD,{})]})})]}):(0,l.jsx)(sg,{currentMinWidth:q,documentType:i,minWidth:K,paneKey:x,value:j})}let sw=(e,t)=>{let n,i,l,s,a=(0,eh.c)(11),u=(0,r.useHistoryStore)(),[d,c]=(0,o.useState)(null),[p,m]=(0,o.useState)(!1);a[0]!==e||a[1]!==t?(n={documentId:e,documentType:t},a[0]=e,a[1]=t,a[2]=n):n=a[2];let h=(0,r.useTimelineStore)(n),g=(0,r.useTimelineSelector)(h,sS);return a[3]!==e||a[4]!==u||a[5]!==g?(i=()=>{g&&e?(m(!0),u.getDocumentAtRevision(e,g).then(e=>{c(e||null),m(!1)}).catch(()=>{c(null),m(!1)})):(c(null),m(!1))},l=[e,g,u],a[3]=e,a[4]=u,a[5]=g,a[6]=i,a[7]=l):(i=a[6],l=a[7]),(0,o.useEffect)(i,l),a[8]!==d||a[9]!==p?(s={lastRevisionDocument:d,loading:p},a[8]=d,a[9]=p,a[10]=s):s=a[10],s};function sS(e){return e.lastNonDeletedRevId}let sC=(0,to.defineEvent)({name:"DocumentURLCopied",version:1,description:"User copied document URL to clipboard"});function s_(e){let t=(0,r.isRecord)(e)&&"string"==typeof e.message?e.message:"Unknown error";throw Error("An error was thrown while trying to get your preview url: ".concat(t))}let sI=(0,o.memo)(e=>{let{children:t,index:n,pane:i,paneKey:u,onFocusPath:d,forcedVersion:c,historyStore:p}=e,{store:m,error:h,ready:g,revisionDocument:f,onOlderRevision:v,sinceDocument:x,isPristine:y,revisionId:j,lastNonDeletedRevId:w}=p,S=(0,r.useSchema)(),{setDocumentMeta:C}=(0,r.useCopyPaste)(),{document:{actions:_,badges:I,unstable_fieldActions:T,unstable_languageFilter:R,drafts:{enabled:P}}}=(0,r.useSource)(),E=(0,tn.useTelemetry)(),k=lj(),D=k.setParams,{push:M}=(0,ef.useToast)(),{options:F,menuItemGroups:A=lT,title:L=null,views:V=[]}=i,z=(0,r.useUnique)(F),O=z.id,B=(0,s.getPublishedId)(O),H=F.type,N=(0,r.useUnique)(k.params)||l_,{buildStudioUrl:U}=(0,r.useStudioUrl)(),G=(0,r.usePerspective)(),{document:{drafts:{enabled:W}}}=(0,r.useWorkspace)(),{selectedReleaseId:q,selectedPerspectiveName:K}=(0,o.useMemo)(()=>c||{selectedPerspectiveName:G.selectedPerspectiveName,selectedReleaseId:G.selectedReleaseId},[c,G.selectedPerspectiveName,G.selectedReleaseId]),Y=ix(),X=(e=>{let t,n,i=(0,eh.c)(13),{paneOptions:l,documentType:o,documentId:s,params:a}=e,u=(0,r.useTemplates)(),d=lj(),c=(0,r.useUnique)(d.payload);i[0]!==o||i[1]!==l.template||i[2]!==l.templateParameters||i[3]!==c||i[4]!==a.template||i[5]!==u?(t=function(e,t){let n=t.panePayload||{},i=t.templateName;t.urlTemplate&&i&&i!==t.urlTemplate&&console.warn('Conflicting templates: URL says "'.concat(t.urlTemplate,'", structure node says "').concat(i,'". Using "').concat(i,'".'));let l=i||t.urlTemplate,o=e.filter(e=>e.schemaType===t.documentType),r={...t.templateParams,..."object"==typeof n&&n||{}},s=l;return l||1!==o.length||(s=o[0].id),{templateName:s,templateParams:r}}(u,{documentType:o,templateName:l.template,templateParams:l.templateParameters,panePayload:c,urlTemplate:a.template}),i[0]=o,i[1]=l.template,i[2]=l.templateParameters,i[3]=c,i[4]=a.template,i[5]=u,i[6]=t):t=i[6];let{templateName:p,templateParams:m}=t;i[7]!==s||i[8]!==o||i[9]!==a.version||i[10]!==p||i[11]!==m?(n={documentId:s,documentType:o,templateName:p,templateParams:m,version:a.version},i[7]=s,i[8]=o,i[9]=a.version,i[10]=p,i[11]=m,i[12]=n):n=i[12];let h=(0,r.useInitialValue)(n);return(0,r.useUnique)(h)})({paneOptions:z,documentId:B,documentType:H,params:N}),Q=X.loading,{changesOpen:$,currentInspector:J,inspectors:Z,closeInspector:ee,openInspector:et,handleHistoryClose:en,handleHistoryOpen:ei,handleInspectorAction:el,inspectOpen:eo,handleLegacyInspectClose:er}=function(e){let{documentId:t,documentType:n,params:i,setParams:l}=e,{features:s}=lC(),a=(0,r.useSource)().document.inspectors,u=(0,o.useMemo)(()=>a({documentId:t,documentType:n}),[t,n,a]),[d,c]=(0,o.useState)(()=>i.inspect||null),p=(0,o.useRef)(i.inspect);(0,o.useEffect)(()=>{p.current!==i.inspect&&(p.current=i.inspect,c(i.inspect||null))},[i.inspect]);let m=(0,o.useMemo)(()=>null==u?void 0:u.find(e=>e.name===d),[u,d]),h=(0,o.useMemo)(()=>u.find(e=>e.name===lR),[u]),g=(null==m?void 0:m.name)===lR,f=(0,o.useCallback)(e=>{let t=e&&u.find(t=>t.name===e);if(e&&!t)return void console.warn('No inspector named "'.concat(e,'"'));if(m){var n,o,r,s;if(t){let e=null!=(o=null==(n=t.onClose)?void 0:n.call(t,{params:i}))?o:{params:i};c(null),p.current=void 0,l({...e.params,inspect:void 0});return}if(m){let e=null!=(s=null==(r=m.onClose)?void 0:r.call(m,{params:i}))?s:{params:i};c(null),p.current=void 0,l({...e.params,inspect:void 0})}}},[m,u,i,l]),v=(0,o.useCallback)((e,t)=>{var n,o,r,s;let a=u.find(t=>t.name===e);if(!a)return void console.warn('No inspector named "'.concat(e,'"'));if((null==m?void 0:m.name)===a.name)return void l({...i,...t,inspect:a.name});let d=i;m&&(d=(null!=(r=null==(n=a.onClose)?void 0:n.call(a,{params:d}))?r:{params:d}).params);let h=null!=(s=null==(o=a.onOpen)?void 0:o.call(a,{params:d}))?s:{params:d};c(a.name),p.current=a.name,l({...h.params,...t,inspect:a.name})},[m,u,i,l]),x=(0,o.useCallback)(()=>{h&&f(h.name)},[f,h]),b=(0,o.useCallback)(()=>{s.reviewChanges&&h&&v(h.name,{changesInspectorTab:"review"})},[s.reviewChanges,v,h]),y="on"===i.inspect,j=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!y;l(e?{...i,inspect:"on"}:{...i,inspect:void 0})},[y,i,l]),w=(0,o.useCallback)(()=>j(!1),[j]),S=(0,o.useCallback)(e=>{if("inspect"===e.action)return j(!0),!0;if("string"!=typeof e.action)return!1;let t=e.action.slice(lI.length),n=u.find(e=>e.name===t);return!!n&&(n.name===d?f(n.name):v(n.name),!0)},[f,d,u,v,j]);return{changesOpen:g,currentInspector:m,inspectors:u,closeInspector:f,openInspector:v,handleHistoryClose:x,handleHistoryOpen:b,handleInspectorAction:S,handleLegacyInspectClose:w,inspectOpen:y}}({documentId:B,documentType:H,params:N,setParams:D}),[es,ea]=(0,o.useState)(!1),{lastRevisionDocument:eu}=sw(B,H),ed=(0,o.useCallback)(e=>!!g&&!(null==e?void 0:e.draft)&&!(null==e?void 0:e.published)&&!(null==e?void 0:e.version)&&!y,[g,y]),ec=(0,o.useCallback)(e=>$?x||(null==e?void 0:e.published):(null==e?void 0:e.published)||null,[$,x]),ep=S.get(H),em=(0,o.useCallback)(e=>{let t=ed(e);return!!N.rev||es||t||!(0,r.isPerspectiveWriteable)({selectedPerspective:G.selectedPerspective,isDraftModelEnabled:W,schemaType:ep}).result},[ed,es,W,N.rev,G.selectedPerspective,ep]),eg=(0,o.useCallback)(e=>v?f||{_id:e._id,_type:e._type}:!e._createdAt&&!e._updatedAt&&w&&eu?eu:e,[v,f,w,eu]),{editState:ev,connectionState:ex,focusPath:eb,onChange:ey,validation:ej,ready:ew,value:eC,formState:e_,permissions:eI,onPathOpen:eT,isPermissionsLoading:eR,formStateRef:eP,onProgrammaticFocus:eE,collapsedFieldSets:eD,collapsedPaths:eF,onBlur:eV,onFocus:ez,onSetActiveFieldGroup:eO,onSetCollapsedPath:eB,onSetCollapsedFieldSet:eH,openPath:eN}=(0,r.useDocumentForm)({changesOpen:$,documentType:H,documentId:B,initialValue:X,comparisonValue:ec,releaseId:q,selectedPerspectiveName:K,initialFocusPath:N.path?(0,e7.fromString)(N.path):r.EMPTY_ARRAY,readOnly:em,onFocusPath:d,getFormDocumentValue:eg}),{data:eU=[]}=(0,r.useActiveReleases)(),eG=(0,o.useCallback)(()=>{let e;switch(!0){case!!N.rev:e="revision";break;case q&&(0,s.isVersionId)(eC._id):{let t=eU.find(e=>(0,r.getReleaseIdFromReleaseDocumentId)(e._id)===q);e=t&&(0,r.isCardinalityOneRelease)(t)?"scheduled-draft":"version";break}case"published"===K:e="published";break;case P:e="draft";break;default:e="published"}return e},[N.rev,q,eC._id,K,P,eU]),eW=(0,o.useMemo)(()=>eG(),[eG]),eK=(0,o.useMemo)(()=>({schemaType:H,documentId:B,versionType:eW,releaseId:q}),[H,B,eW,q]),eY=(0,o.useMemo)(()=>_(eK),[_,eK]),eX=(0,o.useMemo)(()=>I({schemaType:H,documentId:B}),[I,B,H]),eJ=(0,o.useMemo)(()=>R({schemaType:H,documentId:B}),[B,H,R]),eZ=(0,r.useUnique)(V),e0=N.view||eZ[0]&&eZ[0].id||null,e1=function(e){let t,n,i,l,s=(0,eh.c)(6),{resolveProductionUrl:a}=(0,r.useSource)().document;s[0]===Symbol.for("react.memo_cache_sentinel")?(t=new eQ.BehaviorSubject(void 0),s[0]=t):t=s[0];let u=t;return s[1]!==e?(n=()=>{u.next(e)},i=[u,e],s[1]=e,s[2]=n,s[3]=i):(n=s[2],i=s[3]),(0,o.useEffect)(n,i),s[4]!==a?(l=u.asObservable().pipe((0,eA.distinctUntilChanged)(),(0,eM.debounceTime)(500),(0,eL.switchMap)(e=>(0,r.isRecord)(e)&&"string"==typeof e._id&&"string"==typeof e._type?(0,e$.from)(a({document:e})):(0,eq.of)(void 0)),(0,eA.distinctUntilChanged)(),(0,ek.catchError)(s_)),s[4]=a,s[5]=l):l=s[5],(0,eS.useObservable)(l)}(eC),{t:e2}=(0,r.useTranslation)(b),e3=(0,o.useMemo)(()=>ep?T({documentId:B,documentType:H,schemaType:ep}):[],[B,H,T,ep]),e4=ew&&(!N.rev||g||!!h),e5=(0,o.useMemo)(()=>eg(eC),[eg,eC]),{previousId:e6}=lS({displayed:e5,documentId:B,editState:ev}),e8=(0,o.useCallback)((e,t)=>{D({...N,since:e,rev:t||void 0})},[N,D]),e9=(0,o.useCallback)(()=>k.closeCurrent(),[k]),te=(0,o.useCallback)(()=>k.duplicateCurrent(),[k]),tt=(0,o.useCallback)(async e=>{if("production-preview"===e.action&&e1)return window.open(e1),!0;if("copy-document-url"===e.action&&navigator){E.log(sC);let e=U({coreUi:e=>"".concat(e,"/intent/edit/id=").concat(B,";type=").concat(H)});return await navigator.clipboard.writeText(e),M({id:"copy-document-url",status:"info",title:e2("panes.document-operation-results.operation-success_copy-url")}),!0}return"reviewChanges"===e.action?(ei(),!0):(("inspect"===e.action||"string"==typeof e.action&&e.action.startsWith(lI))&&el(e),"compareVersions"===e.action&&"u">typeof e6&&(Y.navigateDiffView({mode:"version",previousDocument:{type:H,id:e6},nextDocument:{type:H,id:eC._id}}),!0))},[e1,e6,E,U,M,e2,B,H,ei,el,Y,eC._id]);(0,o.useEffect)(()=>{C({documentId:B,documentType:H,schemaType:ep,onChange:ey})},[B,H,ep,ey,C]);let ti=(0,o.useMemo)(()=>ec(ev),[ev,ec]),tl=(0,o.useMemo)(()=>ed(ev),[ev,ed]),to=v&&!f,tr=(0,o.useMemo)(()=>ev.version&&(0,r.isGoingToUnpublish)(ev.version)?ev.published:e5,[ev.version,ev.published,e5]),ts=(0,o.useMemo)(()=>({actions:eY,activeViewId:e0,badges:eX,changesOpen:$,closeInspector:ee,collapsedFieldSets:eD,collapsedPaths:eF,compareValue:ti,connectionState:ex,displayed:tr,documentId:B,documentIdRaw:O,documentType:H,editState:ev,fieldActions:e3,focusPath:eb,inspector:J||null,inspectors:Z,onBlur:eV,onChange:ey,onFocus:ez,onPathOpen:eT,onHistoryClose:en,onHistoryOpen:ei,onInspectClose:er,onMenuAction:tt,onPaneClose:e9,onPaneSplit:te,onSetActiveFieldGroup:eO,onSetCollapsedPath:eB,onSetCollapsedFieldSet:eH,openInspector:et,openPath:eN,index:n,inspectOpen:eo,validation:ej,menuItemGroups:A||[],paneKey:u,previewUrl:e1,ready:e4,schemaType:ep,isPermissionsLoading:eR,isInitialValueLoading:Q,permissions:eI,setTimelineRange:e8,setIsDeleting:ea,isDeleting:es,isDeleted:tl,timelineError:h,timelineStore:m,title:L,value:eC,selectedReleaseId:q,views:eZ,formState:e_,unstable_languageFilter:eJ,revisionId:j,revisionNotFound:to,lastNonDeletedRevId:w,lastRevisionDocument:eu}),[eY,e0,eX,$,ee,eD,eF,ti,ex,tr,B,O,H,ev,e3,eb,J,Z,eV,ey,ez,eT,en,ei,er,tt,e9,te,eO,eB,eH,et,eN,n,eo,ej,A,u,e1,e4,ep,eR,Q,eI,e8,es,tl,h,m,L,eC,q,eZ,e_,eJ,j,to,w,eu]),ta=(0,o.useRef)(void 0);return(0,o.useEffect)(()=>{if(e4&&N.path){let{path:t,...n}=N;if(t!==ta.current){var e;eE((0,e7.resolveKeyedPath)(null==(e=eP.current)?void 0:e.value,(0,e7.fromString)(t)))}k.setParams(n)}ta.current=N.path},[eP,eE,k,N,e4]),(0,l.jsx)(a.DocumentPaneContext.Provider,{value:ts,children:t})});sI.displayName="Memo(DocumentPaneProvider)";let sT=e=>{var t,n,i,o,a,u;let d,c,p,m,h,g,f,v=(0,eh.c)(37),{params:x}=lj(),b=void 0===x?l_:x,y=sW(e.pane.options,b),j=(0,r.useSchema)(),w=y.type,S=!!(null==(t=j.get(y.type))?void 0:t.liveEdit),{selectedPerspectiveName:C,selectedReleaseId:_,selectedPerspective:I}=(0,r.usePerspective)(),{data:T}=(0,r.useArchivedReleases)();v[0]!==y.id?(d=(0,s.getPublishedId)(y.id),v[0]=y.id,v[1]=d):d=v[1];let R=(0,r.useEditState)(d,w,"default",_),P=S&&"drafts"===I&&!(null==R?void 0:R.draft),{rev:E,since:k}=b,D=b.historyVersion;e:{if(P){let e;v[2]!==y.id?(e=(0,s.getPublishedId)(y.id),v[2]=y.id,v[3]=e):e=v[3],c=e;break e}if(D&&T.some(e=>(0,r.getReleaseIdFromReleaseDocumentId)(e._id)===D)){let e;v[4]!==D||v[5]!==y.id?(e=(0,s.getVersionId)(y.id,D),v[4]=D,v[5]=y.id,v[6]=e):e=v[6],c=e;break e}if(typeof C>"u"){let e;v[7]!==y.id?(e=(0,s.getDraftId)(y.id),v[7]=y.id,v[8]=e):e=v[8],c=e;break e}if("published"===C){let e;v[9]!==y.id?(e=(0,s.getPublishedId)(y.id),v[9]=y.id,v[10]=e):e=v[10],c=e;break e}if(_){let e;v[11]!==y.id||v[12]!==C?(e=(0,s.getVersionId)(y.id,C),v[11]=y.id,v[12]=C,v[13]=e):e=v[13],c=e;break e}c=y.id}let M=c;v[14]!==M||v[15]!==y.type||v[16]!==E||v[17]!==k?(p={documentId:M,documentType:y.type,rev:E,since:k},v[14]=M,v[15]=y.type,v[16]=E,v[17]=k,v[18]=p):p=v[18];let F=(0,r.useEventsStore)(p),A=F.error,L=(null==(n=F.revision)?void 0:n.revisionId)||null,V=!!(E&&!(null==(i=F.revision)?void 0:i.loading)),z=(null==(o=F.revision)?void 0:o.document)||null,O=(null==(a=F.sinceRevision)?void 0:a.document)||null,B=!F.loading,H=0===F.events.length;v[19]!==F.events?(m=(null==(u=F.events.find(sR))?void 0:u.id)||null,v[19]=F.events,v[20]=m):m=v[20],v[21]!==F.error||v[22]!==H||v[23]!==m||v[24]!==L||v[25]!==V||v[26]!==z||v[27]!==O||v[28]!==B?(h={error:A,revisionId:L,onOlderRevision:V,revisionDocument:z,sinceDocument:O,ready:B,isPristine:H,lastNonDeletedRevId:m},v[21]=F.error,v[22]=H,v[23]=m,v[24]=L,v[25]=V,v[26]=z,v[27]=O,v[28]=B,v[29]=h):h=v[29];let N=h;return v[30]!==N||v[31]!==D||v[32]!==e?(g=D?(0,l.jsx)(r.PerspectiveProvider,{selectedPerspectiveName:D,excludedPerspectives:r.EMPTY_ARRAY,children:(0,l.jsx)(sI,{...e,historyStore:N})}):(0,l.jsx)(sI,{...e,historyStore:N}),v[30]=N,v[31]=D,v[32]=e,v[33]=g):g=v[33],v[34]!==g||v[35]!==F?(f=(0,l.jsx)(r.EventsProvider,{value:F,children:g}),v[34]=g,v[35]=F,v[36]=f):f=v[36],f};function sR(e){return!(0,r.isDeleteDocumentGroupEvent)(e)&&!(0,r.isDeleteDocumentVersionEvent)(e)}let sP=e=>{let t,n,i,a,u=(0,eh.c)(20),{pane:d}=e,c=lj(),p=sW(d.options,c.params),m=c.params||l_,[h,g]=(0,o.useState)(null);u[0]!==p.id?(t=(0,s.getPublishedId)(p.id),u[0]=p.id,u[1]=t):t=u[1],u[2]!==p.type||u[3]!==m.rev||u[4]!==m.since||u[5]!==t?(n={documentId:t,documentType:p.type,onError:g,rev:m.rev,since:m.since},u[2]=p.type,u[3]=m.rev,u[4]=m.since,u[5]=t,u[6]=n):n=u[6];let f=(0,r.useTimelineStore)(n),v=(0,r.useTimelineSelector)(f,sE),x=(0,r.useTimelineSelector)(f,sk),b=(0,r.useTimelineSelector)(f,sD),y=(0,r.useTimelineSelector)(f,sM),j=(0,r.useTimelineSelector)(f,sF),w=(0,r.useTimelineSelector)(f,sA),S=(0,r.useTimelineSelector)(f,sL),C=(null==x?void 0:x.id)||null,_=!!w;u[7]!==S||u[8]!==v||u[9]!==f||u[10]!==C||u[11]!==y||u[12]!==b||u[13]!==_||u[14]!==h||u[15]!==j?(i={store:f,error:h,revisionId:C,onOlderRevision:v,revisionDocument:y,sinceDocument:b,ready:j,isPristine:_,lastNonDeletedRevId:S},u[7]=S,u[8]=v,u[9]=f,u[10]=C,u[11]=y,u[12]=b,u[13]=_,u[14]=h,u[15]=j,u[16]=i):i=u[16];let I=i;return u[17]!==I||u[18]!==e?(a=(0,l.jsx)(sI,{...e,historyStore:I}),u[17]=I,u[18]=e,u[19]=a):a=u[19],a};function sE(e){return e.onOlderRevision}function sk(e){return e.revTime}function sD(e){return e.sinceAttributes}function sM(e){return e.timelineDisplayed}function sF(e){return e.timelineReady}function sA(e){return e.isPristine}function sL(e){return e.lastNonDeletedRevId}let sV=e=>{let t,n,i,l=(0,eh.c)(13),{documentId:s}=e,u=(0,o.useContext)(a.RawPerspectiveContext);l[0]!==s?(t={documentId:s},l[0]=s,l[1]=t):t=l[1];let{data:d,loading:c}=(0,r.useDocumentVersions)(t),p=(0,r.useSetPerspective)();return l[2]!==d||l[3]!==c||l[4]!==u||l[5]!==p?(n=()=>{if(!(c||!u||!(0,r.isCardinalityOnePerspective)(u.selectedPerspective))){if(!(null==d?void 0:d.length))return void p(void 0);d.map(sB).includes(u.selectedReleaseId)||p(void 0)}},l[2]=d,l[3]=c,l[4]=u,l[5]=p,l[6]=n):n=l[6],l[7]!==s||l[8]!==d||l[9]!==c||l[10]!==u||l[11]!==p?(i=[s,u,d,c,p],l[7]=s,l[8]=d,l[9]=c,l[10]=u,l[11]=p,l[12]=i):i=l[12],(0,o.useEffect)(n,i),null};function sz(e){let t,n,i,s,u=(0,eh.c)(21),{children:d,documentId:c}=e,p=(0,o.useContext)(a.RawPerspectiveContext),m=(0,o.useContext)(a.PerspectiveContext);u[0]!==c?(t={documentId:c},u[0]=c,u[1]=t):t=u[1];let{data:h,loading:g}=(0,r.useDocumentVersions)(t),{document:f}=(0,r.useWorkspace)(),{drafts:v}=f,{enabled:x}=v,b=x?r.LATEST:r.PUBLISHED;e:{let e;if(!p||!m||!(0,r.isCardinalityOnePerspective)(p.selectedPerspective)){n=m;break e}if(g||!(null==h?void 0:h.length)){let e;u[2]!==b||u[3]!==m?(e={...m,selectedPerspective:b,selectedPerspectiveName:void 0,selectedReleaseId:void 0},u[2]=b,u[3]=m,u[4]=e):e=u[4],n=e;break e}if(!h.map(sO).includes(p.selectedReleaseId)){let e;u[5]!==b||u[6]!==m?(e={...m,selectedPerspective:b,selectedPerspectiveName:void 0,selectedReleaseId:void 0},u[5]=b,u[6]=m,u[7]=e):e=u[7],n=e;break e}u[8]!==m||u[9]!==p.selectedPerspective||u[10]!==p.selectedPerspectiveName||u[11]!==p.selectedReleaseId?(e={...m,selectedPerspective:p.selectedPerspective,selectedPerspectiveName:p.selectedPerspectiveName,selectedReleaseId:p.selectedReleaseId},u[8]=m,u[9]=p.selectedPerspective,u[10]=p.selectedPerspectiveName,u[11]=p.selectedReleaseId,u[12]=e):e=u[12],n=e}let y=n;if(!y){let e;return u[13]!==d?(e=(0,l.jsx)(l.Fragment,{children:d}),u[13]=d,u[14]=e):e=u[14],e}return u[15]!==c?(i=(0,l.jsx)(sV,{documentId:c}),u[15]=c,u[16]=i):i=u[16],u[17]!==d||u[18]!==i||u[19]!==y?(s=(0,l.jsxs)(a.PerspectiveContext.Provider,{value:y,children:[d,i]}),u[17]=d,u[18]=i,u[19]=y,u[20]=s):s=u[20],s}function sO(e){return(0,s.getVersionFromId)(e)}function sB(e){return(0,s.getVersionFromId)(e)}let sH=(0,o.memo)(e=>{var t,n,i,o,a,u;let d,c,p,m=(0,eh.c)(8),h=(0,r.useSource)();m[0]!==e.itemId?(d=(0,s.getPublishedId)(e.itemId),m[0]=e.itemId,m[1]=d):d=m[1];let g=d;return m[2]!==e||m[3]!==(null==(n=h.beta)||null==(t=n.eventsAPI)?void 0:t.documents)?(c=(null==(o=h.beta)||null==(i=o.eventsAPI)?void 0:i.documents)?(0,l.jsx)(sT,{...e}):(0,l.jsx)(sP,{...e}),m[2]=e,m[3]=null==(u=h.beta)||null==(a=u.eventsAPI)?void 0:a.documents,m[4]=c):c=m[4],m[5]!==g||m[6]!==c?(p=(0,l.jsx)(sz,{documentId:g,children:c}),m[5]=g,m[6]=c,m[7]=p):p=m[7],p});sH.displayName="Memo(DocumentPaneProviderWrapper)";let sN=(0,o.memo)(function(e){let t,n,i=(0,eh.c)(5),{name:o}=(0,r.useSource)(),s=e.pane.source||o;return i[0]!==e?(t=(0,l.jsx)(r.CopyPasteProvider,{children:(0,l.jsx)(sU,{...e})}),i[0]=e,i[1]=t):t=i[1],i[2]!==s||i[3]!==t?(n=(0,l.jsx)(r.SourceProvider,{name:s,children:t}),i[2]=s,i[3]=t,i[4]=n):n=i[4],n});function sU(e){var t,n,i,s;let a,u,d,c,p,m,h,g,f,v,x=(0,eh.c)(57),{pane:y,paneKey:j}=e,{resolveNewDocumentOptions:w}=(0,r.useSource)().document,{selectedPerspectiveName:S}=(0,r.usePerspective)(),C=lj(),_=sW(y.options,C.params),{documentType:I,isLoaded:T}=(0,r.useDocumentType)(_.id,_.type);!function(){let e,t,n,i,l,s=(0,eh.c)(10),{params:a,setParams:u}=lj(),d=void 0===a?l_:a,{selectedPerspectiveName:c}=(0,r.usePerspective)(),p=(0,o.useRef)(!1);s[0]!==d||s[1]!==u?(e=e=>{["since","historyVersion","rev","preserveRev"].some(e=>d[e])&&u({...d,rev:"true"===d.preserveRev?d.rev:void 0,preserveRev:void 0,since:void 0,historyVersion:void 0})},s[0]=d,s[1]=u,s[2]=e):e=s[2];let m=(0,tj.useEffectEvent)(e);s[3]!==c||s[4]!==m?(t=()=>{p.current&&m(c)},s[3]=c,s[4]=m,s[5]=t):t=s[5],s[6]!==c?(n=[c],s[6]=c,s[7]=n):n=s[7],(0,o.useEffect)(t,n),s[8]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(p.current=!0,()=>{p.current=!1}),l=[],s[8]=i,s[9]=l):(i=s[8],l=s[9]),(0,o.useEffect)(i,l)}();let R=function(){let e,t=(0,eh.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={pick:iE,defaultComponent:sj},t[0]=e):e=t[0],(0,r.useMiddlewareComponents)(e)}();x[0]!==_.id||x[1]!==_.type||x[2]!==w?(a=w({type:"document",documentId:_.id,schemaType:_.type}),x[0]=_.id,x[1]=_.type,x[2]=w,x[3]=a):a=x[3];let P=a;x[4]!==P?(u={templateItems:P},x[4]=P,x[5]=u):u=x[5];let[E,k]=(0,r.useTemplatePermissions)(u),D=T&&!k;x[6]!==I||x[7]!==D||x[8]!==_||x[9]!==e?(d=D&&I&&_.type!==I?(n=e,i=_,s=I,{...n,pane:{...n.pane,options:{...i,type:s}}}):e,x[6]=I,x[7]=D,x[8]=_,x[9]=e,x[10]=d):d=x[10];let M=d,{ReferenceChildLink:F,handleEditReference:A,groupIndex:L,routerPanesState:V}=C;x[11]!==L||x[12]!==V?(c=(null==(t=V[L+1])?void 0:t[0].params)||{},x[11]=L,x[12]=V,x[13]=c):c=x[13];let z=c,O=V.length,{parentRefPath:B}=z;x[14]!==L||x[15]!==B||x[16]!==O?(p=B?{path:(0,e7.fromString)(B),state:L>=O-1?"none":L>=O-2?"selected":"pressed"}:{path:[],state:"none"},x[14]=L,x[15]=B,x[16]=O,x[17]=p):p=x[17];let H=p,{t:N}=(0,r.useTranslation)(b);if("*"===_.type&&!D){let e,t;return x[18]!==N?(e=N("panes.document-pane.document-not-found.loading"),x[18]=N,x[19]=e):e=x[19],x[20]!==j||x[21]!==e?(t=(0,l.jsx)(lv,{flex:2.5,minWidth:320,paneKey:j,title:e}),x[20]=j,x[21]=e,x[22]=t):t=x[22],t}if(!I){let e,t,n,i,o;return x[23]!==N?(e=N("panes.document-pane.document-not-found.title"),x[23]=N,x[24]=e):e=x[24],x[25]!==_.id?(t={id:_.id},x[25]=_.id,x[26]=t):t=x[26],x[27]===Symbol.for("react.memo_cache_sentinel")?(n={Code:sG},x[27]=n):n=x[27],x[28]!==N||x[29]!==t?(i=(0,l.jsx)(eg.Stack,{space:4,children:(0,l.jsx)(eg.Text,{as:"p",children:(0,l.jsx)(r.Translate,{t:N,i18nKey:"panes.document-pane.document-not-found.text",values:t,components:n})})}),x[28]=N,x[29]=t,x[30]=i):i=x[30],x[31]!==j||x[32]!==e||x[33]!==i?(o=(0,l.jsx)(lm,{flex:2.5,minWidth:320,paneKey:j,title:e,children:i}),x[31]=j,x[32]=e,x[33]=i,x[34]=o):o=x[34],o}let U="".concat(I,"-").concat(_.id,"-").concat(S||"");return x[35]!==R||x[36]!==_.id||x[37]!==_.type?(m=(0,l.jsx)(R,{documentId:_.id,documentType:_.type}),x[35]=R,x[36]=_.id,x[37]=_.type,x[38]=m):m=x[38],x[39]!==_.id||x[40]!==_.type||x[41]!==m?(h=(0,l.jsx)(lb,{documentId:_.id,documentType:_.type,children:m}),x[39]=_.id,x[40]=_.type,x[41]=m,x[42]=h):h=x[42],x[43]!==_.id||x[44]!==_.type||x[45]!==h?(g=(0,l.jsx)(iH,{documentId:_.id,documentType:_.type,children:h}),x[43]=_.id,x[44]=_.type,x[45]=h,x[46]=g):g=x[46],x[47]!==F||x[48]!==H||x[49]!==A||x[50]!==g||x[51]!==E?(f=(0,l.jsx)(r.ReferenceInputOptionsProvider,{EditReferenceLinkComponent:F,onEditReference:A,initialValueTemplateItems:E,activePath:H,children:g}),x[47]=F,x[48]=H,x[49]=A,x[50]=g,x[51]=E,x[52]=f):f=x[52],x[53]!==M||x[54]!==U||x[55]!==f?(v=(0,l.jsx)(sH,{...M,children:f},U),x[53]=M,x[54]=U,x[55]=f,x[56]=v):v=x[56],v}function sG(e){let{children:t}=e;return(0,l.jsx)("code",{children:t})}function sW(e,t){let n,i,l=(0,eh.c)(8);l[0]!==t?(n=void 0===t?{}:t,l[0]=t,l[1]=n):n=l[1];let o=n,s=(0,r.useTemplates)();e:{let t,n;if(e.type&&"*"!==e.type){i=e;break e}let r=e.template||o.template;l[2]!==r||l[3]!==s?(t=r?s.find(e=>e.id===r):void 0,l[2]=r,l[3]=s,l[4]=t):t=l[4];let a=null==t?void 0:t.schemaType;if(!a){i=e;break e}l[5]!==a||l[6]!==e?(n={...e,type:a},l[5]=a,l[6]=e,l[7]=n):n=l[7],i=n}return i}let sq=(0,o.forwardRef)(function(e,t){let n,i,r,s=(0,eh.c)(9),{routerPanesState:u,groupIndex:d}=(0,o.useContext)(a.PaneRouterContext);s[0]!==d||s[1]!==u?(n=u.slice(0,d),s[0]=d,s[1]=u,s[2]=n):n=s[2];let c=n;s[3]!==c?(i={panes:c},s[3]=c,s[4]=i):i=s[4];let p=i;return s[5]!==e||s[6]!==t||s[7]!==p?(r=(0,l.jsx)(eC.StateLink,{...e,ref:t,state:p}),s[5]=e,s[6]=t,s[7]=p,s[8]=r):r=s[8],r}),sK=(0,o.forwardRef)(function(e,t){let n,i,r,s,u,d,c=(0,eh.c)(19);c[0]!==e?({childId:n,childPayload:r,childParameters:i,...s}=e,c[0]=e,c[1]=n,c[2]=i,c[3]=r,c[4]=s):(n=c[1],i=c[2],r=c[3],s=c[4]);let{routerPanesState:p,groupIndex:m}=(0,o.useContext)(a.PaneRouterContext);if(c[5]!==n||c[6]!==i||c[7]!==r||c[8]!==m||c[9]!==p){let e;c[11]!==n||c[12]!==i||c[13]!==r?(e=[{id:n,params:i,payload:r}],c[11]=n,c[12]=i,c[13]=r,c[14]=e):e=c[14],u={panes:[...p.slice(0,m+1),e]},c[5]=n,c[6]=i,c[7]=r,c[8]=m,c[9]=p,c[10]=u}else u=c[10];return c[15]!==t||c[16]!==s||c[17]!==u?(d=(0,l.jsx)(eC.StateLink,{...s,ref:t,state:u}),c[15]=t,c[16]=s,c[17]=u,c[18]=d):d=c[18],d}),sY=(0,o.forwardRef)(function(e,t){let n,i,s,u,d,c,p,m=(0,eh.c)(20),{routerPanesState:h,groupIndex:g,siblingIndex:f}=(0,o.useContext)(a.PaneRouterContext);m[0]!==e?({params:n,payload:i,...s}=e,m[0]=e,m[1]=n,m[2]=i,m[3]=s):(n=m[1],i=m[2],s=m[3]);let v=(0,r.useUnique)(n),x=(0,r.useUnique)(i),b=h[g],y=b[f],j=null!=v?v:y.params,w=null!=x?x:y.payload;m[4]!==y||m[5]!==j||m[6]!==w?(u={...y,params:j,payload:w},m[4]=y,m[5]=j,m[6]=w,m[7]=u):u=m[7];let S=u;m[8]!==b||m[9]!==S||m[10]!==f?(d=[...b.slice(0,f),S,...b.slice(f+1)],m[8]=b,m[9]=S,m[10]=f,m[11]=d):d=m[11];let C=d;m[12]!==h||m[13]!==g||m[14]!==C?(c={panes:[...h.slice(0,g),C,...h.slice(g+1)]},m[12]=h,m[13]=g,m[14]=C,m[15]=c):c=m[15];let _=c;return m[16]!==_||m[17]!==t||m[18]!==s?(p=(0,l.jsx)(eC.StateLink,{ref:t,...s,state:_}),m[16]=_,m[17]=t,m[18]=s,m[19]=p):p=m[19],p}),sX=(0,o.forwardRef)(function(e,t){let n,i,o,r,s,a,u,d,c,p,m=(0,eh.c)(22);m[0]!==e?({documentId:i,documentType:o,parentRefPath:r,children:n,template:a,...s}=e,m[0]=e,m[1]=n,m[2]=i,m[3]=o,m[4]=r,m[5]=s,m[6]=a):(n=m[1],i=m[2],o=m[3],r=m[4],s=m[5],a=m[6]);let h=null==a?void 0:a.params;return m[7]!==r?(u=(0,e7.toString)(r),m[7]=r,m[8]=u):u=m[8],m[9]!==a?(d=a&&{template:null==a?void 0:a.id},m[9]=a,m[10]=d):d=m[10],m[11]!==o||m[12]!==u||m[13]!==d?(c={type:o,parentRefPath:u,...d},m[11]=o,m[12]=u,m[13]=d,m[14]=c):c=m[14],m[15]!==n||m[16]!==i||m[17]!==t||m[18]!==s||m[19]!==h||m[20]!==c?(p=(0,l.jsx)(sK,{...s,ref:t,childId:i,childPayload:h,childParameters:c,children:n}),m[15]=n,m[16]=i,m[17]=t,m[18]=s,m[19]=h,m[20]=c,m[21]=p):p=m[21],p}),sQ=[];function s$(e){let t,n,i,o,r,s,u,d,c,p,m,h,g,f=(0,eh.c)(60),{children:v,flatIndex:x,index:b,params:y,payload:j,siblingIndex:w}=e,{navigate:S,navigateIntent:C,resolvePathFromState:_}=(0,eC.useRouter)(),I=(0,eC.useRouterState)(),{panes:T,expand:R}=iN(),P=(null==I?void 0:I.panes)||sQ,E=null==T?void 0:T[T.length-2],k=b-1;f[0]!==k||f[1]!==P||f[2]!==I||f[3]!==w?(t=e=>{let t=P[k]||[],n=t[w],i=e(t,n),l=[...P.slice(0,k),i,...P.slice(k+1)];return{...I,panes:l}},f[0]=k,f[1]=P,f[2]=I,f[3]=w,f[4]=t):t=f[4];let D=t;f[5]!==D||f[6]!==S?(n=e=>{let t=D(e);return setTimeout(()=>S(t),0),t},f[5]=D,f[6]=S,f[7]=n):n=f[7];let M=n;f[8]!==D||f[9]!==_||f[10]!==w?(i=e=>_(D((t,n)=>[...t.slice(0,w),{...n,params:e},...t.slice(w+1)])),f[8]=D,f[9]=_,f[10]=w,f[11]=i):i=f[11];let F=i;f[12]!==M||f[13]!==w?(o=e=>{M((t,n)=>[...t.slice(0,w),{...n,payload:e},...t.slice(w+1)])},f[12]=M,f[13]=w,f[14]=o):o=f[14];let A=o;f[15]!==M||f[16]!==w?(r=e=>{M((t,n)=>[...t.slice(0,w),{...n,params:e},...t.slice(w+1)])},f[15]=M,f[16]=w,f[17]=r):r=f[17];let L=r;f[18]!==k||f[19]!==S||f[20]!==P?(s=e=>{let{id:t,parentRefPath:n,type:i,template:l,version:o}=e;S({panes:[...P.slice(0,k+1),[{id:t,params:{template:l.id,parentRefPath:(0,e7.toString)(n),type:i,version:o},payload:l.params}]]})},f[18]=k,f[19]=S,f[20]=P,f[21]=s):s=f[21];let V=s,z=!!P[k]&&P[k].length>1,O=P[k]?P[k].length:0,B=x?sq:void 0;f[22]!==M?(d=e=>{let t=void 0===e?{}:e;M(()=>[{id:t.id||"",payload:t.payload,params:t.params||{}}])},u=()=>{M(sJ)},f[22]=M,f[23]=u,f[24]=d):(u=f[23],d=f[24]),f[25]!==R||f[26]!==k||f[27]!==E||f[28]!==S||f[29]!==P?(c=e=>{(void 0===e||e)&&E&&R(E.element),S({panes:P.slice(0,k)})},f[25]=R,f[26]=k,f[27]=E,f[28]=S,f[29]=P,f[30]=c):c=f[30],f[31]!==M||f[32]!==w?(p=e=>{M((t,n)=>{let i={...n,payload:(null==e?void 0:e.payload)||n.payload,params:(null==e?void 0:e.params)||n.params};return[...t.slice(0,w),i,...t.slice(w)]})},f[31]=M,f[32]=w,f[33]=p):p=f[33],f[34]!==y||f[35]!==L?(m=e=>{let t=(0,e_.default)(y,"view");return L(e?{...t,view:e}:t)},f[34]=y,f[35]=L,f[36]=m):m=f[36],f[37]!==F||f[38]!==x||f[39]!==k||f[40]!==V||f[41]!==C||f[42]!==y||f[43]!==j||f[44]!==P||f[45]!==L||f[46]!==A||f[47]!==w||f[48]!==u||f[49]!==c||f[50]!==p||f[51]!==m||f[52]!==z||f[53]!==O||f[54]!==B||f[55]!==d?(h={index:x,groupIndex:k,siblingIndex:w,payload:j,params:y,hasGroupSiblings:z,groupLength:O,routerPanesState:P,ChildLink:sK,BackLink:B,ReferenceChildLink:sX,handleEditReference:V,ParameterizedLink:sY,replaceCurrent:d,closeCurrent:u,closeCurrentAndAfter:c,duplicateCurrent:p,setView:m,setParams:L,setPayload:A,createPathWithParams:F,navigateIntent:C},f[37]=F,f[38]=x,f[39]=k,f[40]=V,f[41]=C,f[42]=y,f[43]=j,f[44]=P,f[45]=L,f[46]=A,f[47]=w,f[48]=u,f[49]=c,f[50]=p,f[51]=m,f[52]=z,f[53]=O,f[54]=B,f[55]=d,f[56]=h):h=f[56];let H=h;return f[57]!==v||f[58]!==H?(g=(0,l.jsx)(a.PaneRouterContext.Provider,{value:H,children:v}),f[57]=v,f[58]=H,f[59]=g):g=f[59],g}function sJ(e,t){return e.length>1?e.filter(e=>e!==t):e}function sZ(e){let t,n,i,o,s,a=(0,eh.c)(14),{isSelected:u,pane:d,paneKey:c}=e;a[0]!==d?(t=(0,r.isRecord)(d)&&d.type||null,a[0]=d,a[1]=t):t=a[1];let p=t,{t:m}=(0,r.useTranslation)(b);return a[2]!==m?(n=m("panes.unknown-pane-type.title"),a[2]=m,a[3]=n):n=a[3],a[4]!==n?(i=(0,l.jsx)(li,{title:n}),a[4]=n,a[5]=i):i=a[5],a[6]!==m||a[7]!==p?(o=(0,l.jsx)(iX,{children:(0,l.jsx)(eg.Box,{padding:4,children:"string"==typeof p?(0,l.jsx)(eg.Text,{as:"p",muted:!0,children:(0,l.jsx)(r.Translate,{t:m,i18nKey:"panes.unknown-pane-type.unknown-type.text",values:{type:p}})}):(0,l.jsx)(eg.Text,{as:"p",muted:!0,children:(0,l.jsx)(r.Translate,{t:m,i18nKey:"panes.unknown-pane-type.missing-type.text"})})})}),a[6]=m,a[7]=p,a[8]=o):o=a[8],a[9]!==u||a[10]!==c||a[11]!==i||a[12]!==o?(s=(0,l.jsxs)(iq,{id:c,selected:u,children:[i,o]}),a[9]=u,a[10]=c,a[11]=i,a[12]=o,a[13]=s):s=a[13],s}let s0={component:(0,o.lazy)(()=>e.A(12245)),document:(0,o.lazy)(()=>Promise.resolve().then(function(){return dr})),documentList:(0,o.lazy)(()=>Promise.resolve().then(function(){return ds})),list:(0,o.lazy)(()=>e.A(737880))},s1=(0,o.memo)(function(e){let t,n,i,r,s=(0,eh.c)(23),{active:a,childItemId:u,groupIndex:d,index:c,itemId:p,pane:m,paneKey:h,params:g,payload:f,path:v,selected:x,siblingIndex:b}=e,y=s0[m.type]||sZ;s[0]!==h||s[1]!==v||s[2]!==x?(t=(0,l.jsx)(lv,{paneKey:h,path:v,selected:x}),s[0]=h,s[1]=v,s[2]=x,s[3]=t):t=s[3];let j=u||"";return s[4]!==y||s[5]!==a||s[6]!==c||s[7]!==p||s[8]!==m||s[9]!==h||s[10]!==x||s[11]!==j?(n=(0,l.jsx)(y,{childItemId:j,index:c,itemId:p,isActive:a,isSelected:x,paneKey:h,pane:m}),s[4]=y,s[5]=a,s[6]=c,s[7]=p,s[8]=m,s[9]=h,s[10]=x,s[11]=j,s[12]=n):n=s[12],s[13]!==t||s[14]!==n?(i=(0,l.jsx)(o.Suspense,{fallback:t,children:n}),s[13]=t,s[14]=n,s[15]=i):i=s[15],s[16]!==d||s[17]!==c||s[18]!==g||s[19]!==f||s[20]!==b||s[21]!==i?(r=(0,l.jsx)(s$,{flatIndex:c,index:d,params:g,payload:f,siblingIndex:b,children:i}),s[16]=d,s[17]=c,s[18]=g,s[19]=f,s[20]=b,s[21]=i,s[22]=r):r=s[22],r},(e,t)=>{let{params:n={},payload:i=null,...l}=e,{params:o={},payload:r=null,...s}=t;if(!(0,eI.default)(n,o)||!(0,eI.default)(i,r))return!1;for(let e of new Set([...Object.keys(l),...Object.keys(s)]))if(l[e]!==s[e])return!1;return!0});function s2(e){let t,n,i=(0,eh.c)(10),{document:o}=e,s=(0,r.useSchema)().get(o._type),{t:a}=(0,r.useTranslation)(b),{title:u}=lE();if(!s){let e,t;return i[0]!==o._type||i[1]!==a?(e=a("doc-title.unknown-schema-type.text",{schemaType:o._type}),i[0]=o._type,i[1]=a,i[2]=e):e=i[2],i[3]!==e?(t=(0,l.jsx)("code",{children:e}),i[3]=e,i[4]=t):t=i[4],t}return i[5]!==a||i[6]!==u?(t=u||(0,l.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:a("doc-title.fallback.text")}),i[5]=a,i[6]=u,i[7]=t):t=i[7],i[8]!==t?(n=(0,l.jsx)(l.Fragment,{children:t}),i[8]=t,i[9]=n):n=i[9],n}let s3=(0,eb.styled)(eg.Box)(nW()),s4=eb.styled.details(nq(),s3),s5=eb.styled.summary(nK()),s6=eb.styled.table(nY(),e=>{let{theme:t}=e;return(0,eg.rem)(t.sanity.space[2])},e=>{let{theme:t}=e;return(0,eg.rem)(t.sanity.space[1])},e=>{let{theme:t}=e;return(0,eg.rem)(t.sanity.space[1])}),s8=(0,eb.styled)(eg.Flex)(nX()),s7=e=>{let t,n,i,o,s,a,u=(0,eh.c)(13),{t:c}=(0,r.useTranslation)(b),p=e.totalCount-e.references.length;return p?(u[0]!==p||u[1]!==c?(t=c("confirm-delete-dialog.other-reference-count.title",{count:p}),u[0]=p,u[1]=c,u[2]=t):t=u[2],u[3]!==t?(n=(0,l.jsx)(eg.Text,{size:1,muted:!0,children:t}),u[3]=t,u[4]=n):n=u[4],u[5]!==c?(i=c("confirm-delete-dialog.other-reference-count.tooltip"),u[5]=c,u[6]=i):i=u[6],u[7]===Symbol.for("react.memo_cache_sentinel")?(o=(0,l.jsx)(eg.Text,{size:1,muted:!0,children:(0,l.jsx)(d.InfoOutlineIcon,{})}),u[7]=o):o=u[7],u[8]!==i?(s=(0,l.jsx)(f.Tooltip,{portal:!0,placement:"top",content:i,children:o}),u[8]=i,u[9]=s):s=u[9],u[10]!==n||u[11]!==s?(a=(0,l.jsx)(eg.Box,{padding:2,children:(0,l.jsxs)(eg.Inline,{space:2,children:[n,s]})}),u[10]=n,u[11]=s,u[12]=a):a=u[12],a):null};function s9(e){let t,n,i,o,s,a,u=(0,eh.c)(27),{icon:d,layout:c,presence:p,schemaType:m,value:h}=e,g=(0,r.useDocumentVersionInfo)(h._id),{perspectiveStack:v}=(0,r.usePerspective)();u[0]!==v||u[1]!==e.documentPreviewStore||u[2]!==m||u[3]!==h._id?(t=(0,r.getPreviewStateObservable)(e.documentPreviewStore,m,h._id,v),u[0]=v,u[1]=e.documentPreviewStore,u[2]=m,u[3]=h._id,u[4]=t):t=u[4];let x=t;u[5]===Symbol.for("react.memo_cache_sentinel")?(n={snapshot:null,isLoading:!0,original:null},u[5]=n):n=u[5];let{snapshot:b,original:y,isLoading:j}=(0,eS.useObservable)(x,n);u[6]!==j||u[7]!==p||u[8]!==g.draft||u[9]!==g.published||u[10]!==g.versions?(i=j?null:(0,l.jsx)(f.TooltipDelayGroupProvider,{children:(0,l.jsxs)(eg.Flex,{align:"center",gap:3,children:[p&&p.length>0&&(0,l.jsx)(r.DocumentPreviewPresence,{presence:p}),(0,l.jsx)(r.DocumentStatusIndicator,{draft:g.draft,published:g.published,versions:g.versions})]})}),u[6]=j,u[7]=p,u[8]=g.draft,u[9]=g.published,u[10]=g.versions,u[11]=i):i=u[11];let w=i;u[12]!==g.draft||u[13]!==g.published||u[14]!==g.versions?(o=(0,l.jsx)(r.DocumentStatus,{draft:g.draft,published:g.published,versions:g.versions}),u[12]=g.draft,u[13]=g.published,u[14]=g.versions,u[15]=o):o=u[15];let S=o;return u[16]!==y||u[17]!==b||u[18]!==h?(s=(0,r.getPreviewValueWithFallback)({snapshot:b,original:y,fallback:h}),u[16]=y,u[17]=b,u[18]=h,u[19]=s):s=u[19],u[20]!==d||u[21]!==j||u[22]!==c||u[23]!==w||u[24]!==s||u[25]!==S?(a=(0,l.jsx)(r.SanityDefaultPreview,{...s,isPlaceholder:j,icon:d,layout:c,status:w,tooltip:S}),u[20]=d,u[21]=j,u[22]=c,u[23]=w,u[24]=s,u[25]=S,u[26]=a):a=u[26],a}let ae=[];function at(e){let t,n,i,o,a=(0,eh.c)(16),{onClick:u,type:d,value:c}=e,p=null==c?void 0:c._id;a[0]!==p?(t=(0,s.getPublishedId)(p),a[0]=p,a[1]=t):t=a[1];let m=(0,r.useDocumentPresence)(t),h=(0,r.useDocumentPreviewStore)(),{ReferenceChildLink:g}=lj();a[2]!==g||a[3]!==(null==d?void 0:d.name)||a[4]!==(null==c?void 0:c._id)?(n=function(e){return(0,l.jsx)(g,{documentId:null==c?void 0:c._id,documentType:null==d?void 0:d.name,parentRefPath:ae,...e})},a[2]=g,a[3]=null==d?void 0:d.name,a[4]=null==c?void 0:c._id,a[5]=n):n=a[5];let f=n,v=null==d?void 0:d.icon,x=(null==m?void 0:m.length)>0?m:ae;return a[6]!==h||a[7]!==v||a[8]!==x||a[9]!==d||a[10]!==c?(i=(0,l.jsx)(s9,{documentPreviewStore:h,icon:v,layout:"compact",presence:x,schemaType:d,value:c}),a[6]=h,a[7]=v,a[8]=x,a[9]=d,a[10]=c,a[11]=i):i=a[11],a[12]!==u||a[13]!==f||a[14]!==i?(o=(0,l.jsx)(r.PreviewCard,{__unstable_focusRing:!0,as:f,"data-as":"a",onClick:u,radius:2,children:i}),a[12]=u,a[13]=f,a[14]=i,a[15]=o):o=a[15],o}function an(e){let t,n,i,o,s,a,u,c,p,m,h,g,v,x,y,j,w=(0,eh.c)(59),{crossDatasetReferences:S,internalReferences:C,documentTitle:_,totalCount:I,action:T,datasetNames:R,hasUnknownDatasetNames:P,onReferenceLinkClick:E}=e,k=(0,r.useSchema)(),D=(0,ef.useToast)(),{t:M}=(0,r.useTranslation)(b);w[0]!==E||w[1]!==k||w[2]!==M?(t=e=>{let t=k.get(e._type);return t?(0,l.jsx)(at,{type:t,value:e,onClick:E}):(0,l.jsx)(eg.Box,{padding:2,children:(0,l.jsx)(r.SanityDefaultPreview,{icon:d.UnknownIcon,title:M("confirm-delete-dialog.preview-item.preview-unavailable.title"),subtitle:M("confirm-delete-dialog.preview-item.preview-unavailable.subtitle",{documentId:e._id}),layout:"default"})})},w[0]=E,w[1]=k,w[2]=M,w[3]=t):t=w[3];let F=t;if((null==C?void 0:C.totalCount)===0&&(null==S?void 0:S.totalCount)===0){let e,t;return w[4]!==_?(e={DocumentTitle:()=>(0,l.jsx)("strong",{children:_})},w[4]=_,w[5]=e):e=w[5],w[6]!==T||w[7]!==M||w[8]!==e?(t=(0,l.jsx)(eg.Text,{as:"p",size:1,children:(0,l.jsx)(r.Translate,{t:M,i18nKey:"confirm-delete-dialog.confirmation.text",context:T,components:e})}),w[6]=T,w[7]=M,w[8]=e,w[9]=t):t=w[9],t}w[10]!==P?(n=P?["unavailable"]:[],w[10]=P,w[11]=n):n=w[11],w[12]!==R||w[13]!==n?(i=[...R,...n],w[12]=R,w[13]=n,w[14]=i):i=w[14];let A=i,L=A.length,V=A.join(", "),z=P&&A.length?"unavailable":"";w[15]!==A.length||w[16]!==M||w[17]!==V||w[18]!==z?(o=M("confirm-delete-dialog.cdr-summary.subtitle",{count:L,datasets:V,context:z}),w[15]=A.length,w[16]=M,w[17]=V,w[18]=z,w[19]=o):o=w[19];let O=o;return w[20]===Symbol.for("react.memo_cache_sentinel")?(s=(0,l.jsx)(eg.Text,{"aria-hidden":"true",size:1,children:(0,l.jsx)(d.WarningOutlineIcon,{})}),w[20]=s):s=w[20],w[21]!==_?(a={DocumentTitle:()=>_},w[21]=_,w[22]=a):a=w[22],w[23]!==I?(u={count:I},w[23]=I,w[24]=u):u=w[24],w[25]!==M||w[26]!==u||w[27]!==a?(c=(0,l.jsx)(eg.Card,{padding:3,radius:2,tone:"caution",flex:"none",children:(0,l.jsxs)(eg.Flex,{children:[s,(0,l.jsx)(eg.Box,{flex:1,marginLeft:3,children:(0,l.jsx)(eg.Text,{size:1,children:(0,l.jsx)(r.Translate,{i18nKey:"confirm-delete-dialog.referring-document-count.text",components:a,t:M,values:u})})})]})}),w[25]=M,w[26]=u,w[27]=a,w[28]=c):c=w[28],w[29]!==_?(p={DocumentTitle:()=>_},w[29]=_,w[30]=p):p=w[30],w[31]!==T||w[32]!==M||w[33]!==p?(m=(0,l.jsx)(eg.Box,{flex:"none",children:(0,l.jsx)(eg.Text,{size:1,children:(0,l.jsx)(r.Translate,{i18nKey:"confirm-delete-dialog.referring-documents-descriptor.text",t:M,context:T,components:p})})}),w[31]=T,w[32]=M,w[33]=p,w[34]=m):m=w[34],w[35]!==C||w[36]!==F?(h=C.totalCount>0&&(0,l.jsxs)(eg.Stack,{as:"ul",marginBottom:2,space:2,"data-testid":"internal-references",children:[null==C?void 0:C.references.map(e=>(0,l.jsx)(eg.Box,{as:"li",children:F(e)},e._id)),C.totalCount>C.references.length&&(0,l.jsx)(eg.Box,{as:"li",padding:3,children:(0,l.jsx)(s7,{...C})})]}),w[35]=C,w[36]=F,w[37]=h):h=w[37],w[38]!==S||w[39]!==O||w[40]!==C.totalCount||w[41]!==A.length||w[42]!==M||w[43]!==D?(g=S.totalCount>0&&(0,l.jsxs)(s4,{"data-testid":"cross-dataset-references",style:{borderTop:C.totalCount>0?"1px solid var(--card-shadow-outline-color)":void 0},children:[(0,l.jsx)(s5,{children:(0,l.jsx)(eg.Card,{as:"a",marginTop:2*(C.totalCount>0),radius:2,shadow:1,paddingY:1,children:(0,l.jsxs)(eg.Flex,{align:"center",gap:3,paddingX:3,paddingY:1,children:[(0,l.jsx)(eg.Text,{size:1,children:(0,l.jsx)(d.DocumentsIcon,{})}),(0,l.jsxs)(eg.Stack,{space:2,children:[(0,l.jsx)(eg.Text,{textOverflow:"ellipsis",size:1,children:M("confirm-delete-dialog.cdr-summary.title",{count:A.length,documentCount:M("confirm-delete-dialog.cdr-summary.document-count",{count:S.totalCount})})}),(0,l.jsx)(eg.Text,{title:O,textOverflow:"ellipsis",size:1,muted:!0,children:O})]}),(0,l.jsx)(s3,{children:(0,l.jsx)(eg.Text,{muted:!0,size:1,children:(0,l.jsx)(d.ChevronDownIcon,{})})})]})})}),(0,l.jsxs)(eg.Box,{overflow:"auto",paddingTop:2,children:[(0,l.jsxs)(s6,{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:(0,l.jsx)(eg.Text,{muted:!0,size:1,style:{minWidth:"5rem"},weight:"medium",children:M("confirm-delete-dialog.cdr-table.project-id.label")})}),(0,l.jsx)("th",{children:(0,l.jsx)(eg.Text,{muted:!0,size:1,weight:"medium",children:M("confirm-delete-dialog.cdr-table.dataset.label")})}),(0,l.jsx)("th",{children:(0,l.jsx)(eg.Text,{muted:!0,size:1,weight:"medium",children:M("confirm-delete-dialog.cdr-table.document-id.label")})})]})}),(0,l.jsx)("tbody",{children:S.references.filter(ai).map((e,t)=>{let{projectId:n,datasetName:i,documentId:o}=e;return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)(eg.Text,{size:1,children:n})}),(0,l.jsx)("td",{children:(0,l.jsx)(eg.Text,{size:1,children:i||"unavailable"})}),(0,l.jsx)("td",{children:(0,l.jsxs)(s8,{align:"center",gap:2,justify:"flex-end",children:[(0,l.jsx)(eg.Text,{textOverflow:"ellipsis",size:1,children:o||"unavailable"}),o&&(0,l.jsx)(f.Button,{mode:"bleed",icon:d.CopyIcon,tooltipProps:{content:M("confirm-delete-dialog.cdr-table.copy-id-button.tooltip")},onClick:()=>{navigator.clipboard.writeText(o).catch(()=>{D.push({status:"error",title:M("confirm-delete-dialog.cdr-table.id-copied-toast.title-failed")})})}})]})})]},"".concat(o,"-").concat(t))})})]}),(0,l.jsx)(s7,{...S})]})]}),w[38]=S,w[39]=O,w[40]=C.totalCount,w[41]=A.length,w[42]=M,w[43]=D,w[44]=g):g=w[44],w[45]!==h||w[46]!==g?(v=(0,l.jsx)(eg.Card,{radius:2,shadow:1,flex:"auto",padding:2,children:(0,l.jsxs)(eg.Flex,{direction:"column",children:[h,g]})}),w[45]=h,w[46]=g,w[47]=v):v=w[47],w[48]!==_?(x={DocumentTitle:()=>_},w[48]=_,w[49]=x):x=w[49],w[50]!==T||w[51]!==M||w[52]!==x?(y=(0,l.jsx)(eg.Box,{flex:"none",children:(0,l.jsx)(eg.Text,{size:1,children:(0,l.jsx)(r.Translate,{i18nKey:"confirm-delete-dialog.referential-integrity-disclaimer.text",t:M,context:T,components:x})})}),w[50]=T,w[51]=M,w[52]=x,w[53]=y):y=w[53],w[54]!==c||w[55]!==m||w[56]!==v||w[57]!==y?(j=(0,l.jsxs)(eg.Flex,{direction:"column",gap:4,children:[c,m,v,y]}),w[54]=c,w[55]=m,w[56]=v,w[57]=y,w[58]=j):j=w[58],j}function ai(e){return"projectId"in e}let al=()=>(t||(t=(0,eJ.fromEvent)(document,"visibilitychange").pipe((0,eD.startWith)(null),(0,eE.map)(()=>"visible"===document.visibilityState),(0,eA.distinctUntilChanged)(),(0,eL.switchMap)(e=>e?(0,eZ.timer)(0,5e3):e0.EMPTY),(0,eV.shareReplay)({refCount:!0,bufferSize:1}))),t),ao=(0,r.createHookFromObservableFactory)(e=>{let[t,n]=e;return n.listenQuery({fetch:'{"references":*[references($documentId)][0...100]{_id,_type},"totalCount":count(*[references($documentId)])}',listen:"*[references($documentId)]"},{documentId:t},{tag:"use-referring-documents",transitions:["appear","disappear"],throttleTime:5e3})}),ar=(0,r.createHookFromObservableFactory)(e=>{let[t,n]=e;return al().pipe((0,eL.switchMap)(()=>(function(e,t){let{versionedClient:n}=t;return al().pipe((0,eL.switchMap)(()=>(function(e,t){let{versionedClient:n}=t,i=(0,s.getDraftId)(e),l=(0,s.getPublishedId)(e),o={uri:n.getDataUrl("doc","".concat(i,",").concat(l)),json:!0,query:{excludeContent:"true"},tag:"use-referring-documents.document-existence"};return n.observable.request(o).pipe((0,eE.map)(e=>{let{omitted:t}=e,n=t.filter(e=>"existence"===e.reason);if(2!==n.length)return 0===n.length||n.some(e=>e.id===i)?l:i}))})(e,t)),(0,eL.switchMap)(e=>{if(!e)return(0,eq.of)({totalCount:0,references:[]});let t=n.config().dataset;return n.observable.request({url:"/data/references/".concat(t,"/documents/").concat(e,"/to?excludeInternalReferences=true&excludePaths=true"),tag:"use-referring-documents.external"}).pipe((0,ek.catchError)(e=>{if("object"==typeof e&&e&&"statusCode"in e&&"response"in e&&404===e.statusCode)return(0,eq.of)({totalCount:0,references:[]});throw e}))}))})(t,{versionedClient:n})))});function as(e){return"string"!=typeof e.datasetName}function aa(e){return!!e&&""!==e}function au(e){return(null==e?void 0:e.datasetName)||""}function ad(e){return e.projectId}let ac=(0,eb.styled)(eg.Box)(nQ()),ap=(0,eb.styled)(eg.Flex).attrs({align:"center",direction:"column",justify:"center"})(n$());function am(e){let t,n,i,a,u,d,c,p,m,h=(0,eh.c)(40),{id:g,type:v,action:x,onCancel:y,onConfirm:j}=e,w=void 0===x?"delete":x,{t:S}=(0,r.useTranslation)(b),C="deletion-confirmation-".concat((0,o.useId)()),{internalReferences:_,crossDatasetReferences:I,isLoading:T,totalCount:R,projectIds:P,datasetNames:E,hasUnknownDatasetNames:k}=function(e){let t,n,i,l,o,a,u,d,c=(0,eh.c)(24),p=(0,r.useClient)(r.DEFAULT_STUDIO_CLIENT_OPTIONS),m=(0,r.useDocumentStore)();c[0]!==e?(t=(0,s.getPublishedId)(e),c[0]=e,c[1]=t):t=c[1];let h=t;c[2]!==m||c[3]!==h?(n=[h,m],c[2]=m,c[3]=h,c[4]=n):n=c[4];let[g,f]=ao(n);c[5]!==h||c[6]!==p?(i=[h,p],c[5]=h,c[6]=p,c[7]=i):i=c[7];let[v,x]=ar(i);c[8]!==(null==v?void 0:v.references)?(l=()=>Array.from(new Set(null==v?void 0:v.references.map(ad).filter(Boolean))).sort(),c[8]=null==v?void 0:v.references,c[9]=l):l=c[9],c[10]!==l?(o=l(),c[10]=l,c[11]=o):o=c[11];let b=o;c[12]!==(null==v?void 0:v.references)?(a=Array.from(new Set(null==v?void 0:v.references.map(au).filter(aa))).sort(),c[12]=null==v?void 0:v.references,c[13]=a):a=c[13];let y=a;c[14]!==(null==v?void 0:v.references)?(u=()=>!!(null==v?void 0:v.references.some(as)),c[14]=null==v?void 0:v.references,c[15]=u):u=c[15];let j=u(),w=((null==g?void 0:g.totalCount)||0)+((null==v?void 0:v.totalCount)||0),S=f||x;return c[16]!==v||c[17]!==y||c[18]!==j||c[19]!==g||c[20]!==b||c[21]!==w||c[22]!==S?(d={totalCount:w,projectIds:b,datasetNames:y,hasUnknownDatasetNames:j,internalReferences:g,crossDatasetReferences:v,isLoading:S},c[16]=v,c[17]=y,c[18]=j,c[19]=g,c[20]=b,c[21]=w,c[22]=S,c[23]=d):d=c[23],d}(g);h[0]!==g||h[1]!==v?(t={_id:g,_type:v},h[0]=g,h[1]=v,h[2]=t):t=h[2];let D=t;h[3]!==D?(n=(0,l.jsx)(s2,{document:D}),h[3]=D,h[4]=n):n=h[4];let M=n,F=!T;return h[5]!==w||h[6]!==S?(i=S("confirm-delete-dialog.header.text",{context:w}),h[5]=w,h[6]=S,h[7]=i):i=h[7],h[8]!==S?(a=S("confirm-delete-dialog.cancel-button.text"),h[8]=S,h[9]=a):a=h[9],h[10]!==y||h[11]!==a?(u={onClick:y,text:a},h[10]=y,h[11]=a,h[12]=u):u=h[12],h[13]!==w||h[14]!==j||h[15]!==F||h[16]!==S||h[17]!==R?(d=F?{text:S(R>0?"confirm-delete-dialog.confirm-anyway-button.text":"confirm-delete-dialog.confirm-button.text",{context:w}),onClick:j}:void 0,h[13]=w,h[14]=j,h[15]=F,h[16]=S,h[17]=R,h[18]=d):d=h[18],h[19]!==u||h[20]!==d?(c={cancelButton:u,confirmButton:d},h[19]=u,h[20]=d,h[21]=c):c=h[21],h[22]!==w||h[23]!==I||h[24]!==E||h[25]!==M||h[26]!==k||h[27]!==_||h[28]!==T||h[29]!==y||h[30]!==P||h[31]!==S||h[32]!==R?(p=(0,l.jsx)(ac,{children:I&&_&&!T?(0,l.jsx)(an,{crossDatasetReferences:I,internalReferences:_,documentTitle:M,isLoading:T,totalCount:R,action:w,projectIds:P,datasetNames:E,hasUnknownDatasetNames:k,onReferenceLinkClick:y}):(0,l.jsx)(ap,{"data-testid":"loading-container",children:(0,l.jsx)(r.LoadingBlock,{showText:!0,title:S("confirm-delete-dialog.loading.text")})})}),h[22]=w,h[23]=I,h[24]=E,h[25]=M,h[26]=k,h[27]=_,h[28]=T,h[29]=y,h[30]=P,h[31]=S,h[32]=R,h[33]=p):p=h[33],h[34]!==C||h[35]!==y||h[36]!==p||h[37]!==i||h[38]!==c?(m=(0,l.jsx)(f.Dialog,{width:1,id:C,header:i,footer:c,onClose:y,onClickOutside:y,children:p}),h[34]=C,h[35]=y,h[36]=p,h[37]=i,h[38]=c,h[39]=m):m=h[39],m}function ah(e){let t,n,i=(0,eh.c)(6),{t:s}=(0,r.useTranslation)(b),a=(0,o.useId)(),[u,d]=(0,o.useState)(null);i[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>d(null),i[0]=t):t=i[0];let c=t;return i[1]!==u||i[2]!==a||i[3]!==e||i[4]!==s?(n=u?(0,l.jsx)(f.Dialog,{id:"dialog-error-".concat(a),"data-testid":"confirm-delete-error-dialog",header:s("confirm-delete-dialog.error.title.text"),footer:{confirmButton:{text:s("confirm-delete-dialog.error.retry-button.text"),onClick:c,tone:"default"}},onClose:e.onCancel,children:(0,l.jsx)(eg.Box,{padding:4,children:(0,l.jsx)(eg.Text,{size:1,children:s("confirm-delete-dialog.error.message.text")})})}):(0,l.jsx)(f.ErrorBoundary,{onCatch:d,children:(0,l.jsx)(am,{...e})}),i[1]=u,i[2]=a,i[3]=e,i[4]=s,i[5]=n):n=i[5],n}let ag=(0,o.forwardRef)(function(e,t){let n,i,r,s,a=(0,eh.c)(10);a[0]!==e?({intent:n,...i}=e,a[0]=e,a[1]=n,a[2]=i):(n=a[1],i=a[2]),a[3]!==n?(r=(0,o.forwardRef)(function(e,t){return(0,l.jsx)(eC.IntentLink,{...e,intent:n.type,params:n.params,ref:t,searchParams:n.searchParams})}),a[3]=n,a[4]=r):r=a[4];let u=r;return a[5]!==u||a[6]!==e.disabled||a[7]!==t||a[8]!==i?(s=e.disabled?(0,l.jsx)(f.Button,{...i,as:"a",role:"link","aria-disabled":"true"}):(0,l.jsx)(f.Button,{...i,as:u,"data-as":"a",ref:t}),a[5]=u,a[6]=e.disabled,a[7]=t,a[8]=i,a[9]=s):s=a[9],s});function af(e){let t,n,i,o=(0,eh.c)(12),{reveal:s,context:a,loading:u,children:d}=e,c=(0,r.useCurrentUser)(),{t:p}=(0,r.useTranslation)(b);if(!s){let e;return o[0]!==d?(e=(0,l.jsx)(l.Fragment,{children:d}),o[0]=d,o[1]=e):e=o[1],e}return o[2]!==a||o[3]!==c||o[4]!==u||o[5]!==p?(t=u?p("insufficient-permissions-message-tooltip.loading-text"):(0,l.jsx)(r.InsufficientPermissionsMessage,{context:a,currentUser:c}),o[2]=a,o[3]=c,o[4]=u,o[5]=p,o[6]=t):t=o[6],o[7]!==d?(n=(0,l.jsx)("div",{children:d}),o[7]=d,o[8]=n):n=o[8],o[9]!==t||o[10]!==n?(i=(0,l.jsx)(f.Tooltip,{content:t,portal:!0,children:n}),o[9]=t,o[10]=n,o[11]=i):i=o[11],i}let av={constrainSize:!0,placement:"bottom",portal:!0},ax=(e,t,n)=>{var i;let l=null==(i=e.find(e=>e.id===t.templateId))?void 0:i.schemaType;if(!l)return null;let o={template:t.templateId,type:l,version:n,id:t.initialDocumentId};return{type:"create",params:t.parameters?[o,t.parameters]:o,searchParams:n?[["perspective",n]]:void 0}};function ab(e){let t,n,i,s,a,u,c,p,m=(0,eh.c)(60),{templateItems:h}=e,g=(0,r.useTemplates)(),{selectedReleaseId:v}=(0,r.usePerspective)(),{t:x}=(0,r.useTranslation)(b);m[0]!==h||m[1]!==g?(t=[...h,...g],m[0]=h,m[1]=g,m[2]=t):t=m[2];let y=(0,r.useGetI18nText)(t);m[3]!==h?(n={templateItems:h},m[3]=h,m[4]=n):n=m[4];let[j,w]=(0,r.useTemplatePermissions)(n),S=!w&&(null==j?void 0:j.length)!==0&&(null==j?void 0:j.every(aj));e:{let e;if(!j){let e;m[5]===Symbol.for("react.memo_cache_sentinel")?(e={},m[5]=e):e=m[5],i=e;break e}m[6]!==j?(e=j.reduce(ay,{}),m[6]=j,m[7]=e):e=m[7],i=e}let C=i;if(0===h.length)return null;if(S){let e,t,n;return m[8]!==x?(e=x("pane-header.disabled-created-button.aria-label"),m[8]=x,m[9]=e):e=m[9],m[10]!==e?(t=(0,l.jsx)(f.Button,{"aria-label":e,icon:d.AddIcon,"data-testid":"action-intent-button",disabled:!0,mode:"bleed",tooltipProps:null}),m[10]=e,m[11]=t):t=m[11],m[12]!==w||m[13]!==t?(n=(0,l.jsx)(af,{context:"create-document-type",reveal:!0,loading:w,children:t}),m[12]=w,m[13]=t,m[14]=n):n=m[14],n}if(1===h.length){var _;let e,t,n,i,o,r,s=h[0],a=!(null==(_=C[s.id])?void 0:_.granted);m[15]!==s||m[16]!==v||m[17]!==g?(e=ax(g,s,v),m[15]=s,m[16]=v,m[17]=g,m[18]=e):e=m[18];let u=e;if(!u)return null;m[19]!==s||m[20]!==y?(t=y(s),m[19]=s,m[20]=y,m[21]=t):t=m[21];let c=t.title,p=s.icon||d.AddIcon;return m[22]!==x?(n=x("pane-header.create-new-button.tooltip"),m[22]=x,m[23]=n):n=m[23],m[24]!==n?(i={content:n},m[24]=n,m[25]=i):i=m[25],m[26]!==a||m[27]!==u||m[28]!==t.title||m[29]!==p||m[30]!==i?(o=(0,l.jsx)(ag,{"aria-label":c,icon:p,intent:u,mode:"bleed",disabled:a,"data-testid":"action-intent-button",tooltipProps:i}),m[26]=a,m[27]=u,m[28]=t.title,m[29]=p,m[30]=i,m[31]=o):o=m[31],m[32]!==a||m[33]!==w||m[34]!==o?(r=(0,l.jsx)(af,{reveal:a,loading:w,context:"create-document-type",children:o}),m[32]=a,m[33]=w,m[34]=o,m[35]=r):r=m[35],r}if(m[36]!==x?(s=x("pane-header.create-new-button.tooltip"),m[36]=x,m[37]=s):s=m[37],m[38]!==s?(a=(0,l.jsx)(f.Button,{icon:d.AddIcon,mode:"bleed","data-testid":"multi-action-intent-button",tooltipProps:{content:s}}),m[38]=s,m[39]=a):a=m[39],m[40]!==y||m[41]!==w||m[42]!==C||m[43]!==v||m[44]!==x||m[45]!==h||m[46]!==g){let e;m[48]!==y||m[49]!==w||m[50]!==C||m[51]!==v||m[52]!==x||m[53]!==g?(e=(e,t)=>{var n;let i=!(null==(n=C[e.id])?void 0:n.granted),r=ax(g,e,v),s=g.find(t=>t.id===e.templateId);if(!s||!r)return null;let a=(0,o.forwardRef)((e,t)=>i?(0,l.jsx)("button",{type:"button",disabled:!0,...e,ref:t}):(0,l.jsx)(eC.IntentLink,{...e,intent:r.type,params:r.params,searchParams:r.searchParams,ref:t}));a.displayName="Link";let{title:u}=y({...e,title:e.title||y(s).title});return(0,l.jsx)(af,{context:"create-document-type",reveal:i,loading:w,children:(0,l.jsx)(f.MenuItem,{as:a,"data-as":i?"button":"a",text:u,"aria-label":i?x("pane-header.disabled-created-button.aria-label"):u,disabled:i,"data-testid":"action-intent-button-".concat(t)})},e.id)},m[48]=y,m[49]=w,m[50]=C,m[51]=v,m[52]=x,m[53]=g,m[54]=e):e=m[54],u=h.map(e),m[40]=y,m[41]=w,m[42]=C,m[43]=v,m[44]=x,m[45]=h,m[46]=g,m[47]=u}else u=m[47];return m[55]!==u?(c=(0,l.jsx)(eg.Menu,{children:u}),m[55]=u,m[56]=c):c=m[56],m[57]!==a||m[58]!==c?(p=(0,l.jsx)(f.MenuButton,{button:a,id:"create-menu",menu:c,popover:av}),m[57]=a,m[58]=c,m[59]=p):p=m[59],p}function ay(e,t){return e[t.id]=t,e}function aj(e){return!e.granted}function aw(e){return null!=e}let aS=(0,o.memo)(function(e){let{initialValueTemplateItems:t=r.EMPTY_ARRAY,menuItems:n=r.EMPTY_ARRAY,menuItemGroups:i=r.EMPTY_ARRAY,actionHandlers:s=r.EMPTY_OBJECT}=e,a=(0,r.useTemplates)(),u=(0,o.useCallback)(e=>{if("string"==typeof e.action&&!(e.action in s))return console.warn("No handler for action:",e.action),!1;let t="function"==typeof e.action?e.action:"string"==typeof e.action?s[e.action]:null;return!!t&&(t(e.params),!0)},[s]),d=(0,o.useMemo)(()=>oL({actionHandler:u,menuItemGroups:i,menuItems:n.filter(e=>{var t;return(null==(t=e.intent)?void 0:t.type)!=="create"})}),[u,i,n]),c=(0,o.useMemo)(()=>d.filter(oF),[d]),p=(0,o.useMemo)(()=>d.filter(oA),[d]),m=(0,o.useMemo)(()=>n.map((e,t)=>{var n;if((null==(n=e.intent)?void 0:n.type)!=="create")return null;let{params:i}=e.intent;if(!i)return null;let l=Array.isArray(i)?i[0]:i,o=Array.isArray(i)?i[1]:void 0,r=l.template||l.type;if(!r)return null;let s=a.find(e=>e.id===r);return s?{item:e,template:s,templateParams:o,menuItemIndex:t,initialDocumentId:l.id}:null}).filter(aw).map(e=>{let{initialDocumentId:t,item:n,template:i,menuItemIndex:l,templateParams:o}=e;return{id:"menuItem".concat(l),initialDocumentId:t,templateId:i.id,type:"initialValueTemplateItem",title:n.title||i.title,i18n:n.i18n||i.i18n,icon:n.icon,description:i.description,parameters:o,schemaType:i.schemaType}}),[n,a]),h=(0,o.useMemo)(()=>(0,e9.default)([...m,...t],e=>(e=>{let t=e=>"object"==typeof e&&e?Array.isArray(e)?e.map(t):Object.entries(e).sort((e,t)=>{let[n]=e,[i]=t;return n.localeCompare(i,"en")}):e;return JSON.stringify(t(JSON.parse(JSON.stringify(e))))})([e.initialDocumentId,e.templateId,e.parameters])),[m,t]);return(0,l.jsxs)(eg.Flex,{gap:1,children:[(0,l.jsx)(ab,{templateItems:h}),c.map(e=>(0,l.jsx)(lo,{node:e},e.key)),p.length>0&&(0,l.jsx)(i4,{nodes:p})]})});function aC(e){let t,n,i,o,s,a,u,d=(0,eh.c)(16),{t:c}=(0,r.useTranslation)(b),{layout:p,value:m}=e;return d[0]===Symbol.for("react.memo_cache_sentinel")?(t={Code:"code"},d[0]=t):t=d[0],d[1]!==m._type?(n={documentType:m._type},d[1]=m._type,d[2]=n):n=d[2],d[3]!==c||d[4]!==n?(i=(0,l.jsx)("em",{children:(0,l.jsx)(r.Translate,{t:c,i18nKey:"pane-item.missing-schema-type.title",components:t,values:n})}),d[3]=c,d[4]=n,d[5]=i):i=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(o={Code:"code"},d[6]=o):o=d[6],d[7]!==m._id?(s={documentId:m._id},d[7]=m._id,d[8]=s):s=d[8],d[9]!==c||d[10]!==s?(a=(0,l.jsx)(r.Translate,{t:c,i18nKey:"pane-item.missing-schema-type.subtitle",components:o,values:s}),d[9]=c,d[10]=s,d[11]=a):a=d[11],d[12]!==p||d[13]!==i||d[14]!==a?(u=(0,l.jsx)(r.SanityDefaultPreview,{title:i,subtitle:a,media:a_,layout:p}),d[12]=p,d[13]=i,d[14]=a,d[15]=u):u=d[15],u}function a_(){return(0,l.jsx)(d.WarningOutlineIcon,{})}function aI(e,t,n){return!1!==e&&(e||t&&t.icon||n||!1)}function aT(e){let t,n,i,s,a,u,c,p,m=(0,eh.c)(42),{icon:h,id:g,layout:f,pressed:v,schemaType:x,selected:b,title:y,value:j,margin:w,marginBottom:S,marginTop:C}=e,_=void 0===f?"default":f,I=(0,r.useSchema)(),T=(0,r.useDocumentPreviewStore)(),{ChildLink:R}=lj(),P=(0,r.useDocumentPresence)(g),E=!!(x&&x.name&&I.get(x.name)),[k,D]=(0,o.useState)(!1);e:{let e,n,i,o;if(j&&(0,ev.isSanityDocument)(j)){let e,n;if(!x||!E){let e;m[0]!==j?(e=(0,l.jsx)(aC,{value:j}),m[0]=j,m[1]=e):e=m[1],t=e;break e}m[2]!==h||m[3]!==x?(e=aI(h,x,d.DocumentIcon),m[2]=h,m[3]=x,m[4]=e):e=m[4],m[5]!==P||m[6]!==T||m[7]!==_||m[8]!==x||m[9]!==e||m[10]!==j?(n=(0,l.jsx)(s9,{documentPreviewStore:T,icon:e,layout:_,schemaType:x,value:j,presence:P}),m[5]=P,m[6]=T,m[7]=_,m[8]=x,m[9]=e,m[10]=j,m[11]=n):n=m[11],t=n;break e}m[12]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:.5},m[12]=e):e=m[12],m[13]===Symbol.for("react.memo_cache_sentinel")?(n=(0,l.jsx)(eg.Box,{style:e,children:(0,l.jsx)(eg.Text,{muted:!0,size:1,children:(0,l.jsx)(d.ChevronRightIcon,{})})}),m[13]=n):n=m[13],m[14]!==h||m[15]!==x?(i=aI(h,x,d.FolderIcon),m[14]=h,m[15]=x,m[16]=i):i=m[16],m[17]!==i||m[18]!==y?(o=(0,l.jsx)(r.SanityDefaultPreview,{status:n,icon:i,layout:"compact",title:y}),m[17]=i,m[18]=y,m[19]=o):o=m[19],t=o}let M=t;m[20]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{if(e.metaKey)return void D(!1);D(!0)},m[20]=n):n=m[20];let F=n;m[21]===Symbol.for("react.memo_cache_sentinel")?(i=()=>D(!1),m[21]=i):i=m[21],m[22]!==b?(s=[b],m[22]=b,m[23]=s):s=m[23],(0,o.useEffect)(i,s);let[A,L]=(0,o.useState)(!1),V=(0,o.useRef)(null);m[24]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{V.current=setTimeout(()=>(0,o.startTransition)(()=>L(!0)),400)},m[24]=a):a=m[24];let z=a;m[25]===Symbol.for("react.memo_cache_sentinel")?(u=()=>{V.current&&clearTimeout(V.current),(0,o.startTransition)(()=>L(!1))},m[25]=u):u=m[25];let O=u,B="pane-item-".concat(y),H=b||k;return m[26]!==g||m[27]!==A||m[28]!==x||m[29]!==j?(c=A&&(null==x?void 0:x.name)&&j&&(0,ev.isSanityDocument)(j)&&(0,l.jsx)(aR,{documentId:g,documentType:x.name}),m[26]=g,m[27]=A,m[28]=x,m[29]=j,m[30]=c):c=m[30],m[31]!==g||m[32]!==w||m[33]!==S||m[34]!==C||m[35]!==v||m[36]!==M||m[37]!==c||m[38]!==B||m[39]!==R||m[40]!==H?(p=(0,l.jsxs)(r.PreviewCard,{"data-testid":B,__unstable_focusRing:!0,as:R,childId:g,"data-as":"a",margin:w,marginBottom:S,marginTop:C,onClick:F,onMouseEnter:z,onMouseLeave:O,pressed:v,radius:2,selected:H,sizing:"border",tabIndex:-1,tone:"inherit",children:[M,c]}),m[31]=g,m[32]=w,m[33]=S,m[34]=C,m[35]=v,m[36]=M,m[37]=c,m[38]=B,m[39]=R,m[40]=H,m[41]=p):p=m[41],p}function aR(e){let t,n=(0,eh.c)(2),{documentId:i,documentType:l}=e;return n[0]!==i?(t=(0,s.getPublishedId)(i),n[0]=i,n[1]=t):t=n[1],(0,r.useEditState)(t,l),null}aR.displayName="PreloadDocumentPane";let aP=(0,o.memo)(e=>{let t,n,i=(0,eh.c)(10),{actions:o,children:a,actionProps:u,onActionComplete:d,group:c}=e;return i[0]!==u.id||i[1]!==u.liveEditSchemaType||i[2]!==a?(t=e=>{let{states:t}=e;return(0,l.jsx)(ak,{states:t,documentId:u.liveEditSchemaType?(0,s.getPublishedId)(u.id):(0,s.getDraftId)(u.id),children:a})},i[0]=u.id,i[1]=u.liveEditSchemaType,i[2]=a,i[3]=t):t=i[3],i[4]!==u||i[5]!==o||i[6]!==c||i[7]!==d||i[8]!==t?(n=(0,l.jsx)(r.GetHookCollectionState,{onReset:d,hooks:o,args:u,group:c,children:t}),i[4]=u,i[5]=o,i[6]=c,i[7]=d,i[8]=t,i[9]=n):n=i[9],n});aP.displayName="Memo(RenderActionCollectionState)";let aE=["delete","duplicate","publish","unpublish","unlinkFromCanvas","editInCanvas","linkToCanvas","schedule"],ak=e=>{let t,n=(0,eh.c)(9),{states:i,children:l,documentId:o}=e,{t:s}=(0,r.useTranslation)(b),{isLinked:a}=(0,r.useCanvasCompanionDoc)(o);e:{let e;if(a){let e;if(n[0]!==l||n[1]!==i||n[2]!==s){let t;n[4]!==s?(t=e=>e.action&&aE.includes(e.action)?e:{...e,disabled:!0,title:s("action.disabled-by-canvas.tooltip")},n[4]=s,n[5]=t):t=n[5],e=l({states:i.map(t)}),n[0]=l,n[1]=i,n[2]=s,n[3]=e}else e=n[3];t=e;break e}n[6]!==l||n[7]!==i?(e=l({states:i}),n[6]=l,n[7]=i,n[8]=e):e=n[8],t=e}return t},aD=(0,o.memo)(e=>{let t,n=(0,eh.c)(4),{badges:i,children:o,badgeProps:s}=e;return n[0]!==s||n[1]!==i||n[2]!==o?(t=(0,l.jsx)(r.GetHookCollectionState,{hooks:i,args:s,children:o}),n[0]=s,n[1]=i,n[2]=o,n[3]=t):t=n[3],t});aD.displayName="Memo(RenderBadgeCollectionState)";let aM={by:[{field:"_updatedAt",direction:"desc"}]},aF={},aA=(0,eb.styled)(eg.Box)(nJ(),e=>e.$opacity||1),aL=(0,eb.styled)(eg.Box)(nZ()),aV=[...Array(30).keys()];function az(e){let t,n,i=(0,eh.c)(4),{layout:o}=e;return i[0]!==o?(t=aV.map(e=>(0,l.jsx)(r.SanityDefaultPreview,{isPlaceholder:!0,layout:o},e)),i[0]=o,i[1]=t):t=i[1],i[2]!==t?(n=(0,l.jsx)(eg.Stack,{paddingX:3,paddingY:2,paddingTop:0,space:1,children:t}),i[2]=t,i[3]=n):n=i[3],n}function aO(e){let t,n,i,a,u,d,c,p=(0,eh.c)(66),{childItemId:m,error:h,isRetrying:g,autoRetry:f,filterIsSimpleTypeConstraint:v,hasMaxItems:x,hasSearchQuery:y,isActive:j,isLazyLoading:w,muted:S,isLoading:C,isConnected:_,retryCount:I,canRetry:T,items:R,layout:P,loadingVariant:E,onEndReached:k,onRetry:D,paneTitle:M,searchInputElement:F,showIcons:A}=e,L=(0,r.useSchema)(),{collapsed:V}=iN(),{collapsed:z,index:O}=iY(),[B,H]=(0,o.useState)(!z),{t:N}=(0,r.useTranslation)(b);p[0]!==k||p[1]!==B?(t=()=>{B&&k()},p[0]=k,p[1]=B,p[2]=t):t=p[2];let U=t;p[3]!==z?(n=()=>{if(z)return;let e=setTimeout(()=>{H(!0)},0);return()=>{clearTimeout(e)}},p[3]=z,p[4]=n):n=p[4],p[5]!==z||p[6]!==R?(i=[z,R],p[5]=z,p[6]=R,p[7]=i):i=p[7],(0,o.useEffect)(n,i),p[8]!==m||p[9]!==x||p[10]!==j||p[11]!==w||p[12]!==R.length||p[13]!==P||p[14]!==L||p[15]!==A||p[16]!==N?(a=(e,t)=>{let{activeIndex:n}=t,i=(0,s.getPublishedId)(e._id),o=m===i,a=!j&&o,u=j&&o,d=n===R.length-1,c=d&&w,p=d&&x;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(aT,{icon:!1!==A&&void 0,id:i,layout:P,marginBottom:1,pressed:a,schemaType:L.get(e._type),selected:u,value:e}),c&&(0,l.jsx)(r.LoadingBlock,{}),p&&(0,l.jsx)(eg.Box,{marginY:1,paddingX:3,paddingY:4,children:(0,l.jsx)(eg.Text,{align:"center",muted:!0,size:1,children:N("panes.document-list-pane.max-items.text",{limit:2e3})})})]})},p[8]=m,p[9]=x,p[10]=j,p[11]=w,p[12]=R.length,p[13]=P,p[14]=L,p[15]=A,p[16]=N,p[17]=a):a=p[17];let G=a;e:{let e,t;if(y){let e,t;p[18]!==N?(e=N("panes.document-list-pane.no-documents.text"),p[18]=N,p[19]=e):e=p[19],p[20]!==e?(t=(0,l.jsx)(eg.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,l.jsx)(eg.Container,{width:1,children:(0,l.jsx)(eg.Box,{paddingX:4,paddingY:5,children:(0,l.jsx)(eg.Text,{align:"center",muted:!0,children:e})})})}),p[20]=e,p[21]=t):t=p[21],u=t;break e}p[22]!==v||p[23]!==N?(e=N(v?"panes.document-list-pane.no-documents-of-type.text":"panes.document-list-pane.no-matching-documents.text"),p[22]=v,p[23]=N,p[24]=e):e=p[24],p[25]!==e?(t=(0,l.jsx)(eg.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,l.jsx)(eg.Container,{width:1,children:(0,l.jsx)(eg.Box,{paddingX:4,paddingY:5,children:(0,l.jsx)(eg.Text,{align:"center",muted:!0,children:e})})})}),p[25]=e,p[26]=t):t=p[26],u=t}let W=u;t:{let e,t;if(!B){d=null;break t}let n=window.navigator.onLine;if(h){let e,t,i,o,s,a,u;p[27]!==N?(e=N("panes.document-list-pane.error.title"),p[27]=N,p[28]=e):e=p[28],p[29]!==e?(t=(0,l.jsx)(eg.Heading,{as:"h3",children:e}),p[29]=e,p[30]=t):t=p[30],p[31]!==h||p[32]!==N?(i=r.isDev?(0,l.jsx)(r.Translate,{t:N,i18nKey:"panes.document-list-pane.error.text.dev",values:{error:h.message},components:{Code:aB}}):N(n?"panes.document-list-pane.error.text":"panes.document-list-pane.error.text.offline"),p[31]=h,p[32]=N,p[33]=i):i=p[33],p[34]!==i?(o=(0,l.jsx)(eg.Text,{as:"p",children:i}),p[34]=i,p[35]=o):o=p[35];let c=n&&T?D:void 0;p[36]!==h||p[37]!==g||p[38]!==c?(s=(0,l.jsx)(r.ErrorActions,{error:h,eventId:null,onRetry:c,isRetrying:g}),p[36]=h,p[37]=g,p[38]=c,p[39]=s):s=p[39],p[40]!==f||p[41]!==T||p[42]!==g||p[43]!==I||p[44]!==N?(a=T?(0,l.jsx)(eg.Text,{as:"p",muted:!0,size:1,children:g?N("panes.document-list-pane.error.retrying",{count:I}):f?N("panes.document-list-pane.error.will-retry-automatically",{count:I}):N("panes.document-list-pane.error.max-retries-attempted",{count:I})}):null,p[40]=f,p[41]=T,p[42]=g,p[43]=I,p[44]=N,p[45]=a):a=p[45],p[46]!==s||p[47]!==a||p[48]!==t||p[49]!==o?(u=(0,l.jsx)(eg.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,l.jsx)(eg.Container,{width:1,children:(0,l.jsxs)(eg.Stack,{paddingX:4,paddingY:5,space:4,children:[t,o,s,a]})})}),p[46]=s,p[47]=a,p[48]=t,p[49]=o,p[50]=u):u=p[50],d=u;break t}if(_&&!C&&0===R.length){d=W;break t}if("initial"===E&&C){let e;p[51]!==P?(e=(0,l.jsx)(lh,{ms:300,children:(0,l.jsx)(az,{layout:P})}),p[51]=P,p[52]=e):e=p[52],d=e;break t}if("spinner"===E&&C){d=null;break t}let i="".concat(O,"-").concat(z),o=S?.8:1;p[53]!==U||p[54]!==R||p[55]!==i||p[56]!==M||p[57]!==G||p[58]!==F?(e=(0,l.jsx)(aL,{children:(0,l.jsx)(r.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:M,canReceiveFocus:!0,inputElement:F,itemHeight:51,items:R,onEndReached:U,onlyShowSelectionWhenActive:!0,overscan:10,paddingBottom:1,paddingX:3,renderItem:G,wrapAround:!1},i)}),p[53]=U,p[54]=R,p[55]=i,p[56]=M,p[57]=G,p[58]=F,p[59]=e):e=p[59],p[60]!==o||p[61]!==e?(t=(0,l.jsx)(aA,{overflow:"hidden",height:"fill",$opacity:o,children:e}),p[60]=o,p[61]=e,p[62]=t):t=p[62],d=t}let q=d,K=V||"initial"===E?"hidden":"auto";return p[63]!==q||p[64]!==K?(c=(0,l.jsx)(iX,{"data-testid":"document-list-pane",overflow:K,children:q}),p[63]=q,p[64]=K,p[65]=c):c=p[65],c}function aB(e){let{children:t}=e;return(0,l.jsx)("code",{children:t})}function aH(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=function e(t){switch(t.type){case"OpCall":{let{left:e,right:n}=t;switch(t.op){case"==":return"AccessAttribute"!==e.type||"_type"!==e.name||e.base?"AccessAttribute"!==n.type||"_type"!==n.name||n.base||"Value"!==e.type||"string"!=typeof e.value?null:new Set([e.value]):"Value"!==n.type||"string"!=typeof n.value?null:new Set([n.value]);case"in":{if("AccessAttribute"!==e.type||"_type"!==e.name||e.base||"Array"!==n.type)return null;let t=new Set;for(let e of n.elements){if(e.isSplat||"Value"!==e.value.type||"string"!=typeof e.value.value)return null;t.add(e.value.value)}return t.size?t:null}default:return null}}case"Group":return e(t.base);case"Or":{let n=e(t.left);if(!n)return null;let i=e(t.right);return i?new Set([...n,...i]):null}case"And":{let n=e(t.left),i=e(t.right);return n||i?new Set([...n||[],...i||[]]):null}default:return null}}((0,tS.parse)(e,{params:t}));return n?Array.from(n).sort():null}catch(e){return null}}let aN=(0,r.createSWR)({maxSize:100});function aU(e){let{client:t,schema:n,sort:i,perspective:l,limit:o,params:s,filter:a,searchQuery:u,staticTypeNames:d,maxFieldDepth:c,searchStrategy:p}=e,m=i.by,h=null==i?void 0:i.extendedProjection,g=(0,e1.defer)(()=>t.listen("*[".concat(a,"]"),s,{events:["welcome","mutation","reconnect"],includeAllVersions:!0,includeResult:!1,visibility:"query",tag:"listen-search-query"})).pipe((0,eN.mergeMap)((e,t)=>{let n=0===t;return n&&"reconnect"===e.type?(0,e2.throwError)(()=>Error("Failed to establish EventSource connection")):n&&"welcome"!==e.type?(0,e2.throwError)(()=>Error('Received unexpected type of first event "'.concat(e.type,'"'))):(0,eq.of)(e)}),(0,eU.share)()),[f,v]=(0,e3.partition)(g,e=>"welcome"===e.type),x=JSON.stringify({fiilter:a,limit:o,params:s,searchQuery:u,perspective:l,sort:i,staticTypeNames:d});return(0,eK.merge)(f,v.pipe((0,e4.throttleTime)(1e3,e5.asyncScheduler,{leading:!0,trailing:!0}))).pipe((0,tI.exhaustMapWithTrailing)(e=>(d?(0,eq.of)(d):t.observable.fetch("array::unique(*[".concat(a,"][]._type)"),s)).pipe((0,eN.mergeMap)(g=>{let f=(0,r.getSearchableTypes)(n,d||[]).filter(e=>!!g.includes(e.name)&&(w(e,i.by,!0),!0)),v=(0,r.createSearch)(f,t,{filter:a,params:s,strategy:p,maxDepth:c}),x=()=>v({query:u||"",types:f},{__unstable_extendedProjection:h,comments:["findability-source: ".concat(u?"list-query":"list")],limit:o,skipSortByScore:!0,sort:m,perspective:l}).pipe((0,eE.map)(e=>e.hits.map(e=>{let{hit:t}=e;return t})),(0,eE.map)(e=>({type:"result",documents:e})));return"mutation"===e.type&&"query"!==e.visibility?(0,eZ.timer)(1200).pipe((0,eN.mergeMap)(x)):"reconnect"===e.type?(0,eq.of)(e):x()}))),(0,ez.scan)((e,t)=>({connected:"reconnect"!==t.type,documents:"result"===t.type?t.documents:(null==e?void 0:e.documents)||[]}),null),(0,eB.filter)(e=>null!==e),aN(x),(0,eE.map)(e=>{let{fromCache:t,value:n}=e;return{fromCache:t,...n}}))}let aG={error:null,isRetrying:!1,retryCount:0,autoRetry:!1,canRetry:!1,isLoading:!0,isLoadingFullList:!1,fromCache:!1,items:[]},aW="[WARNING: This was thrown as a non-error. Only Error instances should be thrown]",aq=(0,eb.keyframes)(n0()),aK=(0,eb.keyframes)(n1()),aY=(0,eb.styled)(d.SpinnerIcon)(n2(),aq),aX=(0,eb.styled)(d.SpinnerIcon)(n3(),aq),aQ=(0,eb.styled)(d.SpinnerIcon)(n4(),aq,aK),a$=(0,o.memo)(function(e){let{childItemId:t,isActive:n,pane:i,paneKey:s,sortOrder:a,layout:u}=e,c=(0,r.useSchema)(),p=(0,r.useActiveReleases)(),{perspectiveStack:m}=(0,r.usePerspective)(),{displayOptions:h,options:g}=i,{apiVersion:f,filter:v}=g,x=ug(g.params||aF),y=(0,o.useMemo)(()=>{let e=aH(v,x);return(null==e?void 0:e.length)===1?e[0]:null},[v,x]),j=(null==h?void 0:h.showIcons)!==!1,{t:w}=(0,r.useTranslation)(b),{title:S}=(0,r.useI18nText)(i),[C,_]=(0,o.useState)(""),[I,T]=(0,o.useState)(""),[R,P]=(0,o.useState)(null),E=y&&a?function(e,t){let n=e.by.map(e=>{if(e.mapWith)return e;let n=function(e,t){let n=e7.fromString(t),i=e;for(let e of n){if(!i)return;if("string"==typeof e){i=function(e,t){if(!("fields"in e))return;let n=e.fields.find(e=>e.name===t);return n?n.type:void 0}(i,e);continue}if(!((0,ev.isKeySegment)(e)||(0,ev.isIndexSegment)(e))||"array"!==i.jsonType)return;let[t,n]=i.of||[];if(n||!t)return;if(!(0,ev.isReferenceSchemaType)(t)){i=t;continue}let[l,o]=t.to||[];if(o||!l)return;i=l}return i}(t,e.field);return n?!function(e,t){let n=e.type;for(;n;){if(n.name===t||!n.type&&n.jsonType===t)return!0;n=n.type}return!1}(n,"datetime")?"string"===n.jsonType?{...e,mapWith:"lower"}:e:{...e,mapWith:"dateTime"}:e});return n.every((t,n)=>t===e.by[n])?e:{...e,by:n}}(a,c.get(y)):a,k=(0,r.useUnique)(E),{error:D,isLoadingFullList:M,isLoading:F,items:A,fromCache:L,isRetrying:V,autoRetry:z,canRetry:O,retryCount:B,connected:H,onLoadFullList:N,onRetry:U}=function(e){let{filter:t,params:n,sortOrder:i,searchQuery:l,perspective:s,apiVersion:a}=e,u=(0,r.useClient)({...r.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:a||r.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion}),{strategy:d}=(0,r.useWorkspace)().search,c=(0,r.useSchema)(),p=(0,r.useSearchMaxFieldDepth)(),m=(0,o.useMemo)(()=>aH(t,n),[t,n]),[[h,g]]=(0,o.useState)(()=>(0,t_.observableCallback)()),[[f,v]]=(0,o.useState)(()=>(0,t_.observableCallback)()),x=(0,o.useMemo)(()=>{let e={client:u,filter:t,limit:100,params:n,schema:c,perspective:s,searchQuery:l||"",sort:i||aM,staticTypeNames:m,maxFieldDepth:p,searchStrategy:d},o=aU(e).pipe((0,eV.shareReplay)({refCount:!0,bufferSize:1})),a=f.pipe((0,eO.withLatestFrom)(o),(0,eB.filter)(e=>{let[,t]=e;return(null==t?void 0:t.documents.length)===100}),(0,eH.take)(1),(0,eN.mergeMap)(()=>(0,eY.concat)((0,eq.of)({type:"loadFullList"}),aU({...e,limit:2e3}).pipe((0,eE.map)(e=>({type:"result",result:e}))))),(0,eU.share)());return(0,eK.merge)(o.pipe((0,eE.map)(e=>({type:"result",result:e})),(0,eG.takeUntil)(a)),a).pipe((0,r.catchWithCount)((e,t,n)=>{var i,l;let o=(l=e)instanceof Error?l:"object"==typeof l&&null!==l&&"message"in l&&"string"==typeof l.message?Error("".concat(l.message," ").concat(aW)):Error("".concat(String(l)," ").concat(aW)),r=window.navigator.onLine,s=r&&!((i=e)instanceof tC.ChannelError)&&(i instanceof tC.ServerError||!(i instanceof tC.ClientError)||403===i.statusCode),a=t<10,u=(0,eK.merge)(r?h:(0,eJ.fromEvent)(window,"online"),r&&a?(0,eZ.timer)(1e3*t):e6.NEVER).pipe((0,eH.take)(1),(0,eL.switchMap)(()=>(0,eK.merge)((0,eq.of)({type:"error",error:o,retrying:!0,autoRetry:a,canRetry:s,retryCount:t}),n)));return(0,eY.concat)((0,eq.of)({type:"error",error:o,retrying:!1,autoRetry:a,canRetry:s,retryCount:t}),u)}),(0,ez.scan)((e,t)=>{if("error"===t.type)return{...e,error:t.error,retryCount:t.retryCount,isRetrying:t.retrying,autoRetry:t.autoRetry,canRetry:t.canRetry};if("result"===t.type){var n;return{...e,error:null,isRetrying:!1,fromCache:t.result.fromCache,connected:t.result.connected,isLoading:!1,items:(n=t.result.documents,(0,r.collate)(n).map(e=>{let t=e.draft||e.published||e.versions[0],n=!!e.draft;return{...t,hasPublished:!!e.published,hasDraft:n}})),isLoadingFullList:!1}}if("loadFullList"===t.type)return{...e,error:null,isLoadingFullList:!0};throw Error("Unexpected event type: ".concat(t.type))},aG))},[u,t,n,c,s,l,i,m,p,d,f,h]),{error:b,items:y,isLoading:j,fromCache:w,connected:S,canRetry:C,isLoadingFullList:_,isRetrying:I,autoRetry:T,retryCount:R}=(0,eS.useObservable)(x,aG);return{error:b,onRetry:g,isLoading:j,items:y,isRetrying:I,canRetry:C,retryCount:R,autoRetry:T,connected:S,fromCache:w,onLoadFullList:v,isLoadingFullList:_}}({apiVersion:f,filter:v,perspective:m,params:x,searchQuery:null==C?void 0:C.trim(),sortOrder:k}),G=F||p.loading,W=(0,eS.useObservableEvent)(e=>e.pipe((0,eE.map)(e=>e.target.value),(0,eF.tap)(T),(0,e8.debounce)(e=>""===e?(0,eq.of)(""):(0,eZ.timer)(300)),(0,eF.tap)(_))),q=(0,o.useCallback)(()=>{_(""),T("")},[]),K=(0,o.useCallback)(e=>{"Escape"===e.key&&q()},[q]),[Y,X]=(0,o.useState)();(0,o.useEffect)(()=>{Y||G||X(s)},[Y,G,s]),(0,o.useEffect)(()=>{q(),X()},[s,q]);let Q=(0,o.useMemo)(()=>H&&G&&Y===s?"spinner":H&&L?"subtle":"initial",[H,Y,L,G,s]),$=(0,o.useMemo)(()=>"spinner"===Q?aY:I&&"subtle"===Q?aX:d.SearchIcon,[Q,I]);return(0,r.useReconnectingToast)(!H),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eg.Box,{paddingX:3,paddingBottom:3,children:(0,l.jsx)(eg.TextInput,{"aria-label":w("panes.document-list-pane.search-input.aria-label"),autoComplete:"off",border:!1,clearButton:!!C,fontSize:[2,2,1],icon:$,iconRight:H&&("subtle"!==Q||I)?null:aQ,onChange:W,onClear:q,onKeyDown:K,padding:2,placeholder:w("panes.document-list-pane.search-input.placeholder"),radius:2,ref:P,spellCheck:!1,value:I})}),(0,l.jsx)(aO,{childItemId:t,error:D,filterIsSimpleTypeConstraint:!!y,hasMaxItems:2e3===A.length,hasSearchQuery:!!C,isActive:n,isLazyLoading:M,isLoading:G,autoRetry:z,canRetry:O,retryCount:B,isRetrying:V,isConnected:H,items:A,layout:u,muted:"subtle"===Q,loadingVariant:Q,onEndReached:N,onRetry:U,paneTitle:S,searchInputElement:R,showIcons:j},s)]})}),aJ=(0,o.memo)(e=>{let t,n,i,o,r,s,a,u,c,p=(0,eh.c)(27),{contentAfter:m,index:h,initialValueTemplates:g,menuItemGroups:v,menuItems:x,setLayout:b,setSortOrder:y,title:j}=e;p[0]!==g?(t=void 0===g?[]:g,p[0]=g,p[1]=t):t=p[1];let w=t;p[2]!==v?(n=void 0===v?[]:v,p[2]=v,p[3]=n):n=p[3];let S=n;p[4]!==x?(i=void 0===x?[]:x,p[4]=x,p[5]=i):i=p[5];let C=i,{features:_}=lC(),{collapsed:I,isLast:T}=iY(),R=T&&!I?-1:0;p[6]!==b?(o=e=>{let{layout:t}=e;b(t)},p[6]=b,p[7]=o):o=p[7],p[8]!==y?(r=e=>{y(e)},p[8]=y,p[9]=r):r=p[9],p[10]!==o||p[11]!==r?(s={setLayout:o,setSortOrder:r},p[10]=o,p[11]=r,p[12]=s):s=p[12];let P=s;return p[13]!==P||p[14]!==w||p[15]!==S||p[16]!==C?(a=(0,l.jsx)(aS,{initialValueTemplateItems:w,actionHandlers:P,menuItemGroups:S,menuItems:C}),p[13]=P,p[14]=w,p[15]=S,p[16]=C,p[17]=a):a=p[17],p[18]!==_.backButton||p[19]!==h?(u=_.backButton&&h>0&&(0,l.jsx)(f.Button,{as:sq,"data-as":"a",icon:d.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:"Back"}}),p[18]=_.backButton,p[19]=h,p[20]=u):u=p[20],p[21]!==m||p[22]!==a||p[23]!==u||p[24]!==R||p[25]!==j?(c=(0,l.jsx)(f.TooltipDelayGroupProvider,{children:(0,l.jsx)(li,{actions:a,backButton:u,contentAfter:m,tabIndex:R,title:j})}),p[21]=m,p[22]=a,p[23]=u,p[24]=R,p[25]=j,p[26]=c):c=p[26],c});function aZ(e){let{row:t,table:n}=e,{selectedAnchor:i,setSelectedAnchor:r}=n.options.meta||{},s=(0,o.useCallback)(e=>{if(e.shiftKey&&null!=i){let e=t.index,l=e<i?e:i,o=e<i?i:e,r=n.getRowModel().flatRows.slice(l,o+1).map(e=>{let{id:t}=e;return t}),s=n.getSelectedRowModel().rows.map(e=>{let{id:t}=e;return t});n.setRowSelection(()=>[...r,...s].reduce((e,t)=>({...e,[t]:!0}),{}))}else r&&(r(t.getIsSelected()?null:t.index),t.toggleSelected())},[i,t,r,n]);return(0,l.jsx)(eg.Checkbox,{style:{paddingLeft:4},checked:e.row.getIsSelected(),disabled:!e.row.getCanSelect(),onChange:()=>null,onClick:s})}function a0(e){let{children:t,table:n}=e,[i,r]=(0,o.useState)(null),[s,u]=(0,o.useState)([]),d=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(null==i?void 0:i.state)==="focused"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),r(e),u([])},[i]),c=(0,o.useCallback)(()=>d(),[d]),p=(0,o.useCallback)(e=>{if(!i)return;let t=n.getVisibleLeafColumns(),l=t.findIndex(e=>e.id===i.colId)+("left"===e?-1:1);l<0||l>=t.length||d({colId:t[l].id,rowIndex:i.rowIndex,state:"selected"})},[d,i,n]),m=(0,o.useCallback)(e=>{i&&u(t=>{let{rowIndex:n}=i,l=t=>t+("down"===e?1:-1);if(!t.length){let e=l(n);return e<0?[]:[e]}let o=l(t[t.length-1]);return o<0?t:o===n?[]:t.includes(o)?t.slice(0,-1):[...t,o]})},[i]),h=(0,o.useCallback)((e,t)=>{d({colId:e,rowIndex:t,state:"selected"})},[d]),g=(0,o.useCallback)(()=>{i&&(s.length?u([]):d("selected"===i.state?null:{...i,state:"selected"}))},[d,i,s.length]),f=(0,o.useCallback)((e,t)=>{if(!i)return;let n="ArrowDown"===t?"down":"up",l="down"===n?1:-1;if(e)m(n);else{let e=i.rowIndex+l;if(e<0)return;h(i.colId,e)}},[m,i,h]),v=(0,o.useCallback)(e=>{if(!i)return;let{key:t,shiftKey:n}=e;switch(t){case"Shift":break;case"Escape":g();break;case"ArrowDown":case"ArrowUp":e.preventDefault(),f(n,t);break;case"ArrowLeft":case"ArrowRight":"selected"===i.state&&(e.preventDefault(),p("ArrowLeft"===t?"left":"right"))}},[i,g,f,p]),x=(0,o.useCallback)(e=>{var t;i&&((null==(t=document.getElementById("cell-".concat(i.colId,"-").concat(i.rowIndex)))?void 0:t.contains(e.target))||c())},[c,i]);(0,o.useEffect)(()=>(i&&(document.addEventListener("keydown",v),document.addEventListener("click",x)),()=>{i&&(document.removeEventListener("keydown",v),document.removeEventListener("click",x))}),[x,v,i]);let b=(0,o.useCallback)(()=>r(e=>e?{...e,state:"focused"}:null),[]),y=(0,o.useCallback)((e,t)=>(null==i?void 0:i.colId)!==e?null:i.rowIndex===t?"focused"===i.state?"focused":"selectedAnchor":s.includes(t)?"selectedRange":null,[i,s]),j=(0,o.useCallback)(()=>{i&&d({colId:i.colId,rowIndex:i.rowIndex+1,state:"selected"})},[d,i]),w=(0,o.useMemo)(()=>({focusAnchorCell:b,resetFocusSelection:c,setSelectedAnchorCell:h,getStateByCellId:y,submitFocusedCell:j}),[b,c,h,y,j]);return(0,l.jsx)(a.DocumentSheetListContext.Provider,{value:w,children:t})}aJ.displayName="Memo(PaneHeader)";let a1=eb.styled.td(n5(),e=>{let{width:t}=e;return t}),a2=(0,eb.styled)(a1)(n6());function a3(e){let{getValue:t,column:n,row:i,fieldType:r}=e,s="cell-".concat(n.id,"-").concat(i.index),[u,d]=(0,o.useState)(t()),[c,p]=(0,o.useState)(!1),m=(0,o.useRef)(null),{focusAnchorCell:h,resetFocusSelection:g,setSelectedAnchorCell:f,getStateByCellId:v,submitFocusedCell:x}=(()=>{let e=(0,o.useContext)(a.DocumentSheetListContext);if(void 0===e)throw Error("useDocumentSheetListContext must be used within an DocumentSheetListProvider");return e})(),b=v(n.id,i.index),y=(0,o.useCallback)(()=>{f(n.id,i.index),h()},[n.id,h,i.index,f]),{patchDocument:j}=e.table.options.meta||{},w=()=>{var e;null==(e=m.current)||e.focus(),m.current instanceof HTMLInputElement&&m.current.select()},S=(0,o.useCallback)(e=>{let{key:t}=e;"Enter"===t&&("selectedAnchor"===b&&w(),"focused"===b&&x())},[b,x]),C=(0,o.useCallback)(e=>{var t;let l=null==(t=e.clipboardData)?void 0:t.getData("Text");("string"==typeof l||"number"==typeof l)&&(d(l),null==j||j(i.id,n.id,l))},[n.id,j,i.id]),_=(0,o.useCallback)(()=>{navigator.clipboard.writeText(u.toString())},[u]);(0,o.useEffect)(()=>(("selectedAnchor"===b||"focused"===b)&&document.addEventListener("keydown",S),("selectedAnchor"===b||"selectedRange"===b)&&document.addEventListener("paste",C),"selectedAnchor"===b&&document.addEventListener("copy",_),()=>{("selectedAnchor"===b||"focused"===b)&&document.removeEventListener("keydown",S),("selectedAnchor"===b||"selectedRange"===b)&&document.removeEventListener("paste",C),"selectedAnchor"===b&&document.removeEventListener("copy",_)}),[s,b,n.id,v,_,S,C,i.index]);let I=()=>"focused"===b?"2px solid blue":"selectedRange"===b?"1px solid green":"selectedAnchor"===b?"1px solid blue":"1px solid transparent",T={onFocus:y,onBlur:()=>{c&&(null==j||j(i.id,n.id,u),p(!1)),g()},onMouseDown:e=>{2===e.detail?w():(e.preventDefault(),f(n.id,i.index))},"aria-selected":!!b,"data-testid":s,id:s,ref:e=>{m.current=e}};return"boolean"===r.name?(0,l.jsxs)(eg.Select,{...T,onChange:()=>null,radius:0,style:{boxShadow:"none",border:I(),padding:0},value:JSON.stringify(u),children:[(0,l.jsx)("option",{value:"True",children:"True"}),(0,l.jsx)("option",{value:"False",children:"False"})]}):(0,l.jsx)(eg.TextInput,{...T,size:0,radius:0,border:!1,style:{border:I(),padding:"22px 16px"},value:"string"==typeof u||"number"==typeof u?u:JSON.stringify(u),onChange:e=>{p(!0),d(e.target.value)}})}function a4(e){var t,n;let i=e.column.getIsPinned(),o=i&&e.column.getIsLastColumn("left")?2:1;return(0,l.jsx)(i?a2:a1,{style:{left:null!=(n=e.column.getStart("left"))?n:void 0,borderRight:"".concat(o,"px solid var(--card-border-color)")},width:e.column.getSize(),children:ni(e.column.columnDef.cell,null==(t=e.getContext)?void 0:t.call(e))},e.row.original._id+e.id)}let a5=e=>{var t;let{documentPreviewStore:n,row:i,schemaType:s}=e,a=(0,o.useMemo)(()=>(0,r.getPreviewStateObservable)(n,s,i.original._id),[n,i.original._id,s]),u=(0,r.useDocumentVersionInfo)(i.original._id),{snapshot:d,isLoading:c}=(0,eS.useObservable)(a,{snapshot:null,isLoading:!0});if(c)return(0,l.jsx)(eg.Text,{size:1,muted:!0,children:"Loading..."});let p=null!=(t=null==d?void 0:d.title)?t:"Untitled";return(0,l.jsxs)(eg.Flex,{align:"center",gap:3,children:[(0,l.jsx)(r.DocumentStatusIndicator,{draft:u.draft,published:u.published,versions:void 0}),(0,l.jsx)(eg.Text,{size:1,children:p})]})},a6={accessor:(e,t)=>"function"==typeof e?{...t,accessorFn:e}:{...t,accessorKey:e},display:e=>e,group:e=>e},a8=["string","number","boolean"],a7=(e,t)=>e.fields.reduce((e,n)=>{let{type:i,name:o}=n;return a8.includes(i.name)?[...e,a6.accessor(t?"".concat(t,".").concat(n.name):n.name,{id:t?"".concat(t,"_").concat(n.name):n.name,header:n.type.title,enableHiding:!0,cell:e=>(0,l.jsx)(a3,{...e,fieldType:i})})]:"object"===i.name&&(0,ev.isObjectSchemaType)(i)&&!t?[...e,a6.group({header:o,columns:a7(i,n.name)})]:e},[]),a9=e=>e.flatMap(e=>"accessorKey"in e?e:"columns"in e&&e.columns?a9(e.columns):[]);function ue(e){let{table:t}=e,{t:n}=(0,r.useTranslation)(),i=t.getVisibleLeafColumns().filter(e=>e.getCanHide()).length>=5,s=(0,o.useCallback)(()=>{t.resetColumnVisibility()},[t]);return(0,l.jsx)(f.MenuButton,{button:(0,l.jsx)(f.Button,{mode:"bleed",text:n("sheet-list.edit-columns")}),id:"columns-control",menu:(0,l.jsx)(eg.Menu,{padding:3,paddingTop:4,style:{width:240},children:(0,l.jsxs)(eg.Flex,{direction:"column",height:"fill",gap:3,children:[(0,l.jsx)(eg.Text,{weight:"semibold",size:1,children:n("sheet-list.select-fields")}),(0,l.jsx)(eg.Flex,{style:{flex:"1 1 auto",maxHeight:320,overflowY:"scroll"},children:(0,l.jsx)(eg.Stack,{children:t.getAllLeafColumns().filter(e=>e.getCanHide()).map(e=>{var n;return(0,l.jsxs)(eg.Flex,{marginY:2,align:"center",children:[(0,l.jsx)(eg.Checkbox,{readOnly:(e=>{let n=e.getIsVisible(),l=1===t.getVisibleLeafColumns().filter(e=>e.getCanHide()).length;return i&&!n||l&&n})(e),checked:e.getIsVisible(),onChange:()=>{e.toggleVisibility()},id:"col-visibility-".concat(e.id),style:{display:"block"}}),(0,l.jsx)(eg.Box,{flex:1,paddingLeft:3,children:(0,l.jsx)(eg.Text,{size:1,children:(0,l.jsx)("label",{htmlFor:"col-visibility-".concat(e.id),children:null==(n=e.columnDef.header)?void 0:n.toString()})})})]},e.id)})})}),(0,l.jsx)(f.Button,{width:"fill",mode:"ghost",text:n("sheet-list.reset-columns"),onClick:s})]})}),placement:"bottom",popover:{portal:!0}})}let ut=(0,eb.styled)(eg.Flex)(n8());function un(){let e,t,n,i=(0,eh.c)(5),{state:o}=(0,r.useSearchState)(),{filtersVisible:s}=o;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(r.SearchHeader,{}),i[0]=e):e=i[0],i[1]!==s?(t=s&&(0,l.jsx)(r.Filters,{showTypeFilter:!1}),i[1]=s,i[2]=t):t=i[2],i[3]!==t?(n=(0,l.jsxs)(ut,{children:[e,t]}),i[3]=t,i[4]=n):n=i[4],n}let ui=eb.styled.th(n7(),e=>{let{width:t}=e;return t},e=>{let{width:t}=e;return t}),ul=(0,eb.styled)(ui)(n9()),uo=eb.styled.div(ie(),ui);function ur(e){var t;let{header:n,headerGroup:i}=e,{t:o}=(0,r.useTranslation)(),s=n.column.getIsPinned(),a=i.depth>0&&!n.column.parent?null:(0,l.jsx)(eg.Text,{size:1,weight:"semibold",textOverflow:"ellipsis",children:ni(n.column.columnDef.header,n.getContext())}),u=s?ul:ui,c=n.column.getCanHide()&&(0===i.depth?!n.column.columns.length:n.column.parent),p=s&&n.column.getIsLastColumn("left")?2:1;return(0,l.jsx)(u,{style:{left:null!=(t=n.column.getStart("left"))?t:void 0,borderRight:"".concat(p,"px solid var(--card-border-color)")},"data-testid":"header-".concat(n.id),width:n.getSize(),children:(0,l.jsxs)(eg.Flex,{justify:"space-between",marginX:2,align:"baseline",children:[(0,l.jsx)(f.Tooltip,{delay:500,content:a,children:(0,l.jsx)(eg.Box,{style:{boxSizing:"border-box"},marginLeft:3,marginRight:3,children:a})}),c&&(0,l.jsx)(uo,{children:(0,l.jsx)(f.MenuButton,{button:(0,l.jsx)(f.Button,{tooltipProps:{content:"Open field menu"},mode:"bleed",icon:d.EllipsisHorizontalIcon,"data-testid":"field-menu-button"}),id:"field menu",popover:{placement:"bottom-end"},menu:(0,l.jsx)(eg.Menu,{children:(0,l.jsx)(f.MenuItem,{text:o("sheet-list.hide-field"),icon:d.CloseIcon,onClick:()=>n.column.toggleVisibility()})})})})]})},n.id)}function us(e){let{table:t}=e;return(0,l.jsx)(f.TooltipDelayGroupProvider,{children:(0,l.jsxs)(eg.Flex,{gap:3,align:"center",children:[(0,l.jsx)(f.Button,{onClick:()=>t.setPageIndex(0),disabled:!t.getCanPreviousPage(),icon:d.DoubleChevronLeftIcon,tooltipProps:{content:"Go to first page"}}),(0,l.jsx)(f.Button,{onClick:()=>t.previousPage(),disabled:!t.getCanPreviousPage(),icon:d.ChevronLeftIcon,tooltipProps:{content:"Go to previous page"}}),(0,l.jsxs)(eg.Text,{style:{whiteSpace:"nowrap"},children:[t.getState().pagination.pageIndex+1," of ",t.getPageCount()]}),(0,l.jsx)(f.Button,{onClick:()=>t.nextPage(),disabled:!t.getCanNextPage(),icon:d.ChevronRightIcon,tooltipProps:{content:"Go to next page"}}),(0,l.jsx)(f.Button,{onClick:()=>t.setPageIndex(t.getPageCount()-1),disabled:!t.getCanNextPage(),icon:d.DoubleChevronRightIcon,tooltipProps:{content:"Go to last page"}}),(0,l.jsx)("select",{value:t.getState().pagination.pageSize,onChange:e=>{t.setPageSize(Number(e.target.value))},children:[25,50,100].map(e=>(0,l.jsx)("option",{value:e,children:e},e))})]})})}function ua(e,t){switch(t.type){case"DOCUMENTS_SET":{let n=t.documents.reduce((e,t)=>({...e,[t._id]:t}),{});return{...e,documents:n}}case"DOCUMENT_RECEIVED":{let n=t.payload;return{...e,documents:{...e.documents,[n._id]:n}}}case"DOCUMENT_DELETED":{let{[t.id]:n,...i}=e.documents;return{...e,documents:i}}case"DOCUMENT_UPDATED":{let n=t.payload,i=n._id,l={...e.documents[i],...n};return{...e,documents:{...e.documents,[i]:l}}}default:return e}}let uu={events:["welcome","mutation","reconnect"],includeResult:!0,visibility:"query",includeAllVersions:!0,tag:"document-sheet-list-store"},ud=(0,eb.styled)(eg.Flex)(it()),uc=eb.styled.div(ii()),up=eb.styled.table(il());function um(e){let{documentSchemaType:t}=e,{dispatch:n,state:i}=(0,r.useSearchState)(),{columns:a,initialColumnsVisibility:u}=function(e){let t=(0,r.useDocumentPreviewStore)(),n=(0,o.useMemo)(()=>e?[a6.display({id:"selected",enableHiding:!1,header:e=>(0,l.jsxs)(eg.Box,{children:[(0,l.jsx)(eg.Checkbox,{style:{paddingLeft:4},indeterminate:e.table.getIsSomeRowsSelected(),onChange:e.table.getToggleAllPageRowsSelectedHandler()}),e.table.getSelectedRowModel().rows.length," selected"]}),cell:aZ}),a6.accessor("Preview",{enableHiding:!1,id:"Preview",cell:n=>(0,l.jsx)(a5,{...n,documentPreviewStore:t,schemaType:e})}),...a7(e)]:[],[t,e]),[i]=(0,o.useMemo)(()=>a9(n).reduce((e,t)=>{let[n,i]=e;if(!t.id)throw Error("Column must have an id");let l=t.id;return t.enableHiding?5===i?[{...n,[l]:!1},i]:[{...n,[l]:!0},i+1]:[{...n,[l]:!0},i]},[{},0]),[n]);return{columns:n,initialColumnsVisibility:i}}(t),{data:d}=function(e){let t,n,i,l,a=(0,eh.c)(12),{typeName:u}=e,{state:d}=(0,r.useSearchState)();a[0]!==d.result.hits?(t=new Map,d.result.hits.forEach(e=>t.set((0,s.getPublishedId)(e.hit._id),e.hit)),a[0]=d.result.hits,a[1]=t):t=a[1];let c=t,p='_type == "'.concat(u,'"');a[2]!==p?(n={filter:p},a[2]=p,a[3]=n):n=a[3];let{data:m,isLoading:h}=function(e){let t,n,i,l,a,u,d,c,p,m,h=(0,eh.c)(27),{filter:g,params:f,apiVersion:v}=e,x="*[".concat(g,"][0...2000]"),b=v||r.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion;h[0]!==b?(t={...r.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:b},h[0]=b,h[1]=t):t=h[1];let y=(0,r.useClient)(t);h[2]===Symbol.for("react.memo_cache_sentinel")?(n={documents:{}},h[2]=n):n=h[2];let[j,w]=(0,o.useReducer)(ua,n),[S,C]=(0,o.useState)(null!==y),[_,I]=(0,o.useState)(null);h[3]!==x||h[4]!==y||h[5]!==f?(i=async()=>{if(!y)return void C(!1);try{let e=await y.fetch(x,f);w({type:"DOCUMENTS_SET",documents:e}),C(!1)}catch(e){I(e)}},h[3]=x,h[4]=y,h[5]=f,h[6]=i):i=h[6];let T=i;h[7]!==T?(l=async e=>{if("welcome"===e.type&&(C(!0),await T(),C(!1)),"reconnect"===e.type&&C(!0),"mutation"===e.type){if("appear"===e.transition){let t=e.result;t&&w({type:"DOCUMENT_RECEIVED",payload:t})}if("disappear"===e.transition&&w({type:"DOCUMENT_DELETED",id:e.documentId}),"update"===e.transition){let t=e.result;t&&w({type:"DOCUMENT_UPDATED",payload:t})}}},h[7]=T,h[8]=l):l=h[8];let R=l;e:{let e;if(!y){let e;h[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,eq.of)(),h[9]=e):e=h[9],a=e;break e}if(h[10]!==x||h[11]!==y.observable||h[12]!==f){let t;h[14]===Symbol.for("react.memo_cache_sentinel")?(t=e=>(I(e),(0,eq.of)(e)),h[14]=t):t=h[14],e=y.observable.listen(x,f,uu).pipe((0,ek.catchError)(t)),h[10]=x,h[11]=y.observable,h[12]=f,h[13]=e}else e=h[13];a=e}let P=a;h[15]!==R||h[16]!==P?(u=()=>{let e=P.subscribe(R);return()=>{null==e||e.unsubscribe()}},d=[R,P],h[15]=R,h[16]=P,h[17]=u,h[18]=d):(u=h[17],d=h[18]),(0,o.useEffect)(u,d),h[19]!==j.documents?(c=Object.keys(j.documents).reduce((e,t)=>{let n=j.documents[t],i=n._id===(0,s.getDraftId)(n._id),l=i?n._id:(0,s.getDraftId)(n._id);return e[l]&&!i||(e[l]=n),e},{}),h[19]=j.documents,h[20]=c):c=h[20];let E=c;h[21]!==E?(p=Object.values(E),h[21]=E,h[22]=p):p=h[22];let k=p;return h[23]!==k||h[24]!==_||h[25]!==S?(m={data:k,isLoading:S,error:_},h[23]=k,h[24]=_,h[25]=S,h[26]=m):m=h[26],m}(n);if(a[4]!==m||a[5]!==c){let e;a[7]!==c?(e=e=>c.has((0,s.getPublishedId)(e._id)),a[7]=c,a[8]=e):e=a[8],i=m.filter(e),a[4]=m,a[5]=c,a[6]=i}else i=a[6];let g=i;return a[9]!==g||a[10]!==h?(l={data:g,isLoading:h},a[9]=g,a[10]=h,a[11]=l):l=a[11],l}({typeName:t.name}),[c,p]=(0,o.useState)(null),m=i.result.hits.length,h=function(e){let t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=o.useState(()=>({current:function(e){var t,n;let i=[...nn,...null!=(t=e._features)?t:[]],l={_features:i},o=l._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultOptions?void 0:t.getDefaultOptions(l)),{}),r={...null!=(n=e.initialState)?n:{}};l._features.forEach(e=>{var t;r=null!=(t=null==e.getInitialState?void 0:e.getInitialState(r))?t:r});let s=[],a=!1,u={_features:i,options:{...o,...e},initialState:r,_queue:e=>{s.push(e),a||(a=!0,Promise.resolve().then(()=>{for(;s.length;)s.shift()();a=!1}).catch(e=>setTimeout(()=>{throw e})))},reset:()=>{l.setState(l.initialState)},setOptions:e=>{var t;t=tT(e,l.options),l.options=l.options.mergeOptions?l.options.mergeOptions(o,t):{...o,...t}},getState:()=>l.options.state,setState:e=>{null==l.options.onStateChange||l.options.onStateChange(e)},_getRowId:(e,t,n)=>{var i;return null!=(i=null==l.options.getRowId?void 0:l.options.getRowId(e,t,n))?i:"".concat(n?[n.id,t].join("."):t)},getCoreRowModel:()=>(l._getCoreRowModel||(l._getCoreRowModel=l.options.getCoreRowModel(l)),l._getCoreRowModel()),getRowModel:()=>l.getPaginationRowModel(),getRow:(e,t)=>{let n=(t?l.getPrePaginationRowModel():l.getRowModel()).rowsById[e];if(!n&&!(n=l.getCoreRowModel().rowsById[e]))throw Error();return n},_getDefaultColumnDef:tE(()=>[l.options.defaultColumn],e=>{var t;return e=null!=(t=e)?t:{},{header:e=>{let t=e.header.column.columnDef;return t.accessorKey?t.accessorKey:t.accessorFn?t.id:null},cell:e=>{var t,n;return null!=(t=null==(n=e.renderValue())||null==n.toString?void 0:n.toString())?t:null},...l._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultColumnDef?void 0:t.getDefaultColumnDef()),{}),...e}},tk(e,"debugColumns","_getDefaultColumnDef")),_getColumnDefs:()=>l.options.columns,getAllColumns:tE(()=>[l._getColumnDefs()],e=>{let t=function(e,n,i){return void 0===i&&(i=0),e.map(e=>{let o=function(e,t,n,i){var l,o;let r,s={...e._getDefaultColumnDef(),...t},a=s.accessorKey,u=null!=(l=null!=(o=s.id)?o:a?"function"==typeof String.prototype.replaceAll?a.replaceAll(".","_"):a.replace(/\./g,"_"):void 0)?l:"string"==typeof s.header?s.header:void 0;if(s.accessorFn?r=s.accessorFn:a&&(r=a.includes(".")?e=>{let t=e;for(let e of a.split(".")){var n;t=null==(n=t)?void 0:n[e]}return t}:e=>e[s.accessorKey]),!u)throw Error();let d={id:"".concat(String(u)),accessorFn:r,parent:i,depth:n,columnDef:s,columns:[],getFlatColumns:tE(()=>[!0],()=>{var e;return[d,...null==(e=d.columns)?void 0:e.flatMap(e=>e.getFlatColumns())]},tk(e.options,"debugColumns","column.getFlatColumns")),getLeafColumns:tE(()=>[e._getOrderColumnsFn()],e=>{var t;return null!=(t=d.columns)&&t.length?e(d.columns.flatMap(e=>e.getLeafColumns())):[d]},tk(e.options,"debugColumns","column.getLeafColumns"))};for(let t of e._features)null==t.createColumn||t.createColumn(d,e);return d}(l,e,i,n);return o.columns=e.columns?t(e.columns,o,i+1):[],o})};return t(e)},tk(e,"debugColumns","getAllColumns")),getAllFlatColumns:tE(()=>[l.getAllColumns()],e=>e.flatMap(e=>e.getFlatColumns()),tk(e,"debugColumns","getAllFlatColumns")),_getAllFlatColumnsById:tE(()=>[l.getAllFlatColumns()],e=>e.reduce((e,t)=>(e[t.id]=t,e),{}),tk(e,"debugColumns","getAllFlatColumnsById")),getAllLeafColumns:tE(()=>[l.getAllColumns(),l._getOrderColumnsFn()],(e,t)=>t(e.flatMap(e=>e.getLeafColumns())),tk(e,"debugColumns","getAllLeafColumns")),getColumn:e=>l._getAllFlatColumnsById()[e]};Object.assign(l,u);for(let e=0;e<l._features.length;e++){let t=l._features[e];null==t||null==t.createTable||t.createTable(l)}return l}(t)})),[i,l]=o.useState(()=>n.current.initialState);return n.current.setOptions(t=>({...t,...e,state:{...i,...e.state},onStateChange:t=>{l(t),null==e.onStateChange||e.onStateChange(t)}})),n.current}({data:d,columns:a,getCoreRowModel:e=>tE(()=>[e.options.data],t=>{let n={rows:[],flatRows:[],rowsById:{}},i=function(t,l,o){void 0===l&&(l=0);let r=[];for(let a=0;a<t.length;a++){let u=tA(e,e._getRowId(t[a],a,o),t[a],a,l,void 0,null==o?void 0:o.id);if(n.flatRows.push(u),n.rowsById[u.id]=u,r.push(u),e.options.getSubRows){var s;u.originalSubRows=e.options.getSubRows(t[a],a),null!=(s=u.originalSubRows)&&s.length&&(u.subRows=i(u.originalSubRows,l+1,u))}}return r};return n.rows=i(t),n},tk(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex())),getFilteredRowModel:e=>tE(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,i)=>{var l,o;let r,s;if(!t.rows.length||!(null!=n&&n.length)&&!i){for(let e=0;e<t.flatRows.length;e++)t.flatRows[e].columnFilters={},t.flatRows[e].columnFiltersMeta={};return t}let a=[],u=[];(null!=n?n:[]).forEach(t=>{var n;let i=e.getColumn(t.id);if(!i)return;let l=i.getFilterFn();l&&a.push({id:t.id,filterFn:l,resolvedValue:null!=(n=null==l.resolveFilterValue?void 0:l.resolveFilterValue(t.value))?n:t.value})});let d=(null!=n?n:[]).map(e=>e.id),c=e.getGlobalFilterFn(),p=e.getAllLeafColumns().filter(e=>e.getCanGlobalFilter());i&&c&&p.length&&(d.push("__global__"),p.forEach(e=>{var t;u.push({id:e.id,filterFn:c,resolvedValue:null!=(t=null==c.resolveFilterValue?void 0:c.resolveFilterValue(i))?t:i})}));for(let e=0;e<t.flatRows.length;e++){let n=t.flatRows[e];if(n.columnFilters={},a.length)for(let e=0;e<a.length;e++){let t=(r=a[e]).id;n.columnFilters[t]=r.filterFn(n,t,r.resolvedValue,e=>{n.columnFiltersMeta[t]=e})}if(u.length){for(let e=0;e<u.length;e++){let t=(s=u[e]).id;if(s.filterFn(n,t,s.resolvedValue,e=>{n.columnFiltersMeta[t]=e})){n.columnFilters.__global__=!0;break}}!0!==n.columnFilters.__global__&&(n.columnFilters.__global__=!1)}}return l=t.rows,o=e=>{for(let t=0;t<d.length;t++)if(!1===e.columnFilters[d[t]])return!1;return!0},e.options.filterFromLeafRows?function(e,t,n){var i;let l=[],o={},r=null!=(i=n.options.maxLeafRowFilterDepth)?i:100,s=function(e,i){void 0===i&&(i=0);let a=[];for(let d=0;d<e.length;d++){var u;let c=e[d],p=tA(n,c.id,c.original,c.index,c.depth,void 0,c.parentId);if(p.columnFilters=c.columnFilters,null!=(u=c.subRows)&&u.length&&i<r){if(p.subRows=s(c.subRows,i+1),t(c=p)&&!p.subRows.length||t(c)||p.subRows.length){a.push(c),o[c.id]=c,l.push(c);continue}}else t(c=p)&&(a.push(c),o[c.id]=c,l.push(c))}return a};return{rows:s(e),flatRows:l,rowsById:o}}(l,o,e):function(e,t,n){var i;let l=[],o={},r=null!=(i=n.options.maxLeafRowFilterDepth)?i:100,s=function(e,i){void 0===i&&(i=0);let a=[];for(let d=0;d<e.length;d++){let c=e[d];if(t(c)){var u;if(null!=(u=c.subRows)&&u.length&&i<r){let e=tA(n,c.id,c.original,c.index,c.depth,void 0,c.parentId);e.subRows=s(c.subRows,i+1),c=e}a.push(c),l.push(c),o[c.id]=c}}return a};return{rows:s(e),flatRows:l,rowsById:o}}(l,o,e)},tk(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex())),getPaginationRowModel:e=>tE(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(t,n)=>{let i;if(!n.rows.length)return n;let{pageSize:l,pageIndex:o}=t,{rows:r,flatRows:s,rowsById:a}=n,u=l*o;r=r.slice(u,u+l),(i=e.options.paginateExpandedRows?{rows:r,flatRows:s,rowsById:a}:function(e){let t=[],n=e=>{var i;t.push(e),null!=(i=e.subRows)&&i.length&&e.getIsExpanded()&&e.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}({rows:r,flatRows:s,rowsById:a})).flatRows=[];let d=e=>{i.flatRows.push(e),e.subRows.length&&e.subRows.forEach(d)};return i.rows.forEach(d),i},tk(e.options,"debugTable","getPaginationRowModel")),autoResetPageIndex:!1,initialState:{columnPinning:{left:["selected","Preview"]},pagination:{pageSize:25},columnVisibility:u},getRowId:e=>e._id,meta:{selectedAnchor:c,setSelectedAnchor:p,patchDocument:(e,t,n)=>null}}),{rows:g}=h.getRowModel();(0,o.useEffect)(()=>(n({type:"TERMS_TYPE_ADD",schemaType:t}),()=>{n({type:"TERMS_TYPE_REMOVE",schemaType:t})}),[t,n]);let f=(0,o.useCallback)(e=>(0,l.jsx)(eg.Box,{as:"tr",paddingY:2,style:{display:"flex",width:"100%"},children:e.getVisibleCells().map(t=>(0,l.jsx)(a4,{...t},e.original._id+t.id))},e.original._id+e.id),[]),v="Total: ".concat(m," rows, showing ").concat(g.length," rows");return(0,l.jsxs)(ud,{direction:"column",paddingX:3,"data-testid":"document-sheet-list-pane",children:[(0,l.jsxs)(eg.Flex,{direction:"row",align:"center",paddingY:3,paddingX:1,justify:"space-between",children:[(0,l.jsxs)(eg.Flex,{direction:"row",align:"center",children:[(0,l.jsx)(un,{}),(0,l.jsx)(eg.Text,{size:0,muted:!0,children:v})]}),(0,l.jsx)(ue,{table:h})]}),(0,l.jsx)(uc,{children:(0,l.jsx)(a0,{table:h,children:(0,l.jsxs)(up,{children:[(0,l.jsx)("thead",{children:h.getHeaderGroups().map(e=>(0,l.jsx)(eg.Box,{as:"tr",children:e.headers.map(t=>(0,l.jsx)(ur,{header:t,headerGroup:e},t.id))},e.id))}),(0,l.jsx)("tbody",{children:h.getRowModel().rows.map(f)})]})})}),(0,l.jsx)(eg.Flex,{justify:"flex-end",padding:3,gap:4,paddingY:5,children:(0,l.jsx)(us,{table:h})})]})}function uh(e){let t=(0,r.useSchema)(),n=e.pane.schemaTypeName,i=t.get(n);if(!i||!(0,ev.isDocumentSchemaType)(i))throw Error('Schema type "'.concat(n,'" not found or not a document schema'));return(0,l.jsx)(r.SearchProvider,{children:(0,l.jsx)(um,{...e,documentSchemaType:i})})}function ug(e){let[t,n]=(0,o.useState)(e);return(0,eT.default)(t,e)?t:(n(e),e)}let uf=(0,o.memo)(function(e){let t,n,i,o,s,a,u,d,c,p=(0,eh.c)(36),{index:m,isSelected:h,pane:g,paneKey:f}=e,{name:v}=(0,r.useSource)(),{defaultLayout:x,initialValueTemplates:b,menuItemGroups:y,menuItems:j,options:w}=g,S=void 0===b?r.EMPTY_ARRAY:b,{defaultOrdering:C,filter:_}=w,I=void 0===C?r.EMPTY_ARRAY:C,T=ug(w.params||aF),R=g.source;e:{let e;p[0]!==_||p[1]!==T?(e=aH(_,T),p[0]=_,p[1]=T,p[2]=e):e=p[2];let n=e;if((null==n?void 0:n.length)===1){t=n[0];break e}t=null}let P=t,[E,k]=lL("layout",null!=P?P:g.id,void 0===x?"default":x),{title:D}=(0,r.useI18nText)(g);p[3]!==I?(n=(null==I?void 0:I.length)>0?{by:I}:aM,p[3]=I,p[4]=n):n=p[4];let M=n,[F,A]=lL("sort-order",null!=P?P:g.id,M);p[5]!==E||p[6]!==j||p[7]!==F?(i=(e=>{let{menuItems:t,sortOrderRaw:n,layout:i}=e;return null==t?void 0:t.map(e=>{var t,l,o,s;return(null==(t=e.params)?void 0:t.layout)?{...e,selected:i===(null==(l=e.params)?void 0:l.layout)}:(null==e||null==(o=e.params)?void 0:o.by)?{...e,selected:(0,eI.default)(null==n?void 0:n.by,(null==e||null==(s=e.params)?void 0:s.by)||r.EMPTY_ARRAY)}:{...e,selected:!1}})})({menuItems:j,sortOrderRaw:F,layout:E}),p[5]=E,p[6]=j,p[7]=F,p[8]=i):i=p[8];let L=i,V="sheetList"===E;p[9]!==V||p[10]!==E||p[11]!==e||p[12]!==F?(o=V?(0,l.jsx)(uh,{...e},e.pane.id):(0,l.jsx)(a$,{...e,sortOrder:F,layout:E}),p[9]=V,p[10]=E,p[11]=e,p[12]=F,p[13]=o):o=p[13];let z=o,O=R||v;return p[14]!==V?(s=V?{}:{currentMaxWidth:350,maxWidth:640},p[14]=V,p[15]=s):s=p[15],p[16]!==g.source?(a=oV,p[16]=g.source,p[17]=a):a=p[17],p[18]!==m||p[19]!==S||p[20]!==y||p[21]!==L||p[22]!==k||p[23]!==A||p[24]!==D?(u=(0,l.jsx)(aJ,{index:m,initialValueTemplates:S,menuItemGroups:y,menuItems:L,setLayout:k,setSortOrder:A,title:D}),p[18]=m,p[19]=S,p[20]=y,p[21]=L,p[22]=k,p[23]=A,p[24]=D,p[25]=u):u=p[25],p[26]!==h||p[27]!==f||p[28]!==z||p[29]!==u||p[30]!==s||p[31]!==a?(d=(0,l.jsxs)(iq,{"data-ui":"DocumentListPane",id:f,minWidth:320,...s,selected:h,children:[a,u,z]}),p[26]=h,p[27]=f,p[28]=z,p[29]=u,p[30]=s,p[31]=a,p[32]=d):d=p[32],p[33]!==d||p[34]!==O?(c=(0,l.jsx)(r.SourceProvider,{name:O,children:d}),p[33]=d,p[34]=O,p[35]=c):c=p[35],c});uf.displayName="Memo(PaneContainer)";let uv=e=>{let{liveEditSchemaType:t,version:n}=e;return t&&!n?{label:"Live",color:"danger"}:null};uv.displayName="LiveEditBadge";let ux={activePanes:[]};function ub(e){ux.activePanes=e}function uy(e,t,n,i){let l=(null==n?void 0:n.panes)||[],o=ux.activePanes||[],r=t.id||(0,ex.uuid)();for(let n=o.length-1;n>=0;n--){var s;let a=o[n];if("object"==typeof a&&((null==(s=a.canHandleIntent)?void 0:s.call(a,e,t,{pane:a,index:n}))||"documentList"===a.type&&a.schemaTypeName===t.type&&"_type == $type"===a.options.filter)){let o=function(e,t){let{template:n,version:i}=t;return"create"!==e?oz:n&&i?{template:n,version:i}:n?{template:n}:i?{version:i}:oz}(e,t);return{panes:l.slice(0,n).concat([[{id:r,params:o,payload:i}]])}}}return{intent:e,params:t,payload:i}}let uj=(0,eb.styled)(r.ScrollContainer)(io()),uw=(0,eb.styled)(eg.Box)(ir());function uS(e){let t,n,i,s,a,u,d,c,p,m,h,g,f=(0,eh.c)(39),{showChanges:v}=e,{documentId:x,schemaType:y,timelineError:j,timelineStore:w,value:S}=lx(),{selectedReleaseId:C}=(0,r.usePerspective)(),[_,I]=(0,o.useState)(null),T=(0,r.useTimelineSelector)(w,uP),R=(0,r.useTimelineSelector)(w,uR),P=(0,r.useTimelineSelector)(w,uT),E=(0,r.useTimelineSelector)(w,uI),k=(0,r.useTimelineSelector)(w,u_),D="loading"===E,M=!P,{t:F}=(0,r.useTranslation)(b);f[0]!==R||f[1]!==x||f[2]!==M||f[3]!==y||f[4]!==S?(t={documentId:x,schemaType:y,FieldWrapper:uC,rootDiff:R,isComparingCurrent:M,value:S,showFromValue:!0},f[0]=R,f[1]=x,f[2]=M,f[3]=y,f[4]=S,f[5]=t):t=f[5];let A=t;if(C){let e;return f[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(eg.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,l.jsx)(eg.Card,{flex:1,padding:2,paddingTop:0,children:(0,l.jsx)(rG,{versionError:!0})})}),f[6]=e):e=f[6],e}return f[7]!==F?(n=F("changes.from.label"),f[7]=F,f[8]=n):n=f[8],f[9]!==n?(i=(0,l.jsx)(eg.Text,{size:1,muted:!0,children:n}),f[9]=n,f[10]=i):i=f[10],f[11]!==k?(s=(0,l.jsx)(rK,{mode:"since",chunk:k,placement:"bottom-start"}),f[11]=k,f[12]=s):s=f[12],f[13]!==F?(a=F("changes.to.label"),f[13]=F,f[14]=a):a=f[14],f[15]!==a?(u=(0,l.jsx)(eg.Text,{size:1,muted:!0,children:a}),f[15]=a,f[16]=u):u=f[16],f[17]!==T?(d=(0,l.jsx)(rK,{chunk:T,mode:"rev",placement:"bottom-end"}),f[17]=T,f[18]=d):d=f[18],f[19]!==i||f[20]!==s||f[21]!==u||f[22]!==d?(c=(0,l.jsx)(eg.Box,{padding:3,children:(0,l.jsxs)(uw,{paddingX:2,paddingBottom:2,children:[i,s,u,d]})}),f[19]=i,f[20]=s,f[21]=u,f[22]=d,f[23]=c):c=f[23],f[24]!==R||f[25]!==A||f[26]!==D||f[27]!==y||f[28]!==v||f[29]!==j?(p=v&&(0,l.jsx)(uE,{diff:R,documentContext:A,error:j,loading:D,schemaType:y}),f[24]=R,f[25]=A,f[26]=D,f[27]=y,f[28]=v,f[29]=j,f[30]=p):p=f[30],f[31]!==p?(m=(0,l.jsx)(uj,{"data-ui":"Scroller",ref:I,children:(0,l.jsx)(eg.Box,{flex:1,paddingX:3,height:"fill",children:p})}),f[31]=p,f[32]=m):m=f[32],f[33]!==_||f[34]!==m?(h=(0,l.jsx)(eg.Card,{flex:1,paddingX:2,paddingY:2,children:(0,l.jsx)(eg.BoundaryElementProvider,{element:_,children:m})}),f[33]=_,f[34]=m,f[35]=h):h=f[35],f[36]!==h||f[37]!==c?(g=(0,l.jsxs)(eg.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[c,h]}),f[36]=h,f[37]=c,f[38]=g):g=f[38],g}function uC(e){return(0,l.jsx)(r.ChangeFieldWrapper,{...e,hasRevertHover:!1})}function u_(e){return e.sinceTime}function uI(e){return e.selectionState}function uT(e){return e.onOlderRevision}function uR(e){return e.diff}function uP(e){return e.revTime}function uE(e){let t,n,i=(0,eh.c)(9),{error:o,diff:s,documentContext:u,loading:d,schemaType:c}=e;if(o){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(r.NoChanges,{}),i[0]=e):e=i[0],e}if(d){let e;return i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(r.LoadingBlock,{showText:!0}),i[1]=e):e=i[1],e}if(!s){let e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(r.NoChanges,{}),i[2]=e):e=i[2],e}return i[3]!==s||i[4]!==c?(t=(0,l.jsx)(r.ChangeList,{diff:s,schemaType:c}),i[3]=s,i[4]=c,i[5]=t):t=i[5],i[6]!==u||i[7]!==t?(n=(0,l.jsx)(a.DocumentChangeContext.Provider,{value:u,children:t}),i[6]=u,i[7]=t,i[8]=n):n=i[8],n}function uk(e){let t,n,i,o,s,a,u,d,c=(0,eh.c)(27),{event:p,isSelected:m,onSelect:h,optionsMenu:g}=e,{t:v}=(0,r.useTranslation)("studio");c[0]!==p?(t=!(0,r.isDeleteDocumentVersionEvent)(p)&&!(0,r.isDeleteDocumentGroupEvent)(p)&&!(0,r.isUnpublishDocumentEvent)(p)&&!(0,r.isScheduleDocumentVersionEvent)(p)&&!(0,r.isUnscheduleDocumentVersionEvent)(p),c[0]=p,c[1]=t):t=c[1];let x=t;c[2]!==p||c[3]!==x||c[4]!==h?(n=e=>{e.preventDefault(),e.stopPropagation(),x&&h(p)},c[2]=p,c[3]=x,c[4]=h,c[5]=n):n=c[5];let b=n;c[6]!==x||c[7]!==v?(i=x?"":v("changes.not-selectable"),c[6]=x,c[7]=v,c[8]=i):i=c[8];let y=x?"button":"div",j=x?"pointer":"default";return c[9]!==j?(o={cursor:j,width:"100%"},c[9]=j,c[10]=o):o=c[10],c[11]!==p?(s=(0,l.jsx)(r.Event,{event:p,showChangesBy:"tooltip"}),c[11]=p,c[12]=s):s=c[12],c[13]!==p.timestamp||c[14]!==b||c[15]!==m||c[16]!==y||c[17]!==o||c[18]!==s?(a=(0,l.jsx)(eg.Card,{as:y,onClick:b,padding:2,pressed:m,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-timestamp":p.timestamp,style:o,children:s}),c[13]=p.timestamp,c[14]=b,c[15]=m,c[16]=y,c[17]=o,c[18]=s,c[19]=a):a=c[19],c[20]!==x||c[21]!==i||c[22]!==a?(u=(0,l.jsx)(f.Tooltip,{content:i,disabled:x,children:a}),c[20]=x,c[21]=i,c[22]=a,c[23]=u):u=c[23],c[24]!==g||c[25]!==u?(d=(0,l.jsxs)(eg.Flex,{gap:1,children:[u,g]}),c[24]=g,c[25]=u,c[26]=d):d=c[26],d}function uD(e){var t,n,i,o;let a,u,d,c,p,m,h,g,v,x,y,j=(0,eh.c)(41),{event:w}=e,{t:S}=(0,r.useTranslation)(b),{t:C}=(0,r.useTranslation)(),_=(0,eg.usePortal)(),{params:I,setParams:T}=lj(),R=(0,r.useSetPerspective)();j[0]!==w.id||j[1]!==w.versionId||j[2]!==w.versionRevisionId||j[3]!==I||j[4]!==T?(a=()=>{T({...I,rev:w.versionRevisionId||"@lastPublished",since:void 0,historyEvent:w.id,historyVersion:(0,s.getVersionFromId)(w.versionId)})},j[0]=w.id,j[1]=w.versionId,j[2]=w.versionRevisionId,j[3]=I,j[4]=T,j[5]=a):a=j[5];let P=a;j[6]!==w.versionRevisionId||j[7]!==I||j[8]!==T||j[9]!==R?(u=()=>{T({...I,rev:w.versionRevisionId,preserveRev:"true",since:void 0}),setTimeout(()=>{R("drafts")},100)},j[6]=w.versionRevisionId,j[7]=I,j[8]=T,j[9]=R,j[10]=u):u=j[10];let E=u;j[11]!==w.release?(d=e=>{let{children:t}=e;return(0,l.jsx)(r.VersionInlineBadge,{$tone:w.release?(0,r.isReleaseDocument)(w.release)?(0,r.getReleaseTone)(w.release):"default":void 0,children:t})},j[11]=w.release,j[12]=d):d=j[12];let k=d,D=w.release&&!(0,r.isReleaseDocument)(w.release),M="timeline-item-menu-button-".concat(w.versionId);j[13]!==S?(c=S("timeline-item.menu-button.aria-label"),j[13]=S,j[14]=c):c=j[14],j[15]!==w.release||j[16]!==D||j[17]!==S?(p=D?S("timeline-item.not-found-release.tooltip",{releaseId:(null==(t=w.release)?void 0:t._id)?(0,r.getReleaseIdFromReleaseDocumentId)(w.release._id):void 0}):S("timeline-item.menu-button.tooltip"),j[15]=w.release,j[16]=D,j[17]=S,j[18]=p):p=j[18],j[19]!==p?(m={content:p},j[19]=p,j[20]=m):m=j[20],j[21]!==D||j[22]!==c||j[23]!==m?(h=(0,l.jsx)(r.ContextMenuButton,{"aria-label":c,tooltipProps:m,disabled:D}),j[21]=D,j[22]=c,j[23]=m,j[24]=h):h=j[24],j[25]!==k||j[26]!==w.release||j[27]!==w.versionRevisionId||j[28]!==E||j[29]!==P||j[30]!==S||j[31]!==C?(g=(0,l.jsx)(eg.Menu,{padding:1,children:w.release?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eC.IntentLink,{intent:r.RELEASES_INTENT,params:{id:(0,r.getReleaseIdFromReleaseDocumentId)(w.release._id)},style:{textDecoration:"none"},children:(0,l.jsx)(eg.MenuItem,{padding:3,children:(0,l.jsx)(eg.Flex,{align:"center",justify:"flex-start",children:(0,l.jsx)(eg.Text,{size:1,style:{textDecoration:"none"},children:(0,l.jsx)(r.Translate,{components:{VersionBadge:e=>{let{children:t}=e;return(0,l.jsx)(k,{children:t})}},i18nKey:"events.open.release",values:{releaseTitle:(null==(n=w.release.metadata)?void 0:n.title)||C("release.placeholder-untitled-release")},t:S})})})})}),(0,l.jsx)(eg.MenuItem,{onClick:P,children:(0,l.jsx)(eg.Flex,{align:"center",justify:"flex-start",children:(0,l.jsx)(eg.Text,{size:1,children:(0,l.jsx)(r.Translate,{components:{VersionBadge:e=>{let{children:t}=e;return(0,l.jsx)(k,{children:t})}},i18nKey:"events.inspect.release",values:{releaseTitle:(null==(i=w.release.metadata)?void 0:i.title)||C("release.placeholder-untitled-release")},t:S})})})})]}):(0,l.jsx)(eg.MenuItem,{onClick:E,disabled:!w.versionRevisionId,children:(0,l.jsx)(eg.Flex,{align:"center",children:(0,l.jsx)(eg.Text,{size:1,children:(0,l.jsx)(r.Translate,{components:{VersionBadge:uM},i18nKey:"events.open.draft",t:S})})})})}),j[25]=k,j[26]=w.release,j[27]=w.versionRevisionId,j[28]=E,j[29]=P,j[30]=S,j[31]=C,j[32]=g):g=j[32];let F=null==(o=_.elements)||!o[rq]||rq;return j[33]===Symbol.for("react.memo_cache_sentinel")?(v=["bottom-end","bottom-start"],j[33]=v):v=j[33],j[34]!==F?(x={portal:F,placement:"bottom",fallbackPlacements:v},j[34]=F,j[35]=x):x=j[35],j[36]!==x||j[37]!==M||j[38]!==h||j[39]!==g?(y=(0,l.jsx)(f.MenuButton,{id:M,button:h,menu:g,popover:x}),j[36]=x,j[37]=M,j[38]=h,j[39]=g,j[40]=y):y=j[40],y}function uM(e){let{children:t}=e;return(0,l.jsx)(r.VersionInlineBadge,{$tone:"caution",children:t})}let uF=ej.motion.create(eg.Box),uA={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},uL=e=>{let{events:t,hasMoreEvents:n,selectedEventId:i,onLoadMore:s,onSelect:a,listMaxHeight:u="calc(100vh - 280px)",fetchEventChildren:d}=e,[c,p]=(0,o.useState)(!1),{t:m}=(0,r.useTranslation)("studio"),[h,g]=(0,o.useState)(()=>{if(i){let e=t.find(e=>e.id===i);if(e&&"parentId"in e&&e.parentId)return new Set([e.parentId])}return new Set}),[f,v]=(0,o.useState)(new Set),x=(0,o.useMemo)(()=>t.filter(e=>(0,r.isCreateDocumentVersionEvent)(e)&&e.parentId?t[t.length-1].id===e.id||h.has(e.parentId):!(0,r.isEditDocumentVersionEvent)(e)||!e.parentId||h.has(e.parentId)),[h,t]),b=(0,o.useCallback)(e=>async()=>{let t=e.id,n=!1;g(e=>{let i=new Set(e);return e.has(t)?i.delete(t):(n=!0,i.add(t)),i}),n&&(v(e=>{let n=new Set(e);return n.add(t),n}),await d(e),v(e=>{let n=new Set(e);return n.delete(t),n}))},[d,v]),y=(0,o.useCallback)(e=>{a(e)},[a]),j=(0,o.useCallback)(e=>{let t=(0,r.getDocumentVariantType)(e.documentId);return(0,r.isPublishDocumentVersionEvent)(e)&&"published"===t?(0,l.jsx)(uD,{event:e}):(0,r.isPublishDocumentVersionEvent)(e)&&"draft"===t&&e.creationEvent||(0,r.isDeleteDocumentVersionEvent)(e)&&e.creationEvent?(0,l.jsx)(rI,{isExpanded:h.has(e.id),onExpand:b(e)}):null},[h,b]),w=(0,o.useCallback)((e,t)=>{let{activeIndex:o}=t,s=(0,r.isCreateDocumentVersionEvent)(e)&&e.parentId&&f.has(e.parentId),a=o===x.length-1;return s?(0,l.jsx)(uF,{animate:{opacity:1},initial:{opacity:0},transition:{duration:.2,delay:.2},children:(0,l.jsx)(eg.Flex,{align:"center",justify:"center",style:{height:57},children:(0,l.jsx)(eg.Spinner,{})})}):(0,l.jsxs)(uF,{paddingBottom:1,paddingRight:1,animate:"animate",exit:"exit",initial:"initial",variants:"parentId"in e?uA:void 0,paddingLeft:((0,r.isEditDocumentVersionEvent)(e)||(0,r.isCreateDocumentVersionEvent)(e))&&e.parentId&&!a?4:1,children:[(0,l.jsx)(uk,{event:e,isSelected:e.id===i,onSelect:y,optionsMenu:j(e)}),a&&n&&(0,l.jsx)(r.LoadingBlock,{})]},e.timestamp)},[f,i,y,j,x.length,n]);(0,o.useEffect)(()=>p(!0),[]);let S=x.findIndex(e=>e.id===i);return(0,l.jsx)(rP,{$visible:!S||c,"data-ui":"timeline",children:x.length>0?(0,l.jsx)(rR,{direction:"column",$maxHeight:u,id:"timeline-list-wrapper",children:(0,l.jsx)(r.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:m("timeline.list.aria-label"),autoFocus:"list",initialIndex:S,initialScrollAlign:"center",itemHeight:57,items:x,onEndReached:s,onEndReachedIndexOffset:20,overscan:5,renderItem:w,wrapAround:!1})}):(0,l.jsxs)(eg.Stack,{padding:3,space:3,children:[(0,l.jsx)(eg.Text,{size:1,weight:"medium",children:m("timeline.error.no-document-history-title")}),(0,l.jsx)(eg.Text,{muted:!0,size:1,children:m("timeline.error.no-document-history-description")})]})})};uL.displayName="EventsTimeline";let uV=(0,eb.styled)(f.Popover)(is()),uz={timestamp:{dateStyle:"medium",timeStyle:"short"}};function uO(e){let{event:t,events:n,mode:i,placement:s}=e,{setTimelineRange:a}=lx(),[u,c]=(0,o.useState)(!1),[p,m]=(0,o.useState)(null),[h,g]=(0,o.useState)(null),v=(0,ef.useToast)(),{nextCursor:x,loading:b,error:y,findRangeForRevision:j,findRangeForSince:w,loadMoreEvents:S,expandEvent:C}=(0,r.useEvents)(),{t:_}=(0,r.useTranslation)("studio"),I=(0,o.useCallback)(()=>{c(!0)},[]),T=(0,o.useCallback)(()=>{c(!1)},[]),R=(0,o.useCallback)(e=>{u&&("Escape"===e.key||"Tab"===e.key)&&(T(),null==p||p.focus())},[p,T,u]);(0,eg.useGlobalKeyDown)(R),(0,eg.useClickOutsideEvent)(u&&T,()=>[p,h]);let P=(0,o.useCallback)(e=>{try{if((0,r.isDeleteDocumentVersionEvent)(e)||(0,r.isDeleteDocumentGroupEvent)(e)||(0,r.isUnpublishDocumentEvent)(e)||(0,r.isScheduleDocumentVersionEvent)(e)||(0,r.isUnscheduleDocumentVersionEvent)(e))return void console.error("Event is not selectable");let[t,n]=j(null==e?void 0:e.id);a(t,n),T()}catch(e){v.push({closable:!0,description:e.message,status:"error",title:_("timeline.error.unable-to-load-revision")})}},[_,v,a,j,T]),E=(0,o.useCallback)(e=>{try{let[t,n]=w(e.id);a(t,n),T()}catch(e){v.push({closable:!0,description:e.message,status:"error",title:_("timeline.error.unable-to-load-revision")})}},[w,a,v,_,T]),k=(0,o.useCallback)(()=>{!b&&x&&S()},[b,S,x]),D=(0,o.useMemo)(()=>y?(0,l.jsx)(rG,{}):(0,l.jsx)(uL,{events:n,fetchEventChildren:C,hasMoreEvents:!!x,selectedEventId:null==t?void 0:t.id,onLoadMore:k,onSelect:"rev"===i?P:E}),[y,i,C,n,x,null==t?void 0:t.id,k,E,P]),M=t?_(r.TIMELINE_ITEM_I18N_KEY_MAPPING[t.documentVariantType][t.type],{context:"timestamp",timestamp:new Date(t.timestamp),formatParams:uz}):_("timeline.latest-revision"),F=t?_(r.TIMELINE_ITEM_I18N_KEY_MAPPING[t.documentVariantType][t.type],{context:"timestamp",timestamp:new Date(t.timestamp),formatParams:uz}):n.length>0?_("timeline.since-version-missing"):_("timeline.no-previous-events"),A="rev"===i?M:F,L=(0,o.useMemo)(()=>({"timeline-menu":h}),[h]);return(0,l.jsx)(eg.PortalProvider,{__unstable_elements:L,children:(0,l.jsx)(uV,{"data-testid":"timeline-menu",constrainSize:!0,content:u&&D,"data-ui":"versionMenu",open:u,placement:s,matchReferenceWidth:!0,portal:!0,ref:g,children:(0,l.jsx)(eg.Flex,{width:"fill",children:(0,l.jsx)(f.Button,{"data-testid":u?"timeline-menu-close-button":"timeline-menu-open-button",disabled:b||!n.length,mode:"ghost",onClick:u?T:I,ref:m,selected:u,width:"fill",tooltipProps:null,justify:"space-between",style:{maxWidth:"100%"},iconRight:d.ChevronDownIcon,text:b?_("timeline.loading-history"):A})})})})}let uB=(0,eb.styled)(r.ScrollContainer)(ia()),uH=(0,eb.styled)(eg.Box)(iu()),uN=(0,eb.styled)(eg.Flex)(id()),uU={diff:null,loading:!0,error:null},uG=()=>{var e,t;let n,i,o,s,u,d,c,p,m,h,g,f=(0,eh.c)(31),{documentId:v,schemaType:x,editState:y,displayed:j}=lx(),{selectedPerspective:w,selectedPerspectiveName:S,selectedReleaseId:C}=(0,r.usePerspective)(),{t:_}=(0,r.useTranslation)(b);f[0]!==j||f[1]!==(null==y?void 0:y.published)?(n=(0,ey.diffInput)((0,ey.wrap)(null!=(t=null==y?void 0:y.published)?t:{},{author:""}),(0,ey.wrap)(null!=j?j:{},{author:""})),f[0]=j,f[1]=null==y?void 0:y.published,f[2]=n):n=f[2];let I=n;return(!C||(null==y?void 0:y.version))&&("drafts"!==w||(null==y?void 0:y.draft))&&"published"!==S&&(null==j?void 0:j._rev)?(f[3]!==_?(i=_("events.compare-with-published.title"),f[3]=_,f[4]=i):i=f[4],f[5]!==i?(o=(0,l.jsx)(eg.Text,{size:1,weight:"medium",children:i}),f[5]=i,f[6]=o):o=f[6],f[7]!==w?(s=(0,r.isReleaseDocument)(w)?null==(e=w.metadata)?void 0:e.title:"draft",f[7]=w,f[8]=s):s=f[8],f[9]!==s?(u={version:s},f[9]=s,f[10]=u):u=f[10],f[11]!==_||f[12]!==u?(d=(0,l.jsx)(eg.Text,{size:1,muted:!0,children:(0,l.jsx)(r.Translate,{i18nKey:"events.compare-with-published.description",t:_,values:u})}),f[11]=_,f[12]=u,f[13]=d):d=f[13],f[14]!==o||f[15]!==d?(c=(0,l.jsx)(eg.Card,{borderBottom:!0,paddingBottom:3,children:(0,l.jsxs)(eg.Stack,{space:3,paddingTop:1,children:[o,d]})}),f[14]=o,f[15]=d,f[16]=c):c=f[16],f[17]!==j||f[18]!==v||f[19]!==I||f[20]!==x?(p={documentId:v,schemaType:x,rootDiff:I,isComparingCurrent:!0,FieldWrapper:uY,value:j,showFromValue:!0},f[17]=j,f[18]=v,f[19]=I,f[20]=x,f[21]=p):p=f[21],f[22]!==I||f[23]!==x?(m=(0,l.jsx)(eg.Box,{paddingY:1,children:(0,l.jsx)(r.ChangeList,{diff:I,schemaType:x})}),f[22]=I,f[23]=x,f[24]=m):m=f[24],f[25]!==p||f[26]!==m?(h=(0,l.jsx)(a.DocumentChangeContext.Provider,{value:p,children:m}),f[25]=p,f[26]=m,f[27]=h):h=f[27],f[28]!==c||f[29]!==h?(g=(0,l.jsxs)(eg.Stack,{space:2,marginBottom:3,children:[c,h]}),f[28]=c,f[29]=h,f[30]=g):g=f[30],g):null};function uW(e){let{showChanges:t}=e,{documentId:n,schemaType:i,timelineError:s,value:a,formState:u}=lx(),[d,c]=(0,o.useState)(null),{events:p,revision:m,sinceRevision:h,getChangesList:g}=(0,r.useEvents)(),f=!(null==m?void 0:m.revisionId),v=(0,o.useMemo)(()=>g(),[g]),{diff:x,loading:b,error:y}=(0,eS.useObservable)(v,uU),{t:j}=(0,r.useTranslation)("studio"),w=(0,o.useMemo)(()=>({documentId:n,schemaType:i,FieldWrapper:e=>e.path.length>0?(0,l.jsx)(r.ChangeFieldWrapper,{...e}):e.children,rootDiff:x,isComparingCurrent:f&&!(null==u?void 0:u.readOnly),value:a,showFromValue:!0}),[x,n,f,null==u?void 0:u.readOnly,i,a]),[S,C]=(0,o.useMemo)(()=>p?[p.find(e=>e.id===(null==h?void 0:h.revisionId))||null,p.find(e=>e.id===(null==m?void 0:m.revisionId))||p[0]]:[null,null],[p,null==m?void 0:m.revisionId,null==h?void 0:h.revisionId]),_=(0,o.useMemo)(()=>C?p.slice(p.indexOf(C)+1).map(e=>"parentId"in C&&"parentId"in e&&e.parentId===C.parentId||"parentId"in e&&C.id===e.parentId?{...e,parentId:void 0}:e):p.slice(1),[p,C]);return p.length?(0,l.jsxs)(eg.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[(0,l.jsxs)(eg.Box,{padding:3,style:{position:"relative"},children:[(0,l.jsxs)(uH,{paddingX:2,paddingBottom:2,children:[(0,l.jsx)(eg.Text,{size:1,muted:!0,children:j("changes.inspector.from-label")}),(0,l.jsx)(uO,{event:S||null,events:_,mode:"since",placement:"bottom-start"}),(0,l.jsx)(eg.Text,{size:1,muted:!0,children:j("changes.inspector.to-label")}),(0,l.jsx)(uO,{event:C||null,events:p,mode:"rev",placement:"bottom-end"})]}),b&&(0,l.jsx)(ej.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,l.jsxs)(uN,{justify:"center",align:"center",gap:2,children:[(0,l.jsx)(eg.Text,{muted:!0,size:0,children:j("changes.loading-changes")}),(0,l.jsx)(eg.Spinner,{size:0})]})})]}),(0,l.jsx)(eg.Card,{flex:1,paddingX:2,paddingY:2,children:(0,l.jsx)(eg.BoundaryElementProvider,{element:d,children:(0,l.jsx)(uB,{"data-ui":"Scroller",ref:c,children:(0,l.jsx)(eg.Box,{flex:1,paddingX:3,height:"fill",children:t&&(0,l.jsx)(uq,{documentContext:w,error:s||y,loading:(null==m?void 0:m.loading)||(null==h?void 0:h.loading)||!1,schemaType:i,sameRevisionSelected:(null==S?void 0:S.id)===(null==C?void 0:C.id),sinceEvent:S})})})})})]}):(0,l.jsx)(eg.Box,{paddingX:2,children:(0,l.jsxs)(eg.Stack,{padding:3,space:3,children:[(0,l.jsx)(eg.Text,{size:1,weight:"medium",children:j("timeline.error.no-document-history-title")}),(0,l.jsx)(eg.Text,{muted:!0,size:1,children:j("timeline.error.no-document-history-description")})]})})}function uq(e){let t,n,i=(0,eh.c)(15),{error:o,documentContext:s,loading:u,schemaType:d,sameRevisionSelected:c,sinceEvent:p}=e;if(o){let e,t,n;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(uG,{}),i[0]=e):e=i[0],i[1]!==o||i[2]!==(null==p?void 0:p.type)?(t=(null==p?void 0:p.type)!=="historyCleared"&&(0,l.jsx)(r.ChangesError,{error:o}),i[1]=o,i[2]=null==p?void 0:p.type,i[3]=t):t=i[3],i[4]!==t?(n=(0,l.jsxs)(l.Fragment,{children:[e,t]}),i[4]=t,i[5]=n):n=i[5],n}if(u){let e;return i[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(r.LoadingBlock,{showText:!0}),i[6]=e):e=i[6],e}if(c){let e;return i[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(uK,{}),i[7]=e):e=i[7],e}if(!s.rootDiff){let e;return i[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,l.jsx)(ej.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,l.jsx)(r.NoChanges,{})}),i[8]=e):e=i[8],e}return i[9]!==s.rootDiff||i[10]!==d?(t=(0,l.jsx)(eg.Box,{paddingY:1,children:(0,l.jsx)(r.ChangeList,{diff:s.rootDiff,schemaType:d})}),i[9]=s.rootDiff,i[10]=d,i[11]=t):t=i[11],i[12]!==s||i[13]!==t?(n=(0,l.jsx)(a.DocumentChangeContext.Provider,{value:s,children:t}),i[12]=s,i[13]=t,i[14]=n):n=i[14],n}function uK(){let e,t,n,i,o,s,a,u=(0,eh.c)(12),{t:d}=(0,r.useTranslation)("");return u[0]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:1},t={opacity:0},n={delay:.2,duration:.2},u[0]=e,u[1]=t,u[2]=n):(e=u[0],t=u[1],n=u[2]),u[3]!==d?(i=d("changes.same-revision-selected-title"),u[3]=d,u[4]=i):i=u[4],u[5]!==i?(o=(0,l.jsx)(eg.Text,{size:1,weight:"medium",as:"h3",children:i}),u[5]=i,u[6]=o):o=u[6],u[7]!==d?(s=(0,l.jsx)(eg.Text,{as:"p",size:1,muted:!0,children:(0,l.jsx)(r.Translate,{i18nKey:"changes.same-revision-selected-description",t:d})}),u[7]=d,u[8]=s):s=u[8],u[9]!==o||u[10]!==s?(a=(0,l.jsx)(ej.motion.div,{animate:e,initial:t,transition:n,children:(0,l.jsxs)(eg.Stack,{space:3,paddingTop:2,children:[o,s]})}),u[9]=o,u[10]=s,u[11]=a):a=u[11],a}function uY(e){return e.children}let uX=(0,eb.styled)(r.ScrollContainer)(ic());function uQ(e){var t;let{showList:n}=e,[i,s]=(0,o.useState)(null),[a,u]=(0,o.useState)(0),{setTimelineRange:d}=lx(),c=(0,o.useCallback)(e=>{!a&&e&&(u(e.clientHeight?e.clientHeight-1:0),s(e))},[a]),{events:p,nextCursor:m,loading:h,error:g,revision:f,loadMoreEvents:v,findRangeForRevision:x,expandEvent:b}=(0,r.useEvents)(),{t:y}=(0,r.useTranslation)("studio"),j=(0,ef.useToast)(),w=(0,o.useCallback)(e=>{try{if((0,r.isDeleteDocumentVersionEvent)(e)||(0,r.isDeleteDocumentGroupEvent)(e)||(0,r.isUnpublishDocumentEvent)(e)||(0,r.isScheduleDocumentVersionEvent)(e)||(0,r.isUnscheduleDocumentVersionEvent)(e))return void console.error("Event is not selectable");let[t,n]=x(e.id);d(t,n)}catch(e){j.push({closable:!0,description:e.message,status:"error",title:y("timeline.error.unable-to-load-revision")})}},[y,j,d,x]),S=h&&!p.length;return(0,l.jsx)(eg.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,l.jsx)(eg.Card,{flex:1,padding:2,paddingTop:0,children:g?(0,l.jsx)(rG,{}):(0,l.jsx)(eg.BoundaryElementProvider,{element:i,children:(0,l.jsxs)(uX,{"data-ui":"Scroller",ref:c,children:[a&&n&&!S?(0,l.jsx)(uL,{events:p,fetchEventChildren:b,hasMoreEvents:!!m,selectedEventId:(null==f?void 0:f.revisionId)||(null==(t=p[0])?void 0:t.id),onLoadMore:v,onSelect:w,listMaxHeight:"".concat(a,"px")}):null,h&&(0,l.jsx)(r.LoadingBlock,{})]})})})})}let u$=(0,eb.styled)(r.ScrollContainer)(ip());function uJ(e){let{showList:t}=e,{timelineError:n,setTimelineRange:i,timelineStore:s}=lx(),{selectedReleaseId:a}=(0,r.usePerspective)(),[u,d]=(0,o.useState)(null),[c,p]=(0,o.useState)(0),m=(0,o.useCallback)(e=>{(null==e?void 0:e.clientHeight)&&(p(e.clientHeight-1),d(e))},[]),h=(0,r.useTimelineSelector)(s,e=>e.chunks),g=(0,r.useTimelineSelector)(s,e=>e.realRevChunk),f=(0,r.useTimelineSelector)(s,e=>e.hasMoreChunks),v=(0,r.useTimelineSelector)(s,e=>e.isLoading),{t:x}=(0,r.useTranslation)("studio"),b=(0,ef.useToast)(),y=(0,o.useCallback)(e=>{try{let[t,n]=(null==s?void 0:s.findRangeForRev(e))||[null,null];i(t,n)}catch(e){b.push({closable:!0,description:e.message,status:"error",title:x("timeline.error.unable-to-load-revision")})}},[i,x,s,b]),j=(0,o.useCallback)(()=>{v||null==s||s.loadMore()},[v,s]);return(0,l.jsx)(eg.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,l.jsx)(eg.Card,{flex:1,padding:2,paddingTop:0,children:n||a?(0,l.jsx)(rG,{versionError:!!a}):(0,l.jsx)(eg.BoundaryElementProvider,{element:u,children:(0,l.jsx)(u$,{"data-ui":"Scroller",ref:m,children:c&&t?(0,l.jsx)(rU,{chunks:h,hasMoreChunks:f,lastChunk:g,onLoadMore:j,onSelect:y,listMaxHeight:"".concat(c,"px")}):null})})})})}let uZ=(0,eb.styled)(eg.Flex)(im()),u0=["history","review"],u1={error:d.ErrorOutlineIcon,warning:d.WarningOutlineIcon,info:d.InfoOutlineIcon},u2={error:"critical",warning:"caution",info:"primary"};function u3(e){let t,n,i,r,s=(0,eh.c)(17),{marker:a,onOpen:u,schemaType:d,value:c}=e;s[0]!==a.path||s[1]!==u?(t=()=>u(a.path),s[0]=a.path,s[1]=u,s[2]=t):t=s[2];let p=t,[m,h]=(0,o.useState)(null),g=u1[a.level];return s[3]!==m?(n=m&&(0,l.jsx)(eg.Card,{padding:3,radius:2,tone:"critical",children:(0,l.jsx)(eg.Text,{size:1,children:m.error.message})}),s[3]=m,s[4]=n):n=s[4],s[5]!==g||s[6]!==m||s[7]!==p||s[8]!==a.level||s[9]!==a.message||s[10]!==a.path||s[11]!==d||s[12]!==c?(i=!m&&(0,l.jsx)(eg.Card,{__unstable_focusRing:!0,as:"button",onClick:p,padding:3,radius:2,tone:u2[a.level],children:(0,l.jsxs)(eg.Flex,{align:"flex-start",gap:3,children:[(0,l.jsx)(eg.Box,{flex:"none",children:(0,l.jsx)(eg.Text,{size:1,children:(0,l.jsx)(g,{})})}),(0,l.jsxs)(eg.Stack,{flex:1,space:2,children:[(0,l.jsx)(u4,{path:a.path,schemaType:d,value:c}),(0,l.jsx)(eg.Text,{muted:!0,size:1,children:a.message})]})]})}),s[5]=g,s[6]=m,s[7]=p,s[8]=a.level,s[9]=a.message,s[10]=a.path,s[11]=d,s[12]=c,s[13]=i):i=s[13],s[14]!==n||s[15]!==i?(r=(0,l.jsxs)(f.ErrorBoundary,{onCatch:h,children:[n,i]}),s[14]=n,s[15]=i,s[16]=r):r=s[16],r}function u4(e){let{path:t,schemaType:n,value:i}=e,s=(0,o.useMemo)(()=>{try{return function(e){let{path:t,schemaType:n,value:i}=e,l=[],o=n,s=i;for(let e of t){if("string"==typeof e){if(!(0,r.isRecord)(s)&&void 0!==s)throw Error("Parent value is not an object, cannot get path segment: .".concat(e));if("object"!==o.jsonType)throw Error("Parent type is not an object schema type, cannot get path segment: .".concat(e));s=null==s?void 0:s[e];let t=o.fields.find(t=>t.name===e);if(!t)return l.push({name:e}),l;o=t.type,l.push(o);continue}if("number"==typeof e){if(!(0,r.isArray)(s)&&void 0!==s)throw Error("Parent value is not an array, cannot get path segment: [".concat(e,"]"));if("array"!==o.jsonType)throw Error("Parent type is not an array schema type, cannot get path segment: [".concat(e,"]"));s=null==s?void 0:s[e];let t=o.of.find(e=>"string"==typeof s?"string"===e.jsonType:"number"==typeof s?"number"===e.jsonType:"boolean"==typeof s?"boolean"===e.jsonType:!!(0,r.isRecord)(s)&&e.name===(null==s?void 0:s._type));if(!t)throw Error("Item type not found: [".concat(e,"]"));o=t,l.push(o);continue}if((0,r.isRecord)(e)&&e._key){if(typeof s>"u")return l;if(!(0,r.isArray)(s))throw Error("Parent value is not an array, cannot get path segment: [_key == ".concat(e,"]"));if("array"!==o.jsonType)throw Error("Parent type is not an array schema type, cannot get path segment: .".concat(e));if(typeof(s=(null!=s?s:[]).find(t=>(0,r.isRecord)(t)&&t._key===e._key))>"u")return l;if(!(0,r.isRecord)(s))throw Error("Array item not found: [_key == ".concat(e._key,"]"));let t=o.of.find(e=>(0,r.isRecord)(s)&&e.name===(null==s?void 0:s._type));if(!t)throw Error("Array item type not found: .".concat(null==s?void 0:s._type));o=t,l.push(o);continue}throw Error("Invalid path segment: ".concat(JSON.stringify(e)))}return l}({path:t,schemaType:n,value:i})}catch(e){console.error(e)}return null},[t,n,i]);return(null==s?void 0:s.length)?(0,l.jsx)(eg.Text,{size:1,children:s.map((e,t)=>(0,l.jsxs)(o.Fragment,{children:[t>0&&(0,l.jsx)("span",{style:{color:"var(--card-muted-fg-color)",opacity:.5},children:" / "}),(0,l.jsx)("span",{style:{fontWeight:500},children:e.title||e.name})]},t))}):null}let u5={},u6=eC.route.create("/",[eC.route.intents("/intent"),eC.route.create("/edit/:type/:editDocumentId",[eC.route.create({path:"/:params",transform:{params:{toState:function(e){try{return JSON.parse(decodeURIComponent(e))}catch(e){return console.warn("Failed to parse JSON parameters"),{}}},toPath:function(e){return JSON.stringify(e)}}}})]),eC.route.create({path:"/:panes",children:[eC.route.create("/:action",eC.route.create("/:legacyEditDocumentId"))],transform:{panes:{toState:function(e){var t;return -1!==(t=decodeURIComponent(e)).indexOf(",{")?function(e){let t=[],n=e;for(;n.length;){let[e,i,l]=n.match(u8)||[];if(!e){n=n.slice(1);continue}let o=l&&function(e){try{return JSON.parse(e)}catch(e){console.warn("Failed to parse parameters: ".concat(e.message));return}}(l);t.push({id:i,payload:o}),n=n.slice(e.length)}return[t]}(t):t.split(";").map(e=>{let[t,...n]=e.split("|").map(e=>{let[t,...n]=e.split(","),i={id:t,params:u5,payload:void 0};return n.reduce((e,t)=>{if(/^[a-z0-9]+=[^=]+/i.test(t)){let n=t.slice(0,t.indexOf("=")),i=t.slice(n.length+1);e.params={...e.params,[decodeURIComponent(n)]:decodeURIComponent(i)}}else/^[A-Za-z0-9\-_]+(?:={0,2})$/.test(t)?e.payload=function(e){try{return e?(0,eC.decodeJsonParams)(e):void 0}catch(e){console.warn("Failed to parse parameters: ".concat(e.message));return}}(t):console.warn("Unknown pane segment: %s - skipping",t);return e},i)});return[t,...n.map(e=>({...t,...e,id:e.id||t.id,params:{...(0,e_.default)(t.params,u7),...e.params},payload:e.payload||t.payload}))]}).filter(e=>e.length>0)},toPath:function(e){return(e||[]).map(e=>e.map(de).join("|")).map(encodeURIComponent).join(";")}}}})]),u8=/^([.a-z0-9_-]+),?({.*?})?(?:(;|$))/i,u7=["view","since","rev","inspect","comment"],u9=Boolean;function de(e,t,n){let{payload:i,params:l={},id:o}=e,[r]=n,s=e===r,a=0!==t&&o===r.id,u=typeof i>"u"?void 0:(0,eC.encodeJsonParams)(i),d=Object.entries(l).filter(e=>{var t;let[n,i]=e;return!!i&&(!!s||!(i===(null==(t=r.params)?void 0:t[n])&&!u7.includes(n)))}).map(e=>{let[t,n]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n))});return[a?"":o].concat([d.length>0&&d,u].filter(u9).flat()).join(",")||","}let dt=[rt,ri,o2,o4,o0,o5],dn=[uv],di=[{name:"sanity/structure/validation",component:function(e){let t,n,i,o,s,a,u,d=(0,eh.c)(23),{onClose:c}=e,{onFocus:p,onPathOpen:m,schemaType:h,validation:g,value:f,editState:v}=lx(),{t:x}=(0,r.useTranslation)("validation");d[0]!==p||d[1]!==m?(t=e=>{m(e),p(e)},d[0]=p,d[1]=m,d[2]=t):t=d[2];let b=t;d[3]!==v?(n=v&&v.version&&(0,r.isGoingToUnpublish)(v.version),d[3]=v,d[4]=n):n=d[4];let y=n;return d[5]!==x?(i=x("panel.close-button-aria-label"),d[5]=x,d[6]=i):i=d[6],d[7]!==x?(o=x("panel.title"),d[7]=x,d[8]=o):o=d[8],d[9]!==c||d[10]!==i||d[11]!==o?(s=(0,l.jsx)(lF,{as:"header",closeButtonLabel:i,flex:"none",onClose:c,title:o}),d[9]=c,d[10]=i,d[11]=o,d[12]=s):s=d[12],d[13]!==b||d[14]!==y||d[15]!==h||d[16]!==x||d[17]!==g||d[18]!==f?(a=(0,l.jsx)(eg.Card,{flex:1,overflow:"auto",padding:3,children:y?(0,l.jsx)(eg.Box,{padding:2,children:(0,l.jsx)(eg.Text,{muted:!0,size:1,children:x("panel.unpublish-message")})}):(0,l.jsxs)(l.Fragment,{children:[0===g.length&&(0,l.jsx)(eg.Box,{padding:2,children:(0,l.jsx)(eg.Text,{muted:!0,size:1,children:x("panel.no-errors-message")})}),g.length>0&&(0,l.jsx)(eg.Stack,{space:2,children:g.map((e,t)=>(0,l.jsx)(u3,{marker:e,onOpen:b,schemaType:h,value:f},t))})]})}),d[13]=b,d[14]=y,d[15]=h,d[16]=x,d[17]=g,d[18]=f,d[19]=a):a=d[19],d[20]!==s||d[21]!==a?(u=(0,l.jsxs)(eg.Flex,{direction:"column",height:"fill",overflow:"hidden",children:[s,a]}),d[20]=s,d[21]=a,d[22]=u):u=d[22],u},useMenuItem:function(e){let{documentId:t,documentType:n}=e,{t:i}=(0,r.useTranslation)("validation"),{selectedReleaseId:l}=(0,r.usePerspective)(),{validation:s}=(0,r.useValidationStatus)(t,n,l),{value:a}=lx(),u=(0,o.useMemo)(()=>s.map(e=>({level:e.level,message:e.message,path:e.path})),[s]),c=u.some(ev.isValidationError),p=u.some(ev.isValidationWarning),m=(0,r.isGoingToUnpublish)(a),h=(0,o.useMemo)(()=>c?d.ErrorOutlineIcon:p?d.WarningOutlineIcon:d.CheckmarkCircleIcon,[c,p]),g=(0,o.useMemo)(()=>c?"critical":p?"caution":"positive",[c,p]);return{hidden:0===u.length||m,icon:h,title:i("panel.title"),tone:g,showAsAction:!0}}},{name:lR,useMenuItem:()=>{let{features:e}=lC(),{t}=(0,r.useTranslation)();return{hidden:!e.reviewChanges,icon:d.RestoreIcon,title:t("changes.title")}},component:function(e){var t,n,i,s,a,u,c,p,m,h,g,v;let x,y,j,w,S,C,_,I,T,R,P,E,k,D,M,F,A,L,V,z,O,B,H,N,U,G,W,q=(0,eh.c)(72),{params:K,setParams:Y}=lj(),X=(0,r.useSource)(),[Q,$]=(0,o.useState)(null),{t:J}=(0,r.useTranslation)(b),Z=(null==K?void 0:K.inspect)===lR,{selectedPerspective:ee}=(0,r.usePerspective)();q[0]!==K?(x=(W=null==K?void 0:K.changesInspectorTab)&&u0.includes(W)?K.changesInspectorTab:u0[0],q[0]=K,q[1]=x):x=q[1];let et=x;q[2]!==K||q[3]!==Y?(y=e=>Y({...K,changesInspectorTab:e,since:"history"===e||null==K?void 0:K.since}),q[2]=K,q[3]=Y,q[4]=y):y=q[4];let en=y;q[5]!==ee||q[6]!==J?(j=(0,r.isReleaseDocument)(ee)?ee.metadata.title:J("drafts"===ee?"compare-versions.status.draft":"compare-versions.status.published"),q[5]=ee,q[6]=J,q[7]=j):j=q[7];let ei=j,el=Z?"":void 0;q[8]!==J?(w=J("changes.tab.history"),q[8]=J,q[9]=w):w=q[9],q[10]!==en?(S=()=>en("history"),q[10]=en,q[11]=S):S=q[11];let eo="history"===et;q[12]!==w||q[13]!==S||q[14]!==eo?(C=(0,l.jsx)(f.Tab,{"aria-controls":"history-panel",id:"history-tab",label:w,onClick:S,selected:eo}),q[12]=w,q[13]=S,q[14]=eo,q[15]=C):C=q[15],q[16]!==J?(_=J("changes.tab.review-changes"),q[16]=J,q[17]=_):_=q[17],q[18]!==en?(I=()=>en("review"),q[18]=en,q[19]=I):I=q[19];let er="review"===et;q[20]!==er||q[21]!==_||q[22]!==I?(T=(0,l.jsx)(f.Tab,{"aria-controls":"review-changes-panel",id:"changes-tab",label:_,onClick:I,selected:er}),q[20]=er,q[21]=_,q[22]=I,q[23]=T):T=q[23],q[24]!==T||q[25]!==C?(R=(0,l.jsxs)(eg.TabList,{space:1,flex:1,children:[C,T]}),q[24]=T,q[25]=C,q[26]=R):R=q[26],q[27]!==J?(P=J("changes.action.close-label"),q[27]=J,q[28]=P):P=q[28];let es=e.onClose;q[29]!==J?(E=J("document-inspector.close-button.tooltip"),q[29]=J,q[30]=E):E=q[30],q[31]!==E?(k={content:E},q[31]=E,q[32]=k):k=q[32],q[33]!==e.onClose||q[34]!==P||q[35]!==k?(D=(0,l.jsx)(f.Button,{"aria-label":P,icon:d.CloseIcon,mode:"bleed",onClick:es,tooltipProps:k}),q[33]=e.onClose,q[34]=P,q[35]=k,q[36]=D):D=q[36],q[37]!==R||q[38]!==D?(M=(0,l.jsx)(eg.Card,{paddingBottom:1,children:(0,l.jsxs)(eg.Flex,{align:"center",padding:3,gap:2,children:[R,D]})}),q[37]=R,q[38]=D,q[39]=M):M=q[39],q[40]!==J?(F=(0,l.jsx)(eg.Box,{flex:1,padding:1,children:(0,l.jsx)(eg.Text,{size:1,children:(0,l.jsx)(r.Translate,{t:J,i18nKey:"changes.banner.tooltip"})})}),q[40]=J,q[41]=F):F=q[41],q[42]===Symbol.for("react.memo_cache_sentinel")?(A=(0,l.jsx)(eg.Text,{size:0,muted:!0,children:(0,l.jsx)(d.InfoOutlineIcon,{fontSize:1})}),q[42]=A):A=q[42],q[43]!==Q||q[44]!==F?(L=(0,l.jsx)(f.Tooltip,{portal:!0,placement:"bottom-end",boundaryElement:Q,content:F,children:A}),q[43]=Q,q[44]=F,q[45]=L):L=q[45],q[46]!==ei?(V={perspective:ei},q[46]=ei,q[47]=V):V=q[47],q[48]!==J||q[49]!==V?(z=(0,l.jsx)(eg.Text,{size:0,muted:!0,children:(0,l.jsx)(r.Translate,{t:J,values:V,i18nKey:"changes.banner.description"})}),q[48]=J,q[49]=V,q[50]=z):z=q[50],q[51]!==L||q[52]!==z?(O=(0,l.jsx)(eg.Card,{padding:2,marginBottom:3,marginX:3,tone:"neutral",border:!0,radius:3,children:(0,l.jsxs)(eg.Flex,{gap:2,align:"flex-start",children:[L,z]})}),q[51]=L,q[52]=z,q[53]=O):O=q[53];let ea="history"!==et;q[54]!==et||q[55]!==(null==(n=X.beta)||null==(t=n.eventsAPI)?void 0:t.documents)?(B=(null==(s=X.beta)||null==(i=s.eventsAPI)?void 0:i.documents)?(0,l.jsx)(uQ,{showList:"history"===et}):(0,l.jsx)(uJ,{showList:"history"===et}),q[54]=et,q[55]=null==(u=X.beta)||null==(a=u.eventsAPI)?void 0:a.documents,q[56]=B):B=q[56],q[57]!==ea||q[58]!==B?(H=(0,l.jsx)(ef.TabPanel,{"aria-labelledby":"history-tab",height:"fill",hidden:ea,id:"history-panel",children:B}),q[57]=ea,q[58]=B,q[59]=H):H=q[59];let eu="review"!==et;return q[60]!==et||q[61]!==(null==(p=X.beta)||null==(c=p.eventsAPI)?void 0:c.documents)?(N=(null==(h=X.beta)||null==(m=h.eventsAPI)?void 0:m.documents)?(0,l.jsx)(l.Fragment,{children:"review"===et?(0,l.jsx)(uW,{showChanges:"review"===et}):null}):(0,l.jsx)(uS,{showChanges:"review"===et}),q[60]=et,q[61]=null==(v=X.beta)||null==(g=v.eventsAPI)?void 0:g.documents,q[62]=N):N=q[62],q[63]!==eu||q[64]!==N?(U=(0,l.jsx)(ef.TabPanel,{"aria-labelledby":"review-tab",hidden:eu,id:"review-panel",height:"fill",children:N}),q[63]=eu,q[64]=N,q[65]=U):U=q[65],q[66]!==M||q[67]!==O||q[68]!==H||q[69]!==el||q[70]!==U?(G=(0,l.jsxs)(uZ,{direction:"column",padding:0,height:"fill","data-ready":el,ref:$,children:[M,O,H,U]}),q[66]=M,q[67]=O,q[68]=H,q[69]=el,q[70]=U,q[71]=G):G=q[71],G},onClose:e=>{let{params:t}=e;return{params:{...t,since:void 0,rev:void 0,changesInspectorTab:void 0,historyVersion:void 0}}},onOpen:e=>{let{params:t}=e;return{params:{...t,since:"@lastPublished"}}}}],dl=(0,r.definePlugin)(t=>{let n=(null==t?void 0:t.icon)||d.MasterDetailIcon;return{name:"sanity/structure",document:{actions:e=>Array.from(new Set([...e,...dt])),badges:e=>Array.from(new Set([...e,...dn])),inspectors:e=>Array.from(new Set([...e,...di]))},tools:[{name:(null==t?void 0:t.name)||"structure",title:(null==t?void 0:t.title)||"Structure",icon:n,component:(0,o.lazy)(()=>e.A(471767)),canHandleIntent:(e,t)=>"create"===e?function(e){return"type"in e&&(!("template"in e)||{template:!0})}(t):"edit"===e&&function(e){return"id"in e&&(!("mode"in e)||{mode:"structure"===e.mode})}(t),getIntentState:uy,controlsDocumentTitle:!0,options:t,router:u6,__internalApplicationType:"sanity/structure"}],i18n:{bundles:[y]}}});var dr=Object.freeze({__proto__:null,default:sN}),ds=Object.freeze({__proto__:null,default:uf})}]);