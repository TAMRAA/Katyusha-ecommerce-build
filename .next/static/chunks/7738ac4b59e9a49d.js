(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,488242,e=>{"use strict";e.s(["default",()=>a],488242);var t=e.i(881283),r=e.i(95187),o=(0,r.createServerReference)("7fdb9730c0dc8d5b63135028e2e413023c2657a6cf",r.callServer,void 0,r.findSourceMapURL,"setPerspectiveCookie"),i=e.i(636536),c=e.i(618566),n=e.i(271645),l=e.i(462576),s=e.i(570148);function a(e){let{projectId:r,dataset:a,draftModeEnabled:d,draftModePerspective:u}=e,p=(0,c.useRouter)();(0,n.useEffect)(()=>{(0,s.setComlinkClientConfig)(r,a)},[a,r]);let f=(0,l.useEffectEvent)((e,t)=>{d&&e!==u&&o(e).then(()=>{t.aborted||p.refresh()}).catch(e=>console.error("Failed to set the preview perspective cookie",e))});return(0,n.useEffect)(()=>{let e,r=(0,t.createNode)({name:"loaders",connectTo:"presentation"},(0,t.createNodeMachine)().provide({actors:(0,i.createCompatibilityActors)()}));r.on("loader/perspective",t=>{null==e||e.abort(),e=new AbortController,f(t.perspective,e.signal)});let o=r.start();return(0,s.setComlink)(r),()=>{o()}},[]),null}a.displayName="PresentationComlink"}]);