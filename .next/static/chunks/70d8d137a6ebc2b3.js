(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,488242,e=>{"use strict";e.s(["default",()=>s],488242);var t=e.i(881283),r=e.i(95187),o=(0,r.createServerReference)("7fdea29212f5ad326be9bb71926138a9a318e9bdf2",r.callServer,void 0,r.findSourceMapURL,"setPerspectiveCookie"),i=e.i(636536),n=e.i(618566),a=e.i(271645),c=e.i(462576),l=e.i(570148);function s(e){let{projectId:r,dataset:s,draftModeEnabled:d,draftModePerspective:u}=e,f=(0,n.useRouter)();(0,a.useEffect)(()=>{(0,l.setComlinkClientConfig)(r,s)},[s,r]);let p=(0,c.useEffectEvent)((e,t)=>{d&&e!==u&&o(e).then(()=>{t.aborted||f.refresh()}).catch(e=>console.error("Failed to set the preview perspective cookie",e))});return(0,a.useEffect)(()=>{let e,r=(0,t.createNode)({name:"loaders",connectTo:"presentation"},(0,t.createNodeMachine)().provide({actors:(0,i.createCompatibilityActors)()}));r.on("loader/perspective",t=>{null==e||e.abort(),e=new AbortController,p(t.perspective,e.signal)});let o=r.start();return(0,l.setComlink)(r),()=>{o()}},[]),null}s.displayName="PresentationComlink"}]);