(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,165411,e=>{"use strict";e.s(["default",()=>w,"turboChargeResultIfSourceMap",()=>A],165411);var t=e.i(843476),r=e.i(881933),n=e.i(216024);function s(e){return"https://www.sanity.io/help/"+e}let a=e=>(function(e){let t=!1,r;return function(){for(var n=arguments.length,s=Array(n),a=0;a<n;a++)s[a]=arguments[a];return t||(r=e(...s),t=!0),r}})(function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return console.warn(e.join(" "),...r)});a(["Because you set `withCredentials` to true, we will override your `useCdn`","setting to be false since (cookie-based) credentials are never set on the CDN"]),a(["Since you haven't set a value for `useCdn`, we will deliver content using our","global, edge-cached API-CDN. If you wish to have content delivered faster, set","`useCdn: false` to use the Live API. Note: You may incur higher costs using the live API."]),a(["The Sanity client is configured with the `perspective` set to `drafts` or `previewDrafts`, which doesn't support the API-CDN.","The Live API will be used instead. Set `useCdn: false` in your configuration to hide this warning."]),a(["The `previewDrafts` perspective has been renamed to  `drafts` and will be removed in a future API version"]),a(["You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.","See ".concat(s("js-client-browser-token")," for more information and how to hide this warning.")]),a(["You have configured Sanity client to use a token, but also provided `withCredentials: true`.","This is no longer supported - only token will be used - remove `withCredentials: true`."]),a(["Using the Sanity client without specifying an API version is deprecated.","See ".concat(s("js-client-api-version"))]),a(["The default export of @sanity/client has been deprecated. Use the named export `createClient` instead."]),a(["You have called `createVersion()` with a defined `document`. The recommended approach is to provide a `baseId` and `releaseId` instead."]);var i=e.i(881283),u=e.i(636536),o=e.i(629801),l=e.i(271645),c=e.i(537152),d=e.i(462576),p=e.i(926005),f=e.i(908035);function h(e,t){switch(t.type){case"message":return{...e,messages:[...e.messages,t]};case"reconnect":case"restart":return{...e,messages:[],resets:e.resets+1};case"welcome":return e;default:throw Error("Unknown event: ".concat(t.type),{cause:t})}}let v={messages:[],resets:0},y=(e,t)=>{let{previousValue:r}=t;if("string"==typeof r){if("number"==typeof e)return"".concat(e);if(Array.isArray(e)){if(0===e.length)return"";if(e.some(e=>"object"==typeof e&&(0,f.isPortableTextBlock)(e)))return(0,f.toPlainText)(e)}}return e};function b(e,t){switch(t.type){case"query-listen":return function(e,t){var r,n,s;let{payload:a}=t,i=(r=a.perspective,n=a.query,s=a.params,"".concat(r,":").concat(n,":").concat(JSON.stringify(s))),u={query:a.query,params:a.params,perspective:a.perspective},l=new Map(e.heartbeats);l.set(i,{receivedAt:Date.now(),heartbeat:a.heartbeat});let c=e.queries;return e.queries.has(i)&&(0,o.default)(e.queries.get(i),u)||(c=new Map(e.queries)).set(i,u),{heartbeats:l,queries:c}}(e,t);case"gc":if(e.queries.size<1)return e;let r=Date.now();if(!Array.from(e.heartbeats.values()).some(e=>!1!==e.heartbeat&&r>e.receivedAt+e.heartbeat))return e;let n=new Map,s=new Map;for(let[t,a]of e.heartbeats.entries())!1!==a.heartbeat&&r>a.receivedAt+a.heartbeat||(n.set(t,a),s.set(t,e.queries.get(t)));return{...e,queries:s,heartbeats:n};default:throw Error("Unknown action: ".concat(t.type),{cause:t})}}let g={queries:new Map,heartbeats:new Map};function w(e){let n,s,a,o,d,f,y,w,I=(0,r.c)(28),{controller:A,perspective:E,onLoadersConnection:S,onDocumentsOnPage:T}=e,[C,P]=(0,l.useState)(),[q,R]=function(){let e,t,n,s=(0,r.c)(4),[a,i]=(0,l.useReducer)(b,g);s[0]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{let e=setInterval(()=>i({type:"gc"}),p.LOADER_QUERY_GC_INTERVAL);return()=>clearInterval(e)},t=[],s[0]=e,s[1]=t):(e=s[0],t=s[1]),(0,l.useEffect)(e,t);let u=(0,l.useDeferredValue)(a.queries);return s[2]!==u?(n=[u,i],s[2]=u,s[3]=n):n=s[3],n}(),D=(0,c.useProjectId)(),M=(0,c.useDataset)();I[0]!==A||I[1]!==M||I[2]!==R||I[3]!==T||I[4]!==S||I[5]!==D?(n=()=>{if(A){let e=A.createChannel({name:"presentation",connectTo:"loaders",heartbeat:!0},(0,i.createConnectionMachine)().provide({actors:(0,u.createCompatibilityActors)()}));return P(e),e.onStatus(S),e.on("loader/documents",e=>{e.projectId===D&&e.dataset===M&&T("loaders",e.perspective,e.documents)}),e.on("loader/query-listen",e=>{if(e.projectId===D&&e.dataset===M){var t;if("number"==typeof e.heartbeat&&e.heartbeat<p.MIN_LOADER_QUERY_LISTEN_HEARTBEAT_INTERVAL)throw Error("Loader query listen heartbeat interval must be at least ".concat(p.MIN_LOADER_QUERY_LISTEN_HEARTBEAT_INTERVAL,"ms"));R({type:"query-listen",payload:{perspective:e.perspective,query:e.query,params:e.params,heartbeat:null!=(t=e.heartbeat)&&t}})}}),e.start()}return m},s=[A,M,R,T,S,D],I[0]=A,I[1]=M,I[2]=R,I[3]=T,I[4]=S,I[5]=D,I[6]=n,I[7]=s):(n=I[6],s=I[7]),(0,l.useEffect)(n,s),I[8]!==E?(a=(0,c.isReleasePerspective)(E)?c.RELEASES_STUDIO_CLIENT_OPTIONS:{apiVersion:p.API_VERSION},I[8]=E,I[9]=a):a=I[9];let N=(0,c.useClient)(a);I[10]!==N?(o=N.withConfig({resultSourceMap:"withKeyArraySelector"}),I[10]=N,I[11]=o):o=I[11];let L=o;I[12]!==E||I[13]!==C||I[14]!==M||I[15]!==D?(d=()=>{C&&C.post("loader/perspective",{projectId:D,dataset:M,perspective:E})},f=[C,E,D,M],I[12]=E,I[13]=C,I[14]=M,I[15]=D,I[16]=d,I[17]=f):(d=I[16],f=I[17]),(0,l.useEffect)(d,f);let j=(0,l.useDeferredValue)(e.liveDocument),O=function(e){let t,n,s=(0,r.c)(3),[a,i]=(0,l.useReducer)(h,v),[u,o]=(0,l.useState)(null);if(null!==u)throw u;return s[0]!==e.live?(t=()=>{let t=e.live.events({includeDrafts:!0,tag:"presentation-loader"}).subscribe({next:i,error:e=>o(e instanceof Error?e:Error("Unexpected error in useLiveEvents",{cause:e}))});return()=>t.unsubscribe()},n=[e.live],s[0]=e.live,s[1]=t,s[2]=n):(t=s[1],n=s[2]),(0,l.useEffect)(t,n),(0,l.useDeferredValue)(a)}(L);return I[18]!==q?(y=[...q.entries()],I[18]=q,I[19]=y):y=I[19],I[20]!==L||I[21]!==C||I[22]!==M||I[23]!==j||I[24]!==O||I[25]!==D||I[26]!==y?(w=(0,t.jsx)(t.Fragment,{children:y.map(e=>{let[r,n]=e,{query:s,params:a,perspective:i}=n;return(0,t.jsx)(_,{projectId:D,dataset:M,perspective:i,query:s,params:a,comlink:C,client:L,liveDocument:j,liveEventsMessages:O.messages},"".concat(O.resets,":").concat(r))})}),I[20]=L,I[21]=C,I[22]=M,I[23]=j,I[24]=O,I[25]=D,I[26]=y,I[27]=w):w=I[27],w}function m(){}let _=(0,l.memo)(function(e){let t,n,s,a=(0,r.c)(20),{projectId:i,dataset:u,perspective:c,query:p,client:f,liveDocument:h,params:v,comlink:y,liveEventsMessages:b}=e,{result:g,resultSourceMap:w,syncTags:m}=function(e){let t,n,s,a,i,u=(0,r.c)(30),{liveDocument:c,client:d,query:p,params:f,perspective:h,liveEventsMessages:v}=e,[y,b]=(0,l.useState)(null),[g,w]=(0,l.useState)(null),[m,_]=(0,l.useState)(void 0);u[0]!==v?(t=()=>new Set(v.map(I)),u[0]=v,u[1]=t):t=u[1];let[E]=(0,l.useState)(t);if(u[2]!==v||u[3]!==E||u[4]!==m){let e,t;u[6]!==E?(e=e=>!E.has(e.id),u[6]=E,u[7]=e):e=u[7];let r=v.filter(e);u[8]!==m?(t=e=>e.tags.some(e=>null==m?void 0:m.includes(e)),u[8]=m,u[9]=t):t=u[9],n=r.findLast(t),u[2]=v,u[3]=E,u[4]=m,u[5]=n}else n=u[5];let S=null==n?void 0:n.id,[T,C]=(0,l.useState)(null);if(T)throw T;u[10]!==d||u[11]!==S||u[12]!==f||u[13]!==h||u[14]!==p?(s=()=>{let e=new AbortController;return d.fetch(p,f,{lastLiveEventId:S,tag:"presentation-loader",signal:e.signal,perspective:h,filterResponse:!1,returnQuery:!1}).then(e=>{(0,l.startTransition)(()=>{b(t=>(0,o.default)(t,e.result)?t:e.result),w(t=>(0,o.default)(t,e.resultSourceMap)?t:e.resultSourceMap),_(t=>(0,o.default)(t,e.syncTags)?t:e.syncTags)})}).catch(e=>{("object"!=typeof e||(null==e?void 0:e.name)!=="AbortError")&&C(e)}),()=>{e.abort()}},a=[d,S,f,h,p],u[10]=d,u[11]=S,u[12]=f,u[13]=h,u[14]=p,u[15]=s,u[16]=a):(s=u[15],a=u[16]),(0,l.useEffect)(s,a);e:{let e;if(c&&g){let e,t;u[17]!==c||u[18]!==h||u[19]!==y||u[20]!==g?(e=A(c,y,h,g),u[17]=c,u[18]=h,u[19]=y,u[20]=g,u[21]=e):e=u[21],u[22]!==g||u[23]!==m||u[24]!==e?(t={result:e,resultSourceMap:g,syncTags:m},u[22]=g,u[23]=m,u[24]=e,u[25]=t):t=u[25],i=t;break e}u[26]!==y||u[27]!==g||u[28]!==m?(e={result:y,resultSourceMap:g,syncTags:m},u[26]=y,u[27]=g,u[28]=m,u[29]=e):e=u[29],i=e}return i}({client:f,liveDocument:h,params:v,perspective:c,query:p,liveEventsMessages:b})||{};a[0]!==u||a[1]!==i?(t=(e,t,r,n,s,a,o)=>{null==e||e.post("loader/query-change",{projectId:i,dataset:u,perspective:t,query:r,params:n,result:s,resultSourceMap:a,tags:o})},a[0]=u,a[1]=i,a[2]=t):t=a[2];let _=(0,d.useEffectEvent)(t);return a[3]!==y||a[4]!==_||a[5]!==v||a[6]!==c||a[7]!==p||a[8]!==g||a[9]!==w||a[10]!==m?(n=()=>{w&&_(y,c,p,v,g,w,m)},a[3]=y,a[4]=_,a[5]=v,a[6]=c,a[7]=p,a[8]=g,a[9]=w,a[10]=m,a[11]=n):n=a[11],a[12]!==y||a[13]!==v||a[14]!==c||a[15]!==p||a[16]!==g||a[17]!==w||a[18]!==m?(s=[y,v,c,p,g,w,m],a[12]=y,a[13]=v,a[14]=c,a[15]=p,a[16]=g,a[17]=w,a[18]=m,a[19]=s):s=a[19],(0,l.useEffect)(n,s),null});function I(e){return e.id}function A(e,t,r,s){if("raw"===r)throw Error("turboChargeResultIfSourceMap does not support raw perspective");return function(e,t,r,s,a){var i,u;if(!t)return e;let o=function(e,t){let r=function(e){if(function(e){if(Array.isArray(e)&&e.length>1&&e.includes("raw"))throw TypeError('Invalid API perspective value: "raw". The raw-perspective can not be combined with other perspectives')}(e),Array.isArray(e))return e.includes("published")?e:[...e,"published"];switch(e){case"previewDrafts":case"drafts":return["drafts","published"];default:return["published"]}}(t);return function(t){for(let s of r){let r=null;if(s.startsWith("r")&&(r=e({...t,_id:(0,n.getVersionId)(t._id,s)})),"drafts"===s&&(r=e({...t,_id:(0,n.getDraftId)(t._id)})),"published"===s&&(r=e({...t,_id:(0,n.getPublishedId)(t._id)})),r)return{...r,_id:(0,n.getPublishedId)(r._id),_originalId:r._id}}return null}}(r,a),l=(null==(u=t.documents)||null==(i=u.map)?void 0:i.call(u,o))||[];return(0,n.walkMap)(JSON.parse(JSON.stringify(e)),(e,r)=>{let a=(0,n.resolveMapping)(r,t);if(!a)return e;let{mapping:i,pathSuffix:u}=a;if("value"!==i.type||"documentValue"!==i.source.type)return e;let o=t.documents[i.source.document],c=t.paths[i.source.path];if(o){let t=(0,n.parseJsonPath)(c+u),r=(0,n.toString)(t),a=l[i.source.document];if(!a)return e;let d=a?(0,n.get)(a,r,e):e;return e===d?e:s(d,{cachedDocument:a,previousValue:e,sourceDocument:o,sourcePath:t})}return e})}(t,s,t=>!t._projectId&&(null==e?void 0:e._id)&&(0,n.getPublishedId)(e._id)===(0,n.getPublishedId)(t._id)?"string"==typeof e._id&&"string"==typeof t._type?e:{...e,_id:e._id||t._id,_type:e._type||t._type}:null,y,r)}_.displayName="Memo(QuerySubscription)"}]);