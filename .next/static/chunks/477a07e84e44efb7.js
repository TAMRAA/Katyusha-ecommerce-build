(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,145587,t=>{"use strict";t.s(["encodeIntoResult",()=>c,"stegaEncodeSourceMap",()=>m,"stegaEncodeSourceMap$1",()=>_]);var e=t.i(247984);let n=/_key\s*==\s*['"](.*)['"]/;function r(t){if(!Array.isArray(t))throw Error("Path is not an array");return t.reduce((t,e,r)=>{let o=typeof e;if("number"===o)return"".concat(t,"[").concat(e,"]");if("string"===o)return"".concat(t).concat(0===r?"":".").concat(e);if(("string"==typeof e?n.test(e.trim()):"object"==typeof e&&"_key"in e)&&e._key)return"".concat(t,'[_key=="').concat(e._key,'"]');if(Array.isArray(e)){let[n,r]=e;return"".concat(t,"[").concat(n,":").concat(r,"]")}throw Error("Unsupported path segment `".concat(JSON.stringify(e),"`"))},"")}let o={"\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","'":"\\'","\\":"\\\\"},i={"\\f":"\f","\\n":"\n","\\r":"\r","\\t":"	","\\'":"'","\\\\":"\\"};function l(t){let e,n=[],r=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;for(;null!==(e=r.exec(t));){if(void 0!==e[1]){let t=e[1].replace(/\\(\\|f|n|r|t|')/g,t=>i[t]);n.push(t);continue}if(void 0!==e[2]){n.push(parseInt(e[2],10));continue}if(void 0!==e[3]){let t=e[3].replace(/\\(\\')/g,t=>i[t]);n.push({_key:t,_index:-1});continue}}return n}function a(t){return t.map(t=>{if("string"==typeof t||"number"==typeof t)return t;if(""!==t._key)return{_key:t._key};if(-1!==t._index)return t._index;throw Error("invalid segment:".concat(JSON.stringify(t)))})}function c(t,n,r){return function t(n,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(null!==n&&Array.isArray(n))return n.map((n,i)=>{if((0,e.isRecord)(n)){let e=n._key;if("string"==typeof e)return t(n,r,o.concat({_key:e,_index:i}))}return t(n,r,o.concat(i))});if((0,e.isRecord)(n)){if("block"===n._type||"span"===n._type){let e={...n};return"block"===n._type?e.children=t(n.children,r,o.concat("children")):"span"===n._type&&(e.text=t(n.text,r,o.concat("text"))),e}return Object.fromEntries(Object.entries(n).map(e=>{let[n,i]=e;return[n,t(i,r,o.concat(n))]}))}return r(n,o)}(t,(t,e)=>{if("string"!=typeof t)return t;let i=function(t,e){var n;if(!(null==e?void 0:e.mappings))return;let r=(n=t.map(t=>{if("string"==typeof t||"number"==typeof t)return t;if(-1!==t._index)return t._index;throw Error("invalid segment:".concat(JSON.stringify(t)))}),"$".concat(n.map(t=>"string"==typeof t?"['".concat(t.replace(/[\f\n\r\t'\\]/g,t=>o[t]),"']"):"number"==typeof t?"[".concat(t,"]"):""!==t._key?"[?(@._key=='".concat(t._key.replace(/['\\]/g,t=>o[t]),"')]"):"[".concat(t._index,"]")).join("")));if(void 0!==e.mappings[r])return{mapping:e.mappings[r],matchedPath:r,pathSuffix:""};let i=Object.entries(e.mappings).filter(t=>{let[e]=t;return r.startsWith(e)}).sort((t,e)=>{let[n]=t,[r]=e;return r.length-n.length});if(0==i.length)return;let[l,a]=i[0],c=r.substring(l.length);return{mapping:a,matchedPath:l,pathSuffix:c}}(e,n);if(!i)return t;let{mapping:a,matchedPath:c}=i;if("value"!==a.type||"documentValue"!==a.source.type)return t;let s=n.documents[a.source.document],u=n.paths[a.source.path],p=l(c);return r({sourcePath:l(u).concat(e.slice(p.length)),sourceDocument:s,resultPath:e,value:t})})}let s="".concat("drafts").concat("."),u="".concat("versions").concat(".");function p(t){return t.startsWith(s)}function f(t){return t.startsWith(u)}let d=t=>{let{sourcePath:e,resultPath:n,value:r}=t;if(function(t){return!!/^\d{4}-\d{2}-\d{2}/.test(t)&&!!Date.parse(t)}(r)||function(t){try{let{protocol:e}=new URL(t,t.startsWith("/")?"https://acme.com":void 0);return g.has(e)||e.startsWith("web+")}catch(t){return!1}}(r))return!1;let o=e.at(-1);return!("slug"===e.at(-2)&&"current"===o||"string"==typeof o&&(o.startsWith("_")||o.endsWith("Id"))||e.some(t=>"meta"===t||"metadata"===t||"openGraph"===t||"seo"===t)||y(e)||y(n)||"string"==typeof o&&h.has(o))},h=new Set(["color","colour","currency","email","format","gid","hex","href","hsl","hsla","icon","id","index","key","language","layout","link","linkAction","locale","lqip","page","path","ref","rgb","rgba","route","secret","slug","status","tag","template","theme","type","textTheme","unit","url","username","variant","website"]),g=new Set(["app:","data:","discord:","file:","ftp:","ftps:","geo:","http:","https:","imap:","javascript:","magnet:","mailto:","maps:","ms-excel:","ms-powerpoint:","ms-word:","slack:","sms:","spotify:","steam:","teams:","tel:","vscode:","zoom:"]);function y(t){return t.some(t=>"string"==typeof t&&null!==t.match(/type/i))}function m(t,o,i){var l,u,h,g,y,m,_,b,v;let{filter:k,logger:w,enabled:x}=i;if(!x){let e="config.enabled must be true, don't call this function otherwise";throw null==w||null==(u=w.error)||u.call(w,"[@sanity/client]: ".concat(e),{result:t,resultSourceMap:o,config:i}),TypeError(e)}if(!o)return null==w||null==(l=w.error)||l.call(w,"[@sanity/client]: Missing Content Source Map from response body",{result:t,resultSourceMap:o,config:i}),t;if(!i.studioUrl){let e="config.studioUrl must be defined";throw null==w||null==(h=w.error)||h.call(w,"[@sanity/client]: ".concat(e),{result:t,resultSourceMap:o,config:i}),TypeError(e)}let E=[],U=[],j=c(t,o,t=>{var n;let o,{sourcePath:l,sourceDocument:c,resultPath:u,value:h}=t;if(("function"==typeof k?k({sourcePath:l,resultPath:u,filterDefault:d,sourceDocument:c,value:h}):d({sourcePath:l,resultPath:u,value:h}))===!1)return w&&U.push({path:r(a(l)),value:"".concat(h.slice(0,20)).concat(h.length>20?"...":""),length:h.length}),h;w&&E.push({path:r(a(l)),value:"".concat(h.slice(0,20)).concat(h.length>20?"...":""),length:h.length});let{baseUrl:g,workspace:y,tool:m}=("/"!==(o="string"==typeof(n="function"==typeof i.studioUrl?i.studioUrl(c):i.studioUrl)?n:n.baseUrl)&&(o=o.replace(/\/$/,"")),"string"==typeof n?{baseUrl:o}:{...n,baseUrl:o});if(!g)return h;let{_id:_,_type:b,_projectId:v,_dataset:x}=c;return(0,e.C)(h,{origin:"sanity.io",href:function(t){let{baseUrl:e,workspace:n="default",tool:o="default",id:i,type:l,path:c,projectId:u,dataset:d}=t;if(!e)throw Error("baseUrl is required");if(!c)throw Error("path is required");if(!i)throw Error("id is required");if("/"!==e&&e.endsWith("/"))throw Error("baseUrl must not end with a slash");let h="default"===n?void 0:n,g="default"===o?void 0:o,y=f(i)?i.split(".").slice(2).join("."):p(i)?i.slice(s.length):i,m=Array.isArray(c)?r(a(c)):c,_=new URLSearchParams({baseUrl:e,id:y,type:l,path:m});if(h&&_.set("workspace",h),g&&_.set("tool",g),u&&_.set("projectId",u),d&&_.set("dataset",d),p(i)||f(i)){if(f(i)){let t=function(t){if(!f(t))return;let[e,n,...r]=t.split(".");return n}(i);_.set("perspective",t)}}else _.set("perspective","published");let b=["/"===e?"":e];h&&b.push(h);let v=["mode=presentation","id=".concat(y),"type=".concat(l),"path=".concat(encodeURIComponent(m))];return g&&v.push("tool=".concat(g)),b.push("intent","edit","".concat(v.join(";"),"?").concat(_)),b.join("/")}({baseUrl:g,workspace:y,tool:m,id:_,type:b,path:l,...!i.omitCrossDatasetReferenceData&&{dataset:x,projectId:v}})},!1)});if(w){let t=U.length,e=E.length;if((t||e)&&(null==(g=(null==w?void 0:w.groupCollapsed)||w.log)||g("[@sanity/client]: Encoding source map into result"),null==(y=w.log)||y.call(w,"[@sanity/client]: Paths encoded: ".concat(E.length,", skipped: ").concat(U.length))),E.length>0&&(null==w||null==(m=w.log)||m.call(w,"[@sanity/client]: Table of encoded paths"),null==(_=(null==w?void 0:w.table)||w.log)||_(E)),U.length>0){let t=new Set;for(let{path:e}of U)t.add(e.replace(n,"0").replace(/\[\d+\]/g,"[]"));null==w||null==(v=w.log)||v.call(w,"[@sanity/client]: List of skipped paths",[...t.values()])}(t||e)&&(null==w||null==(b=w.groupEnd)||b.call(w))}return j}var _=Object.freeze({__proto__:null,stegaEncodeSourceMap:m})}]);